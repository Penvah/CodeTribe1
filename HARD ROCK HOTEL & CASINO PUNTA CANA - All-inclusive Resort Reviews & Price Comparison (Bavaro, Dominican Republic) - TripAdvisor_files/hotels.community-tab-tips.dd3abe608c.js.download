(window.$WP=window.$WP||[]).push({id:"@ta/hotels.community-tab-tips",d:["vendor-babel","vendor-react-libs","vendor-apollo-libs","ta-platform","ta-common","@ta/social.member-event","@ta/common.state-controller","@ta/social.skeletons","@ta/hotels.community-pagination-card","@ta/hotels.community-tab-common"],e:["./packages/hotels/community-tab-tips/community-tab-tips.jsx"],x:{"./packages/hotels/community-tab-common/fragments/MemberFields.fragment.gql":["a"],"./packages/hotels/community-tab-tips/community-tab-tips.jsx":["default"]},m:{"./packages/hotels/community-tab-common/fragments/MemberFields.fragment.gql":function(e,i,n){"use strict";var a={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PhotoSizesTabFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PhotoSize"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"width"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"height"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isHorizontal"},arguments:[],directives:[]}]}}],loc:{start:0,end:86}};a.loc.source={body:"a185bc5d5550"};var t=a,d={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"MemberFieldsTabFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MemberProfile"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"userId"},name:{kind:"Name",value:"id"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"static"},arguments:[]}]},{kind:"Field",name:{kind:"Name",value:"isMe"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isVerified"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isFollowing"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"username"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatar"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"photoSizes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PhotoSizesTabFragment"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"hometown"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"locationId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fallbackString"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"location"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"locationId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"additionalNames"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"long"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"contributionCounts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sumAllUgc"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"helpfulVote"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"route"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:471}};d.loc.source={body:"ca7d6b012deb"};var l={};d.definitions=d.definitions.concat(function r(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var i=e.name.value;return!l[i]&&(l[i]=!0,!0)})}(t.definitions)),i.a=d},"./packages/hotels/community-tab-tips/community-tab-tips.jsx":function(e,i,n){"use strict";n.r(i);var a=n("@babel/runtime/helpers/esm/objectSpread"),t=n.n(a),d=n("@babel/runtime/helpers/esm/classCallCheck"),l=n.n(d),r=n("@babel/runtime/helpers/esm/createClass"),m=n.n(r),o=n("@babel/runtime/helpers/esm/possibleConstructorReturn"),s=n.n(o),u=n("@babel/runtime/helpers/esm/getPrototypeOf"),c=n.n(u),k=n("@babel/runtime/helpers/esm/inherits"),v=n.n(k),b=n("@babel/runtime/helpers/esm/assertThisInitialized"),g=n.n(b),p=n("@babel/runtime/helpers/esm/defineProperty"),N=n.n(p),f=n("react"),F=n("react-redux"),S=n("react-apollo"),y=n("@ta/common.i18n"),h=n("@ta/styleguide.bubble-rating"),T=n("@ta/common.tracking"),I=n.n(T),C=n("@ta/common.is-visible"),V=n("@ta/social.member-event"),D=n("@ta/common.state-controller"),E=n("@ta/social.skeletons"),w=n("@ta/hotels.community-pagination-card"),j=n.n(w),M=n("@ta/hotels.community-tab-common"),P=n("./packages/hotels/community-tab-common/fragments/MemberFields.fragment.gql"),O={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"TipsTabQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"locationId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"loggedIn"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"loggedInUserId"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"currentMember"},name:{kind:"Name",value:"memberProfile"},arguments:[{kind:"Argument",name:{kind:"Name",value:"userId"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"loggedInUserId"}}}]}}],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"loggedIn"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MemberFieldsTabFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"locations"},arguments:[{kind:"Argument",name:{kind:"Name",value:"locationIds"},value:{kind:"ListValue",values:[{kind:"Variable",name:{kind:"Name",value:"locationId"}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"locationId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roomTipsCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roomTips"},arguments:[{kind:"Argument",name:{kind:"Name",value:"page"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"ObjectField",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"rating"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"publishedDate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userProfile"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MemberFieldsTabFragment"},directives:[]}]}}]}}]}}]}}],loc:{start:0,end:606}};O.loc.source={body:"4e6d1ce19dbc"};var R={};O.definitions=O.definitions.concat(function _(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var i=e.name.value;return!R[i]&&(R[i]=!0,!0)})}(P.a.definitions));var x=O,U={bubbleRating:"hotels-community-tab-tips-RoomTipsContent__bubbleRating--NFw5d",readFullReviewLink:"hotels-community-tab-tips-RoomTipsContent__readFullReviewLink--3qm29"},q=function(e){function i(){var e,n;l()(this,i);for(var a=arguments.length,d=new Array(a),r=0;r<a;r++)d[r]=arguments[r];return n=s()(this,(e=c()(i)).call.apply(e,[this].concat(d))),N()(g()(g()(n)),"renderTipCard",function(e,i,a){var d=n.props.isSelectedTab,l=e.id,r=e.text,m=e.rating,o=e.url,s=e.userProfile;return f.createElement(M.Card,{key:l},f.createElement(V.MemberEventOnObjectBlock,{objectEventType:"onRoomTip",object:t()({location:{name:i}},e),actor:s,member:a,isEmbedded:!1,renderMemberActions:d}),f.createElement("a",{href:o,className:U.bubbleRating,target:"_blank"},f.createElement(h.BubbleRating,{rating:m})),f.createElement("blockquote",{data:"tip_text"},'"',Object(y.unescaped)(r),'"'),f.createElement(T.ClickTracker,{module:"Tab Content",action:"read_review",context:"Read Review"},f.createElement("a",{href:o,className:U.readFullReviewLink,target:"_blank",data:"tip_link"},Object(y.localize)("read_full_review"))))}),n}return v()(i,e),m()(i,[{key:"shouldComponentUpdate",value:function e(i){return i.isSelectedTab}},{key:"render",value:function e(){var i=this,n=this.props,a=n.locationId,t=n.loggedInUserId;return f.createElement(C.HasBeenVisible,{onVisible:function e(){I()({module:"roomtips",action:"in_view",context:""})}},function(e){return f.createElement("div",{ref:e,"data-test-target":"tips-tab"},f.createElement(D.PaginationStateController,null,function(e){var n=e.offset,d=e.changePageOffset;return f.createElement(S.Query,{query:x,variables:{locationId:a,offset:n,limit:5,loggedInUserId:t,loggedIn:!!t},skip:!a||a<0,errorPolicy:"all"},function(e){var a=e.loading,t=e.data;if(a)return f.createElement(E.FeedLoadingSkeleton,{numSections:5});var l=function r(e,i){if(e||!(i&&i.locations&&i.locations[0]))return{roomTips:[],roomTipsCount:0,name:"",currentMember:void 0};var n=i.locations[0];return{roomTips:n.roomTips||[],roomTipsCount:n.roomTipsCount||0,name:n.name||"",currentMember:i.currentMember}}(a,t),m=l.name,o=l.roomTips,s=l.roomTipsCount,u=l.currentMember;return 0===s?null:f.createElement(f.Fragment,null,o.map(function(e){return i.renderTipCard(e,m,u)}),f.createElement(j.a,{offset:n,limit:5,total:s,module:"roomtips",onClick:function e(i){return d(i)}}))})}))})}}]),i}(f.Component);i.default=Object(F.connect)(function(e){return{locationId:e.page.detailId,geoId:e.page.geoId,loggedInUserId:e.auth.loggedInUserId}})(q)}}});
//# sourceMappingURL=hotels.community-tab-tips.dd3abe608c.js.map