(window.$WP=window.$WP||[]).push({id:"@ta/cross-sells.logic",d:["vendor-babel","vendor-react-libs","ta-platform","vendor-common","@ta/common.poller","@ta/cross-sells.types"],e:["./packages/cross-sells/logic/index.jsx"],x:{"./packages/cross-sells/logic/endpointUtil.jsx":["d","c","e","b","a"],"./packages/cross-sells/logic/index.jsx":["UiAssetLoader","ComparisonGridDataLoader","WaitForPageLocation","getUIAssets","CrossSellsDisplayStateManager","sponsoredListingClickHandler","LogClickInteraction","sponsoredListingImpressionHandler","gaRecordClickHandler","ShelfTimingTracker","getTitleForCrossSellType","getDefaultShelfTitle","getSeeAllUrlForCrossSellType"]},m:{"./node_modules/webpack/buildin/global.js":function(e,t){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(i=window)}e.exports=i},"./packages/cross-sells/logic/endpointUtil.jsx":function(e,t,i){"use strict";(function(e){i.d(t,"d",function(){return l}),i.d(t,"c",function(){return c}),i.d(t,"e",function(){return d}),i.d(t,"b",function(){return u}),i.d(t,"a",function(){return p});var n=i("@ta/common.logging"),a=i.n(n),s=i("lodash/get"),o=i.n(s),r=function e(t,i){var n=new Date;n.setDate(n.getDate()+t),i.push(n.getFullYear()),i.push(n.getMonth()+1),i.push(n.getDate())},l=function e(t,i){var n={detailId:i.featuredAccommodation,requestNumber:t.page.crossSells.requestNumber,configuration:i.configuration,requestCaller:i.requestCaller};return function e(t,i,n){var a=i.travelerInfo&&i.travelerInfo.hotels;if(a)t.stayDates=a.stayDates,t.guests=a.guests,t.paramSeqId=a.paramSeqId||0;else{var s=[];r(1,s),r(2,s),t.stayDates=s.join("_"),t.guests="1_1",t.paramSeqId=0}t.requestNumber>1&&(t.searchKey=o()(i,"page.crossSells.endpointResults.searchKey",null)),n.sponsoredListingsEnabled&&(1===t.requestNumber?t.sponsoredListingData={}:t.sponsoredListingData=o()(i,"page.crossSells.endpointResults.sponsoredListingData")),i.tracking&&i.tracking.uid&&(t.pageLoadUid=o()(i,"tracking.uid",null))}(n,t,i),n},c=function e(t,i){var n=new URLSearchParams;if(n.append("rn",String(t.requestNumber)),n.append("stayDates",t.stayDates),n.append("guestInfo",t.guests),n.append("csc",t.configuration),n.append("rc",t.requestCaller),t.sponsoredListingData){var s=Object.assign({},t.sponsoredListingData);delete s.debugData,n.append("sld",JSON.stringify(s))}t.requestNumber>i.length&&n.append("ifp",""),t.searchKey&&n.append("sk",t.searchKey),t.pageLoadUid&&n.append("puid",t.pageLoadUid),t.paramSeqId&&n.append("paramSeqId",String(t.paramSeqId));var o="/data/1.0/crosssellaccommodations/".concat(t.detailId,"?").concat(n.toString());return a.a.info("new url generated: ".concat(o)),o},d=function e(t){var i=t.accommodationsByType,n=t.pageLocations,a=t.isSearchComplete,s=t.sponsoredListingData,o=t.searchKey,r=n.reduce(function(e,t){return e[t.locationName]={crossSells:t.crossSellTypes.map(function(e){return i[e]}),locationName:t.locationName},e},{});return{pageLocations:n,locationMap:r,isSearchComplete:a,sponsoredListingData:s,searchKey:o}},u=function e(t,i){return"/data/1.0/crosssellaccommodations/".concat(t,"/uiAssets/").concat(i)},p=function t(i){window.__SP_DEBUG_EVENTS__=window.__SP_DEBUG_EVENTS__||[],i.forEach(function(e){return window.__SP_DEBUG_EVENTS__.push(e)}),e.require("ta/Core/TA.FireEvent").fireEvent("sp_debug_refresh")}}).call(this,i("./node_modules/webpack/buildin/global.js"))},"./packages/cross-sells/logic/index.jsx":function(e,t,i){"use strict";i.r(t);var n=i("@babel/runtime/helpers/esm/classCallCheck"),a=i.n(n),s=i("@babel/runtime/helpers/esm/createClass"),o=i.n(s),r=i("@babel/runtime/helpers/esm/possibleConstructorReturn"),l=i.n(r),c=i("@babel/runtime/helpers/esm/getPrototypeOf"),d=i.n(c),u=i("@babel/runtime/helpers/esm/inherits"),p=i.n(u),m=i("react"),g=i("@ta/common.api"),_=function(e){function t(e){var i;return a()(this,t),i=l()(this,d()(t).call(this,e)),e.data,i}return p()(t,e),o()(t,[{key:"render",value:function e(){return null}}]),t}(m.Component),h=Object(g.bind)({data:function e(t,i){var n=i("/data/1.0/crosssellaccommodations/comparisongridcrosssellsuiassets/");return function(e){var t=n.get(),i=t.data;return t.loading||!i?{}:{data:i}}},actions:{}})(_),f=i("@ta/common.state"),v=i("./packages/cross-sells/logic/endpointUtil.jsx"),S=function(e){function t(e){var i;return a()(this,t),(i=l()(this,d()(t).call(this,e))).props.updateCrossSellEndpointData(i.props.data),i}return p()(t,e),o()(t,[{key:"render",value:function e(){return null}}]),t}(m.Component),k=Object(g.bind)({data:function e(t,i){var n=i("/data/1.0/crosssellaccommodations/comparisongridcrosssells");return function(e){var t=n.get(),i=t.data;return t.loading||!i?{loading:!0}:e.page.crossSells.updatingResults?{updatingXSellResults:!0}:{data:Object(v.e)(i)}}},actions:{updateCrossSellEndpointData:f.actions.page.hotelreview.setCrossSellsEndpointResults}})(S),y=i("@babel/runtime/helpers/esm/objectSpread"),b=i.n(y),D=i("react-redux"),N=i("@ta/common.features"),C=i("@ta/common.logging"),T=i.n(C),I=i("@babel/runtime/helpers/esm/assertThisInitialized"),O=i.n(I),L=i("@babel/runtime/helpers/esm/defineProperty"),w=i.n(L),E=i("@ta/common.poller"),j=i("@babel/runtime/helpers/esm/objectWithoutProperties"),q=i.n(j),x=i("@ta/cross-sells.types"),A=function e(t,i){return{displayState:t,updateWithNewData:i}},H=function e(t,i,n,a){switch(t){case x.DisplayState.HIDDEN:return function e(t,i){return t?A(x.DisplayState.SHOWING,!0):i?A(x.DisplayState.HIDDEN,!1):A(x.DisplayState.LOADING,!0)}(i,n);case x.DisplayState.LOADING:return function e(t,i){return t?A(x.DisplayState.SHOWING,!0):i?A(x.DisplayState.HIDDEN,!0):A(x.DisplayState.LOADING,!1)}(i,n);default:return function e(t,i,n){return t?A(x.DisplayState.SHOWING,!0):i?A(x.DisplayState.HIDDEN,!0):1===n?A(x.DisplayState.LOADING,!0):A(x.DisplayState.SHOWING,!1)}(i,n,a)}},R=function e(t,i){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return t===x.DisplayState.SHOWING&&(i||n)?A(x.DisplayState.SHOWING,!1):A(x.DisplayState.HIDDEN,t!==x.DisplayState.HIDDEN)},P=function e(){var t=this;a()(this,e),w()(this,"displayStates",void 0),w()(this,"previousResults",void 0),w()(this,"shouldShowIncompleteResults",void 0),w()(this,"calculateDisplayStates",function(e,i){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=e.accommodationsByType,s=q()(e,["accommodationsByType"]),o={},r=Object.keys(a),l=0;l<r.length;l++){var c=r[l],d=a[c];t.displayStates[c]||(t.displayStates[c]=x.DisplayState.HIDDEN);var u=t.displayStates[c],p=d.accommodations.length>0,m=d.isOverallComplete,g=void 0;if(n){var _=t.shouldShowIncompleteResults[c];g=R(u,m,_)}else g=H(u,p,m,i);g.updateWithNewData&&(t.displayStates[c]=g.displayState);var h=b()({},d,g);o[c]=h}var f=b()({accommodationsByType:o},s);return t.previousResults=f,f}),w()(this,"calculateTimeoutStates",function(){return t.calculateDisplayStates(t.previousResults,0,!0)}),this.displayStates={},this.shouldShowIncompleteResults={n:!0,c:!0,m:!0}},W=[10,1e3,1e3,1e3,1e3,1500,1500,1500,2e3,2e3,2e3],U=function(e){function t(e){var i;return a()(this,t),i=l()(this,d()(t).call(this,e)),w()(O()(O()(i)),"displayManager",void 0),w()(O()(O()(i)),"pollingDelay",void 0),w()(O()(O()(i)),"pollingTimedOut",function(){T.a.info("Polling timed out! requests made: ".concat(i.props.urlData.requestNumber));var e=i.displayManager.calculateTimeoutStates(),t=Object(v.e)(e);i.props.updateCrossSellEndpointData(t)}),w()(O()(O()(i)),"timerContainer",new E.TimerContainer),i.displayManager=new P,i.pollingDelay=W,i}return p()(t,e),o()(t,[{key:"componentDidMount",value:function e(){this.props.skipOnLoadSearch||this.fetchCrossSellData()}},{key:"componentDidUpdate",value:function e(t){this.urlParamsChanged(t.urlData)&&!this.props.updatingXSellResults&&this.fetchCrossSellData()}},{key:"urlParamsChanged",value:function e(t){var i=this.props.urlData;return t.requestNumber!==i.requestNumber||t.stayDates!==i.stayDates||t.guests!==i.guests||t.detailId!==i.detailId||t.configuration!==i.configuration||t.requestCaller!==i.requestCaller}},{key:"fetchCrossSellData",value:function e(){var t=this,i=this.props.urlData;!function e(t){return!!(t.detailId&&t.stayDates&&t.guests)}(i)?T.a.debug("will not request from server. We do not expect to get any results for these params: ".concat(JSON.stringify(i))):function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4;return Promise.race([fetch(t,{method:"GET",header:{"Content-Type":"application/json"},credentials:"same-origin"}),new Promise(function(e,t){return setTimeout(function(){return t(new Error("timeout"))},i)})])}(Object(v.c)(i,this.pollingDelay)).then(function(e){if(e.ok||e.status>=200&&e.status<300)return e;var t="ResponseStatus: ".concat(e.status," Invalid results from server: ").concat(JSON.stringify(e));return 400===e.status&&(t="".concat("Will stop polling."," ").concat(t)),Promise.reject(new Error(t))}).then(function(e){return e.json()}).then(function(e){var i=t.displayManager.calculateDisplayStates(e,t.props.urlData.requestNumber);i.sponsoredListingData&&i.sponsoredListingData.debugData&&Object(v.a)(i.sponsoredListingData.debugData);var n=Object(v.e)(i);t.props.updateCrossSellEndpointData(n),n.isSearchComplete||t.triggerPoll()}).catch(function(e){var i;T.a.warn("something went wrong making the request. Will trigger another poll just in case... Error is: ".concat(e)),(null==e?void 0:null===(i=e.message)||void 0===i?void 0:i.startsWith("Will stop polling."))||t.triggerPoll()})}},{key:"triggerPoll",value:function e(){var t={poll:this.props.poll,pollingDelay:this.pollingDelay,requestNumber:this.props.urlData.requestNumber,loading:!1,complete:!1,timedOut:this.pollingTimedOut};T.a.debug("Poller info: ".concat(JSON.stringify(t))),Object(E.setTimer)(t,this.timerContainer)}},{key:"render",value:function e(){return null}}]),t}(m.Component),V=Object(D.connect)(function(e,t){return b()({},t,{urlData:Object(v.d)(e,t),updatingXSellResults:e.page.crossSells.updatingResults})},{poll:f.actions.page.hotelreview.crossSellsPoll,updateCrossSellEndpointData:f.actions.page.hotelreview.setCrossSellsEndpointResults})(U),F=function(e){function t(e){var i;a()(this,t),i=l()(this,d()(t).call(this,e));var n="locationPhotoDirectLink"===e.requestCaller,s=Object(N.featureIsEnabled)("t4b_hr_xsell_sponsored_slot_0_display")&&!n;return i.state={didWeLoadContainer:!1,sponsoredListingsEnabled:s,serverSideSponsoredHotelSelectionEnabled:s&&Object(N.featureIsEnabled)("hr_xsell_server_side_sponsored_hotel_selection")},i}return p()(t,e),o()(t,null,[{key:"getDerivedStateFromProps",value:function e(t,i){return!i.didWeLoadContainer&&t.didALocationRegister?(function e(t,i,n){t&&fetch(Object(v.b)(t,i),{method:"GET",header:{"Content-Type":"application/json"},credentials:"same-origin"}).then(function(e){if(e.ok)return e;throw T.a.debug("Error fetching UIAssets: ".concat(JSON.stringify(e))),new Error(e.statusText)}).then(function(e){return e.json()}).then(function(e){n(e)})}(t.featuredAccommodation,t.xsellConfig,t.setUIAssets),{didWeLoadContainer:!0}):null}}]),o()(t,[{key:"render",value:function e(){var t=null;if(this.props.didALocationRegister&&this.state.didWeLoadContainer){var i={configuration:this.props.xsellConfig,featuredAccommodation:this.props.featuredAccommodation,requestCaller:this.props.requestCaller?this.props.requestCaller:"hotelReview",sponsoredListingsEnabled:this.state.sponsoredListingsEnabled,serverSideSponsoredHotelSelectionEnabled:this.state.serverSideSponsoredHotelSelectionEnabled,skipOnLoadSearch:this.props.skipOnLoadSearch};t=m.createElement(V,i)}return t}}]),t}(m.Component),G=Object(D.connect)(function(e,t){return b()({},t,{didALocationRegister:!t.wait&&e.page.crossSells.atLeastOneLocationRegistered,featuredAccommodation:e.route.detail})},{setUIAssets:f.actions.page.hotelreview.setUIAssets})(F),M=i("lodash/get"),K=i.n(M),J=function e(){var t=Object(f.getStore)().getState();return K()(t,"page.crossSells.uiAssets")},B=i("js-cookie"),X=i.n(B),Y=i("@ta/common.tracking"),z=i.n(Y),$=function e(){return window.JS_SECURITY_TOKEN},Q=function e(t,i,n){fetch("/data/1.0/tap/recordEvent",{method:"POST",headers:new Headers({"content-type":"application/json","x-requested-by":$()}),credentials:"same-origin",body:JSON.stringify({eventType:n,requestGuid:t,externalId:i})}).then(function(e){return e.ok||T.a.error("Did not get an ok. got: ".concat(e.statusText)),e}).catch(function(e){T.a.error("Error sending TripAds click event: ".concat(e.message))})},Z=function e(){return window.JS_SECURITY_TOKEN},ee=function e(){var t=Object(f.getStore)().getState(),i=t.page,n=t.tracking;return{page_geo_id:i.geoId,request_num:i.crossSells?i.crossSells.requestNumber:0,request_uid:n.uid?n.uid:void 0}},te=function e(t,i,n,a){if(t){var s=t;T.a.debug("about to send user tracking log"),function e(t,i){Object(Y.trackEventWithContext)("action",i?"paid_backup_sponsored_listing_click":"dfp_sponsored_listing_click",t)}(function e(t,i,n,a){var s=ee();return b()({},s,{is_dynamic_listing:!1,placement_slot_name:t.placement_slot_name,slot_index:n,location_id:i,sponsored_type:t.sponsored_type,candidate_location_ids:t.candidate_location_ids,chosen_location_id:i,has_valid_candidate:!0,current_state:"location_shown",opportunity_uid:t.opportunity_uid,dfp_lineitem_id:t.dfp_lineitem_id,sl_line_item_id:t.sl_line_item_id,trip_ads_id:t.trip_ads_id,ik:t.impression_key,tt_placement:t.tt_placement,trip_ads_select_guid:t.trip_ads_select_request_guid,listing_key:a})}(s,i,n,a),s.is_backfill),T.a.debug("about to fire holistic tracking"),Object(Y.trackHolisticEvent)(Y.holisticEvents.HOTELS_SP_CLICK,function e(t,i,n){var a=Object(f.getStore)().getState();return{is_member:a.auth.isMember,device_type:a.meta.device.userAgentCategory?a.meta.device.userAgentCategory.toLowerCase():"",locationId:i,slot:t.placement_slot_name,trip_ads_select_guid:t.trip_ads_select_request_guid,listing_key:n}}(s,i,a)),T.a.debug("about to set cookie"),function e(t,i){var n=new Date;n.setTime(n.getTime()+1e4);var a={expires:n};X.a.set("sponsOppId",i,a),X.a.set("sponsLineItem",t,a)}(s.sl_line_item_id,s.opportunity_uid),T.a.debug("about to send click log"),function e(t){fetch("/SponsoredListingCommerce/1.0/click",{method:"POST",headers:new Headers({"content-type":"application/json","x-requested-by":Z()}),credentials:"same-origin",body:JSON.stringify(t)}).then(function(e){return e.ok||T.a.debug("Did not get an ok. got: ".concat(e.statusText)),e}).catch(function(e){T.a.error("Error sending commerce click: ".concat(e.message))})}(function e(t,i,n,a){var s=Object(f.getStore)().getState();return{area:t.placement_slot_name,click_type:"HR",dest:"Hotel_Review",from:s.route.page,listing_key:a,impression_key:t.impression_key,is_backfill:t.is_backfill,line_item_id:t.dfp_lineitem_id,sl_line_item_id:t.sl_line_item_id,trip_ads_id:t.trip_ads_id,location_id:i,slot:n,tt_placement:t.tt_placement}}(s,i,n,a)),s.trip_ads_select_request_guid&&(T.a.debug("about to send TripAds click event"),function e(t,i){Q(t,i,"CLICKED")}(s.trip_ads_select_request_guid,s.opportunity_uid))}},ie={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"LogClickInteraction"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uniqueId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"impressionKey"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"locationId"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"placementName"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pageLocation"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"logInteraction"},arguments:[{kind:"Argument",name:{kind:"Name",value:"interaction"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"uniqueId"},value:{kind:"Variable",name:{kind:"Name",value:"uniqueId"}}},{kind:"ObjectField",name:{kind:"Name",value:"hotelReviewServlet"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"listing"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"impressionKey"},value:{kind:"Variable",name:{kind:"Name",value:"impressionKey"}}},{kind:"ObjectField",name:{kind:"Name",value:"locationId"},value:{kind:"Variable",name:{kind:"Name",value:"locationId"}}},{kind:"ObjectField",name:{kind:"Name",value:"placementName"},value:{kind:"Variable",name:{kind:"Name",value:"placementName"}}},{kind:"ObjectField",name:{kind:"Name",value:"pageLocation"},value:{kind:"Variable",name:{kind:"Name",value:"pageLocation"}}}]}}]}}]}}],directives:[]}]}}],loc:{start:0,end:443}};ie.loc.source={body:"f0f6c06062cd"};var ne=ie,ae=function e(t,i){if(t.suppressedSponsoredLocationId){var n=Object(f.getStore)().getState().route.page,a={module:"sp_suppression_test|".concat(n),action:i,context:String(t.suppressedSponsoredLocationId)};z()(a)}},se=function e(t,i){if(i){var n=i,a=ee(),s=b()({},a,{is_dynamic_listing:!1,placement_slot_name:n.placement_slot_name,slot_index:t.indexInList,location_id:t.locationId,sponsored_type:n.sponsored_type,candidate_location_ids:n.candidate_location_ids,chosen_location_id:t.locationId,has_valid_candidate:!0,current_state:"location_shown",opportunity_uid:n.opportunity_uid,dfp_lineitem_id:n.dfp_lineitem_id,sl_line_item_id:n.sl_line_item_id,trip_ads_id:n.trip_ads_id,trip_ads_select_guid:n.trip_ads_select_request_guid,listing_key:t.listingKey});Object(Y.trackEventWithContext)("impression","paid_backup_sponsored_listing_displayed",s),Object(Y.trackHolisticEvent)(Y.holisticEvents.HOTELS_SP_IMPRESSION,function e(t,i,n){var a=Object(f.getStore)().getState();return{is_member:a.auth.isMember,device_type:a.meta.device.userAgentCategory?a.meta.device.userAgentCategory.toLowerCase():"",locationId:i,slot:t.placement_slot_name,trip_ads_select_guid:t.trip_ads_select_request_guid,listing_key:n}}(n,t.locationId,t.listingKey)),n.trip_ads_select_request_guid&&function e(t,i){Q(t,i,"IMPRESSED")}(n.trip_ads_select_request_guid,n.opportunity_uid),ae(t,"impression")}else ae(t,"impression")},oe=function e(t){switch(t){case"ar":return{trackingName:"xsell_hr_abovereviews"};case"br":return{trackingName:"xsell_hr_belowreviews"};default:return function e(t){return{trackingName:"xsell_hr_".concat(t)}}(t)}},re=function e(t){var i=oe(t.pageLocation),n={module:"".concat(i.trackingName,"_shelf_").concat(t.rowNumber),action:"shelf_click",value:t.indexInList,context:t.displayPrice};z()(n)},le=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e4;a()(this,e),w()(this,"clockStarted",!1),w()(this,"clockStopped",!1),w()(this,"startTime",0),w()(this,"timeoutCallback",void 0),w()(this,"timeoutTimer",void 0),w()(this,"timeout",void 0),this.timeoutCallback=t,this.timeout=i}return o()(e,[{key:"clockStart",value:function e(){var t=this;if(!this.clockStarted){this.clockStarted=!0,this.startTime=Date.now();var i=this;this.timeoutTimer=setTimeout(function(){return i.handleTimeout(t.timeout)},this.timeout)}}},{key:"clockStop",value:function e(t){this.clockStarted&&!this.clockStopped&&(this.clockStopped=!0,t(Date.now()-this.startTime),clearTimeout(this.timeoutTimer))}},{key:"handleTimeout",value:function e(t){this.clockStopped||(this.clockStopped=!0,this.timeoutCallback(t))}},{key:"reset",value:function e(){this.clockStarted=!1,this.clockStopped=!1,this.startTime=0,clearTimeout(this.timeoutTimer)}}]),e}(),ce=function e(t){var i=this;a()(this,e),w()(this,"clock",void 0),w()(this,"trackingModule",void 0),w()(this,"shelfNameAndLocation",void 0),w()(this,"crossSellType",void 0),w()(this,"isTerminalDisplayState",function(e){return e.displayState===x.DisplayState.SHOWING||e.displayState===x.DisplayState.HIDDEN&&e.isOverallComplete}),w()(this,"handleClockFired",function(e,t){var i=b()({},t,{value:e});z()(i)}),w()(this,"startTracking",function(e,t){return i.handleVisibleShelf(e,t)}),w()(this,"handleVisibleShelf",function(e,t){var n=i.convertShelfNameToCategory(i.crossSellType);if(t<=1){var a={module:i.trackingModule,action:"in_view",context:"hr_xs_".concat(n,"_view")};z()(a)}i.clock.clockStart(),i.checkAndStopTracking(e)}),w()(this,"convertShelfNameToCategory",function(e){switch(e){case"scpc":case"smms":return"similar";case"m":case"mbmms":return"most_booked";case"nnrc":case"nmms":return"nearby";case"ci":case"cmms":return"cheap";case"cg":case"gmms":return"grid";default:return"unknown"}}),w()(this,"checkAndStopTracking",function(e){if(i.isTerminalDisplayState(e)){var t={module:"xsell_loading_timing",action:e.displayState,context:i.shelfNameAndLocation};i.clock.clockStop(function e(n){i.handleClockFired(n,t)})}}),w()(this,"resetTime",function(){i.clock.reset()});var n=oe(t.locationName),s="".concat(n.trackingName,"_shelf_").concat(t.rowNumber),o="new_".concat(t.locationName,"_").concat(t.crossSellType,"_").concat(t.rowNumber);this.trackingModule=s,this.shelfNameAndLocation=o,this.crossSellType=t.crossSellType,this.clock=new le(function(e){var t={module:"xsell_loading_timing",action:"timeout",context:i.shelfNameAndLocation};i.handleClockFired(e,t)})},de=i("@ta/common.i18n"),ue=function e(){return Object(de.localize)("p13n_you_may_also_like")},pe=function e(t){var i=J();return function e(t,i,n){return i&&t&&i[t]?i[t]:n}(t,K()(i,"titles",null),ue())},me=function e(t){var i=J(),n=K()(i,"seeAllLinks",null);return function e(t,i,n){return i&&t&&i[t]?i[t]:n}(t,n,K()(n,"default",null))};i.d(t,"UiAssetLoader",function(){return h}),i.d(t,"ComparisonGridDataLoader",function(){return k}),i.d(t,"WaitForPageLocation",function(){return G}),i.d(t,"getUIAssets",function(){return J}),i.d(t,"CrossSellsDisplayStateManager",function(){return P}),i.d(t,"sponsoredListingClickHandler",function(){return te}),i.d(t,"LogClickInteraction",function(){return ne}),i.d(t,"sponsoredListingImpressionHandler",function(){return se}),i.d(t,"gaRecordClickHandler",function(){return re}),i.d(t,"ShelfTimingTracker",function(){return ce}),i.d(t,"getTitleForCrossSellType",function(){return pe}),i.d(t,"getDefaultShelfTitle",function(){return ue}),i.d(t,"getSeeAllUrlForCrossSellType",function(){return me})}}});
//# sourceMappingURL=cross-sells.logic.ecc82960d3.js.map