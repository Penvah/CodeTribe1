(window.$WP=window.$WP||[]).push({id:"@ta/tracking.interactions",d:["vendor-babel","vendor-react-libs","vendor-apollo-libs","ta-platform","@ta/common.localstorage"],e:["./packages/tracking/interactions/interactions.jsx"],x:{"./packages/tracking/interactions/interactions.jsx":["InteractionLogger","TrackingNamespaceContext","ItemIdContext","FeedSectionIdContext","HomeTrackingContext","ProfileTrackingContext","InboxTrackingContext","SearchTrackingContext","OnboardingTrackingContext","UgcDetailTrackingContext","FollowPlacementContext","SocialHotelsTrackingContext","FlightsSearchResultsContext","ItineraryContext","RecommendedFolloweesImpressionIdContext","MixerImpressionContext","FollowTabTypeContext","GlobalNavTrackingContext","LogInteractionV4"]},m:{"./packages/tracking/interactions/interactions.jsx":function(e,n,t){"use strict";t.r(n);var r=t("@babel/runtime/helpers/esm/extends"),a=t.n(r),i=t("@babel/runtime/helpers/esm/objectWithoutProperties"),o=t.n(i),c=t("@babel/runtime/helpers/esm/objectSpread"),l=t.n(c),u=t("react"),s=t("react-redux"),d=t("react-apollo"),m=t("@ta/common.decode"),f=t.n(m),k=t("@ta/common.localstorage"),g=t.n(k),v=t("@ta/common.logging"),C=t.n(v),p=u.createContext(null),x=u.createContext(null),b=u.createContext({itemId:""}),h=u.createContext(null),I=u.createContext(null),T=u.createContext(null),w=u.createContext(null),N=u.createContext(null),y=u.createContext(null),E=u.createContext(null),S=u.createContext(null),D=u.createContext(null),R={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"LogInteractions"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"interactions"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"InteractionWithTimestampInput"}}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"clientRequestTimestamp"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Long"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"logInteractions"},arguments:[{kind:"Argument",name:{kind:"Name",value:"interactions"},value:{kind:"Variable",name:{kind:"Name",value:"interactions"}}},{kind:"Argument",name:{kind:"Name",value:"clientRequestTimestamp"},value:{kind:"Variable",name:{kind:"Name",value:"clientRequestTimestamp"}}}],directives:[]}]}}],loc:{start:0,end:211}};R.loc.source={body:"2f6863dd8a7e"};var j=R,F=u.createContext(null),V=u.createContext(null),M=u.createContext(null),O=function e(n){var t=g.a.get("interactionData");t&&(n({variables:{interactions:t,clientRequestTimestamp:(new Date).getTime()}}),g.a.remove("interactionData"))},U=function e(n,t,r){!function e(n){var t=g.a.get("interactionData");t||(t=[]);var r={eventTimestampMsClient:(new Date).getTime(),interaction:n};t.push(r),g.a.set("interactionData",t)}(t),function e(n){if(!n)return!1;var t=n.target,r=n.currentTarget;if(t&&r&&t instanceof HTMLElement){var a=t,i=!1;do{if(a instanceof HTMLElement&&a.dataset.encodedUrl){var o=f()(a.dataset.encodedUrl),c=document.createElement("a");c.href=o,a.parentElement instanceof HTMLElement&&(c.style.display="none",a.parentElement.appendChild(c)),a=c}if(a instanceof HTMLAnchorElement){var l=a;if(window&&window.location&&window.location.hostname&&window.location.hostname===l.hostname)return!0}i=a===r||i,a=a.parentElement}while(a&&!i)}return!1}(n)||O(r)},L=function e(n){var t=n.logInteraction,r=o()(n,["logInteraction"]);return u.useEffect(function(){O(t)}),function e(n,t){return u.createElement(h.Consumer,null,function(e){return"mixer"===e?function e(n,t){var r=t.children;return u.createElement(p.Consumer,null,function(e){return u.createElement(x.Consumer,null,function(t){return u.createElement(b.Consumer,null,function(a){return r(function r(i,o,c){var l=c||{},u={};switch(o){case"delete":case"linkedPoiScroll":case"overflowMenuClick":case"report":case"seeAll":case"shelfScroll":case"untag":case"untagConfirm":case"untagCancel":u[o]={feedSectionId:t};break;case"linkedPhotoClick":u[o]={feedSectionId:t},Object.assign(u[o],l);break;case"linkedPoiClick":u[o]={feedSectionId:t,placement:"HEADER"},Object.assign(u[o],l);break;case"feedClick":case"helpful":case"repost":case"share":case"unhelpful":case"follow":case"unfollow":case"userClick":case"save":case"dismiss":case"userReferenceClick":case"linkReferenceClick":case"linkedSnippetClick":case"batchGalleryClick":case"batchGalleryScroll":u[o]={feedSectionId:t,itemId:a.itemId},Object.assign(u[o],l);break;case"showMore":u[o]={mixerImpressionId:e},Object.assign(u[o],l);break;default:var s=o||"undefined";C.a.error("Unknown mixer interaction type: ".concat(s))}U(i,{mixer:u},n)})})})})}(n,t):"home"===e?function e(n,t){var r=t.children;return u.createElement(I.Consumer,null,function(e){return u.createElement(y.Consumer,null,function(t){return r(function r(a,i,o){var c=o||{},u={};u["unfollow"===i?"unFollow":i]=l()({},e,c,t),U(a,{home:u},n)})})})}(n,t):"profile"===e?function e(n,t){var r=t.children;return u.createElement(T.Consumer,null,function(e){return u.createElement(y.Consumer,null,function(t){return r(function r(a,i,o){var c=o||{},u={};u["unfollow"===i?"unFollow":i]=l()({},e,c,t),U(a,{profile:u},n)})})})}(n,t):"onboarding"===e?function e(n,t){var r=t.children;return u.createElement(E.Consumer,null,function(e){return r(function t(r,a,i){var o=i||{},c={};c[a]=l()({},o,e),U(r,{onboarding:c},n)})})}(n,t):"inbox"===e?function e(n,t){var r=t.children;return u.createElement(D.Consumer,null,function(e){return r(function t(r,a,i){var o=i||{},c={};switch(a){case"follow":case"unfollow":c[a]={},Object.assign(c[a],o),Object.assign(c[a],e);break;default:var l=a||"undefined";C.a.error("Unknown or not set up inbox interactionType: ".concat(l))}U(r,{inbox:c},n)})})}(n,t):"search"===e?function e(n,t){var r=t.children;return u.createElement(w.Consumer,null,function(e){return r(function t(r,a,i){var o=i||{},c={};switch(a){case"follow":case"unfollow":c[a]={},Object.assign(c[a],o),Object.assign(c[a],e);break;default:var l=a||"undefined";C.a.error("Unknown or not set up search interactionType: ".concat(l))}U(r,{search:c},n)})})}(n,t):"ugcDetail"===e?function e(n,t){var r=t.children,a=t.loggedInUserId;return u.createElement(N.Consumer,null,function(e){return r(function t(r,i,o){var c=o||{},u=a?{actorUserId:a}:{},s={};s["feedClick"===i?"ugcClick":i]=l()({},e,c,u),U(r,{ugcDetail:s},n)})})}(n,t):"hotelReviewServlet"===e?function e(n,t,r){var a=t.children;return u.createElement(S.Consumer,null,function(e){return a(function t(a,i,o){var c=o||{},u={};u[i]=l()({},c,e);var s={};s[r]=u,U(a,s,n)})})}(n,t,e):"flightsResults"===e?function e(n,t,r){var a=t.children;return u.createElement(M.Consumer,null,function(e){return a(function t(a,i,o){var c=o||{},u={};u[i]=l()({},c,e);var s={};s[r]=u,U(a,s,n)})})}(n,t,e):"globalNav"===e?function e(n,t){var r=t.children;return u.createElement(F.Consumer,null,function(e){return r(function t(r,a,i){var o=i||{},c={};c[a]=l()({},o,e),U(r,{globalNav:c},n)})})}(n,t):"contentUploader"===e?function e(n,t){var r=t.children;return u.createElement(V.Consumer,null,function(e){return r(function t(r,a,i){var o=i||{},c={};c[a]=l()({},o,e),U(r,{contentUploader:c},n)})})}(n,t):t.children(function(){})})}(t,r)},P=Object(s.connect)(function(e){return{loggedInUserId:e.auth.loggedInUserId,isReadonlyMode:e.meta.readonlyMode}})(function e(n){return n.isReadonlyMode?n.children(function(){}):u.createElement(d.Mutation,{mutation:j},function(e){return u.createElement(L,a()({},n,{logInteraction:e}))})}),H=u.createContext(null),A=u.createContext(null),q=u.createContext(null),G={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"LogInteractionV4"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"interaction"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"InteractionV4Input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"logInteractionV4"},arguments:[{kind:"Argument",name:{kind:"Name",value:"interaction"},value:{kind:"Variable",name:{kind:"Name",value:"interaction"}}}],directives:[]}]}}],loc:{start:0,end:111}};G.loc.source={body:"15da4aa6d267"};var W=G;t.d(n,"InteractionLogger",function(){return P}),t.d(n,"TrackingNamespaceContext",function(){return h}),t.d(n,"ItemIdContext",function(){return b}),t.d(n,"FeedSectionIdContext",function(){return x}),t.d(n,"HomeTrackingContext",function(){return I}),t.d(n,"ProfileTrackingContext",function(){return T}),t.d(n,"InboxTrackingContext",function(){return D}),t.d(n,"SearchTrackingContext",function(){return w}),t.d(n,"OnboardingTrackingContext",function(){return E}),t.d(n,"UgcDetailTrackingContext",function(){return N}),t.d(n,"FollowPlacementContext",function(){return H}),t.d(n,"SocialHotelsTrackingContext",function(){return S}),t.d(n,"FlightsSearchResultsContext",function(){return M}),t.d(n,"ItineraryContext",function(){return A}),t.d(n,"RecommendedFolloweesImpressionIdContext",function(){return y}),t.d(n,"MixerImpressionContext",function(){return p}),t.d(n,"FollowTabTypeContext",function(){return q}),t.d(n,"GlobalNavTrackingContext",function(){return F}),t.d(n,"LogInteractionV4",function(){return W})}}});
//# sourceMappingURL=tracking.interactions.75fa770d06.js.map