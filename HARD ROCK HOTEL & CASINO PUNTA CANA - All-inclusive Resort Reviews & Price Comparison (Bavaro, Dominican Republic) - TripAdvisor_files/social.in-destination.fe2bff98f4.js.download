(window.$WP=window.$WP||[]).push({id:"@ta/social.in-destination",d:["vendor-react-libs","vendor-apollo-libs","@ta/common.geolocation","ta-platform","@ta/overlays.managers","@ta/overlays.slide-in"],e:["./packages/social/in-destination/index.jsx"],x:{"./packages/social/in-destination/index.jsx":["InDestinationRedirect","SetOnTrip","InDestinationSlideUpPrompt"]},m:{"./packages/social/in-destination/index.jsx":function(e,n,i){"use strict";i.r(n);var a=i("react"),t=i("react-apollo"),l=i("@ta/common.geolocation"),d=i("@ta/common.i18n"),o={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"TrackGeoIdByLatLong"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"latitude"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Float"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"longitude"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Float"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"trackGeoIdByLatLong"},arguments:[{kind:"Argument",name:{kind:"Name",value:"latitude"},value:{kind:"Variable",name:{kind:"Name",value:"latitude"}}},{kind:"Argument",name:{kind:"Name",value:"longitude"},value:{kind:"Variable",name:{kind:"Name",value:"longitude"}}}],directives:[]}]}}],loc:{start:0,end:138}};o.loc.source={body:"c7c9d41d0237"};var r=o,u={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SetUserOnTrip"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"isOnTrip"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateInsightProfile"},arguments:[{kind:"Argument",name:{kind:"Name",value:"request"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"profile"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"onTripConfirmations"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"isOnTrip"},value:{kind:"Variable",name:{kind:"Name",value:"isOnTrip"}}}]}}]}}]}}],directives:[]}]}}],loc:{start:0,end:143}};u.loc.source={body:"14b329278d3e"};var c=u,m=function e(n){var i=n.isOnTrip,o=n.children,u=function e(n){Object(l.requestLocation)(function(e,a){n(e,a,function(){window.location="/?latitude=".concat(encodeURIComponent("".concat(e)),"&longitude=").concat(encodeURIComponent("".concat(a))).concat(i?"&isNearby=true":"")})},function(){alert(Object(d.localize)("mw_js_positionPermissionDenied")),window.location="/Home"})};return i?a.createElement(t.Mutation,{mutation:c},function(e){return a.createElement(t.Mutation,{mutation:r},function(n){return o(function(){u(function(i,a,t){e({variables:{isOnTrip:!0}}).then(function(){n({variables:{latitude:i,longitude:a}}).then(t)})})})})}):a.createElement(t.Mutation,{mutation:r},function(e){return o(function(){u(function(n,i,a){e({variables:{latitude:n,longitude:i}}).then(a)})})})},s=function e(n){var i=n.isOnTrip,l=n.children;return a.createElement(t.Mutation,{mutation:c},function(e){return l(function(){e({variables:{isOnTrip:!!i}})})})},k=i("react-redux"),v=i("@ta/overlays.managers"),p=i("@ta/overlays.slide-in"),b=i.n(p),f={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetUsername"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"loggedInUserId"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"taUnique"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"memberProfile"},arguments:[{kind:"Argument",name:{kind:"Name",value:"userId"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"loggedInUserId"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"username"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"onTripTreatment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"taUniqueId"},value:{kind:"Variable",name:{kind:"Name",value:"taUnique"}}},{kind:"Argument",name:{kind:"Name",value:"userId"},value:{kind:"Variable",name:{kind:"Name",value:"loggedInUserId"}}}],directives:[]}]}}],loc:{start:0,end:201}};f.loc.source={body:"1e6544288d87"};var N=f,g={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"OnTripPromptShown"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateInsightProfile"},arguments:[{kind:"Argument",name:{kind:"Name",value:"request"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"profile"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"uiCardActions"},value:{kind:"ListValue",values:[{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"cardId"},value:{kind:"EnumValue",value:"ON_TRIP"}},{kind:"ObjectField",name:{kind:"Name",value:"cardAction"},value:{kind:"EnumValue",value:"SHOW"}}]}]}}]}}]}}],directives:[]}]}}],loc:{start:0,end:144}};g.loc.source={body:"20db1230fa7b"};var y=g,O=Object(k.connect)(function(e){return{loggedInUserId:e.auth.loggedInUserId,taUnique:e.meta.taUnique}})(function e(n){var i=n.loggedInUserId,l=n.taUnique;return a.createElement(t.Query,{errorPolicy:"all",query:N,variables:{loggedInUserId:i,taUnique:l}},function(e){var n=e.loading,i=e.data;if(n)return null;if(i&&i.onTripTreatment&&"PROMPT"!==i.onTripTreatment)return null;var l=null;return i&&i.memberProfile&&(l=i.memberProfile.username),a.createElement(a.Fragment,null,a.createElement(b.a,{name:"in-destination-prompt",hideX:!0,noBackdrop:!0,slideFrom:"bottom",transitionDuration:1e3},function(e){return a.createElement("div",{className:"social-in-destination-InDestinationSlideUpPrompt__prompt--33teg"},a.createElement("div",{className:"social-in-destination-InDestinationSlideUpPrompt__title--cyV0G"},l?Object(d.localize)("mercury_slideup_hi_displayname",{DisplayName:l}):Object(d.localize)("mercury_slideup_hi_there")),a.createElement("div",{className:"social-in-destination-InDestinationSlideUpPrompt__body--1X8cE"},Object(d.localize)("mercury_slideup_are_you_on_trip")),a.createElement("div",null,a.createElement(t.Mutation,{mutation:y},function(n){return a.createElement(a.Fragment,null,a.createElement(m,{isOnTrip:!0},function(i){return a.createElement("span",{className:"social-in-destination-InDestinationSlideUpPrompt__button--h3cML",onClick:function a(){e(),n(),i()}},Object(d.localize)("mercury_slideup_yes"))}),a.createElement(s,{isOnTrip:!1},function(i){return a.createElement("span",{className:"social-in-destination-InDestinationSlideUpPrompt__button--h3cML",onClick:function a(){n(),i(),e()}},Object(d.localize)("mercury_slideup_no"))}))})))}),a.createElement(v.AutoOpener,{name:"in-destination-prompt",openLayerCheck:function e(){return!0},markAsCheckedCallback:function e(){}}))})});i.d(n,"InDestinationRedirect",function(){return m}),i.d(n,"SetOnTrip",function(){return s}),i.d(n,"InDestinationSlideUpPrompt",function(){return O})}}});
//# sourceMappingURL=social.in-destination.fe2bff98f4.js.map