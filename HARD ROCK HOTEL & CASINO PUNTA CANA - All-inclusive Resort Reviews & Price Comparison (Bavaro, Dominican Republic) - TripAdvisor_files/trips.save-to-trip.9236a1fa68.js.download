(window.$WP=window.$WP||[]).push({id:"@ta/trips.save-to-trip",d:["vendor-babel","vendor-react-libs","ta-platform","@ta/common.timer","@ta/overlays.popover","@ta/overlays.toast","@ta/trips.trip-flow-selector","@ta/trips.bookmark-icon"],e:["./packages/trips/save-to-trip/SaveToTripWidget.jsx"],x:{"./packages/trips/save-to-trip/SaveToTripWidget.jsx":["default"]},m:{"./packages/trips/save-to-trip/SaveToTripWidget.jsx":function(t,e,o){"use strict";o.r(e);var a=o("@babel/runtime/helpers/esm/slicedToArray"),r=o.n(a),n=o("@babel/runtime/helpers/esm/defineProperty"),i=o.n(n),s=o("react"),c=o("react-redux"),l=o("@ta/common.features"),p=o("@ta/common.classnames"),u=o.n(p),m=o("@ta/common.logging"),_=o.n(m),d=o("@ta/common.i18n"),v=o("@ta/common.radio"),f=o.n(v),k=o("@ta/common.timer"),b=o.n(k),g=o("@ta/common.tracking"),h=o.n(g),E=o("@ta/overlays.popover"),T=o.n(E),w=o("@ta/overlays.toast"),S=o("@ta/trips.trip-flow-selector"),y=o("@ta/trips.bookmark-icon"),j=function t(e,o,a,r){return"listing"===a||"hotspot_and_tooltip"===a||"hotspot_tooltip_toaster"===a?s.createElement(y.BookmarkIcon,{active:e,onClick:o,bookmarkStyle:"stacked",bookmarkSize:"30"}):"responsive_review"===a||"forum_post"===a||"hotspot_and_tooltip_detail"===a||"hotspot_tooltip_toaster_detail"===a?"DESKTOP"===r?s.createElement(y.BookmarkIcon,{active:e,onClick:o,bookmarkStyle:"outline",bookmarkSize:"20",decorated:!1},function(t){return s.createElement("span",{className:u()("trips-save-to-trip-SaveToTripWidget__normal--TlAX2",i()({},"trips-save-to-trip-SaveToTripWidget__heart--GWv1v",Object(l.featureIsEnabled)("saves_heart_with_wc_flow")))},t)}):s.createElement(y.BookmarkIcon,{active:e,onClick:o,bookmarkStyle:"outline",bookmarkSize:"24"}):"mobile_review"===a?s.createElement(y.BookmarkIcon,{active:e,onClick:o,bookmarkStyle:"outline",bookmarkSize:"24"}):"mobile_restaurant_review"===a?s.createElement(y.BookmarkIcon,{active:e,onClick:o,vertical:!0,bookmarkStyle:"outline",bookmarkSize:"22",decorated:!1},function(t){return s.createElement("span",{className:"trips-save-to-trip-SaveToTripWidget__small--1YVmk"},t)}):"mobile_attraction_product_detail"===a?s.createElement(y.BookmarkIcon,{active:e,onClick:o,bookmarkStyle:"stacked",bookmarkSize:"24"}):(_.a.warn("Widget style not found: ".concat(a)),null)};e.default=Object(c.connect)(function(t){return{viewportCategory:t.meta.device.viewportCategory}})(function t(e){var o=e.object,a=e.widgetStyle,n=e.tooltipCopy,c=e.toastCopy,p=e.viewportCategory,m=s.useState(!1),_=r()(m,2),v=_[0],k=_[1],g=s.useRef(null);if(s.useEffect(function(){var t=function t(){k(!0),"hotspot_tooltip_toaster"===a?h()({module:"saves_nux",action:"shown"}):"hotspot_tooltip_toaster_detail"===a&&h()({module:"saves_nux_detail",action:"shown"})};return f()("save-to-trip").on("hotspot-".concat(o.locationId),t),f()("save-to-trip").on("hotspot-page",t),f()("save-to-trip").emit("wc-widgets-loaded"),function(){f()("save-to-trip").off("hotspot-".concat(o.locationId),t),f()("save-to-trip").off("hotspot-page",t)}},[o.locationId,a]),s.useEffect(function(){if(g.current&&v){var t=g.current.getBoundingClientRect();(t.top<0||t.bottom>window.innerHeight)&&setTimeout(function(){g.current&&g.current.scrollIntoView({behavior:"smooth",block:"center"})},0)}},[v]),("hotspot_and_tooltip"===a||"hotspot_and_tooltip_detail"===a||"hotspot_tooltip_toaster"===a||"hotspot_tooltip_toaster_detail"===a)&&(v||Object(l.featureIsEnabled)("saves_nux_first_pageload_hotspot_only"))){var E=("hotspot_tooltip_toaster"===a||"hotspot_tooltip_toaster_detail"===a)&&"MOBILE"===p&&!Object(l.featureIsEnabled)("saves_nux_first_pageload_hotspot_only"),y=function t(){k(!1)};return E?s.createElement(s.Fragment,null,s.createElement(S.QueriedTripFlowSelector,{object:o},function(t,e){return s.createElement("span",{ref:function t(e){g.current=e},className:u()(i()({},"trips-save-to-trip-SaveToTripWidget__hotspot--3RvXe",v))},j(e,t,a,p))}),c&&s.createElement(w.Toaster,{onToastRemoved:y},function(t){return s.createElement(b.a,{trigger:function e(){t({node:s.createElement("span",null,Object(d.unescaped)(c)),cta:s.createElement("span",{onClick:y},Object(d.localize)("saves_toast_dismiss")),timeout:1e4})},interval:0})})):s.createElement(T.a,{leftOf:!0,contents:function t(e){return s.createElement("span",{className:"trips-save-to-trip-SaveToTripWidget__popover--Vd6Xg",onClick:e},n?Object(d.unescaped)(n):Object(d.localize)("save_hotels_nux_h_body"))},onClose:y,local:!0,closeButton:!1,overlayType:"popover"},function(t,e){return("MOBILE"!==p&&!Object(l.featureIsEnabled)("saves_nux_first_pageload_hotspot_only")||"hotspot_and_tooltip"===a||"hotspot_and_tooltip_detail"===a)&&e(),s.createElement(S.QueriedTripFlowSelector,{object:o},function(o,r){return s.createElement("span",{ref:function e(o){g.current=o,t(o)},onMouseOver:e,onFocus:e,className:u()(i()({},"trips-save-to-trip-SaveToTripWidget__hotspot--3RvXe",v))},j(r,o,a,p),s.createElement(b.a,{trigger:function t(){Object(l.featureIsEnabled)("saves_nux_first_pageload_hotspot_only")&&y()},interval:6e3}))})})}return s.createElement(S.QueriedTripFlowSelector,{object:o},function(t,e){return j(e,t,a,p)})})}}});
//# sourceMappingURL=trips.save-to-trip.9236a1fa68.js.map