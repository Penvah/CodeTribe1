(window.$WP=window.$WP||[]).push({id:"@ta/social.member",d:["vendor-react-libs","@ta/social.member-common","ta-common","ta-platform","@ta/overlays.managers","@ta/overlays.modal","@ta/overlays.headers","@ta/common.infinite-loader","@ta/tracking.interactions","@ta/social.follow-feed","vendor-apollo-libs","vendor-babel","@ta/social.links"],e:["./packages/social/member/index.jsx"],x:{"./packages/social/member/index.jsx":["MemberBlock","MemberStats","MemberHeaderStats","getDisplayName","MemberBio","MemberCreated","MemberLink","MemberAvatarWithEdit","DestinationExpertInfo"]},m:{"./packages/social/member/index.jsx":function(e,t,n){"use strict";n.r(t);var a=n("react"),r=n("@ta/social.member-common"),l=n("@ta/common.i18n"),i=n("@ta/overlays.modal"),o=n("@ta/overlays.headers"),m=n("@ta/common.infinite-loader"),s=n.n(m),c=n("@ta/tracking.interactions"),u=n("@ta/social.follow-feed"),b=n("react-apollo"),d=n("@ta/common.routing"),_=n("@ta/styleguide.icon"),f=n("@ta/styleguide.loading"),p={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"SumAllLikesQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"username"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"memberProfiles"},arguments:[{kind:"Argument",name:{kind:"Name",value:"username"},value:{kind:"Variable",name:{kind:"Name",value:"username"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"userId"},name:{kind:"Name",value:"id"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"static"},arguments:[]}]},{kind:"Field",name:{kind:"Name",value:"username"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contributionCounts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sumAllLikes"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:407}};p.loc.source={body:"300941d31176"};var E=p,g="social-member-MemberContributionsList__item--xWx8b",v="social-member-MemberContributionsList__link--tRQU5",N="social-member-MemberContributionsList__icon--28vFi",k=function e(t){var n=t.profile;return a.createElement(a.Fragment,null,function e(){return a.createElement(b.Query,{query:E,variables:{username:n.username}},function(e){var t=e.loading,r=e.error,i=e.data;if(t)return a.createElement(f.LoadingSpinner,null);if(r)return null;var o=i&&i.memberProfiles&&i.memberProfiles[0]&&i.memberProfiles[0].contributionCounts&&i.memberProfiles[0].contributionCounts.sumAllLikes?i.memberProfiles[0].contributionCounts.sumAllLikes:0;return a.createElement("ul",{className:"social-member-MemberContributionsList__list--3FPXh"},n.contributionCounts.trip>0&&a.createElement("li",{className:g},a.createElement(c.InteractionLogger,null,function(e){return a.createElement(d.Link,{to:{page:"Profile",username:n.username,tab:"trips"},className:v,onClick:function t(n){return e(n,"contributionTypeClick",{contributionTypeName:"TRIPS"})}},a.createElement(_.Icon,{name:"suitcase-fill",className:N})," ",Object(l.localize)("n_Trips_plural",{0:l.globalize.formatNumber("integer",n.contributionCounts.trip)}))})),n.contributionCounts.video>0&&a.createElement("li",{className:g},a.createElement(c.InteractionLogger,null,function(e){return a.createElement(d.Link,{to:{page:"Profile",username:n.username,tab:"videos"},className:v,onClick:function t(n){return e(n,"contributionTypeClick",{contributionTypeName:"VIDEOS"})}},a.createElement(_.Icon,{name:"video-fill",className:N})," ",Object(l.localize)("n_videos_plural",{0:l.globalize.formatNumber("integer",n.contributionCounts.video)}))})),n.contributionCounts.photo>0&&a.createElement("li",{className:g},a.createElement(c.InteractionLogger,null,function(e){return a.createElement(d.Link,{to:{page:"Profile",username:n.username,tab:"photos"},className:v,onClick:function t(n){return e(n,"contributionTypeClick",{contributionTypeName:"PHOTOS"})}},a.createElement(_.Icon,{name:"camera-fill",className:N})," ",Object(l.localize)("n_photos_plural",{0:l.globalize.formatNumber("integer",n.contributionCounts.photo)}))})),n.contributionCounts.sumReview>0&&a.createElement("li",{className:g},a.createElement(c.InteractionLogger,null,function(e){return a.createElement(d.Link,{to:{page:"Profile",username:n.username,tab:"reviews"},className:v,onClick:function t(n){return e(n,"contributionTypeClick",{contributionTypeName:"REVIEWS"})}},a.createElement(_.Icon,{name:"pencil-paper",className:N})," ",Object(l.localize)("n_reviews_plural",{0:l.globalize.formatNumber("integer",n.contributionCounts.sumReview)}))})),n.contributionCounts.linkPost>0&&a.createElement("li",{className:g},a.createElement(c.InteractionLogger,null,function(e){return a.createElement(d.Link,{to:{page:"Profile",username:n.username,tab:"linkPost"},className:v,onClick:function t(n){return e(n,"contributionTypeClick",{contributionTypeName:"LINKS"})}},a.createElement(_.Icon,{name:"link",className:N})," ",Object(l.localize)("n_links_plural",{0:l.globalize.formatNumber("integer",n.contributionCounts.linkPost)}))})),n.contributionCounts.forumPost>0&&a.createElement("li",{className:g},a.createElement(c.InteractionLogger,null,function(e){return a.createElement(d.Link,{to:{page:"Profile",username:n.username,tab:"forum"},className:v,onClick:function t(n){return e(n,"contributionTypeClick",{contributionTypeName:"FORUMS"})}},a.createElement(_.Icon,{name:"forums",className:N})," ",Object(l.localize)("n_forum_posts_plural",{0:l.globalize.formatNumber("integer",n.contributionCounts.forumPost)}))})),n.contributionCounts.repost>0&&a.createElement("li",{className:g},a.createElement(_.Icon,{name:"repost",className:N})," ",Object(l.localize)("n_reposts_plural",{0:l.globalize.formatNumber("integer",n.contributionCounts.repost)})),o>0&&a.createElement("li",{className:g},a.createElement(_.Icon,{name:"thumbs-up-fill",className:"".concat(N," ").concat("social-member-MemberContributionsList__inactive--3qoVJ")})," ",Object(l.localize)("n_helpful_votes_and_likes_plural",{0:l.globalize.formatNumber("integer",o)})))})}())},h=function e(t){var n=t.profile,r=n.contributionCounts&&null!==n.contributionCounts.sumAllUgc?l.globalize.formatNumber("integer",n.contributionCounts.sumAllUgc):null,m=r?Object(l.localize)("n_contributions_plural",{0:r}):"";return a.createElement(i.DeprecatedRoutedModal,{name:"contributions",isFullBleed:!0,header:a.createElement(o.TitleBar,{displayType:"LEFT_ALIGN_GRAY"},m)},a.createElement("div",{className:"social-member-MemberContributionsListModal__contributions--17TkV"},a.createElement(k,{profile:n})))},C=function e(t){var n=t.profile,r=t.isNarrow,m=null!==n.followerCount?l.globalize.formatNumber("integer",n.followerCount):null,b=null!==n.followeeCount?l.globalize.formatNumber("integer",n.followeeCount):null,d=m?Object(l.localize)("social_nCount_followers2",{0:m}):"",_=b?Object(l.localize)("social_nCount_following2",{0:b}):"",f=function e(t){return a.createElement(i.DeprecatedRoutedModal,{name:t?"followers":"following",isFullBleed:!0,bodyScroll:!1,header:a.createElement(o.TitleBar,{displayType:"LEFT_ALIGN_GRAY"},t?d:_)},a.createElement(u.FollowerFolloweeFeedDataProvider,{userId:n.userId,isFollowersList:t},function(e,r,l,i,o,m){return a.createElement(s.a,{loadMore:e,threshold:550,throttle:50,hasMore:l,infiniteLoadOnMount:!0},function(e,l){return a.createElement("div",{className:"social-member-MemberStats__follower_followee_list--bzm3I",ref:e},a.createElement(c.FollowPlacementContext.Provider,{value:{placement:t?"FOLLOWERS_MODAL":"FOLLOWING_MODAL"}},a.createElement(u.FollowerFolloweeFeed,{followerFollowees:r,userId:n.userId,contentRef:l,error:o,loading:i,refetch:m})))})}))},p=n.contributionCounts&&null!==n.contributionCounts.sumAllUgc?a.createElement("div",{className:"social-member-MemberStats__stat_item--1GM9b"},a.createElement("span",{className:"social-member-MemberStats__stat_item_title--1L5-g"},Object(l.localize)("social_memberstats_contributions")," "),a.createElement("span",{className:"social-member-MemberStats__stat_item_count--14i7c"},n.contributionCounts.sumAllUgc>0?a.createElement(c.InteractionLogger,null,function(e){return a.createElement(i.DeprecatedModalLink,{name:"contributions",username:n.username,href:null,className:"social-member-MemberStats__link--HqVwd",onClick:function t(n){return e(n,"contributionsClick")}},l.globalize.formatNumber("integer",n.contributionCounts.sumAllUgc))}):a.createElement(a.Fragment,null,l.globalize.formatNumber("integer",n.contributionCounts.sumAllUgc)))):null,E=null!==m?a.createElement("div",{className:"social-member-MemberStats__stat_item--1GM9b"},a.createElement("span",{className:"social-member-MemberStats__stat_item_title--1L5-g"},Object(l.localize)("social_memberstats_followers")," "),a.createElement("span",{className:"social-member-MemberStats__stat_item_count--14i7c"},0===n.followerCount?m:a.createElement(c.InteractionLogger,null,function(e){return a.createElement(i.DeprecatedModalLink,{name:"followers",username:n.username,href:null,className:"social-member-MemberStats__link--HqVwd",onClick:function t(n){return e(n,"followersClick")}},m)}))):null,g=r||null===b?null:a.createElement("div",{className:"social-member-MemberStats__stat_item--1GM9b"},a.createElement("span",{className:"social-member-MemberStats__stat_item_title--1L5-g"},Object(l.localize)("social_Following")," "),a.createElement("span",{className:"social-member-MemberStats__stat_item_count--14i7c"},0===n.followeeCount?b:a.createElement(c.InteractionLogger,null,function(e){return a.createElement(i.DeprecatedModalLink,{name:"following",username:n.username,href:null,className:"social-member-MemberStats__link--HqVwd",onClick:function t(n){return e(n,"followingClick")}},b)})));return a.createElement("div",{className:"".concat("social-member-MemberStats__member_stats--1W9tJ"," ").concat(r?"social-member-MemberStats__narrow--19fb9":"")},a.createElement("div",{className:"social-member-MemberStats__together--9Bl5-"},p,E,g),function e(){return a.createElement(h,{profile:n})}(),f(!0),f(!1))};C.defaultProps={isNarrow:!1};var M=C,w=n("@ta/styleguide.avatar"),L=n("@ta/overlays.managers"),I=function e(t){var n=t.profile,r=t.editMode;return n.isMe&&!n.avatar?a.createElement(L.Opener,{name:"upload-avatar-modal"},function(e){return a.createElement("div",{className:"social-member-MemberAvatarWithEdit__avatar_with_edit--2Ib3J"},a.createElement("div",{className:"ui_social_avatar large xtra-large-tablet ".concat("social-member-MemberAvatarWithEdit__no_avatar--3KBEy"),onClick:e},a.createElement(_.Icon,{name:"photo",className:"social-member-MemberAvatarWithEdit__avatar_with_edit_photo--3pOuZ"}),a.createElement("span",{className:"social-member-MemberAvatarWithEdit__avatar_with_edit_text--3qHtl"},Object(l.localize)("social_Add_profile_photo")," ")))}):a.createElement(a.Fragment,null,r?a.createElement(L.Opener,{name:"upload-avatar-modal"},function(e){return a.createElement("div",{className:"social-member-MemberAvatarWithEdit__avatar_with_edit--2Ib3J"},a.createElement("div",{className:"social-member-MemberAvatarWithEdit__editAvatarContainer--2oQLA",onClick:e},a.createElement(w.Avatar,{photo:n.avatar,size:"large",tabletSize:"xtra-large",withBorder:!0,notLazy:!0}),a.createElement("div",{className:"social-member-MemberAvatarWithEdit__change_photo_container--xUCKg"},a.createElement("div",{className:"social-member-MemberAvatarWithEdit__container_wrap--3jqDi"},a.createElement(_.Icon,{name:"photo",className:"social-member-MemberAvatarWithEdit__avatar_with_edit_photo--3pOuZ"}),a.createElement("span",{className:"social-member-MemberAvatarWithEdit__avatar_with_edit_text--3qHtl"},Object(l.localize)("social_change_profile_photo")," ")))))}):a.createElement(w.Avatar,{photo:n.avatar,size:"large",tabletSize:"xtra-large",withBorder:!0,notLazy:!0}))};I.defaultProps={editMode:!1};var S=I,y=function e(t){var n=t.profile;return a.createElement("div",{className:"social-member-MemberBlock__member_block--2ytzM"},a.createElement(S,{profile:n}),a.createElement(r.MemberName,{profile:n,displayNameClassName:"social-member-MemberBlock__display_name--vXtl2",addProfileLink:!1,responsive:!0,useH1:!0}),a.createElement(M,{profile:n,responsive:!0}))},z=function e(t){var n=t.profile,i=n&&n.hometown,o=n&&n.contributionCounts;return a.createElement("div",{className:"social-member-MemberHeaderStats__event_info--30wFs"},Object(r.canRenderHometown)(n.hometown)&&a.createElement("span",{className:"social-member-MemberHeaderStats__hometown_stat_item--231iN"},a.createElement(r.MemberHometown,{hometown:i,size:"small",singleLine:!0})),o?a.createElement(a.Fragment,null,o.sumAllUgc&&o.sumAllUgc>0?a.createElement("span",{className:"social-member-MemberHeaderStats__stat_item--34E1r"},Object(l.unescaped)(Object(l.localize)("social_n_contributions_plural",{0:"social-member-MemberHeaderStats__bold--3z3qh",1:l.globalize.formatNumber("integer",o.sumAllUgc)}))):null,o.helpfulVote&&o.helpfulVote>0?a.createElement("span",{className:"social-member-MemberHeaderStats__stat_item--34E1r"},Object(l.unescaped)(Object(l.localize)("hotels_n_helpful_votes_plural",{0:"social-member-MemberHeaderStats__bold--3z3qh",1:l.globalize.formatNumber("integer",o.helpfulVote)}))):null):null)},O=function(e){return e&&e.displayName?e.displayName:Object(l.localize)("native_login_user_review_anonymous")},A=n("@babel/runtime/helpers/esm/defineProperty"),F=n.n(A),P=n("@ta/common.classnames"),T=n.n(P),j=function e(t){var n=t.bio,r=t.truncateLength,l=t.className,i=t.smallText;return n?a.createElement("div",{className:T()("social-member-MemberBio__member_info--1J8Qa",l,F()({},"social-member-MemberBio__small_text--2wbSn",i))},n.length>r?"".concat(n.substring(0,r).trim(),"..."):n):null};j.defaultProps={truncateLength:1/0,className:"",smallText:!1};var x=j,D=function e(t){var n=t.created;return n?a.createElement("span",{className:"social-member-MemberCreated__memberCreated--2vv8F"},a.createElement(_.Icon,{name:"calendar",className:"social-member-MemberCreated__icon--3__9Q"}),Object(l.localize)("profile_joined_in",{0:l.globalize.formatDate("date_medium_month_year",new Date(n))})):null},W=n("@ta/social.links"),B=function e(t){var n=t.website;return n?a.createElement(c.InteractionLogger,null,function(e){return a.createElement("div",{className:"social-member-MemberInfo__member_info--S4DCO",onClick:function t(n){return e(n,"profileFieldClick",{action:"WEBSITE_CLICK"})}},a.createElement(W.WebsiteLink,{uri:n}))}):null},H=n("@babel/runtime/helpers/esm/classCallCheck"),R=n.n(H),V=n("@babel/runtime/helpers/esm/createClass"),U=n.n(V),q=n("@babel/runtime/helpers/esm/possibleConstructorReturn"),G=n.n(q),Q=n("@babel/runtime/helpers/esm/getPrototypeOf"),J=n.n(Q),K=n("@babel/runtime/helpers/esm/inherits"),X=n.n(K),Y=n("@babel/runtime/helpers/esm/assertThisInitialized"),Z=n.n(Y),$=n("@babel/runtime/helpers/esm/toConsumableArray"),ee=n.n($),te=function e(t){if(t&&(t.locationId||0===t.locationId)){var n=0===t.locationId?t.forumId:t.locationId;return n=0===t.locationId?"/ShowForum-g1-i".concat(t.forumId):"/ShowForum-g".concat(t.locationId),a.createElement(d.Link,{key:t.forumId,className:"ui_link",href:n},t.name)}return null},ne=function e(t){return t.reduce(function(e,t){return 0===e.length?[t]:[].concat(ee()(e),[", ",t])},[])},ae=function(e){function t(){var e,n;R()(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return n=G()(this,(e=J()(t)).call.apply(e,[this].concat(r))),F()(Z()(Z()(n)),"state",{showingExpandedList:!1}),n}return X()(t,e),U()(t,[{key:"render",value:function e(){var t=this,n=this.props.expertForums;if(n&&null!=n.forums&&null!=n.forums[0]){var r=n.forums.filter(function(e){return null!==e}).map(te).filter(function(e){return null!=e});return a.createElement("div",{className:"social-member-DestinationExpertInfo__block--1nwgj"},a.createElement("div",{className:"social-member-DestinationExpertInfo__list_title--3Wy5V"},Object(l.localize)("social_destination_expert_for")),a.createElement(c.InteractionLogger,null,function(e){return a.createElement("div",{className:"social-member-DestinationExpertInfo__list_links--2bS1w",onClick:function t(n){return e(n,"profileFieldClick",{action:"DESTINATION_EXPERT_POI_CLICK"})}},t.state.showingExpandedList?ne(r):ne(r.slice(0,5)))}),!this.state.showingExpandedList&&r.length>5&&a.createElement("span",{onClick:function e(){t.setState({showingExpandedList:!0})},className:"social-member-DestinationExpertInfo__see_more--3mLVt"},Object(l.localize)("trips_see_more_CTA")))}return null}}]),t}(a.Component);n.d(t,"MemberBlock",function(){return y}),n.d(t,"MemberStats",function(){return M}),n.d(t,"MemberHeaderStats",function(){return z}),n.d(t,"getDisplayName",function(){return O}),n.d(t,"MemberBio",function(){return x}),n.d(t,"MemberCreated",function(){return D}),n.d(t,"MemberLink",function(){return B}),n.d(t,"MemberAvatarWithEdit",function(){return S}),n.d(t,"DestinationExpertInfo",function(){return ae})}}});
//# sourceMappingURL=social.member.4a4ffe86fe.js.map