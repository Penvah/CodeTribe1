(window.$WP=window.$WP||[]).push({id:"@ta/cross-sells.rendering",d:["vendor-babel","vendor-react-libs","ta-platform","@ta/cross-sells.shelves","@ta/cross-sells.items","@ta/cross-sells.logic","@ta/cross-sells.types","@ta/hotels.tracking","ta-common"],e:["./packages/cross-sells/rendering/index.jsx"],x:{"./packages/common/webview/NativeBridge.jsx":["isActionSupported","postToBridge","hideSkeleton","onNewOrUpdatedScreen","showNativeOverflowMenu","showNativeMap","showNativeCreateTrip","showNativeShareTrip","showSavesModal","showRegistration","close","startScreenTransition","onOverlayStateChange","onHeaderHeightChange","onShrinkMap","onNavigateToTripDetail","onHandleTripCollaboration","onFlushBatchTracking","isNativeWebview","getHeaderHeight","onTripsRefetch","onTripUpdate","onTripItemDelete","onRefetchTripsWithItems"],"./packages/cross-sells/rendering/index.jsx":["LocationInOrNearViewPort","ShelfRenderer","ShelfItemRenderer","RenderConfigurations","PageLocation"]},m:{"./node_modules/chain-function/index.js":function(e,t){e.exports=function e(){for(var t=arguments.length,n=[],i=0;i<t;i++)n[i]=arguments[i];if(0!==(n=n.filter(function(e){return null!=e})).length)return 1===n.length?n[0]:n.reduce(function(e,t){return function n(){e.apply(this,arguments),t.apply(this,arguments)}})}},"./node_modules/dom-helpers/class/addClass.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function i(e,t){e.classList?e.classList.add(t):(0,r.default)(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))};var r=function o(e){return e&&e.__esModule?e:{default:e}}(n("./node_modules/dom-helpers/class/hasClass.js"));e.exports=t.default},"./node_modules/dom-helpers/class/hasClass.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function i(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")},e.exports=t.default},"./node_modules/dom-helpers/class/removeClass.js":function(e,t,n){"use strict";function i(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}e.exports=function e(t,n){t.classList?t.classList.remove(n):"string"==typeof t.className?t.className=i(t.className,n):t.setAttribute("class",i(t.className&&t.className.baseVal||"",n))}},"./node_modules/dom-helpers/transition/properties.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.animationEnd=t.animationDelay=t.animationTiming=t.animationDuration=t.animationName=t.transitionEnd=t.transitionDuration=t.transitionDelay=t.transitionTiming=t.transitionProperty=t.transform=void 0;var i="transform",r=void 0,o=void 0,a=void 0,s=void 0,l=void 0,c=void 0,u=void 0,d=void 0,f=void 0,p=void 0,m=void 0;if(function h(e){return e&&e.__esModule?e:{default:e}}(n("./node_modules/dom-helpers/util/inDOM.js")).default){var v=function g(){for(var e=document.createElement("div").style,t={O:function e(t){return"o"+t.toLowerCase()},Moz:function e(t){return t.toLowerCase()},Webkit:function e(t){return"webkit"+t},ms:function e(t){return"MS"+t}},n=Object.keys(t),i=void 0,r=void 0,o="",a=0;a<n.length;a++){var s=n[a];if(s+"TransitionProperty"in e){o="-"+s.toLowerCase(),i=t[s]("TransitionEnd"),r=t[s]("AnimationEnd");break}}return!i&&"transitionProperty"in e&&(i="transitionend"),!r&&"animationName"in e&&(r="animationend"),e=null,{animationEnd:r,transitionEnd:i,prefix:o}}();r=v.prefix,t.transitionEnd=o=v.transitionEnd,t.animationEnd=a=v.animationEnd,t.transform=i=r+"-"+i,t.transitionProperty=s=r+"-transition-property",t.transitionDuration=l=r+"-transition-duration",t.transitionDelay=u=r+"-transition-delay",t.transitionTiming=c=r+"-transition-timing-function",t.animationName=d=r+"-animation-name",t.animationDuration=f=r+"-animation-duration",t.animationTiming=p=r+"-animation-delay",t.animationDelay=m=r+"-animation-timing-function"}t.transform=i,t.transitionProperty=s,t.transitionTiming=c,t.transitionDelay=u,t.transitionDuration=l,t.transitionEnd=o,t.animationName=d,t.animationDuration=f,t.animationTiming=p,t.animationDelay=m,t.animationEnd=a,t.default={transform:i,end:o,property:s,timing:c,delay:u,duration:l}},"./node_modules/dom-helpers/util/inDOM.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=!("undefined"==typeof window||!window.document||!window.document.createElement),e.exports=t.default},"./node_modules/dom-helpers/util/requestAnimationFrame.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=function o(e){return e&&e.__esModule?e:{default:e}}(n("./node_modules/dom-helpers/util/inDOM.js")),a="clearTimeout",s=function l(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-u)),i=setTimeout(e,n);return u=t,i},c=function e(t,n){return t+(t?n[0].toUpperCase()+n.substr(1):n)+"AnimationFrame"};r.default&&["","webkit","moz","o","ms"].some(function(e){var t=c(e,"request");if(t in window)return a=c(e,"cancel"),s=function e(n){return window[t](n)}});var u=(new Date).getTime();(i=function e(t){return s(t)}).cancel=function(e){window[a]&&"function"==typeof window[a]&&window[a](e)},t.default=i,e.exports=t.default},"./node_modules/react-css-transition-replace/lib/ReactCSSTransitionReplace.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=p(n("react")),l=n("react-dom"),c=(p(n("prop-types")),p(n("./node_modules/chain-function/index.js"))),u=p(n("./node_modules/warning/browser.js")),d=p(n("./node_modules/dom-helpers/util/requestAnimationFrame.js")),f=p(n("./node_modules/react-css-transition-replace/lib/ReactCSSTransitionReplaceChild.js"));function p(e){return e&&e.__esModule?e:{default:e}}n("./node_modules/react-css-transition-replace/lib/utils/PropTypes.js");var m=s.default.createFactory(f.default),h=(r=i=function(e){function t(n,i){!function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,i));return o.handleDoneAppearing=function(e){delete o.transitioningKeys[e],e!==o.state.currentKey&&o.performLeave(e)},o.performLeave=function(e){o.transitioningKeys[e]=!0,o.childRefs[e].componentWillLeave(o.handleDoneLeaving.bind(o,e)),o.state.currentChild&&(0,l.findDOMNode)(o.childRefs[o.state.currentKey])||o.enqueueHeightTransition()},o.performHeightTransition=function(){if(!o.unmounted){var e=o.state,t=e.currentChild?(0,l.findDOMNode)(o.childRefs[e.currentKey]):null;o.setState({height:t?t.offsetHeight:0,width:o.props.changeWidth?t?t.offsetWidth:0:null})}o.rafHandle=null},o.childRefs=Object.create(null),o.state={currentKey:"1",currentChild:o.props.children?s.default.Children.only(o.props.children):void 0,prevChildren:{},height:null,width:null},o}return function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf,function n(e,t){for(var n=Object.getOwnPropertyNames(t),i=0;i<n.length;i++){var r=n[i],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}(t,e),t.prototype.componentWillMount=function e(){this.shouldEnterCurrent=!1,this.keysToLeave=[],this.transitioningKeys={}},t.prototype.componentDidMount=function e(){this.props.transitionAppear&&this.state.currentChild&&this.performAppear(this.state.currentKey)},t.prototype.componentWillUnmount=function e(){this.unmounted=!0},t.prototype.componentWillReceiveProps=function e(t){var n=t.children?s.default.Children.only(t.children):void 0,i=this.state.currentChild;if(i&&n&&n.key===i.key&&!this.state.nextChild)return this.setState({currentChild:n});var r=this.state,o=r.currentKey,c=r.prevChildren,u={currentKey:String(Number(o)+1),currentChild:n,height:0,width:this.props.changeWidth?0:null};if(n&&(this.shouldEnterCurrent=!0),i){var d,f=(0,l.findDOMNode)(this.childRefs[o]);u.height=f?f.offsetHeight:0,u.width=this.props.changeWidth?f?f.offsetWidth:0:null,u.prevChildren=a({},c,((d={})[o]=i,d)),this.transitioningKeys[o]||this.keysToLeave.push(o)}this.setState(u)},t.prototype.componentDidUpdate=function e(){this.shouldEnterCurrent&&(this.shouldEnterCurrent=!1,(0,l.findDOMNode)(this.childRefs[this.state.currentKey])&&this.performEnter(this.state.currentKey));var t=this.keysToLeave;this.keysToLeave=[],t.forEach(this.performLeave)},t.prototype.performAppear=function e(t){this.transitioningKeys[t]=!0,this.childRefs[t].componentWillAppear(this.handleDoneAppearing.bind(this,t))},t.prototype.performEnter=function e(t){this.transitioningKeys[t]=!0,this.childRefs[t].componentWillEnter(this.handleDoneEntering.bind(this,t)),this.enqueueHeightTransition()},t.prototype.handleDoneEntering=function e(t){delete this.transitioningKeys[t],t===this.state.currentKey?this.setState({height:null}):this.performLeave(t)},t.prototype.handleDoneLeaving=function e(t){delete this.transitioningKeys[t];var n={prevChildren:a({},this.state.prevChildren)};delete n.prevChildren[t],delete this.childRefs[t],this.state.currentChild&&(0,l.findDOMNode)(this.childRefs[this.state.currentKey])||(n.height=null),this.setState(n)},t.prototype.enqueueHeightTransition=function e(){this.rafHandle||(this.rafHandle=(0,d.default)(this.performHeightTransition))},t.prototype.wrapChild=function e(t,n){var i=this.props.transitionName;return"object"===(void 0===i?"undefined":o(i))&&null!==i&&delete(i=a({},i)).height,m(a({name:i,appear:this.props.transitionAppear,enter:this.props.transitionEnter,leave:this.props.transitionLeave,appearTimeout:this.props.transitionAppearTimeout,enterTimeout:this.props.transitionEnterTimeout,leaveTimeout:this.props.transitionLeaveTimeout},n),t)},t.prototype.storeChildRef=function e(t,n){var i=this,r="string"!=typeof t.ref;return(0,u.default)(r,"string refs are not supported on children of ReactCSSTransitionReplace and will be ignored. Please use a callback ref instead: https://facebook.github.io/react/docs/refs-and-the-dom.html#the-ref-callback-attribute"),(0,c.default)(r?t.ref:null,function(e){i.childRefs[n]=e})},t.prototype.render=function e(){var t=this,n=this.state,i=n.currentKey,r=n.currentChild,o=n.prevChildren,l=n.height,c=n.width,u=[],d=this.props,f=d.overflowHidden,p=d.transitionName,m=d.component,h=d.childComponent,v=d.notifyLeaving,g=(d.transitionAppear,d.transitionEnter,d.transitionLeave,d.changeWidth,d.transitionAppearTimeout,d.transitionEnterTimeout,d.transitionLeaveTimeout,function y(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}(d,["overflowHidden","transitionName","component","childComponent","notifyLeaving","transitionAppear","transitionEnter","transitionLeave","changeWidth","transitionAppearTimeout","transitionEnterTimeout","transitionLeaveTimeout"])),b=this.shouldEnterCurrent||this.keysToLeave.length||Object.keys(this.transitioningKeys).length;if(g.style=a({},g.style),b&&(g.style.position="relative",f&&(g.style.overflow="hidden")),null!==l){var w="string"==typeof p?p+"-height":p&&p.height||"";g.className=String(g.className||"")+" "+String(w),g.style.height=l}null!==c&&(g.style.width=c);var S={position:"absolute",top:0,left:0,right:0,bottom:0,userSelect:"none"};return Object.keys(o).forEach(function(e){var n=o[e];u.push(s.default.createElement(h,{key:e,style:S},t.wrapChild(v&&"string"!=typeof n.type?s.default.cloneElement(n,{isLeaving:!0}):n,{ref:t.storeChildRef(n,e)})))}),r&&u.push(s.default.createElement(h,{key:i,style:this.transitioningKeys[i]?S:b?{position:"relative"}:null},this.wrapChild(r,{ref:this.storeChildRef(r,i)}))),s.default.createElement(m,g,u)},t}(s.default.Component),i.displayName="ReactCSSTransitionReplace",i.defaultProps={transitionAppear:!1,transitionEnter:!0,transitionLeave:!0,overflowHidden:!0,changeWidth:!1,notifyLeaving:!1,component:"div",childComponent:"span"},r);t.default=h,e.exports=t.default},"./node_modules/react-css-transition-replace/lib/ReactCSSTransitionReplaceChild.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=m(n("./node_modules/dom-helpers/class/addClass.js")),s=m(n("./node_modules/dom-helpers/class/removeClass.js")),l=m(n("./node_modules/dom-helpers/util/requestAnimationFrame.js")),c=n("./node_modules/dom-helpers/transition/properties.js"),u=m(n("react")),d=m(n("prop-types")),f=n("react-dom"),p=n("./node_modules/react-css-transition-replace/lib/utils/PropTypes.js");function m(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var v=[];c.transitionEnd&&v.push(c.transitionEnd),c.animationEnd&&v.push(c.animationEnd),d.default.node,p.nameShape.isRequired,d.default.bool,d.default.bool,d.default.bool,d.default.number,d.default.number,d.default.number;var g=(r=i=function(e){function t(){var n,i;!function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return n=i=h(this,e.call.apply(e,[this].concat(a))),i.componentWillAppear=function(e){i.props.appear?i.transition("appear",e,i.props.appearTimeout):e()},i.componentWillEnter=function(e){i.props.enter?i.transition("enter",e,i.props.enterTimeout):e()},i.componentWillLeave=function(e){i.props.leave?i.transition("leave",e,i.props.leaveTimeout):e()},h(i,n)}return function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf,function n(e,t){for(var n=Object.getOwnPropertyNames(t),i=0;i<n.length;i++){var r=n[i],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}(t,e),t.prototype.componentWillMount=function e(){this.classNameAndNodeQueue=[],this.transitionTimeouts=[]},t.prototype.componentWillUnmount=function e(){this.unmounted=!0,this.timeout&&clearTimeout(this.timeout),this.transitionTimeouts.forEach(function(e){clearTimeout(e)}),this.classNameAndNodeQueue.length=0},t.prototype.transition=function e(t,n,i){var r=(0,f.findDOMNode)(this);if(r){var o=this.props.name[t]||this.props.name+"-"+t,l=this.props.name[t+"Active"]||o+"-active",u=null,d=void 0;(0,a.default)(r,o),this.queueClassAndNode(l,r);var p=function e(t){t&&t.target!==r||(clearTimeout(u),d&&d(),(0,s.default)(r,o),(0,s.default)(r,l),d&&d(),n&&n())};i?(u=setTimeout(p,i),this.transitionTimeouts.push(u)):c.transitionEnd&&(d=function m(e,t){return v.length?v.forEach(function(n){return e.addEventListener(n,t,!1)}):setTimeout(t,0),function(){v.length&&v.forEach(function(n){return e.removeEventListener(n,t,!1)})}}(r,p))}else n&&n()},t.prototype.queueClassAndNode=function e(t,n){var i=this;this.classNameAndNodeQueue.push({className:t,node:n}),this.rafHandle||(this.rafHandle=(0,l.default)(function(){return i.flushClassNameAndNodeQueueOnNextFrame()}))},t.prototype.flushClassNameAndNodeQueueOnNextFrame=function e(){var t=this;this.rafHandle=(0,l.default)(function(){return t.flushClassNameAndNodeQueue()})},t.prototype.flushClassNameAndNodeQueue=function e(){this.unmounted||this.classNameAndNodeQueue.forEach(function(e){e.node.scrollTop,(0,a.default)(e.node,e.className)}),this.classNameAndNodeQueue.length=0,this.rafHandle=null},t.prototype.render=function e(){var t=o({},this.props);return delete t.name,delete t.appear,delete t.enter,delete t.leave,delete t.appearTimeout,delete t.enterTimeout,delete t.leaveTimeout,delete t.children,u.default.cloneElement(u.default.Children.only(this.props.children),t)},t}(u.default.Component),i.displayName="CSSTransitionGroupChild",r);t.default=g,e.exports=t.default},"./node_modules/react-css-transition-replace/lib/utils/PropTypes.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.nameShape=void 0,t.transitionTimeout=function i(e){var t="transition"+e+"Timeout",n="transition"+e;return function(e){if(e[n]){if(null==e[t])return new Error(t+" wasn't supplied to CSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!=typeof e[t])return new Error(t+" must be a number (in milliseconds)")}return null}};var r=function o(e){return e&&e.__esModule?e:{default:e}}(n("prop-types"));t.nameShape=r.default.oneOfType([r.default.string,r.default.shape({enter:r.default.string,leave:r.default.string,active:r.default.string,height:r.default.string}),r.default.shape({enter:r.default.string,enterActive:r.default.string,leave:r.default.string,leaveActive:r.default.string,appear:r.default.string,appearActive:r.default.string,height:r.default.string,heightActive:r.default.string})])},"./node_modules/warning/browser.js":function(e,t,n){"use strict";e.exports=function(){}},"./packages/common/webview/NativeBridge.jsx":function(e,t,n){"use strict";function i(e){var t="";if(null!=e.tapCallback){var n=e.tapCallback,i="nativeInterop"+function r(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+e()+e()+e()+e()+e()+e()}();window[i]=function(){null!=n&&n()},t=i,e.tapFunction=t,e.tapCallback=null}}function r(){return"undefined"!=typeof window&&window.taBridgeContext?(window.bridge||function e(){var e,t,n;window.bridge||(window.bridge=(e=[],t=0,n=[],document.addEventListener("PacificDidReceiveNativeCallback",function(t){if(t.detail){var n=t.detail,i=isNaN(parseInt(n.id))?-1:parseInt(n.id);-1!=i&&(e[i]&&e[i](n.parameters,n.error),delete e[i])}},!1),document.addEventListener("PacificDidReceiveNativeBroadcast",function(e){if(e.detail){var t=e.detail,i=t.name;if(void 0!==i&&n[i]){var r=n[i];if(r instanceof Array){var o=t.parameters;r.forEach(function(e){e(o)})}}}},!1),{post:function n(i,r,o,a,s){var l=t++;e[l]=a,window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.pacific?window.webkit.messageHandlers.pacific.postMessage({action:i,parameters:r,uid:o,callback:l,print:s||0}):window.pacific&&window.pacific.postMessage(JSON.stringify({action:i,parameters:r,uid:o,callback:l,print:s||0}))},on:function e(t,i){var r=n[t];return r||(n[t]=r=[]),r.push(i),function(){r[indexOf(r,i)]=null}},off:function e(t){delete n[t]}}))}(),window.taBridgeContext.uid):null}function o(e,t){if("undefined"==typeof window||!window.taBridgeContext||!window.taBridgeContext.actions)return!1;var n=window.taBridgeContext.actions[e];return!(!n||!n.v)&&t===n.v}function a(e,t,n){r()&&(e?window.bridge.on(t,n):window.bridge.off(t))}function s(e){e.items.forEach(function(e,t){i(e)})}function l(e,t,n){var i=r();return!(!i||!o(e,t)||(window.bridge.post(e,n||{},i),0))}function c(){l("hideSkeleton",1,null)}function u(e){!function t(e){null!=e.trailingMenuItems&&e.trailingMenuItems.forEach(function(e,t){var n=e;i(n),null!=n.nestedMenu&&s(n.nestedMenu)})}(e.navigation),l("onNewOrUpdatedScreen",1,e)}function d(e){s(e),l("overflowMenu",1,e)}function f(){o("map",2)?l("map",2,null):l("map",1,null)}function p(e){l("createTrip",1,{isPublic:e})}function m(e){l("shareTrip",1,e)}n.r(t),n.d(t,"isActionSupported",function(){return o}),n.d(t,"postToBridge",function(){return l}),n.d(t,"hideSkeleton",function(){return c}),n.d(t,"onNewOrUpdatedScreen",function(){return u}),n.d(t,"showNativeOverflowMenu",function(){return d}),n.d(t,"showNativeMap",function(){return f}),n.d(t,"showNativeCreateTrip",function(){return p}),n.d(t,"showNativeShareTrip",function(){return m}),n.d(t,"showSavesModal",function(){return h}),n.d(t,"showRegistration",function(){return v}),n.d(t,"close",function(){return g}),n.d(t,"startScreenTransition",function(){return y}),n.d(t,"onOverlayStateChange",function(){return b}),n.d(t,"onHeaderHeightChange",function(){return w}),n.d(t,"onShrinkMap",function(){return S}),n.d(t,"onNavigateToTripDetail",function(){return C}),n.d(t,"onHandleTripCollaboration",function(){return T}),n.d(t,"onFlushBatchTracking",function(){return N}),n.d(t,"isNativeWebview",function(){return E}),n.d(t,"getHeaderHeight",function(){return I}),n.d(t,"onTripsRefetch",function(){return O}),n.d(t,"onTripUpdate",function(){return k}),n.d(t,"onTripItemDelete",function(){return _}),n.d(t,"onRefetchTripsWithItems",function(){return D});var h=function e(t){o("presentSavesModal",2)?l("presentSavesModal",2,t):l("presentSavesModal",1,{itemId:t.id})},v=function e(t){l("showReg",1,{dismissOnCancellation:t})};function g(){l("close",1,null)}function y(){l("startScreenTransition",1,null)}function b(e){l(e?"overlayShown":"overlayHidden",1,null)}function w(e,t){a(e,"updateHeaderHeight",t)}function S(e,t){a(e,"shrinkMap",t)}function C(e,t){a(e,"navigateToTripDetail",t)}function T(e,t){a(e,"handleTripCollaboration",t)}function N(e,t){a(e,"flushBatchTracking",t)}function E(){return null!=r()}function I(){if("undefined"!=typeof window&&void 0!==window.localStorage&&void 0!==window.localStorage.headerHeight){var e=window.localStorage.headerHeight;return"string"==typeof e&&(e=parseInt(e,10)),e}return 0}function O(e,t){a(e,"refetchTrips",t)}function k(e){l("tripUpdate",1,e)}function _(e){l("tripItemDelete",1,e)}function D(e,t){a(e,"refetchTripsWithItems",t)}},"./packages/cross-sells/rendering/index.jsx":function(e,t,n){"use strict";n.r(t);var i=n("@babel/runtime/helpers/esm/classCallCheck"),r=n.n(i),o=n("@babel/runtime/helpers/esm/createClass"),a=n.n(o),s=n("@babel/runtime/helpers/esm/possibleConstructorReturn"),l=n.n(s),c=n("@babel/runtime/helpers/esm/getPrototypeOf"),u=n.n(c),d=n("@babel/runtime/helpers/esm/inherits"),f=n.n(d),p=n("@babel/runtime/helpers/esm/assertThisInitialized"),m=n.n(p),h=n("@babel/runtime/helpers/esm/defineProperty"),v=n.n(h),g=n("react"),y=n("react-redux"),b=n("@ta/common.state"),w=n("@ta/common.is-visible"),S=n("@babel/runtime/helpers/esm/objectSpread"),C=n.n(S),T=n("@ta/common.features"),N=n("@ta/cross-sells.logic"),E=n("@ta/cross-sells.types"),I=n("@ta/cross-sells.shelves"),O=function e(t){var n=t.hidden,i=t.className,r=t.children;return g.createElement("div",{className:"".concat(i," ").concat(n?"cross-sells-rendering-Hideable__hidden--2wREY":"")},r)};O.defaultProps={className:"",children:null};var k=O,_=function e(t){var n=t.hidden,i=t.children;return g.createElement(k,{className:"block_wrap ui_section",hidden:n},i)};_.defaultProps={hidden:!1,children:null};var D=_,j=n("./node_modules/react-css-transition-replace/lib/ReactCSSTransitionReplace.js"),L=n.n(j),R=n("@babel/runtime/helpers/esm/toConsumableArray"),A=n.n(R),M=n("./packages/common/webview/NativeBridge.jsx"),H=n("@ta/cross-sells.items"),P=n("@ta/hotels.tracking"),x=n.n(P),K=n("@ta/common.tracking"),W=function e(t){var n=t.shelfItemStyle,i=Object(H.getItemComponentsFromStyle)(n).Loading;return g.createElement(i,null)};W.defaultProps={shelfItemStyle:H.ItemStyles.LARGE};var F=function(e){function t(){var e,n;r()(this,t);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=l()(this,(e=u()(t)).call.apply(e,[this].concat(o))),v()(m()(m()(n)),"sponsoredListingImpressionHandler",function(){var e=n.props,t=e.shelfItem,i=e.shelfItemTrackingInfo;Object(N.sponsoredListingImpressionHandler)(i,t.sponsoredListingInfo)}),v()(m()(m()(n)),"customClickHandler",function(){var e=n.props,t=e.shelfItem,i=e.shelfItemTrackingInfo;Object(N.sponsoredListingClickHandler)(t.sponsoredListingInfo,i.locationId,i.indexInList,i.listingKey),Object(N.gaRecordClickHandler)(i)}),v()(m()(m()(n)),"createShelfItem",function(e){var t=n.props,i=t.shelfItemStyle,r=t.shelfItem,o=t.shelfItemTrackingInfo,a=t.servletName,s=Object(H.getItemComponentsFromStyle)(i),l=s.Item,c=s.itemLinkClassName,u=s.itemContainerClassName;return g.createElement(H.ItemInteractions,{detailUrl:r.location.detailUrl,onClick:function t(){return e(P.INTERACTIONS_SOURCE_ELEMENTS.HOTEL_LISTING)},onViewedOnce:n.sponsoredListingImpressionHandler,linkClassName:c,containerClassName:u},null!=o.suppressedSponsoredLocationId&&g.createElement(K.Track,{mount:{module:"sp_suppression_test|".concat(a),action:"selection",context:o.suppressedSponsoredLocationId.toString()}},g.createElement(g.Fragment,null)),g.createElement(l,{shelfItem:r,useMASThumbnail:Object(T.featureIsEnabled)("hotels_media_mas_cross_sells")}))}),n}return f()(t,e),a()(t,[{key:"render",value:function e(){var t=this.props.shelfItemTrackingInfo;return g.createElement(x.a,{hotelListingRenderer:this.createShelfItem,customClickHandler:this.customClickHandler,listingKey:t.listingKey,impressionKey:t.impressionKey,locationId:t.locationId,interactionsParamName:P.INTERACTIONS_PARAM_NAMES.HOTEL_REVIEW_SERVLET})}}]),t}(g.Component);v()(F,"defaultProps",{shelfItemStyle:H.ItemStyles.LARGE});var G=Object(y.connect)(function(e){return{servletName:e.route.page}})(F),U=function e(t){var n=t.accommodations,i=t.shelfItemTrackingInfoSupplier,r=t.shelfItemStyle,o=n.map(function(e,t){return g.createElement(G,{key:"shelfItem-".concat(e.location.id),shelfItem:e,shelfItemTrackingInfo:i(e,t),shelfItemStyle:r})});return g.createElement("div",{className:"cross-sells-rendering-GridRenderer__borderContainer--6R99b"},g.createElement("div",{className:"cross-sells-rendering-GridRenderer__itemContainer--kweKh"},o),g.createElement(H.AmenitiesComparison,{accommodations:n}),g.createElement(H.AccommodationClassComparison,{accommodations:n}),g.createElement(H.LocationComparison,{accommodations:n}),g.createElement(H.ReviewsComparison,{accommodations:n}))},B={LARGE:{shelfStyle:I.ShelfStyles.LARGE,itemStyle:H.ItemStyles.LARGE},CONDENSED:{shelfStyle:I.ShelfStyles.CONDENSED,itemStyle:H.ItemStyles.CONDENSED},GRID:{shelfStyle:I.ShelfStyles.GRID,itemStyle:H.ItemStyles.GRID},NATIVE:{shelfStyle:I.ShelfStyles.NATIVE,itemStyle:H.ItemStyles.NATIVE}},V=function(e){function t(e){var n;r()(this,t),n=l()(this,u()(t).call(this,e)),v()(m()(m()(n)),"shelfTimingTracker",void 0),v()(m()(m()(n)),"reloadCount",0);var i={crossSellType:e.shelf.crossSellType,locationName:e.locationName,rowNumber:e.rowNumber};return n.shelfTimingTracker=new N.ShelfTimingTracker(i),n}return f()(t,e),a()(t,[{key:"shouldComponentUpdate",value:function e(t){return t.shelf.updateWithNewData}},{key:"render",value:function e(){var t=this,n=this.props,i=n.shelf,r=n.renderConfig,o=n.forceHide,a=n.rowNumber,s=n.locationName,l=n.requestNumber,c=i.displayState,u=i.accommodations,d=i.crossSellType,f=i.impressionKey,p=i.placementName,m=i.slotToSuppressedLocationId;if(o)return null;if(this.shelfTimingTracker.checkAndStopTracking(i),1===l&&(this.shelfTimingTracker.resetTime(),this.reloadCount+=1),c===E.DisplayState.HIDDEN)return M.isNativeWebview()&&M.postToBridge("insufficientCrossSells",1,null),null;var h,v=function e(t,n){return{impressionKey:f,placementName:p,listingKey:t.listingKey,locationId:t.location.id,pageLocation:s,indexInList:n,rowNumber:a,displayPrice:t.displayPrice,suppressedSponsoredLocationId:m[n]}};if(c===E.DisplayState.LOADING){var y=Object(N.getUIAssets)().maxAccommodations,b=y&&y[d]?y[d]:4;h=A()(Array(b)).map(function(e,t){return g.createElement(W,{key:"loading-".concat(t),shelfItemStyle:r.itemStyle})}),r.shelfStyle===I.ShelfStyles.GRID&&(h=g.createElement("div",{style:{display:"flex"}},h))}else h=r.shelfStyle===I.ShelfStyles.GRID?g.createElement(U,{accommodations:u,shelfItemTrackingInfoSupplier:v,shelfItemStyle:r.itemStyle}):u.map(function(e,t){return g.createElement(G,{key:"shelfItem-".concat(e.location.id),shelfItem:e,shelfItemTrackingInfo:v(e,t),shelfItemStyle:r.itemStyle})});var S=Object(I.getShelfComponentFromStyle)(r.shelfStyle);return g.createElement(w.IsVisibleOnce,{key:"is-visible-once-".concat(this.reloadCount),onIsVisibleCallback:function e(){return t.shelfTimingTracker.startTracking(i,t.reloadCount)}},g.createElement(S,{title:Object(N.getTitleForCrossSellType)(d),seeAllUrl:Object(N.getSeeAllUrlForCrossSellType)(d),crossSellType:d},h))}}]),t}(g.Component);v()(V,"defaultProps",{renderConfig:B.LARGE,forceHide:!1});var q=Object(y.connect)(function(e){var t,n;return{requestNumber:(null===(t=e.page)||void 0===t?void 0:null===(n=t.crossSells)||void 0===n?void 0:n.requestNumber)||0}})(V),Q=n("@ta/common.i18n"),z=n("@ta/styleguide.icon"),$=function e(t){var n=t.isOpen,i=t.onClick,r=n?Object(Q.localize)("p13n_show_less_341"):Object(Q.localize)("p13n_show_more_341"),o=n?"caret-up":"caret-down";return g.createElement("div",{className:"cross-sells-rendering-FooterControl__controller--2zU6x",onClick:i},g.createElement("div",{className:"cross-sells-rendering-FooterControl__text--3G7pX"},r),g.createElement(z.Icon,{name:o}))};$.defaultProps={isOpen:!0,onClick:function e(){}};var J=g.memo($),Y={enter:"cross-sells-rendering-CollapsibleFooter__collapse-enter--1uE8E",enterActive:"cross-sells-rendering-CollapsibleFooter__collapse-enter-active--2vz6r",leave:"cross-sells-rendering-CollapsibleFooter__collapse-leave--1JBci",leaveActive:"cross-sells-rendering-CollapsibleFooter__collapse-leave-active--3gOYJ",height:"cross-sells-rendering-CollapsibleFooter__collapse-height--2G2qW"},X=function(e){function t(){var e,n;r()(this,t);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=l()(this,(e=u()(t)).call.apply(e,[this].concat(o))),v()(m()(m()(n)),"state",{isOpen:!0}),v()(m()(m()(n)),"handleClick",function(){n.setState(function(e){return{isOpen:!e.isOpen}})}),n}return f()(t,e),a()(t,[{key:"render",value:function e(){var t=this,n=this.state.isOpen,i=this.props.shelves.map(function(e,i){return g.createElement(q,{shelf:e,forceHide:!n,renderConfig:t.props.renderConfig,key:e.crossSellType,locationName:t.props.locationName,rowNumber:i+1})}),r=n?g.createElement("div",{key:"open"},i):g.createElement("div",{key:"closed"},i),o=this.props.shelves.every(function(e){return e.displayState===E.DisplayState.HIDDEN});return g.createElement(k,{hidden:o},g.createElement(L.a,{transitionName:Y,transitionEnterTimeout:300,transitionLeaveTimeout:300},r),g.createElement(J,{isOpen:n,onClick:this.handleClick}))}}]),t}(g.Component),Z=function e(t){var n,i=t.locationData,r=t.renderConfig,o=i.crossSells,a=i.locationName,s=o.filter(function(e){return e.displayState!==E.DisplayState.HIDDEN}),l=s.length;if(0===l)return null;var c=s[0],u=g.createElement(I.Header,{title:Object(N.getDefaultShelfTitle)(),trackingId:"header_".concat(a),underline:!0}),d=g.createElement(q,{shelf:c,renderConfig:r,locationName:a,rowNumber:0,key:c.crossSellType});if(1===l)n=g.createElement(g.Fragment,null,u,d);else{var f=s.slice(1);n=g.createElement(g.Fragment,null,u,d,g.createElement(X,{shelves:f,locationName:a,renderConfig:r}))}return function e(t,n){return g.createElement(D,{locationName:t},n)}(a,n)},ee=function e(t){var n=t.locationData,i=t.renderConfig,r=n.crossSells,o=n.locationName;if(!r[0])return null;var a=r[0].displayState===E.DisplayState.HIDDEN;return g.createElement(D,{hidden:a,locationName:o},g.createElement(q,{shelf:r[0],locationName:n.locationName,rowNumber:0,renderConfig:i}))},te=function(e){function t(e){var n;return r()(this,t),(n=l()(this,u()(t).call(this,e))).state={isMultiShelves:void 0},n}return f()(t,e),a()(t,null,[{key:"getDerivedStateFromProps",value:function e(t,n){var i=t.locationData;if(!i)return null;var r=n?C()({},n):{};return r.isMultiShelves=i.crossSells.length>1,r}}]),a()(t,[{key:"render",value:function e(){var t=this.props.locationData;if(!t)return Object(T.featureIsEnabled)("hr_react_root_enable")?g.createElement("div",{className:"hidden block_wrap ui_section"}):null;var n=function e(t,n){switch(t){case"ar":return"cg"===n?B.GRID:B.CONDENSED;case"br":return"cg"===n?B.GRID:B.LARGE;case"fl":return B.NATIVE;default:return B.LARGE}}(this.props.locationName,this.props.xsellConfig);return this.state.isMultiShelves?g.createElement(Z,{locationData:t,renderConfig:n}):g.createElement(ee,{locationData:t,renderConfig:n})}}]),t}(g.Component),ne=Object(y.connect)(function(e,t){var n,i,r,o=null==e?void 0:null===(n=e.page)||void 0===n?void 0:null===(i=n.crossSells)||void 0===i?void 0:null===(r=i.endpointResults)||void 0===r?void 0:r.locationMap,a=null==o?void 0:o[t.locationName];return C()({},t,{locationData:a})})(te),ie=function(e){function t(){var e,n;r()(this,t);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=l()(this,(e=u()(t)).call.apply(e,[this].concat(o))),v()(m()(m()(n)),"visibilityChanged",function(){n.props.registerLocation(n.props.locationName)}),n}return f()(t,e),a()(t,[{key:"render",value:function e(){var n=g.createElement(ne,{locationName:this.props.locationName,xsellConfig:this.props.xsellConfig});return g.createElement(w.IsVisibleOnce,{threshold:t.getLoadOnScrollThreshold(),onIsVisibleCallback:this.visibilityChanged,makeWrapperHaveDimensions:!0},n)}}]),t}(g.Component);v()(ie,"getLoadOnScrollThreshold",function(){return 500});var re=g.memo(Object(y.connect)(null,{registerLocation:b.actions.page.hotelreview.registerLocation})(ie));n.d(t,"LocationInOrNearViewPort",function(){return re}),n.d(t,"ShelfRenderer",function(){return q}),n.d(t,"ShelfItemRenderer",function(){return G}),n.d(t,"RenderConfigurations",function(){return B}),n.d(t,"PageLocation",function(){return ne})}}});
//# sourceMappingURL=cross-sells.rendering.0d869c5b63.js.map