(window.$WP=window.$WP||[]).push({id:"@ta/social.socialproof",d:["vendor-babel","ta-platform","vendor-react-libs","vendor-apollo-libs"],e:["./packages/social/socialproof/socialprooftypes.jsx"],x:{"./packages/social/socialproof/socialprooftypes.jsx":["buildAndTrackContributionData","LocationContributionsPoller","createContributionsQuery","SocialProofLabel"]},m:{"./packages/social/socialproof/socialprooftypes.jsx":function(e,n,i){"use strict";i.r(n);var a=i("@babel/runtime/helpers/esm/objectSpread"),t=i.n(a),l=i("@ta/common.tracking"),o=i.n(l),r=function e(n,i){var a=function e(n,i){var a="";if(null!=i&&(a="P:".concat(i,"/")),null!==n&&null!==n.trackingInfos&&n.trackingInfos.length>0){n.trackingInfos.forEach(function(e){a+="N:".concat(e.position,"/L:").concat(e.locId),a+="/CRC:".concat(e.connectionReviewCount),1===e.connectionReviewCount&&(a+="/CRA:".concat(e.connectionRating),a+="\\"),a+="\\\\\\"});var t="\\"===a.charAt(a.length-4)?4:3;a=a.substring(0,a.length-t)}return a}(function e(n){var i={trackingInfos:[]};return null!=n&&"FAILED"!==n.status&&null!==n.contributionsByLocation&&(i.trackingInfos=n.contributionsByLocation.map(function(e,n){return{locId:e.locationId,connectionReviewCount:e.userReviewContributions.length,connectionRating:e.userReviewContributions[0].rating,position:"".concat(n+1)}})),i}(n),i.module);o()(t()({},i,{trackingTree:a}))},d=i("@babel/runtime/helpers/esm/classCallCheck"),u=i.n(d),s=i("@babel/runtime/helpers/esm/createClass"),c=i.n(s),m=i("@babel/runtime/helpers/esm/possibleConstructorReturn"),k=i.n(m),v=i("@babel/runtime/helpers/esm/getPrototypeOf"),b=i.n(v),p=i("@babel/runtime/helpers/esm/inherits"),g=i.n(p),N=i("@babel/runtime/helpers/esm/assertThisInitialized"),f=i.n(N),y=i("@babel/runtime/helpers/esm/defineProperty"),S=i.n(y),C=i("react"),I=i("react-apollo"),F=i("react-redux"),V=i("@ta/common.throttle"),T=i.n(V),h={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ConnectionContributions"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ConnectionContributionsResult"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contributionsByLocation"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"locationId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userReviewContributions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reviewId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"rating"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdDate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contributionReviewText"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"userDisplayInformation"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"username"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userProfile"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"followerCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contributionCounts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sumAllUgc"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"hometown"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"locationId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fallbackString"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"location"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"locationId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"additionalNames"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"long"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}]}}]}}],loc:{start:0,end:701}};h.loc.source={body:"78845297afa5"};var L=h,P={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"DetailContributionsQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"locationQueryId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"includePartialResults"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"placeType"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ContributionsPlaceTypeInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"connectionContributions"},arguments:[{kind:"Argument",name:{kind:"Name",value:"detailIds"},value:{kind:"ListValue",values:[{kind:"Variable",name:{kind:"Name",value:"locationQueryId"}}]}},{kind:"Argument",name:{kind:"Name",value:"geoIds"},value:{kind:"ListValue",values:[]}},{kind:"Argument",name:{kind:"Name",value:"placeTypes"},value:{kind:"ListValue",values:[{kind:"Variable",name:{kind:"Name",value:"placeType"}}]}},{kind:"Argument",name:{kind:"Name",value:"connectionTypes"},value:{kind:"ListValue",values:[{kind:"EnumValue",value:"ALL"}]}},{kind:"Argument",name:{kind:"Name",value:"contributionTypes"},value:{kind:"ListValue",values:[{kind:"EnumValue",value:"REVIEW"}]}},{kind:"Argument",name:{kind:"Name",value:"includePartialResults"},value:{kind:"Variable",name:{kind:"Name",value:"includePartialResults"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ConnectionContributions"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"locations"},arguments:[{kind:"Argument",name:{kind:"Name",value:"locationIds"},value:{kind:"ListValue",values:[{kind:"Variable",name:{kind:"Name",value:"locationQueryId"}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"locationId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:521}};P.loc.source={body:"2fc1975641ea"};var A={};P.definitions=P.definitions.concat(function D(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!A[n]&&(A[n]=!0,!0)})}(L.definitions));var R=P,E={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GeographicContributionsQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"locationQueryId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"includePartialResults"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"placeType"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ContributionsPlaceTypeInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"connectionContributions"},arguments:[{kind:"Argument",name:{kind:"Name",value:"detailIds"},value:{kind:"ListValue",values:[]}},{kind:"Argument",name:{kind:"Name",value:"geoIds"},value:{kind:"ListValue",values:[{kind:"Variable",name:{kind:"Name",value:"locationQueryId"}}]}},{kind:"Argument",name:{kind:"Name",value:"placeTypes"},value:{kind:"ListValue",values:[{kind:"Variable",name:{kind:"Name",value:"placeType"}}]}},{kind:"Argument",name:{kind:"Name",value:"connectionTypes"},value:{kind:"ListValue",values:[{kind:"EnumValue",value:"ALL"}]}},{kind:"Argument",name:{kind:"Name",value:"contributionTypes"},value:{kind:"ListValue",values:[{kind:"EnumValue",value:"REVIEW"}]}},{kind:"Argument",name:{kind:"Name",value:"includePartialResults"},value:{kind:"Variable",name:{kind:"Name",value:"includePartialResults"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ConnectionContributions"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"locations"},arguments:[{kind:"Argument",name:{kind:"Name",value:"locationIds"},value:{kind:"ListValue",values:[{kind:"Variable",name:{kind:"Name",value:"locationQueryId"}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:510}};E.loc.source={body:"bfdcf381c3a5"};var j={};E.definitions=E.definitions.concat(function w(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!j[n]&&(j[n]=!0,!0)})}(L.definitions));var O=E,Q=4,_=function e(n){var i=n.locationId,a={includePartialResults:!1,placeType:n.placeType||"ACCOMMODATION",locationQueryId:i||0};return{query:n.isGeographic?O:R,variables:a,errorPolicy:"all",skip:!n.loggedInUserId||!i||i<=0}},M=function(e){function n(e){var i;return u()(this,n),i=k()(this,b()(n).call(this,e)),S()(f()(f()(i)),"pollServer",T()(function(e,n){i.setState(function(e){return{repollCount:e.repollCount+1}},function(){i.state.repollCount>Q||e({includePartialResults:i.state.repollCount===Q,locationQueryId:n})})},1e3,!0)),i.state={repollCount:0},i}return g()(n,e),c()(n,[{key:"render",value:function e(){var n=this,i=this.props.children,a=_(this.props);return C.createElement(I.Query,{query:a.query,variables:a.variables,errorPolicy:a.errorPolicy,skip:a.skip},function(e){var t=e.data,l=e.loading,o=e.refetch;return l?i(null,!0):t&&t.connectionContributions?"COMPLETE"!==t.connectionContributions.status&&n.state.repollCount<=Q?(n.pollServer(o,a.variables.locationQueryId),i(null,!0)):t&&t.connectionContributions&&t.connectionContributions.contributionsByLocation&&t.connectionContributions.contributionsByLocation[0]&&t.connectionContributions.contributionsByLocation[0].userReviewContributions?i(t,!1):i(null,!1):i(null,!1)})}}]),n}(C.Component);S()(M,"defaultProps",{placeType:"ACCOMMODATION",isGeographic:!1});var B=function e(n){return{loggedInUserId:n.auth.loggedInUserId}},x=function e(n,i){return _(t()({},B(n),i))},q=Object(F.connect)(B)(M),U=i("@ta/common.i18n"),z=i("@ta/common.classnames"),W=i.n(z),G=i("@ta/common.logging"),$=i.n(G),H=function e(n){var i=n.object,a=W()("ui_link b",{verified:i.verified});return C.createElement(C.Fragment,null,Object(U.unescaped)(Object(U.localize)("social_label_Member_liked_this",{sMemberLinkClass:a,sMemberLink:"#",sMember:"Member Name"})))},J=function e(){return C.createElement(C.Fragment,null,Object(U.localize)("social_label_Suggested_for_you"))},K=function e(){return C.createElement(C.Fragment,null,Object(U.localize)("social_label_Trending"))},X=function e(n){var i;switch(n.socialProofLabel){case"liked":i=C.createElement(H,{object:n.object});break;case"suggested":i=C.createElement(J,{object:n.object});break;case"trending":i=C.createElement(K,{object:n.object});break;default:$.a.error("label Error - object is required.")}return C.createElement("div",{className:"social-socialproof-SocialProofLabel__label--1Utzt"},i)};i.d(n,"buildAndTrackContributionData",function(){return r}),i.d(n,"LocationContributionsPoller",function(){return q}),i.d(n,"createContributionsQuery",function(){return x}),i.d(n,"SocialProofLabel",function(){return X})}}});
//# sourceMappingURL=social.socialproof.15835008e5.js.map