require(['ta/rollupAmdShim'], function(rollupAmdShim) {rollupAmdShim.install(["servlets/responsivehotelreview-pl","facebook/authutils","google/authutils","ta/servlet/ShowSpecialOfferStub","ta/common/behavior/globalSideEffects","lib/jquery-amd","ta/Core/TA.Record","overlays/Overlay","overlays/styles/flyout","overlays/position","overlays/options/matchWidth","overlays/options/closeOnDocClick","overlays/options/autoReposition","overlays/options/fade","overlays/options/closeOnScroll","overlays/options/centerArrowOnSrcElement","overlays/options/repositionOnTaEvent","utils/urlDecoder","ta/util/Error","ta/util/ActionRecord","ta/util/Cookie","ta/popups/CookieSettingsPanel","ta/util/Currency","ta/Core/TA.PageVisibility","utils/ajax","ta/registration/RegEvents","utils/throttle","widget/components","ta/util/CommonMessagingUtil","api-mod","ta/Core/TA.Store","ta/Browser","ta/util/SessionStorage","commerce/offerclickEvents","ta/support/Qualtrics","ta/sales/metaClickComScoreTag","utils/cookieutils","common/page-filters","cpm/BannerResizeHandler","cpm/ResponsiveBannerResizeHandler","utils/ResponsiveEvents","cpm/AdBlockDetect","ta/servlet/ShowSpecialOffer","ta/common/Flyout","ta/util/Link","widget/rideService","mobile/lite/image-loader","ta/util/Element","maps/v3/mapStateController","maps/v3/models/eventTypes","maps/v3/models/ContentRequestParams","maps/v3/models/GeoPoint","overlays/styles/default","overlays/styles/windowshade","overlays/styles/translucentheader","overlays/position/conditional","overlays/position/fixed","overlays/position/fullscreen","overlays/options/repositionOnEvent","overlays/options/closeOnWindowshadeClick","overlays/options/keepInDom","overlays/options/disableBodyScroll","overlays/support/placement","dynamic-placement/loader","dynamic-placement/dom-renderer","maps/v3/hashHandler","maps/v3/map-loader","hotels/tracking/timing","utils/resize-invalidated-cache","ta/common/Swipe","ta/Core/TA.Dust","booking/common/features","overlays/loading-spinner","ajax-request","ta/util/ReCaptcha","ta/util/GeeTest","pages/inappropriate_vote_stub","hotels/HRContentBlockUtils","overlays/widgetoverlays","members/memberOverlay","overlays/styles/modal","overlays/options/closeOnEscape","overlays/options/ajax","overlays/options/disablePageScroll","overlays/uiOverlay","overlays/position/center","actions/openRespPhotoViewer","overlays/ajaxUtil","ta/registration/RegOverlay","ta/util/ajaxPreserves","attractions/ApdPlacementSectionUtil","sponsoredlisting/utils","ta/util/openNewTab","utils/animateH","utils/ScrollInContainer","ta/media/viewerScaffold","photoviewer/loader","ta/util/I18N","utils/VisibilityChecker","utils/PersistentFooterHelper","tab_bar/TabBar","tab_bar/ScrollPastBottom","tab_bar/MoreTab","tab_bar/HighlightActiveTab","tab_bar/StickyBar","mixins/page-dates/default-dates","common/DatePicker","hotels/RoomsGuests","overlays/styles/popover","overlays/styles/inlinepopup","overlays/position/animateFromLastSource","overlays/options/closeOnLegacyOverlay","overlays/options/closeAllOtherOverlaysOnShow","overlays/options/highlightElement","overlays/options/dimElement","overlays/options/blurSourceOnHide","ta/util/LegacyDateShim","hotels/RoomsGuestsUI","mixins/Events","mixins/page-dates/picker-autoadvance-corgi","utils/stringutils","utils/store","utils/objutils","mixins/page-dates/picker-autoadvance","overlays/options/closeOnTargetEvent"],["ta","page-model","ta","page-model","page-model","page-model","ta","ta","page-model","page-model","ta","ta","page-model","ta","ta/page","ta-i18n"]);});
if(window.requirejs && requirejs.taConfig)requirejs.taConfig({"deferred":{},"name":"build/concat/apg-Hotel_Review","files":{"js3_secure":{"ssl":{"ta":{"Core":{"TA.Record":1}}}},"js-amd":{"src":{"cpm":{"AdBlockDetect":1,"BannerResizeHandler":1},"booking":{"common":{"features":1}},"tab_bar":{"TabBar":1,"StickyBar":1,"ScrollPastBottom":1,"HighlightActiveTab":1,"MoreTab":1},"widget":{"rideService":1},"facebook":{"authutils":1},"mobile":{"lite":{"image-loader":1}},"google":{"authutils":1},"commerce":{"offerclickEvents":1},"ajax-request":1,"mixins":{"page-dates":{"default-dates":1,"picker-autoadvance-corgi":1,"picker-autoadvance":1},"Events":1},"common":{"DatePicker":1},"hotels":{"RoomsGuests":1,"HRContentBlockUtils":1},"utils":{"stringutils":1,"throttle":1,"ScrollInContainer":1,"urlDecoder":1,"VisibilityChecker":1,"objutils":1,"ResponsiveEvents":1,"store":1,"cookieutils":1,"ajax":1,"animateH":1},"api-mod":1,"members":{"memberOverlay":1},"overlays":{"ajaxUtil":1,"uiOverlay":1,"options":{"closeOnWindowshadeClick":1,"keepInDom":1,"closeAllOtherOverlaysOnShow":1,"autoReposition":1,"closeOnEscape":1,"dimElement":1,"closeOnLegacyOverlay":1,"ajax":1,"closeOnDocClick":1,"blurSourceOnHide":1,"fade":1,"closeOnTargetEvent":1,"matchWidth":1,"centerArrowOnSrcElement":1,"repositionOnEvent":1,"disablePageScroll":1,"highlightElement":1,"repositionOnTaEvent":1,"closeOnScroll":1},"widgetoverlays":1,"styles":{"default":1,"flyout":1,"translucentheader":1,"popover":1,"inlinepopup":1,"windowshade":1,"modal":1},"position":{"conditional":1,"fullscreen":1,"center":1,"animateFromLastSource":1,"fixed":1},"loading-spinner":1,"support":{"placement":1}},"servlets":{"responsivehotelreview-pl":1},"attractions":{"ApdPlacementSectionUtil":1},"actions":{"openRespPhotoViewer":1},"sponsoredlisting":{"utils":1}}},"js3":{"lib":{"jquery-amd":1},"build":{"es6":{"src":{"cpm":{"ResponsiveBannerResizeHandler":1},"widget":{"components":1},"common":{"page-filters":1},"maps":{"v3":{"map-loader":1,"models":{"GeoPoint":1,"eventTypes":1,"ContentRequestParams":1},"hashHandler":1,"mapStateController":1}},"hotels":{"RoomsGuestsUI":1,"tracking":{"timing":1}},"utils":{"resize-invalidated-cache":1,"PersistentFooterHelper":1},"overlays":{"options":{"disableBodyScroll":1},"Overlay":1},"dynamic-placement":{"dom-renderer":1,"loader":1},"photoviewer":{"loader":1}}}},"src":{"pages":{"inappropriate_vote_stub":1},"ta":{"common":{"Swipe":1,"Flyout":1,"behavior":{"globalSideEffects":1}},"util":{"Cookie":1,"ActionRecord":1,"Element":1,"Error":1,"ReCaptcha":1,"LegacyDateShim":1,"ajaxPreserves":1,"openNewTab":1,"GeeTest":1,"CommonMessagingUtil":1,"Currency":1,"SessionStorage":1,"Link":1,"I18N":1},"servlet":{"ShowSpecialOffer":1,"ShowSpecialOfferStub":1},"popups":{"CookieSettingsPanel":1},"registration":{"RegOverlay":1,"RegEvents":1},"media":{"viewerScaffold":1},"support":{"Qualtrics":1},"sales":{"metaClickComScoreTag":1},"Browser":1,"Core":{"TA.PageVisibility":1,"TA.Dust":1,"TA.Store":1}}}}},"_":{"baseUrl":"/"}});
define("utils/AjaxData",["ta","mixins/Events","lib/jquery-amd"],function(t,e,n){"use strict";function i(){}function a(t){function a(){return null!==s||null!==l}function r(){var t=a(),e=d,n=l;if(d=null,s=null,l=null,null!==n)try{n.abort()}catch(t){}return null!==e&&clearTimeout(e),t}function o(){var t=s;if(s=null,t){var e;t.success=function(n){l==e&&(l=null,v&&(y=n),f.data=n,f.error=void 0,f.dataVersion=++p,h(f,e,t.data),u.emit("update"))},t.error=function(n,i,a){l==e&&(l=null,f.data=y,f.dataVersion=++p,f.error={type:i,error:a,status:n.status,responseText:n.responseText},h(f,e,t.data),u.emit("update"))},e=c(t),l=e,u.emit("update")}}t=t||{};var u=new e("update"),d=null,s=null,l=null,f=this,p=0,c=t.ajaxFunc||n.ajax,h=t.transformer||i,m=t.dataType||"html",v=!!t.holdData,y=void 0;this.dataVersion=0,this.on=u.on.bind(u),this.off=u.off.bind(u),this.removeListener=u.removeListener.bind(u),this.isDone=function(){return!a()},this.isBusy=function(){return a()},this.clear=function(){var t=a()||"undefined"!=typeof this.data||"undefined"!=typeof this.error;r(),y=void 0,f.data=void 0,f.error=void 0,f.dataVersion=0,h(f),t&&u.emit("update")},this.refresh=function(t,e,n,i,a){r(),(!i||i<0)&&(i=0),s={type:t,url:e,data:n,dataType:m,xhrFields:{withCredentials:!0}},"undefined"!=typeof a&&(s.timeout=a),d=setTimeout(o,i),f.error=void 0,v||(f.data=void 0,h(f)),u.emit("update")},this.postJson=function(t,e,n,i){r(),n=n||0,n<0&&(n=0),s={beforeSend:function(t){t.setRequestHeader("Content-Type","application/json")},type:"POST",url:t,contentType:"application/json",data:JSON.stringify(e),dataType:m,xhrFields:{withCredentials:!0}},"undefined"!=typeof i&&(s.timeout=i),d=setTimeout(o,n),f.error=void 0,v||(f.data=void 0,h(f)),u.emit("update")}}return a});
require(['ta/rollupAmdShim'], function(rollupAmdShim) {rollupAmdShim.install(["mixins/Events","utils/browserutils","api-mod","utils/MouseAway","utils/resourceLoader","overlays/Overlay","overlays/utils","overlays/ajaxUtil","overlays/options/closeOnDocClick","overlays/options/delayedCloseOnDocClick","overlays/options/closeOnChildClick","overlays/options/closeOnSourceClick","overlays/options/closeOnWindowshadeClick","overlays/options/closeOnMouseOut","overlays/options/closeOnMouseAway","overlays/options/closeOnScroll","overlays/options/closeOnEscape","overlays/options/closeOnEvent","overlays/options/closeOnTaEvent","overlays/options/closeOnTargetEvent","overlays/options/closeOnLegacyOverlay","overlays/options/fireEventOnWindowshadeClick","overlays/options/hoverDelay","overlays/options/storeOverlayOnElement","overlays/options/fadeInOut","overlays/options/highlightElement","overlays/options/repositionOnEvent","overlays/options/repositionOnTaEvent","overlays/options/autoReposition","overlays/options/autosizePage","overlays/options/keepInDom","overlays/options/matchWidth","overlays/options/maxWidth","overlays/options/minWidth","overlays/options/ajax","overlays/options/centerArrowOnSrcElement","overlays/options/closeOnTargetChildClick","overlays/options/stickyClick","overlays/position","overlays/styles/modal","overlays/styles/popover","overlays/styles/tooltip","overlays/styles/windowshade","overlays/styles/dropdown","overlays/styles/notification","overlays/uiOverlay"],["ta","ta"]);});
if(window.requirejs && requirejs.taConfig)requirejs.taConfig({"deferred":{},"name":"build/concat/uiOverlays","files":{"js-amd":{"src":{"mixins":{"Events":1},"utils":{"browserutils":1,"resourceLoader":1,"MouseAway":1},"api-mod":1,"overlays":{"ajaxUtil":1,"uiOverlay":1,"utils":1,"options":{"closeOnTargetChildClick":1,"keepInDom":1,"autoReposition":1,"closeOnTaEvent":1,"ajax":1,"closeOnDocClick":1,"closeOnMouseOut":1,"closeOnSourceClick":1,"centerArrowOnSrcElement":1,"fadeInOut":1,"highlightElement":1,"storeOverlayOnElement":1,"autosizePage":1,"closeOnScroll":1,"stickyClick":1,"maxWidth":1,"closeOnWindowshadeClick":1,"closeOnEscape":1,"closeOnMouseAway":1,"minWidth":1,"closeOnLegacyOverlay":1,"closeOnChildClick":1,"closeOnTargetEvent":1,"matchWidth":1,"repositionOnEvent":1,"fireEventOnWindowshadeClick":1,"closeOnEvent":1,"repositionOnTaEvent":1,"delayedCloseOnDocClick":1,"hoverDelay":1},"styles":{"notification":1,"popover":1,"tooltip":1,"windowshade":1,"dropdown":1,"modal":1},"position":1}}},"js3":{"build":{"es6":{"src":{"overlays":{"Overlay":1}}}}}},"_":{"baseUrl":"/"}});
define("utils/MouseAway",["vanillajs","api-mod","ta","mixins/mixin","mixins/Events","utils/throttle"],function(t,o,e,r,n,i){"use strict";function l(t,o){var e=t.right<=o.left,r=t.left>=o.right,n=t.top>=o.bottom,i=t.bottom<=o.top;if(e||r){var l=e?"left":"right",u=e?"right":"left";return[[t[l],t.top],[o[l],o.top],[o[u],o.top],[o[u],o.bottom],[o[l],o.bottom],[t[l],t.bottom]]}if(n||i){var a=n?"bottom":"top",f=n?"top":"bottom";return[[t.right,t[a]],[o.right,o[a]],[o.right,o[f]],[o.left,o[f]],[o.left,o[a]],[t.left,t[a]]]}return null}function u(t,o){if(!o)return!1;for(var e=t[0],r=t[1],n=!1,i=0,l=o.length-1;i<o.length;l=i++){var u=o[i][0],a=o[i][1],f=o[l][0],s=o[l][1],m=a>r!=s>r&&e<(f-u)*(r-a)/(s-a)+u;m&&(n=!n)}return n}function a(t,e,r){var n=r.relatedTarget||r.target;if(!t||!e)return!1;if(o.containsElement(t,n)||o.containsElement(e,n))return!0;var i=l(o.getCoords(t),o.getCoords(e)),a=u([r.clientX+o.scrollLeft(),r.clientY+o.scrollTop()],i);return a}function f(t,e){r(this,new n("mouseAway")),o.addEvent(window,"mousemove",i(function(o){var r=a(t,e,o);r||this.emit("mouseAway")}).bind(this),300)}return f});
define("overlays/ajaxUtil",["vanillajs","ta","utils/object/shallow-copy","utils/AjaxData","mixins/Events","overlays/loading-spinner","utils/resourceLoader","amdloaders"],function(e,t,a,r,n,i,o,s){"use strict";function d(e,t){var a,r=[];for(a in t)t[a]&&r.push(a);r.sort();for(var n=e,i=n.indexOf("?")>=0?"&":"?",o=0;o<r.length;++o)a=r[o],n+=i+encodeURIComponent(a)+"="+encodeURIComponent(String(t[a])),i="&";return n}function u(){for(var e=0,t={},a=[],r=p.length-1;r>=0;--r){var n=p[r],i=g[n];i&&!t[n]&&(i.hasClients()||++e<=h)&&(t[n]=i,a.push(n))}return a.reverse(),g=t,p=a,m=p.length+h,p}function l(e,i){function d(){if(T){T=!1,u();for(var e=p.length-1;e>=0;--e){var t=g[p[e]];t.needsTravelInfo&&t.invalidate()}}}function l(){u();for(var e=p.length-1;e>=0;--e){var t=g[p[e]];t.invalidateOnPricingModeUpdate&&t.invalidate()}}function c(e,a,r,n,i,s,u){if(n=n&&t.page&&t.page.usingUnifiedDates){T=!0;var c=t.page.datesToQueryString("STAYDATES");!c&&i&&(c=t.page.defaultDatesToQueryString("STAYDATES")),c&&(a+="&"+c),y||(y=!0,t.page.on("dateSelected",d),t.page.on("guestsSelected",d),require(["trjs!common/Radio"],function(e){v||(v=e("web-component-pricingMode"),v.on("update",function(){l()}))}))}if(s>1){if(s>20)return;a+="&reqNum="+s,u>=0||(u=2e3)}else u=0;r?e.refresh("POST",a,r,u):e.refresh("GET",a,void 0,u),o.load(A,function(){S=!0,h()})}function h(){if(b.isBusy()||!S)return L&&clearTimeout(L),void(L=void 0);if(!b.data)return void(0!==b.dataVersion?E.error&&E.error===b.error||(E.error=b.error||"no content",L=L||setTimeout(m,0)):0!==j&&(V=q,j=b.dataVersion,U=[],P.hasListeners("update")&&(L=L||setTimeout(m,0))));if(j!==b.dataVersion){try{var e=document.createElement("div");e.innerHTML=b.data;var t=x,a=document.head||document.getElementsByTagName("head")[0];U=[],i.noScript||Array.prototype.forEach.call(e.querySelectorAll("script"),function(e){if(t){var r=document.createElement("script");r.setAttribute("type","text/javascript"),e.src&&(r.src=e.src),e.text&&(r.text=e.text),r.setAttribute("data-rup",e.getAttribute("data-rup")),a.appendChild(r),e.src||a.removeChild(r)}e.parentNode.removeChild(e)}),Array.prototype.forEach.call(e.querySelectorAll("style"),function(e){t?a.appendChild(e):e.parentNode.removeChild(e)}),Array.prototype.forEach.call(e.querySelectorAll("[data-targetEvent]"),function(e){U.push(e),e.parentNode.removeChild(e)}),t&&(x=!1,f[i.inlineResourceId]=!0),V=e.innerHTML,j=b.dataVersion,b.data=void 0}catch(e){E.error="invalid HTML"}L=L||setTimeout(m,0)}}function m(){var t,a=!P.hasListeners("update");for(L=void 0,E.data=V,E.dataVersion=j,P.emit("update");t=U.shift();){var r=t.getAttribute("data-targetEvent");if("repoll-required"===r){if(a)return U=[],E.data=V=q,void(E.dataVersion=j=0);++M>1||(M=2);var n=Number(t.getAttribute("data-delay"));c(b,e,i.reqParams,I,D,M,n)}else P.emit("data-targetEvent",r,t)}}var A,S,E=this,b=new r({dataType:"html",ajaxFunc:i.ajaxFunc}),P=new n("update","data-targetEvent"),q=i.loadingContent||C,x=!1,I=!!i.sendTravelInfo,R=!!i.invalidateOnPricingModeUpdate,D=I&&i.sendDefaultDates,L=void 0,V=q,j=b.dataVersion,U=[],M=0;this.error=void 0,this.loadingData=q,this.data=V,this.dataVersion=j,this.needsTravelInfo=I,this.invalidateOnPricingModeUpdate=R,this.on=P.on.bind(P),this.off=P.off.bind(P),this.removeListener=P.removeListener.bind(P),this.init=function(){b.on("update",h.bind(this))},this.isBusy=function(){return b.isBusy()||L},this.isDone=function(){return!b.isBusy()&&!L},this.invalidate=function(){b.clear(),M=0,this.hasClients()?c(b,e,i.reqParams,I,D,0,0):(E.data=V=q,E.dataVersion=j=0)},this.hasClients=function(){return P.hasListeners("update")},this.load=function(){if(!b.isBusy()){if(0!==b.dataVersion)return void setTimeout(function(){P.emit("update")},1);var t=i.reqParams,r=!i.isWidget||!i.inlineResourceId||!f[i.inlineResourceId];if(r){var n=s.getLoadedFilesParams();x=!0,t=t?a(t):{},t.haveJses=n.haveJses,t.haveCsses=n.haveCsses,i.isWidget&&(t.Action="install")}A=i.resources,M=0,c(b,e,t,I,D,0,0)}}}function c(e,t){var a=d(e,t.reqParams);a.length<128&&(e=a,t.reqParams=void 0);var r=g[a];return r||(r=new l(e,t),r.init(),t.noCache||(g[a]=r)),t.noCache||(p.push(a),p.length>m&&u()),r}var v,f={},h=10,p=[],g={},m=h,y=!1,T=!1,C=i();return{loadData:function(e,t){!t&&(t={});var a=c(e,t);return a.load(),a},loadOverlayWidget:function(e,t,r){var n="/OverlayWidgetAjax?Mode="+e;r?n+="&metaReferer="+encodeURIComponent(r):"string"==typeof crPageServlet&&(n+="&metaReferer="+encodeURIComponent(crPageServlet)),t=t?a(t):{},t.inlineResourceId=e,t.isWidget=!0;var i=c(n,t);return i.load(),i},cleanCache:u}});
define("overlays/options/delayedCloseOnDocClick",["api-mod"],function(t){"use strict";function e(e){if(!(this.sourceElement&&t.containsElement(this.sourceElement,e.target)||t.containsElement(this.container,e.target)||e.target&&("option"===e.target.tagName||t.hasClass(e.target,"ui_dropdown")||t.getParent(e.target,"ui_dropdown"))||t.checkBrowser("ie")&&e.target&&"select"==e.target.tagName&&t.containsEvent(e.target,e)&&t.select(this.container,"input").indexOf(e.target)))if(i&&i>0){var n=this;setTimeout(function(){n.hide("doc-click")},i)}else this.hide("doc-click")}function n(n){return function(o){return function(){var c=t.bind(e,this);i=o,this.on("show",function(){setTimeout(function(){this.isOpen()&&(t.addEvent(document,"click",c),n&&t.addEvent(document,"touchstart",c))}.bind(this),1)}).on("hide",function(){t.removeEvent(document,"click",c),n&&t.removeEvent(document,"touchstart",c)})}}}var i=0,o=n(!0);return o.withoutTouchEvents=n(!1),o});
define("overlays/options/closeOnChildClick",["vanillajs","api-mod"],function(t,n){"use strict";function i(t){n.containsElement(this.container,t.target)&&this.hide("child-click")}function e(t){return function(){var e=n.bind(i,this);this.on("show",function(){n.addEvent(this.domParent,"click",e),t&&n.addEvent(this.domParent,"touchstart",e)}).on("hide",function(){n.removeEvent(this.domParent,"click",e),t&&n.removeEvent(this.domParent,"touchstart",e)})}}var o=e(!0);return o.withoutTouchEvents=e(!1),o});
define("overlays/options/closeOnSourceClick",["vanillajs","api-mod"],function(t,e){"use strict";function n(t){e.containsElement(this.sourceElement,t.target)&&(this.hide("source-click"),t.stopPropagation(),t.preventDefault())}function i(t){return function(){var i=n.bind(this),o=function(t){setTimeout(t.bind(this),1)}.bind(this);this.on("show",o.bind(void 0,function(){e.addEvent(this.sourceElement,"click",i),t&&e.addEvent(this.sourceElement,"touchstart",i)})).on("hide",o.bind(void 0,function(){e.removeEvent(this.sourceElement,"click",i),t&&e.removeEvent(this.sourceElement,"touchstart",i)}))}}var o=i(!0);return o.withoutTouchEvents=i(!1),o});
define("overlays/options/closeOnWindowshadeClick",["vanillajs","api-mod"],function(i,n){"use strict";return function(){var i=this;n.addEvent(this.shade,"click",function(){i.hide("windowshade")})}});
define("overlays/options/closeOnMouseOut",["vanillajs","api-mod"],function(e,t){"use strict";function n(e){t.containsElement(this.sourceElement,e.relatedTarget)||t.containsElement(this.container,e.relatedTarget)||this.hide()}var o=function(){var e=t.bind(n,this);this.on("show",function(){t.addEvent(this.sourceElement,"mouseout",e),t.addEvent(this.container,"mouseout",e)}).on("hide",function(){t.removeEvent(this.sourceElement,"mouseout",e),t.removeEvent(this.container,"mouseout",e)})};return o});
define("overlays/options/closeOnMouseAway",["vanillajs","utils/MouseAway"],function(n,e){"use strict";var o=function(n){return function(){var o,t=new e(this.sourceElement,this.container),i=this.hide,u=i;n&&(u=function(){o=setTimeout(i,n)}),this.on("show",function(){t.on("mouseAway",u)}).on("hide",function(){t.off("mouseAway"),clearTimeout(o)})}},t=o(null);return t.withDelay=function(n){return o(n)},t});
define("overlays/options/closeOnScroll",["vanillajs","api-mod"],function(n,o){"use strict";var i=function(){this.on("show",function(){o.addEvent(window,"scroll",this.hide)}).on("hide",function(){o.removeEvent(window,"scroll",this.hide)})};return i});
define("overlays/options/closeOnEscape",["vanillajs","api-mod"],function(e,n){"use strict";function t(e){27===e.keyCode&&(e.preventDefault(),this.hide("escape"))}var o=function(){var e=n.bind(t,this);this.on("show",function(){n.addEvent(document,"keyup",e)}).on("hide",function(){n.removeEvent(document,"keyup",e)})};return o});
define("overlays/options/closeOnEvent",["vanillajs","api-mod"],function(n,t){"use strict";function i(){this.hide("on-event")}return function(n){return function(){var e=t.bind(i,this);this.on("show",function(){t.addEvent(this.domParent,n,e)}).on("hide",function(){t.removeEvent(this.domParent,n,e)})}}});
define("overlays/options/closeOnTaEvent",["vanillajs","ta/Core/TA.Event"],function(n,t){"use strict";function o(){this.hide("on-event")}return function(n){return function(){var i=o.bind(this);this.on("show",function(){t.on(n,i)}).on("hide",function(){t.off(n,i)})}}});
define("overlays/options/closeOnTargetEvent",["vanillajs","api-mod"],function(n,t){"use strict";function i(){this.hide("on-event")}return function(n,o){return function(){var e=o.splice?o:[o],c=i.bind(this);this.on("show",function(){e.forEach(function(i){t.addEvent(n,i,c)})}).on("hide",function(){e.forEach(function(i){t.removeEvent(n,i,c)})})}}});
define("overlays/options/closeOnLegacyOverlay",["vanillajs","ta/Core/TA.Event"],function(n,e){"use strict";return function(){e.on("onOverlayShow",this.hide.bind(this))}});
define("overlays/options/fireEventOnWindowshadeClick",["vanillajs","api-mod"],function(n,i){"use strict";var e=function(n){return function(){i.addEvent(this.shade,"click",function(){i.fireEvent(document,n,{})})}};return e});
define("overlays/options/hoverDelay",["vanillajs","api-mod"],function(e,t){"use strict";var i=function(e,i){return function(){var n=t.bind(function(){this.hoverTimer=setTimeout(this.show,e)},this),o=t.bind(function(){clearTimeout(this.hoverTimer)},this);t.addEvent(this.sourceElement,"mouseover",n),t.addEvent(this.sourceElement,"mouseout",o),i&&n()}};return i});
define("overlays/options/storeOverlayOnElement",["vanillajs","api-mod"],function(e,t){"use strict";var n=function(){this.sourceElement&&t.store(this.sourceElement,"overlay",this)};return n});
define("overlays/options/fadeInOut",["api-mod","utils/bindAll"],function(i,t){"use strict";var n={"fade_none":0,"fade_short":250,"fade_normal":500,"fade_long":1e3},e="fade_in";return function(s,o){return function(){if(s&&s in n){i.addClass(this.container,s);var a=n[s],d=i.bind(this.show,this),h=i.bind(this.hide,this),u=null;this.show=function(){d&&d(),setTimeout(function(){i.addClass(this.container,e)}.bind(this),0),clearTimeout(u),o&&(u=setTimeout(i.bind(this.hide,this),a+o))},this.hide=function(){i.removeClass(this.container,e),clearTimeout(u),u=setTimeout(function(){h&&h()},a)},t(this,"show","hide")}}}});
define("overlays/options/highlightElement",["api-mod"],function(i){"use strict";var n=function(n){function t(n){this.on("show",function(){i.addClass(n,"highlight")}).on("hide",function(){i.removeClass(n,"highlight")})}return arguments.length?function(){t.call(this,n)}:void t.call(this,this.sourceElement)};return n});
define("overlays/options/repositionOnEvent",["vanillajs","api-mod"],function(n,i){"use strict";function t(){this.emit("positionDirty")}return function(n,o){return function(){var e=o.splice?o:[o],c=i.bind(t,this);this.on("show",function(){e.forEach(function(t){i.addEvent(n,t,c)})}).on("hide",function(){e.forEach(function(t){i.removeEvent(n,t,c)})})}}});
define("overlays/options/repositionOnTaEvent",["vanillajs","ta/Core/TA.Event"],function(n,i){"use strict";return function(n){return function(){var t=this.emit.bind(this,"positionDirty");this.on("show",function(){i.on(n,t)}).on("hide",function(){i.off(n,t)})}}});
define("overlays/options/autoReposition",["vanillajs","overlays/options/repositionOnEvent"],function(o,n){return n(window,["resize","scroll"])});
define("overlays/options/autosizePage",["lib/jquery-amd","api-mod"],function(o,t){"use strict";return function(i,n){return function(){function n(){var n=t.getCoords(this.container),s=t.getSize(window);this._scrollTop||(this._scrollTop=t.scrollTop()),o(document.body).css("overflow","hidden"),n.height+2*i>s.y&&o(this.container).css({top:i,marginTop:0}),window.scrollTo(0,0)}this.domParent=o("<div></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,overflow:"auto"})[0],this.on("append",function(){o(document.body).append(this.domParent)}),this.on("show",n),this.on("positionDirty",n),this.on("hide",function(){o(document.body).css("overflow","auto"),o(this.domParent).remove(),window.scrollTo(0,this._scrollTop),delete this._scrollTop})}}});
define("overlays/options/keepInDom",["vanillajs","api-mod"],function(n,i){var t="";return function(){this.isOpen=function(){return!!i.inDocument(this.container)&&!i.hasClass(this.container,"hidden")},this.show=function(){return i.inDocument(this.container)?(this.container.style.display=t,i.removeClass(this.container,"hidden")):this.domParent.appendChild(this.container),this.emit("show"),this},this.hide=function(n){return i.inDocument(this.container)&&"none"!=this.container.style.display&&("none"!=this.container.style.display&&(t=this.container.style.display||"",this.container.style.display="none"),i.hasClass(this.container,"hidden")||i.addClass(this.container,"hidden"),this.emit("hide",{trigger:n})),this}}});
define("overlays/options/matchWidth",["vanillajs","api-mod"],function(t,i){"use strict";var n=function(t){function n(){this.container&&t&&(i.setStyle(this.container,"width",i.getSize(t).x+"px"),this.emit("positionDirty"))}return function(){this.on("show",i.bind(n,this))}};return n});
define("overlays/options/maxWidth",["vanillajs"],function(i){"use strict";var t=function(i){function t(){this.container.style.maxWidth=i+"px",this.emit("positionDirty")}return function(){this.on("show",t.bind(this))}};return t});
define("overlays/options/minWidth",["vanillajs"],function(i){"use strict";var n=function(i){function n(){this.container.style.minWidth=i+"px",this.emit("positionDirty")}return function(){this.on("show",n.bind(this))}};return n});
define("overlays/options/ajax",["vanillajs","overlays/ajaxUtil"],function(t,e){"use strict";function i(t){return t&&t.match(/^((https?:)?(\/\/)?([\da-z\.\-\u00a1-\uffff]+)\.([a-z\.\u00a1-\uffff]{2,6}))?(\/[\w]+)*(\?[\/\w\.+%=\-#&\/!\u00a1-\uffff]+)?$/)}function n(t,n){function a(){if(this.sourceElement&&(t=t||this.sourceElement.getAttribute("data-url"),void 0===n.noCache&&(n.noCache=this.sourceElement.getAttribute("data-ajaxNoCache")),n.resources||(n.resources=this.sourceElement.getAttribute("data-resources"),n.resources&&(n.resources=n.resources.replace(/[\[\]]/g,"").split(/[ ,]+/))),n.invalidateOnPricingModeUpdate||(n.invalidateOnPricingModeUpdate=this.sourceElement.getAttribute("data-invalidateOnPricingModeUpdate"))),t){var a,s,r=0,o=function(){a.dataVersion!==r&&(this.contentElement.innerHTML=a.data,this.emit("contentsUpdated"),r=a.dataVersion,require.defined("ta/prwidgets")&&require("ta/prwidgets").initWidgets(this.contentElement)),this.reposition(),setTimeout(this.reposition.bind(this),1),this.emit("contentLoaded",a.error)}.bind(this),d=function(i){return s==t?(this.reposition(),void this.emit("contentsUnchanged")):(n.skipInvalidate||a&&a.invalidate(),s=t,a=e.loadData(t,n),i||(this.contentElement.innerHTML=a.data),this.emit("contentsUpdated"),this.reposition(),r=a.dataVersion,require.defined("ta/prwidgets")&&require("ta/prwidgets").initWidgets(this.contentElement),a.on("update",o),void a.on("data-targetEvent",u))}.bind(this),u=this.emit.bind(this,"data-targetEvent");this.on("show",d),this.on("hide",function(){a&&(a.off("update",o),a.off("data-targetEvent",u),a=void 0)});var h=this.updateContent;this.updateContent=function(e,n){return e?i(e)?(t=e,this.isOpen()&&d(n),this):(t="",h.apply(this,arguments)):(t="",e=this.sourceElement.getAttribute("data-url"),e?this.updateContent(e):h.apply(this,arguments))}}}return n||(n={}),a}return n});
define("overlays/options/centerArrowOnSrcElement",["vanillajs","api-mod"],function(t,i){"use strict";var o=function(t){function o(){if(t=t||this.sourceElement,this.container&&t&&this.arrow){var o=i.getCoords(this.container),r=i.getCoords(t),n=i.hasClass(this.container,"arrow_top")||i.hasClass(this.container,"arrow_bottom");if(n){var s=r.left+r.width/2,e=i.getSize(this.arrow).x/2,a=Math.max(e,Math.min(o.width-e,s-o.left));i.setStyle(this.arrow,{"left":a+"px","right":"auto","margin":"0 0 0 -"+e+"px"})}else{var s=r.top+r.height/2,e=i.getSize(this.arrow).y/2,h=Math.max(e,Math.min(o.height-e,s-o.top));i.setStyle(this.arrow,{"top":h+"px","bottom":"auto","margin":"-"+e+"px 0 0 0"})}}}return function(){this.on("show",i.bind(o,this)),this.on("positionDirty",i.bind(o,this)),this.on("repositionArrow",i.bind(o,this))}};return o});
define("overlays/options/closeOnTargetChildClick",["vanillajs","api-mod"],function(i,n){"use strict";return function(i){return function(){var t,c=n.bind(function(){this.hide("target-child-click")},this);this.on("show",function(){t=n.select(i),t&&n.addEvent(t,"click",c)}).on("hide",function(){t&&n.removeEvent(t,"click",c)})}}});
define("overlays/options/stickyClick",["vanillajs","api-mod","utils/MouseAway"],function(i,n,t){"use strict";var o=!1;return function(){var i=new t(this.sourceElement,this.container);n.addEvent(this.sourceElement,"click",function(){o=!0}),this.on("hide",function(){o=!1,i.off("mouseAway")}),this.on("show",function(){var n=this.hide.bind(this);i.on("mouseAway",function(){o||n("stickyClick")})})}});
define("overlays/styles/popover",["api-mod","lib/jquery-amd","overlays/utils"],function(t,e,a){"use strict";function i(e,i,n,r){this.container=t.createElement(r,{"class":"ui_overlay ui_popover arrow_"+a.getArrowDir(e,this.sourceElement,this.domParent)+" "+i,"style":n}),this.arrow=t.createElement("div",{"class":"arrow"}),this.container.appendChild(this.arrow),this.header=t.createElement("div",{"class":"header_text"}),this.container.appendChild(this.header),this.inner=t.createElement("div",{"class":"body_text"}),this.container.appendChild(this.inner),this.contentElement=this.inner,this.close=t.createElement("div",{"class":"ui_close_x"}),this.container.appendChild(this.close)}var n=function(n,r,s,o,h,d){n=e(n),s=s||n.attr("data-popover")||"",o=o||n.attr("data-header")||"",h=h||n.attr("data-content")||"";var c=n.attr("data-style")||"",l=n.attr("data-header-element"),p=n.attr("data-header-copy");return function(){i.call(this,r,s,c,d||"span"),this.updateContent(h),o&&a.injectContent(this.header,n,o,l,p),t.addEvent(this.close,"click",t.bind(function(){this.hide.apply(this,arguments)},this,"close-button"))}};return n});
define("overlays/styles/tooltip",["vanillajs","api-mod","overlays/utils"],function(t,e,i){"use strict";function n(t,n,r){this.container=e.createElement(r||"span",{"class":"ui_overlay ui_tooltip arrow_"+i.getArrowDir(t,this.sourceElement,this.domParent)+" "+n}),this.arrow=e.createElement("div",{"class":"arrow"}),this.container.appendChild(this.arrow),this.inner=e.createElement("div",{"class":"body_text"}),this.container.appendChild(this.inner),this.contentElement=this.inner}var r=function(t,e,i,r,a){return t&&(i=i||t.getAttribute("data-tooltip"),a=a||t.getAttribute("data-elementtype")),function(){n.call(this,e,i,a),this.updateContent(r)}};return r});
define("overlays/styles/dropdown",["vanillajs","api-mod"],function(t,n){"use strict";function e(t,e,i,o){this.container=n.createElement(o||"span",{"class":"ui_overlay ui_dropdown "+e,"style":i}),this.contentElement=this.container}var i=function(t,n,i,o,r,a){i=i||t.getAttribute("data-dropdown")||"";var s=r||t.getAttribute("style")||"";return function(){e.call(this,n,i,s,a),this.updateContent(o)}};return i});
define("overlays/styles/notification",["vanillajs","api-mod"],function(n,e){"use strict";function i(n,i){this.container=e.createElement("div",{"class":"ui_overlay ui_notification "+n}),this.icon=e.createElement("span",{"class":"ui_icon main_icon "+i}),this.container.appendChild(this.icon),this.close=e.createElement("span",{"class":"ui_icon times close"}),this.container.appendChild(this.close),this.inner=e.createElement("div",{"class":"message"}),this.container.appendChild(this.inner),this.contentElement=this.inner}function t(n){var i=e.find("."+u);i||(i=document.createElement("div"),i.className=u,document.body.appendChild(i)),n.domParent=i,i.appendChild(n.container),o(n),s(n)}function a(n){r(n),o(n),e.addEvent(n.container,"mouseleave",function i(){e.removeEvent(n.container,"mouseleave",i),s(n)}),n.emit("hover")}function o(n){e.removeClass(n.container,"hidden"),n.container.clientHeight,e.removeClass(n.container,"transparent")}function c(n){e.addClass(n.container,"transparent"),r(n),n.__hideTimer=setTimeout(e.bind(l,null,n),m)}function s(n){r(n),n.__transitionOutTimer=setTimeout(c.bind(null,n),h)}function r(n){n.__transitionOutTimer&&clearTimeout(n.__transitionOutTimer),n.__hideTimer&&clearTimeout(n.__hideTimer)}function l(n,e){n.hide(e)}function d(n){n.on("show",e.bind(t,null,n)),e.addEvent(n.container,"click",e.bind(l,null,n,"click")),e.addEvent(n.container,"mouseenter",e.bind(a,null,n))}var u="ui_notification_container",m=2e3,h=1e4,_=function(n,e,t,a){return e=e||n&&n.getAttribute("data-modal")||"",a=a||n&&n.getAttribute("data-icon")||"",function(){i.call(this,e,a),this.updateContent(t),d(this)}};return _});
define("overlays/uiOverlay",["vanillajs","api-mod","utils/responsive"],function(t,e,a){"use strict";function o(t){var e=a[t.getAttribute("data-breakpoint")];return!("function"==typeof e&&!e())}var r={"tooltip":{defaultPosition:"above",defaultFade:"fade_short"},"popover":{defaultPosition:"below",defaultFade:"fade_short"},"modal":{defaultPosition:"center",defaultFixed:!0,defaultFade:"fade_short"},"dropdown":{defaultPosition:"below"},"notification":{}},i={},s=function(t,a){if(t=t||window.event,a=a||t.target||t.srcElement,o(a)){var s=t&&t.type;s&&e.removePropertyEvent(a,s,"uiOverlay"),t&&e.stopEvent(t);var n,l=(a.getAttribute("data-position")||"").split(" ").filter(function(t){return!!t.length}),u=l.shift(),d=["overlays/Overlay","overlays/position"];for(var v in r)if(a.hasAttribute("data-"+v)){u=u||r[v].defaultPosition,d.push("overlays/styles/"+v),n=!0;break}var c=a.getAttribute("data-options")||"";if(!n&&require.defined("ta/util/Error")){var p="uiOverlay: no style. class="+a.className+", id="+a.id;return[].forEach.call(a.attributes,function(t){/^data-/.test(t.name)&&(p+=", "+t.name+"="+t.value)}),void require("ta/util/Error").record(null,p)}d.push(a.hasAttribute("data-windowshade")?"overlays/styles/windowshade":null);var h=!1;a.hasAttribute("data-defer")&&(h=parseInt(a.getAttribute("data-defer"))),d.push(h?"overlays/options/hoverDelay":null),d.push(a.hasAttribute("data-fade")?"overlays/options/fadeInOut":null),d.push(a.getAttribute("data-url")?"overlays/options/ajax":null),d.push(a.hasAttribute("data-close-event")?"overlays/options/closeOnEvent":null),d.push(a.hasAttribute("data-close-ta-event")?"overlays/options/closeOnTaEvent":null),d.push(a.hasAttribute("data-maxWidth")?"overlays/options/maxWidth":null),d.push(a.hasAttribute("data-close-child")?"overlays/options/closeOnTargetChildClick":null);var f=a.hasAttribute("data-move-padding")||a.hasAttribute("data-move-source");d.push(f?"overlays/options/moveIntoView":null),d.push(a.hasAttribute("data-keep-in-dom")?"overlays/options/keepInDom":null),d.push("overlays/options/storeOverlayOnElement"),c&&(d=d.concat(c.split(" ").map(function(t){return"overlays/options/"+t}))),a.hasAttribute("data-tooltip")?"click"===s?d.push("overlays/options/closeOnDocClick"):"mouseover"===s&&c.indexOf("closeOnMouseAway")<0&&d.push("overlays/options/closeOnMouseOut"):a.hasAttribute("data-dropdown")&&("click"===s?(d.push("overlays/options/closeOnDocClick"),d.push("overlays/options/closeOnSourceClick")):"mouseover"===s&&d.push("overlays/options/closeOnMouseAway")),d.push(a.hasAttribute("data-zIndex")?"overlays/options/zIndex":null);var y;if(!(a.hasAttribute("data-unique")&&(y=a.getAttribute("data-unique"),y&&y in i))){var b;return a.hasAttribute("data-group")&&(b=a.getAttribute("data-group")),require(d,function(t,n,d,c,p,f,A,g,m,w,O,E){var k=[d(a,u),u&&n[u](l,r[v].defaultFixed),c&&c(a.getAttribute("data-windowshade")),p&&p(h,!0),f&&f(r[v].defaultFade),A&&A(),g&&g(a.getAttribute("data-close-event")),m&&m(a.getAttribute("data-close-ta-event")),w&&w(a.getAttribute("data-maxWidth")),O&&O(a.getAttribute("data-close-child")),E&&E(a.getAttribute("data-move-source"),parseInt(a.getAttribute("data-move-padding"),10))],x=Array.prototype.slice.call(arguments,11),I=new t(a,k.concat(x)),q=function(){e.select(".ui_tooltip").forEach(function(t){t.overlay&&t.overlay!=I&&t.overlay.hide()}),b&&(i[b]||[]).forEach(function(t){t!=I&&t.hide()}),I.show()};if(b){var C=i[b]||[];C.push(I),i[b]=C}if(s&&!h){var F=function(t){o(a)&&(q(),e.stopEvent(t))};e.addEvent(a,s,F),I.on("destroy",function(){e.removeEvent(a,s,F)})}if(y&&(i[y]=I,I.on("destroy",function(){delete i[y]})),!h&&q(),a.hasAttribute("data-callback")){var P=e.fn(a.getAttribute("data-callback"));P&&P(I)}}),!1}var A=i[y];if(A.sourceElement=a,A.updateContent(),!h&&A.show(),a.hasAttribute("data-callback")){var g=e.fn(a.getAttribute("data-callback"));g&&g(A)}}};return s}),window.uiOverlay=function(){var t=arguments;require(["overlays/uiOverlay"],function(e){e.apply(null,t)})};
define("common/pixels-loader",["vanillajs","mixins/page-dates/DateEvents","ta/Core/TA.FireEvent"],function(n,o,e){"use strict";var i,t=2e3,a=function(){require(["trjs!ta/common/behavior/Ads-pagemoniker"],function(n){n.loadMonikers(),o.on("dateSelected",function(o,e){"STAYDATES"==e&&window.setTimeout(n.loadMonikerForEnterDates,2e3)})}),i&&i.shouldInitFlightsEvents&&r(),a=function(){}},r=function(){var n=new Promise(require.bind(null,["trjs!ta/common/behavior/Ads-pagemoniker"]));e.on("lcbPop",function(){n.then(function(n){n.loadMonikerForLCBPop()})}),e.on("packageClick",function(){n.then(function(n){n.loadVacationPackageMetaMonikers()})}),e.on("metaLinkClickPixelLoad",function(o){n.then(function(n){n.loadFlightsMetaMonikers(o)})}),e.on("metaLightboxLoad",function(o){n.then(function(n){n.loadLightboxMonikers(o)})}),e.on("flightSearchPixelLoad",function(){n.then(function(n){n.loadMonikerForFlightSearch()})})};return{init:function(n){i=n,n&&n.pixelsEnabled&&setTimeout(a,t)},remarketingOptions:function(){return i}}});
define("lib/jquery/jquery.hoverIntent",["lib/jquery-amd"],function(e){"use strict";var t,n,i={interval:100,sensitivity:6,timeout:0},o=0,r=function(e){t=e.pageX,n=e.pageY},u=function(e,i,o,v){return Math.sqrt((o.pX-t)*(o.pX-t)+(o.pY-n)*(o.pY-n))<v.sensitivity?(i.off(o.event,r),delete o.timeoutId,o.isActive=!0,e.pageX=t,e.pageY=n,delete o.pX,delete o.pY,v.over.apply(i[0],[e])):(o.pX=t,o.pY=n,o.timeoutId=setTimeout(function(){u(e,i,o,v)},v.interval),void 0)},v=function(e,t,n,i){return delete t.data("hoverIntent")[n.id],i.apply(t[0],[e])};return function(t,n,a){var s=o++,d=e.extend({},i);e.isPlainObject(t)?(d=e.extend(d,t),e.isFunction(d.out)||(d.out=d.over)):d=e.isFunction(n)?e.extend(d,{over:t,out:n,selector:a}):e.extend(d,{over:t,out:t,selector:n});var p=function(t){var n=e.extend({},t),i=e(this),o=i.data("hoverIntent");o||i.data("hoverIntent",o={});var a=o[s];a||(o[s]=a={id:s}),a.timeoutId&&(a.timeoutId=clearTimeout(a.timeoutId));var p=a.event="mousemove.hoverIntent.hoverIntent"+s;if("mouseenter"===t.type){if(a.isActive)return;a.pX=n.pageX,a.pY=n.pageY,i.off(p,r).on(p,r),a.timeoutId=setTimeout(function(){u(n,i,a,d)},d.interval)}else{if(!a.isActive)return;i.off(p,r),a.timeoutId=setTimeout(function(){v(n,i,a,d.out)},d.timeout)}};return this.on({"mouseenter.hoverIntent":p,"mouseleave.hoverIntent":p},d.selector)}});
define("ta/util/Element",["lib/jquery-amd","utils/ajax","ta/Core/TA.Record","ns-exporter","ta/Core/TA.Event","lib/jquery/jquery.hoverIntent","utils/throttle"],function(t,e,i,n,o,r,a){function l(e,i){var n=e.style.fontSize||t(e).css("font-size"),o=n.replace(/[\d\.]/g,""),r=c(o,parseFloat(n)*i);e.style.fontSize=r+o}function s(){function e(e,i){var r=n[e],a=t(r.e);if(a.length>0){var l=r.inView;r.inView=!1,a.each(function(){return!r.inView&&void(r.inView=o.inViewport(this,i,r.persistentElmt,r.offset))}),!l&&r.inView&&(r.cb&&r.cb(r.e),r.multiple||n.splice(e,1))}}function i(){var e=t(window),i={};return i.top=e.scrollTop(),i.left=e.scrollLeft(),i.bottom=i.top+e.height(),i.right=i.left+e.width(),i}var n=[],o=this;this.add=function(i){n.push(i),e(n.length-1),n.length>0&&t(window).on("resize scroll",r)},this.inViewport=function(e,n,o,r){if(e=t(e),!e.is(":visible"))return!1;if(r=t.extend({top:0,left:0,right:0,bottom:0},r),o){var a=o.offsetHeight;a&&(0==o.offsetTop?r.bottom-=a:r.top+=a)}var l=e.offset();return n||(n=i()),n.bottom>=Math.max(l.top+r.top,0)&&n.right>=Math.max(l.left+r.left,0)&&n.top<=Math.max(l.top+e.height()+r.bottom,0)&&n.left<=Math.max(l.left+e.width()+r.right,0)};var r=a(function(){if(n.length){for(var o=i(),a=n.length-1;a>=0;a--)e(a,o);0==n.length&&t(window).off("resize scroll",r)}},300);t(window).on("load",r)}var f={};f.replaceContent=function(i,n,o,r){if(n=t(n),!n.find(".progresstab")){var a=o+(o.indexOf("?")==-1?"?":"&")+"xhr=true";n.append('<div class="progresstab"></div>'),e({url:a,success:function(t){n.html(t),window.behavior&&window.behavior.apply(n),r&&r(n.get(0))},evalScripts:!0}).get()}},f.spinner=function(e,i){t(i).parents(".spinnerReplaceable").children().each(function(t,e){e.toggle(e.hasClass("spinner"))})},f.limitLength=function(t,e,i){return!(e.value.length>=i)||(e.value=e.value.substr(0,i),!1)},f.updateValue=function(e,i){if(e=t(e),e.length>0&&e.val()!=i){e.val(i);var n=document.createEvent("HTMLEvents");n.initEvent("change",!1,!1),e[0].dispatchEvent(n)}},f.keepInWindow=function(e,i){function n(t,e){var i=parseInt(t.get(0).style[e]);return i||0===i}if(e){e=t(e),i||(i={top:!0,right:!0,bottom:!0,left:!0});var o=2,r=e.offset();r.right=r.left+e.width(),r.bottom=r.top+e.height();var a=t(window),l=a.width(),s=a.height(),f=a.scrollTop(),c=a.scrollLeft();i.right&&n(e,"right")?r.left<c+o?e.css("right",l+c-e.width()-o):r.right>l-c-o&&e.css("right",o):i.left&&n(e,"left")&&(r.left<c+o?e.css("left",o):r.right>l-c-o&&e.setStyle("left",l+c-r.width-o)),i.bottom&&n(e,"bottom")?r.top<f+o?e.setStyle("bottom",s+f-r.height-o):r.bottom>s-f-o&&e.setStyle("bottom",o):i.top&&n(e,"top")&&(r.top<f+o?e.setStyle("top",o):r.bottom>s-f-o&&e.setStyle("top",s+f-r.height-o))}};var c=function(t,e){var i=e;return"px"==t?i=8:"em"==t?i=.5:"pt"==t?i=6:"%"==t&&(i=50),Math.max(e,i)};f.makeTextFit=function(e,i,n,r,a){a=a||1,r=r||8;var l=!1;if(t(e).each(function(e,o){o=t(o);var a=o.find(i);if(a){var s;if("number"==typeof n)s=n;else if(s=o.find(n).outerHeight(),void 0===s)return;var f=a.height();if(s<f){var c=a.css("font-size");if(c){var u=function(t,e){return"px"==e&&t>=r||"em"==e&&t>=.5||"pt"==e&&t>6||"%"==e&&t>=50},h=c.replace(/[\d\.]/g,""),d=parseFloat(c)*Math.sqrt(s/f);"px"==h&&(d=Math.max(parseInt(d),r)),u(d,h)&&(a.css("font-size",d+h),l=!0)}}}}),l>0&&a<4){o.fireEvent("makeTextFitResizedText");var s=this;setTimeout(function(){s.makeTextFit(e,i,n,r,a+1)},1)}},function(){function e(t){var e=!1;if(!t||t.clientWidth&&t.clientWidth<=0)return!1;for(var i=t.clientWidth,n=(parseFloat(t.style.paddingLeft)||0)+(parseFloat(t.style.paddingRight)||0),o=0;o<a&&t.scrollWidth>i;o++){var r=(i-n)/(t.scrollWidth-n);l(t,r),e=!0}return t.scrollWidth>i&&(l(t,s),e=!0),e}function i(t,e){var i=t.getAttribute("data-sizegroup"),n=parseFloat(t.style.fontSize);i&&(e[i]=Math.min(e[i]||Number.MAX_VALUE,n))}function n(t){for(var i in t)if(t.hasOwnProperty(i)){var n=t[i],o=[];n.forEach(function(t){o.push([t.scrollWidth,t])}),o.sort(function(t,e){return e[0]-t[0]});for(var r=0;r<o.length&&e(o[r][1]);r++);}}function r(t){var i;for(var n in t)t.hasOwnProperty(n)&&(i={},t[n].forEach(function(t){var n=t.innerHTML,o=i[n];void 0!==o?0!=o&&(t.style.fontSize=o):e(t)?i[n]=t.style.fontSize||0:i[n]=0}))}var a=4,s=.9;f.makeTextFitOneLine=function(i,n){var o=t(i);if(o.each(function(t,i){e(i)}),n){var r;o.each(function(e,i){var n=t(i).css("font-size");(!r||parseFloat(n)<parseFloat(r))&&(r=n)}),r&&o.css("font-size",r)}},f.autoResizeTextInNode=function(o){o=t(o);var a=t(".autoResize",o),l={},s={width:{},text:{}};a.filter(":visible").removeClass("autoResize").each(function(t,n){var o,r,a=n.getAttribute("data-resizeWidthGroup"),f=n.getAttribute("data-resizeTextGroup");a?(o=s.width,r=a):f&&(o=s.text,r=f),o?(o[r]||(o[r]=[]),o[r].push(n)):(e(n),i(n,l))}),n(s.width),r(s.text),a.each(function(t,e){var i=e.getAttribute("data-sizegroup");i&&(e.style.fontSize=l[i]+"px")})},o.queueForLoad(function(){require.defined("ta/Core/TA.Store")&&require("ta/Core/TA.Store").retrieve("no-old-resize")||(o.on("refreshedDOMContent",function(t){f.autoResizeTextInNode(t)}),document.body&&f.autoResizeTextInNode(document.body))},"autoResize all targets on load")}(),f.makeSameWidth=function(e){var i=0;t(e).each(function(t,e){var n=Math.round(parseFloat(e.style.width));n&&n>i&&(i=n)}).css("width",i)},f.fitToContentsHorizontally=function(e,i,n,o){if(o=o||1,!(o<=0||i>n)){var r=function(t){return t.scrollWidth>t.clientWidth||t.scrollHeight>t.clientHeight};t(e).each(function(t,e){e.style.width=i;for(var a=i;a<n&&r(e);a+=o)e.style.width=a;r(e)&&(e.style.width=n)})}},f.scrollIntoView=function(e,i,n,o){if(e){e=t(e);var r=e.offset().top+(i||0);if(n){for(var a=t("html, body"),l=e.parent(),s=function(t){return("auto"===t.css("overflow-y")||"scroll"===t.css("overflow-y"))&&t[0].scrollHeight>t[0].clientHeight};l.length&&!l.is(a)&&!s(l);)l=l.parent();l.length&&!l.is(a)&&s(l)?r=l.offset().top+l.scrollTop()+(i||0):l=a,l.animate({scrollTop:r},{duration:300,complete:function(){o&&o()}})}else window.scrollTo(0,r),o&&o()}};var u=f.scrollTrackers=new s;return f.isScrolledIntoView=function(t,e,i){return u.inViewport(t,null,e,i)},f.doIfElementIsVisible=function(t,e,i,n){t&&u.add({e:t,cb:function(){return e.apply(null,i),!0},offset:n})},f.trackWhenScrolledIntoView=function(t,e,n){if(t&&e){var o=function(){i.trackEventOnPage.apply(i,e)};u.add({e:t,cb:o,multiple:n})}},f.getTotalWidth=function(e){return t(e).outerWidth(!0)||0},f.getTotalHeight=function(e){return t(e).outerHeight(!0)||0},f.hoverIntent=function(e,i){r.bind(t(e),i)()},n.exportTo(f,"ta.util.element"),f});
define("ta/common/behavior/Ads-pagemoniker",["vanillajs","ns-exporter","common/trackingStreams","ta/Core/TA.Store","common/pixels-loader","ta/util/Element","ta/Core/TA.FireEvent"],function(e,r,o,t,n,i,l){var a={};a.remarketingOptions=n.remarketingOptions()||{};var s=function(e){return void 0===a.remarketingOptions.pixelsEnabled&&(a.remarketingOptions=n.remarketingOptions()||{}),a.remarketingOptions[e]},u={OFFER_VIEW:"Monikers_OV",HAC_PRICES_LOADED:"Monikers_HPL",RESTAURANTS_PRODUCT_SELECTION:"Monikers_RPS",RESTAURANTS_PRODUCT_PAYMENT:"Monikers_RPP",RESTAURANTS_PRODUCT_CONVERSION:"Monikers_RPC",RESTAURANTS_NEW_REG_OWNER_FORM:"Monikers_NRO",RESTAURANTS_CONF_REG_OWNER:"Monikers_CRO",MEMBER_REGISTRATION_FORM:"Monikers_MRF",MEMBER_CREATE:"Monikers_MC"},d="dates.enter.moniker.fired",c="hotel.prices.moniker.fired",p=!1,_=!1,M=5,k="loc1",T="@@@loc1@@@",x="locId",E="[data-vendorname='Hotels.com']",C=10,R=1e3,f=function(){function e(){var o="",t="[data-pernight][data-locationid='"+n[l]+"']",s=document.body.querySelector(t);a<C&&!s?(a++,window.setTimeout(e,R)):(a<C&&(o=s.getAttribute("data-pernight")||""),i.push(o),r=!0)}var r=!1;if(s("hotelPricesEnabled")){var o=s("pixelContext");if(o){var t=o.servlet;if("HotelHighlight"===t)return r;var n,i=[];"Hotel_Review"===t?n=[o.curLocId.toString()]||"":(n=o.locIds||"",n=n.split(",").slice(0,M));for(var l=0;l<n.length;l++)if(n[l]){var a=0;e()}o.locPrices=i.join(",")}}else r=!0;return r},m=function(){return!!f()&&(P(),!0)};a.loadMonikerForHotelPrices=function(){if(s("hotelPricesEnabled")){var e=3,r=function(){!m()&&e--&&setTimeout(r,1e3)};r()}},a.loadMonikers=function(e){try{if(!s("pixelsEnabled"))return null;e=e||{},e.pixelType="PAGEVIEW",!s("pixelContext")||"HotelBookingRoomSelectionHtml"!=s("pixelContext").servlet&&"MobileHotelBookingRoomSelection"!=s("pixelContext").servlet||(e.pixelType="IB_CLICK",a._addIBPageViewContext(e)),s("pixelContext")&&"ShoppingCart"==s("pixelContext").servlet&&(e.attractionShoppingCartTotalPriceUSD=ta.retrieve("shoppingCartEstimatedTotalPriceUSD"));var r=a._loadMonikers(e);return s("offerViewPixelsEnabled")&&h(),s("cacheMobileClickoutResponse")&&(e.pixelType="CLICKOUT",a._cacheClickoutMonikers(e)),r}catch(r){o.error(r,"ads.loadMonikers",null,{context:e})}return null},a.loadMonikerForEnterDates=function(e){try{if(!s("pixelsEnabled"))return null;t.retrieve(d)||(t.store(d,!0),f(),e=e||{},e.pixelType="ENTER_DATES",setTimeout(a._loadMonikers.bind(null,e),2e3))}catch(e){}};var P=function(e){try{if(!s("hotelPricesEnabled"))return null;t.retrieve(c)||(t.store(c,!0),a._loadMonikersForPixelType(e,"HAC_PRICES_LOADED"))}catch(e){}},y=null,F=function(e){try{_||(_=!0,a._loadMonikersForPixelType(e,"OFFER_VIEW"),y&&l.off("page-changes-pending",y))}catch(e){}},h=function(e){if(!_){y||(y=function(r,o){h(e)},l.on("page-changes-pending",y));var r=document.body.querySelectorAll(E);r&&i.doIfElementIsVisible(r,F,[e],0)}};return a.loadClickoutMonikers=function(e){try{return s("pixelsEnabled")&&s("clickoutPixelsEnabled")?a._cachedClickoutMonikerTextArr?a._appendMonikersIFrameText(a._cachedClickoutMonikerTextArr,e[x]||""):(e=e||{},e.pixelType="CLICKOUT",a._loadMonikers(e)):null}catch(r){o.error(r,"ads.loadClickoutMonikers",null,{context:e})}return null},a.loadLightboxMonikers=function(e,r){try{if(!s("pixelsEnabled"))return null;e=e||{},e.pixelType="LIGHTBOX_CLICK";var t=a._mergeContexts(e,r),n=a._loadMonikers(t);return n}catch(r){o.error(r,"ads.loadLightboxMonikers",null,{context:e})}return null},a.loadLightboxClickoutMonikers=function(e){try{return s("pixelsEnabled")&&s("clickoutPixelsEnabled")?(e=e||{},e.pixelType="LIGHTBOX_CLICKOUT",a._loadMonikers(e)):null}catch(r){o.error(r,"ads.loadLightboxClickoutMonikers",null,{context:e})}return null},a.loadIBClickMonikers=function(e){if(p)return null;var r=a._loadMonikersForPixelType(e,"IB_CLICK");return p=!0,r},a.loadIBRoomSelectMonikers=function(e){return a._loadMonikersForPixelType(e,"IB_ROOM_SELECT")},a.loadIBConfirmMonikers=function(e){return a._loadMonikersForPixelType(e,"IB_CONFIRM")},a.loadVRConfirmMonikers=function(e){return a._loadMonikersForPixelType(e,"VR_CONFIRM")},a.loadFlightsMetaMonikers=function(e){return null!=a._loadMonikersForPixelType(e,"FLIGHTS_META")?a._loadMonikersForPixelType(e,"LIGHTBOX_CLICKOUT"):null},a.loadVacationPackageMetaMonikers=function(e){return a._loadMonikersForPixelType(e,"PACKAGE_META")},a.loadMonikerForLCBPop=function(e){return a._loadMonikersForPixelType(e,"LCB_POP")},a.loadMonikerForFlightsMetaLightbox=function(e){return a._loadMonikersForPixelType(e,"LIGHTBOX_CLICK")},a.loadMonikerForFlightSearch=function(e){return a._loadMonikersForPixelType(e,"SEARCH")},a.loadMonikerForCruiseMeta=function(e){return a._loadMonikersForPixelType(e,"CRUISE_META")},a.loadMonikerForRestaurantsProductSelection=function(e){return a._loadMonikersForPixelType(e,"RESTAURANTS_PRODUCT_SELECTION")},a.loadMonikerForRestaurantsProductPayment=function(e){return a._loadMonikersForPixelType(e,"RESTAURANTS_PRODUCT_PAYMENT")},a.loadMonikerForRestaurantsProductConversion=function(e){return a._loadMonikersForPixelType(e,"RESTAURANTS_PRODUCT_CONVERSION")},a.loadMonikerForRestaurantsNewRegOwnerForm=function(e){return a._loadMonikersForPixelType(e,"RESTAURANTS_NEW_REG_OWNER_FORM")},a.loadMonikerForRestaurantsConfirmedRegOwner=function(e){return a._loadMonikersForPixelType(e,"RESTAURANTS_CONF_REG_OWNER")},a.loadMonikerForMemberRegistrationForm=function(e){return a._loadMonikersForPixelType(e,"MEMBER_REGISTRATION_FORM")},a.loadMonikerForCreateMemberSuccessful=function(e){return a._loadMonikersForPixelType(e,"MEMBER_CREATE")},a._loadMonikersForPixelType=function(e,r){try{return s("pixelsEnabled")&&s("ibPixelsEnabled")?(e=e||{},e.pixelType=r,a._loadMonikers(e)):null}catch(r){o.error(r,"loadMonikers for pixelType, ",null,{context:e})}return null},a._cacheClickoutMonikers=function(e){var r=s("pixelContext"),o=a._mergeContexts(r,e),t=a._buildPixelUrl(o);if(t){t+="&reportOnly=true&jsReplace="+k;var n=new XMLHttpRequest;n.open("GET",t,!0),n.onreadystatechange=function(){4==this.readyState&&(a._cachedClickoutMonikerTextArr=this.response.split(T))},n.send()}},a._addIBPageViewContext=function(e){document.getElementById("roomList")&&(e.lowestPrice=document.getElementById("roomList").dataset.lowestPrice),document.getElementById("roomInfoContainer")&&(e.lowestPrice=document.getElementById("roomInfoContainer").dataset.lowestPrice)},a._buildPixelUrl=function(e){if(!s("pixelServlet"))return o.error(null,"ads._buildPixelUrl: remarketing.pixelServlet not set"),null;var r=s("pixelList");if(!r)return null;var t="/"+s("pixelServlet")+"?pixelList="+r;for(var n in e)e.hasOwnProperty(n)&&(t+="&"+n+"="+e[n]);return ta.uid&&(t+="&puid="+ta.uid),t},a._appendMonikersIFrame=function(e,r){var o=document.createElement("iframe");return o.setAttribute("id",r||"Monikers"),o.setAttribute("style","border:none; position:absolute; bottom:0; right:0"),o.setAttribute("width","1"),o.setAttribute("height","1"),o.setAttribute("src",e),document.body.appendChild(o),o},a._appendMonikersIFrameText=function(e,r){var o=document.createElement("iframe");o.setAttribute("id","Monikers"),o.setAttribute("style","border:none; position:absolute; bottom:0; right:0"),o.setAttribute("width","1"),o.setAttribute("height","1"),document.body.appendChild(o);var t=o.contentDocument||o.contentWindow.document;t.open().write(e[0]);for(var n=1;n<e.length;n++)t.write(r),t.write(e[n]);return t.close(),o},a._mergeContexts=function(e,r){if(!e)return r;if(!r)return e;var o,t={};for(o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);for(o in r)r.hasOwnProperty(o)&&(t[o]=r[o]);return t},a._loadMonikers=function(e){var r,t;try{r=s("pixelContext"),t=a._mergeContexts(r,e);var n=a._buildPixelUrl(t);return n?a._appendMonikersIFrame(n,u[t.pixelType]):null}catch(t){o.error(t,"ads._loadMonikers",null,{pixelContext:r,extraContext:e})}return null},r.exportTo(a,"ta.common.ads"),a});
define("overlays/styles/inlinepopup",["overlays/utils","utils/is-element"],function(t,e){"use strict";function i(i,n,r,a){e(i)?this.domParent=i:this.domParent=document.querySelector('[data-inlinepopup-name="'+i+'"]'),this.container=document.createElement("span"),this.container.setAttribute("class","ui_overlay ui_inline_popup arrow_"+t.getArrowDir(n)+" "+r),this.container.setAttribute("style",a),this.arrow=document.createElement("div"),this.arrow.setAttribute("class","arrow"),this.container.appendChild(this.arrow),this.inner=document.createElement("div"),this.inner.setAttribute("class","body_text"),this.container.appendChild(this.inner),this.contentElement=this.inner}var n=function(t,e,n,r,a,s){return e=e||t.getAttribute("data-parent")||"",n=n||t.getAttribute("data-direction")||"",r=r||t.getAttribute("data-inline-popup")||"",a=a||t.getAttribute("data-content")||"",s=s||t.getAttribute("data-style")||"",function(){i.call(this,e,n,r,s),this.updateContent(a)}};return n});
define("overlays/position/belowFullWidth",["lib/jquery-amd","overlays/position/base"],function(t,o){"use strict";return function(e,i,n){var s=o();return s.onPosition=function(){var o=t(this.sourceElement),s=o.offset(),r=o.outerHeight();if(this.domParent!=document.body){var u=t(this.domParent).offset();s.top-=u.top}t(this.container).css({position:n||"absolute",top:s.top+r+(e||0)+"px",left:(i||0)+"px",bottom:"auto",right:(i||0)+"px"})},s}});
define("overlays/position/animateFromLastSource",["overlays/position/base","utils/classnameUtils"],function(t,e){"use strict";return function(o,i){var n=t();return n.label="animateBetween",n.onPosition=function(){if("function"==typeof i&&!i())return void o.onPosition.apply(this);for(var t=this.sourceElement.getAttribute("data-anim-group"),n=null,s=document.querySelectorAll(".ui_overlay"),r=0;r<s.length;r++){var a=s[r],l=a&&a.overlay&&a.overlay.sourceElement;if(l&&l!==this.sourceElement&&l.getAttribute("data-anim-group")===t){n=l;break}}if(n){var u=this.sourceElement;this.sourceElement=n,o.onPosition.apply(this),this.sourceElement=u;var c=this,m="transition-all-200ms";setTimeout(function(){e.addClass(c.container,m),o.onPosition.apply(c),setTimeout(function(){e.removeClass(c.container,m),c.emit("repositionArrow")},200)},0)}else o.onPosition.apply(this)},n}});
define("overlays/options/dimElement",[],function(){"use strict";var n=function(n){function i(n){this.on("show",function(){n.classList.add("dim")}).on("hide",function(){n.classList.remove("dim")})}return arguments.length?function(){i.call(this,n)}:void i.call(this,this.sourceElement)};return n});
define("utils/domUtils",["vanillajs"],function(){var r={};return r.querySelectorArray=function(r,e){if(!r)return[];for(var n=[],t=r.querySelectorAll?r.querySelectorAll(e):[],i=t.length,o=0;o<i;o++)n.push(t[o]);return n},r.isOrContainsElement=function(r,e){if(!r||!e)return!1;if(r===e)return!0;if(r.contains&&r.contains(e))return!0;for(;e;){if(r===e)return!0;e=e.parentNode}return!1},r.forceReflow=function(r){r&&r.offsetWidth},r});
define("overlays/options/closeAllOtherOverlaysOnShow",["utils/domUtils","vanillajs"],function(o,e){"use strict";return function(){var e=this;this.on("show",function(){o.querySelectorArray(document,".ui_overlay").forEach(function(n){n&&n.overlay&&n.overlay!=e&&(o.isOrContainsElement(n,e.sourceElement)||n.overlay.hide())}),window&&window.__REDUX_STORE__&&window.__REDUX_STORE__.dispatch({type:"HIDE_ALL_OVERLAYS"})})}});
define("utils/domEventUtils",["vanillajs"],function(){function e(e,t,n){return{"elmt":e,"type":t,"handler":n,"callback":function(t){t.target=t.target||t.srcElement,n.call(e,t)}}}function t(t,r,i){if(n(t,r,i))return null;l[r]||(l[r]=[]);var a=e(t,r,i);return l[r].push(a),a}function n(e,t,n,r){for(var i=l[t]||[],a=i.length-1;a>=0;a--){var v=i[a];if(v.elmt==e&&v.handler==n)return r&&i.splice(a,1),v}return null}function r(e,t,r){return n(e,t,r,!0)}function i(){if(null===v){v=!1;try{var e=Object.defineProperty({},"passive",{get:function(){v=!0}});window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(e){}}return v}var a={},l={},v=null;return a.addEvent=function(e,n,r){if(e)if(e.addEventListener)e.addEventListener(n,r,!1);else if(e.attachEvent){var i=t(e,n,r);i&&e.attachEvent("on"+n,i.callback)}},a.removeEvent=function(e,t,n){if(e)if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent){var i=r(e,t,n);i&&e.detachEvent("on"+t,i.callback)}},a.passiveSupported=i,a});
define("overlays/options/closeOnScrollOutOfView",["utils/domEventUtils"],function(n){"use strict";return function(){function o(){var n=t.contentElement.getBoundingClientRect();(n.bottom<0||n.top>window.innerHeight)&&t.hide("scroll_out_of_view")}var t=this;this.on("show",function(){n.addEvent(window,"scroll",o)}).on("hide",function(){n.removeEvent(window,"scroll",o)})}});
define("overlays/options/moveIntoView",["lib/jquery-amd"],function(t){"use strict";var o=500;return function(e,n){return e="undefined"==typeof e||e,n="undefined"!=typeof n||isNaN(n)?n:0,function(){this.on("show",function(){var i,f,r=t(this.container),s=t(this.sourceElement);e?(i=Math.min(r.offset().top,s.offset().top),f=Math.max(r.offset().top+r.outerHeight(),s.offset().top+s.outerHeight())):(i=r.offset().top,f=r.offset().top+r.outerHeight());var u=window.innerHeight,a=t(window).scrollTop(),h=a+u;if(!(i>=a&&f<=h)){var p,c=f-i;p=c>u||i<a?i-n:f-u+n,t("html, body").animate({scrollTop:p},o)}})}}});
define("overlays/options/blurSourceOnHide",["vanillajs"],function(){"use strict";return function(){var e=this;this.on("hide",function(){e.sourceElement&&e.sourceElement.blur()})}});
define("overlays/options/trackHideTrigger",["common/trackingStreams"],function(t){"use strict";return function(n,e){return function(){this.on("hide",function(r){t.trackEvent(n||"overlay",e||"hide",r&&r.trigger||"default")})}}});
define("ta/common/Swipe",["vanillajs"],function(e){"use strict";return{resetImageBehavior:function(e,t){for(var n,o=document.querySelectorAll(e),i=function(e){e.preventDefault()},r=0;r<o.length;r++)n=o[r],n.onmousedown=i,t&&n.removeAttribute("onclick")},addSwipeListener:function(e,t,n){function o(){e.removeEventListener("touchmove",i),e.removeEventListener("touchend",r),window.removeEventListener("MSPointerMove",i,!1),window.removeEventListener("MSPointerUp",r,!1),c=null,a=null,v=null}function i(e){if(e.touches.length>1)o();else{s=e.touches[0].pageX-c;var t=e.touches[0].pageY-a;null===v?(v=s,n||e.preventDefault(),e.stopPropagation()):(v<0&&s>0||v>0&&s<0||Math.abs(t)>l)&&o()}}function r(n){o(),t&&Math.abs(s)>d&&t({target:e,direction:s>0?"right":"left",event:n}),s=0}function u(t){1==t.touches.length&&(c=t.touches[0].pageX,a=t.touches[0].pageY,e.addEventListener("touchmove",i,!1),e.addEventListener("touchend",r,!1),window.addEventListener("MSPointerMove",i,!1),window.addEventListener("MSPointerUp",r,!1))}var c,a,s,v,d=40,l=30;return"function"==typeof t&&e.addEventListener("touchstart",u,!1),{cancel:function(){"function"==typeof t&&e.removeEventListener("touchstart",u,!1)}}}}});
define("calendars/ResponsiveStayDates",["vanillajs","overlays/Overlay","overlays/styles/popover","overlays/styles/inlinepopup","overlays/position","overlays/position/belowFullWidth","overlays/position/animateFromLastSource","overlays/options/closeOnDocClick","overlays/options/repositionOnEvent","overlays/options/repositionOnTaEvent","overlays/options/storeOverlayOnElement","overlays/options/highlightElement","overlays/options/dimElement","overlays/options/closeAllOtherOverlaysOnShow","overlays/options/closeOnScrollOutOfView","overlays/options/closeOnTaEvent","overlays/options/centerArrowOnSrcElement","overlays/options/moveIntoView","overlays/options/blurSourceOnHide","overlays/styles/windowshade","overlays/options/trackHideTrigger","calendars/CalendarDate","ta/util/I18N","ta/Core/TA.Dust","ta/util/Deferred","ta/util/Date","mixins/page-dates/DateTypeStore","common/trackingStreams","utils/responsive","utils/ResponsiveEvents","utils/domUtils","utils/classnameUtils","utils/domEventUtils","ta/common/Swipe","common/Radio"],function(e,t,n,a,r,o,i,s,l,c,d,u,p,m,f,h,y,g,v,S,T,w,D,b,C,M,O,_,E,x,A,k,R,L,I){"use strict";function N(e){return"fixed"===e||"-ms-device-fixed"===e}function B(e){for(;e;){if(e.style.position&&N(e.style.position))return!0;if(window.getComputedStyle&&N(window.getComputedStyle(e).getPropertyValue("position")))return!0;e=e.parentElement}return!1}function H(e,t){var n,a,r=[],o=!1,i=O.isSingleDateType(t.dateType);a="YELLOW_BRICKS_3"===t.heatmapStyle||"YELLOW_BRICKS_3_1"===t.heatmapStyle?t.heatmapPercentiles[e.toISOString()]||{}:t.heatmapPercentiles[t.currentMonth.toISOString()]||{};var s=a.range_low,l=a.range_hi,c=P(a),d={};e.eachDayInMonth(function(e){var n=!o&&0===e.compare(t.today);o=o||n;var a=t.startDate&&0===e.compare(t.startDate),s=e.toISOString(),l=t.heatmap[s],u=K(e,t),p=null,m=null;if(l&&(!u||a)){p=l.price;for(var f=0;f<c.length;f++){var h=c[f];if(l.priceInt<h.priceInt)break;m=h.name}d[m]=m}r.push({label:e.day(),date:u?null:e.toString(),today:n,start:!i&&a,end:t.endDate&&0===e.compare(t.endDate),selected:i?a:e.inRange(t.startDate,t.endDate),price:p,trend:m})}),n=e.firstDayOfMonth()-jsGlobalDayOffset,n+=n<0?7:0;for(var u=0;u<n;u++)r.unshift({label:"&nbsp;"});var p=e.year();t.thaiOffset===!0&&(p+=se);var m="date_medium_month_year";t.calendarStyle.id===de.corgi.id&&(m="date_full_month_year");var f=ta.i18n?ta.i18n.formatDate(m,new Date(p,e.month())):jsGlobalMonths[e.month()]+" "+p,h=(13-jsGlobalDayOffset)%7,y=(7-jsGlobalDayOffset)%7,g=jsGlobalDaysShort;return t.calendarStyle.id!==de.classic.id&&t.calendarStyle.id!==de.corgi.id||(g=jsGlobalDaysAbbrev),{dayLabels:g,days:r,header:f,saturday:h,sunday:y,priceTrendNames:d,rangeLow:s,rangeHi:l}}function P(e){var t=[];for(var n in e)if(0!==n.indexOf("range_")&&e.hasOwnProperty(n)){var a=e[n];t.push({name:n,priceInt:a.priceInt})}return t.sort(function(e,t){return e.priceInt-t.priceInt}),t}function q(e){for(var t=[],n={},a=null,r=null,o=0;o<e.calendarStyle.getNumMonths();o++){var i=H(e.currentMonth.relativeMonth(o),e);a=V(a,i),r=X(r,i),t.push(i),Object.assign(n,i.priceTrendNames)}return{months:t,showClearButton:e.showClearButton,calendarTitle:e.calendarTitle,calendarTitleTestClass:e.calendarTitleTestClass,calendarClasses:e.calendarStyle.getClassname(),calendarStyle:e.calendarStyle.id,calendarAssets:e.calendarAssets,heatmapStyle:e.heatmapStyle,priceTrendNames:n,rangeLow:a,rangeHi:r}}function j(e){var t=new w,n={availableDates:e.availableDates,excludedDates:e.excludedDates,startDate:e.startDate&&new w(e.startDate),endDate:e.endDate&&new w(e.endDate),today:t,thisMonth:t.thisMonth(),dateType:e.dateType,minEnabledDate:e.minEnabledDate||t,maxEnabledDate:e.maxEnabledDate||t.relativeDay(330),maxStayLength:e.maxStayLength||M.MAX_STAY_DURATION_DAYS,thaiOffset:e.thaiOffset,showClearButton:e.showClearButton||!1,className:e.className||null,calendarTitle:e.calendarTitle||null,calendarStyle:de[e.calendarStyle.clientKey]||de.control,calendarAssets:e.calendarStyle.assets,heatmapStyle:e.heatmapStyle,heatmapPercentiles:e.heatmapPercentiles,heatmap:e.heatmap,colorAccessibilityTestClass:e.colorAccessibilityTestClass,calendarTitleTestClass:e.calendarTitleTestClass};return n.currentMonth=Y(n),n}function Y(e){var t;if("RETURN"===e.dateType&&e.endDate){var n=e.startDate?e.startDate.thisMonth():e.thisMonth;t=n.compare(e.endDate.previousMonth())<0?e.endDate.previousMonth():n}else e.startDate?t=e.startDate.thisMonth():e.endDate?(t=e.endDate.previousMonth(),e.thisMonth.compare(t)>0&&(t=e.thisMonth)):t=e.thisMonth;if(O.isEndDateType(e.dateType)&&(O.isHotelDateType(e.dateType)||O.isRoundTripDateType(e.dateType))&&e.startDate&&e.endDate){var a=e.calendarStyle.getNumMonths()-1,r=e.startDate.thisMonth(),o=e.endDate.thisMonth(),i=r.relativeMonth(a);t=i.compare(o)<0?o.relativeMonth(-a):r}return e.minEnabledDate&&O.isMultiCityDateType(e.dateType)&&t.compare(e.minEnabledDate.thisMonth())<0&&(t=e.minEnabledDate.thisMonth()),t}function G(e){return O.isChildDateType(e)&&!O.isStartDateType(e)&&!O.isRoundTripDateType(e)}function K(e,t){var n=t.today,a=t.startDate,r=t.dateType,o=t.minEnabledDate,i=t.maxEnabledDate,s=t.maxStayLength,l=t.availableDates,c=t.excludedDates,d=t.calendarStyle;if(!G(r)){if(l){for(var u=0;u<l.length;u++)if(0==new w(e.date).compare(new w(l[u])))return!1;return!0}if(c)for(var u=0;u<c.length;u++)if(0==new w(e.date).compare(new w(c[u])))return!0}if(d.id===de.corgi.id&&"RETURN"===r&&a.compare(e)>0)return!0;if(d.id===de.corgi.id&&O.isEndDateType(r)&&!O.allowsSameDayRange(r)&&a.compare(e)>=0)return!0;if(o&&o.compare(e)>0)return!0;var p=n&&n.relativeDay(1);return!!(!O.allowsSameDayRange(r)&&O.isEndDateType(r)&&p&&p.compare(e)>0)||(!!(G(r)&&a&&a.daysTo(e)>s)||!!(i&&i.compare(e)<0))}function U(e,t){if(t.calendarStyle.id===de.classic.id){if(e.compare(t.currentMonth)<0&&K(e.lastOfMonth(),t))return!0;if(e.compare(t.currentMonth)>0&&K(e.firstOfMonth(),t))return!0}return e.compare(t.minEnabledDate.thisMonth())<0||e.compare(t.maxEnabledDate.thisMonth())>0}function F(e,t,n){"left"==e.direction?z(1,t,n):"right"==e.direction&&z(-1,t,n)}function W(e,t){var n=e.currentMonth.relativeMonth(-1);k.toggleClass(t.querySelector(".rsdc-prev"),"rsdc-inactive",U(n,e));var a=e.currentMonth.relativeMonth(e.calendarStyle.getNumMonths());k.toggleClass(t.querySelector(".rsdc-next"),"rsdc-inactive",U(a,e))}function z(e,t,n){var a=t.calendarStyle.getNumMonths(),r=e>0?a:-1,o=t.currentMonth.relativeMonth(r),i=D.isRtl()?"rsdc-scroll-right":"rsdc-scroll-left";if(!U(o,t)){o.compare(t.today.relativeMonth(12))>0&&!le&&(le=!0,_.trackEvent("DATEPICKER","viewed_year_out")),re=!0;var s=n.querySelector(".rsdc-months"),l=[];Array.from(s.getElementsByClassName("rsdc-month")).forEach(function(e){l.push(e)}),e>0&&(l=l.reverse()),t.currentMonth=t.currentMonth.relativeMonth(e);for(var c=null,d=null,u=[],p=0;p<a;p++){var m=t.currentMonth.relativeMonth(e>0?p:a-p-1),f=H(m,t);c=V(c,f),d=X(d,f);var h=te(t.calendarAssets.monthTemplate,{heatmapStyle:t.heatmapStyle,month:f});u.push(h)}J({heatmapStyle:t.heatmapStyle,rangeLow:c,rangeHi:d}),Promise.all(u).then(function(a){k.addClass(s,"rsdc-no-anim"),a.forEach(function(t){var n=document.createElement("div");n.innerHTML=t,e<0?s.insertBefore(n.firstChild,s.firstChild):s.appendChild(n.firstChild)});for(var r=0;r<l.length-1;r++)s.removeChild(l[r]);e<0?(k.addClass(s,i),A.forceReflow(s),k.removeClass(s,"rsdc-no-anim"),k.removeClass(s,i)):(A.forceReflow(s),k.removeClass(s,"rsdc-no-anim"),k.addClass(s,i)),setTimeout(function(){e>0&&(k.addClass(s,"rsdc-no-anim"),k.removeClass(s,i)),l.length>0&&(s.removeChild(l[l.length-1]),A.forceReflow(s)),e>0&&k.removeClass(s,"rsdc-no-anim"),re=!1},ie?oe:0),W(t,n)})}}function V(e,t){return e?t.rangeLow&&e.priceInt>t.rangeLow.priceInt?t.rangeLow:e:t.rangeLow}function X(e,t){return e?t.rangeHi&&e.priceInt<t.rangeHi.priceInt?t.rangeHi:e:t.rangeHi}function J(e){if("YELLOW_BRICKS_3"===e.heatmapStyle||"YELLOW_BRICKS_3_1"===e.heatmapStyle){var t=e.rangeLow,n=e.rangeHi,a=document.querySelector(".rsdc-wrapper .rsdc-legend");if(a){var r=a.querySelector(".rangeLow"),o=a.querySelector(".rangeHi");n&&t?(a.style.display=null,r&&o&&(r.innerHTML=t.price,o.innerHTML=n.price)):a.style.display="none"}}}function Q(){document.selection&&document.selection.empty?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges()}function Z(e){if(O.isChildDateType(e))for(var t=O.getParents(e),n=0;n<t.length;n++)ta.page.clearDates(t[n]);else ta.page.clearDates(e);ae&&ae.hide()}function $(e,t,n,a){if(a=a||window.event,a&&!re){var r,o,i=a.target,s=i.className,l=i.getAttribute("data-oracle-legend");if("yb"===l&&(r=".rsdc-day .rsdc-yb-min",o="rsdc-animated",_.trackEvent("datepicker","legend_click","min")),r&&o){for(var c=n.querySelectorAll(r),d=0;d<c.length;d++){var u=c[d];k.addClass(u,o)}setTimeout(function(){for(var e=0;e<c.length;e++){var t=c[e];k.removeClass(t,o)}},1e3)}return s.indexOf("rsdc-close-x")>=0||s.indexOf("ui_close_x")>=0?(O.isStartDateType(t.dateType)&&_.trackEvent("datepicker","click","checkin_close"),ae&&ae.hide()):s.indexOf("rsdc-next")>=0?z(1,t,n):s.indexOf("rsdc-prev")>=0?z(-1,t,n):i.getAttribute("data-date")?(_.trackEvent("calendar","click",t.dateType),e.resolve([w.fromString(i.getAttribute("data-date")).date]),ae&&ae.dontHideOnSelection?ae.dontHideOnSelection=!1:ae&&ae.hide()):s.indexOf("rsdc-clear-dates")>=0&&Z(t.dateType),I("responsiveStayDates").trigger("calendarInteracted"),Q(),!1}}function ee(e){var t="no_padding date_picker_modal";return(e.calendarStyle!==de.corgi&&e.calendarStyle!==de.heatmap||!E.mobile())&&(t+=" no_x"),t+=" "+e.dateType,t+=" "+(e.className||""),t+=" "+(e.colorAccessibilityTestClass||"")}function te(e,t,n){function a(){b.renderToString(e,t).then(function(e){r.resolve(e)},function(){r.reject()})}var r=C(!0);if(n&&t.calendarAssets){var o=t.calendarAssets.cssAssets.map(function(e){return"trcss!"+e});require(["trdust!"+t.calendarAssets.dustRollup].concat(o),a)}else a();return r.promise()}function ne(e){var t={};if(e){var n=(e.getAttribute("data-position")||"").split(" ").filter(function(e){return!!e.length});t.position=isNaN(n[0])?n.shift():null,t.offsets=n.map(function(e){return parseInt(e,10)}),t.alignTarget=k.getParentByClassname(e,"ui_picker_align_target"),t.arrowTarget=e.querySelector(".ui_picker_arrow_target")}return t.position="function"==typeof r[t.position]?t.position:"below",t.offsets=t.alignTarget?[t.alignTarget].concat(t.offsets):t.offsets,t}var ae,re,oe=300,ie=!!window.TransitionEvent,se=543,le=!1,ce=[s.withoutTouchEvents,d,l(window,["resize","date_bar_docked","date_bar_undocked"]),c("showingCookieConsentBanner"),c("makeTextFitResizedText"),h("dualSearchTypeaheadOpen"),v],de={"control":{id:"control",getClassname:function(){return E.mobile()?"":"rsdc-dual-month"},getNumMonths:function(){return E.mobile()?1:2},getOverlayMixins:function(e,t,a){var i=E.mobile(),s=ne(e),l=k.getParentByClassname(e,"trip_search"),c=i?s.arrowTarget:e&&e.querySelector(".ui_icon.calendar"),d=i?"below":s.position;return[n(e,d,a,null,t),i?o(27,16):r[s.position](s.offsets,!1,!1,[16]),y(c),m,i&&S("half-dark"),i&&l&&u(l)].concat(ce)}},"classic":{id:"classic",getClassname:function(){return(E.mobile()?"":"rsdc-dual-month ")+"controlStyleOnResp"},getNumMonths:function(){return E.mobile()?1:2},getOverlayMixins:function(e,t,a,i){var s=E.mobile(),l=ne(e),c=k.getParentByClassname(e,"trip_search"),d=s?l.arrowTarget:e&&e.querySelector(".ui_icon.calendar"),p=s?"below":l.position,f=function(){if(i){var t=window.pageYOffset||document.documentElement.scrollTop;return e&&e.getBoundingClientRect().top+t-10}return 0};return[n(e,p,a,null,t),s?o(27,16):r[l.position](l.offsets,!1,!1,[16]),y(d),m,s&&S("half-dark",f),s&&c&&u(c)].concat(ce)}},"classic_hr":{id:"classic",getClassname:function(){return de.classic.getClassname()},getNumMonths:function(){return de.classic.getNumMonths()},getOverlayMixins:function(e,t,n){return de.classic.getOverlayMixins(e,t,n,!0)}},"corgi":{id:"corgi",getClassname:function(){return E.mobile()?"corgi":"corgi rsdc-dual-month"},getNumMonths:function(){return E.mobile()?1:2},getOverlayMixins:function(e,t,a){var s=E.mobile(),l=ne(e),c=e&&B(e)?"fixed":"absolute",d=e&&e.getAttribute("data-anim-group"),u=e&&e.getAttribute("data-full-mobile"),h=k.getParentByClassname(e,"trip_search"),g=s?"below":l.position,v=function(){var t=window.pageYOffset||document.documentElement.scrollTop;return e&&e.getBoundingClientRect().top+t+45};return[n(e,g,a,null,t),s&&!u?o(24,16,c):i(r[l.position](l.offsets,!1,!1,[16]),function(){return d}),s&&S("popover-backdrop",v),y(l.arrowTarget),m,f,T("calendar","close"),h&&p(h)].concat(ce)}},"heatmap":{id:"corgi",getClassname:function(){return E.mobile()?"heatmap":"heatmap rsdc-dual-month"},getNumMonths:function(){return E.mobile()?1:2},getOverlayMixins:function(e,t,a){var s=E.mobile(),l=ne(e),c=e&&e.getAttribute("data-anim-group"),d=k.getParentByClassname(e,"trip_search"),u=s?"below":l.position,h=function(){var t=window.pageYOffset||document.documentElement.scrollTop;return e&&e.getBoundingClientRect().top+t+45};return[n(e,u,a,null,t),s?o(24,16):i(r[l.position](l.offsets,!1,!1,[16]),function(){return c}),s&&S("popover-backdrop",h),y(l.arrowTarget),m,f,T("calendar","close"),d&&p(d)].concat(ce)}},"corgi_inline":{id:"corgi",getClassname:function(){return E.mobile()?"corgi":"corgi rsdc-dual-month"},getNumMonths:function(){return E.mobile()?1:2},getOverlayMixins:function(e,t,s){var u=E.mobile(),f=ne(e),g=e&&e.getAttribute("data-anim-group"),S=k.getParentByClassname(e,"trip_search"),T=u?"below":f.position,w=u?document.querySelector('[data-inlinepopup-name="calendar-inline-container"]'):null;return w?[a(e,w,"below",s,t,null),y(f.arrowTarget),m,S&&p(S),d,l(window,["resize","date_bar_docked","date_bar_undocked"]),c("showingCookieConsentBanner"),c("makeTextFitResizedText"),h("dualSearchTypeaheadOpen"),v]:[n(e,T,s,null,t),u?o(27,16):i(r[f.position](f.offsets,!1,!1,[16]),function(){return g}),y(f.arrowTarget),m,S&&p(S)].concat(ce)}}};return{closeCalendar:function(){ae&&ae.destroy()},openAsPopover:function e(n,a){var r=C(!0),o=j(a),i=q(o);return te(o.calendarAssets.calendarTemplate,i,a.demandLoadAssets).then(function(s){var l=o.calendarStyle.getOverlayMixins(n,s,ee(o));a.moveIntoView&&l.push(g(!0,30));var c=new t(n,l),d=null,u=function(){d=!0,d=e(n,a),d.then(function(e){r.resolve(e)},function(e){r.reject(e)})};if(x.on("breakpoint",u),c.on("hide",function(e){var t=!d&&!r.isFulfilled();I("responsiveStayDates").trigger("hideCalendar",e,t),t&&r.reject(n),x.off("breakpoint",u),ae=null,c=null}),c.show(),ae&&ae.destroy(),ae=c,J(i),ae&&(W(o,ae.container),R.addEvent(ae.container,"click",$.bind(null,r,o,ae.container)),o.calendarStyle.id===de.corgi.id)){var p=ae.container.querySelector(".rsdc-months");L.addSwipeListener(p,function(e){F(e,o,ae.container)})}}),r.promise()}}});
define("retargeting/providers/desktop-meta-click",["commerce/offerclick","retargeting/util"],function(e,r){return function(i,n){if(n){var o=window.modelGeoId,d=n.brandname,a=n.vendorname,t=n.pernight,c=n.offerclient,l=!1,g="";require.defined("page-model")&&(l=require("page-model").session.loggedIn,g=require("page-model").DUST_GLOBAL.DEVICE);var m={};m.geoId=o,m.locationId=n.locationid,m.brand=d,m.vendor=a,m.provider=c,m.pernight=t,m.device_type=g,m.is_member=l;var f=n.clicktoken;if(f){var p=e.expandToken(f);m.slot=p.slot,m.area=p.area}r.getDates(m),r.send(i,m)}}});
define("retargeting/listeners/desktop-meta-click",["ta/Core/TA.Event","retargeting/providers/desktop-meta-click"],function(e,t){var n="TripAdvisor";return function(r){require(["trjs!taevents"],function(){e.on("metaLinkClick",function(e){var r=e.dataset;if(r&&"function"==typeof t){var i=r.vendorname===n?"IB_CLICK":"META_CLICK";t(i,r)}})})}});
define("retargeting/providers/mobile-hr-pageview",["retargeting/util"],function(e){return function(r,d){if(d){var a=!1,t="";require.defined("page-model")&&(a=require("page-model").session.loggedIn,t=require("page-model").DUST_GLOBAL.DEVICE);var i={};i.locationId=d.locationId,i.geoId=window.modelGeoId,i.brand=d.brand,i.sub_brand=d.sub_brand,i.ip=d.ip,i.is_member=a,i.device_type=t,i.travel_start_date=d.travel_start_date,i.travel_end_date=d.travel_end_date,e.send(r,i)}}});
define("retargeting/listeners/mobile-hr-pageview",["lib/jquery-amd","retargeting/providers/mobile-hr-pageview"],function(e,i){return function(e){require(["trjs!taevents"],function(){e&&e.enableHolisticTracking&&"function"==typeof i&&i("PAGEVIEW",e)})}});
define("retargeting/providers/desktop-bl-click",["retargeting/util"],function(e){var r={2:"website",3:"virtual tour",4:"affiliate"};return function(t,a,d){if(a){var i=!1,n="";require.defined("page-model")&&(i=require("page-model").session.loggedIn,n=require("page-model").DUST_GLOBAL.DEVICE);var o={};o.locationId=a.locationId,o.geoId=window.modelGeoId,o.brand=a.brand,o.sub_brand=a.sub_brand,o.ip=a.ip,o.is_member=i,o.device_type=n,o.travel_start_date=a.travel_start_date,o.travel_end_date=a.travel_end_date,d&&r[d]&&(o.click_type=r[d]),e.send(t,o)}}});
define("retargeting/listeners/desktop-bl-click",["ta/Core/TA.Event","retargeting/providers/desktop-bl-click"],function(t,e){return function(n){require(["trjs!taevents"],function(){n&&n.enableHolisticTracking&&t.on("onBLClick",function(t,i){var r=t.target.parentNode.getAttribute("data-column");"function"==typeof e&&e("BL_CLICK",n,r)})})}});
define("historyinject/HistoryInject",["utils/browserutils","common/trackingStreams"],function(i,t){"use strict";function n(i,n){if(!r(n))return!1;var o=i.options.pageAction||"back_button_clicked",e=i.options.productAttr||"";t.setEvtCookie(i.module,o,e,"",i.backUrl),window.location.replace(n.state.backUrl)}function o(){return window.history&&"pushState"in window.history}function e(i,t){t&&t.call(i);var o=n.bind(null,i);return window.addEventListener("popstate",o),window.addEventListener("hashchange",o),!!i.isNewTab()&&(i.urlSuffix=i.options.query?i.originalSearch:i.originalHash,void i.updateState())}function r(i){return i.state&&i.state.backUrl}function a(){var t=null;return"ios"===i.Platform.name&&(i.chrome||i.crios)?t="iOSMobileChrome":i.android&&i.firefox&&(t="androidFirefox"),t?new Promise(function(i){require(["trjs!historyinject/browser/"+t],function(t){i(t)})}):Promise.resolve(null)}function l(i){try{if(window.opener&&window.opener.location&&window.opener.location.pathname){if(window.opener.location.origin===window.location.origin){if(window.opener.location.href&&"/Search"===window.opener.location.pathname)return window.opener.location.href;if("H_NEARBY_HISTORY_INJECT"!==i&&"EXP_NEARBY_HISTORY_INJECT"!==i&&"RESTAURANT_NEARBY_HISTORY_INJECT"!==i&&"R_R_HISTORY_INJECT"!==i&&"A_R_HISTORY_INJECT"!==i)return window.opener.location.pathname;if(window.opener.location.href&&window.opener.location.pathname.includes("/Hotel_Review"))return window.opener.location.pathname}}else if(document.referrer&&document.referrer.length>0){var t=new URL(document.referrer);if(t.hostname===document.location.hostname){if("H_NEARBY_HISTORY_INJECT"!==i&&"EXP_NEARBY_HISTORY_INJECT"!==i&&"RESTAURANT_NEARBY_HISTORY_INJECT"!==i&&"R_R_HISTORY_INJECT"!==i&&"A_R_HISTORY_INJECT"!==i)return t.pathname;if(window.opener.location.href&&window.opener.location.pathname.includes("/Hotel_Review"))return t.pathname}}}catch(i){}return null}var c=function(i,t){this.originalPath=window.location.pathname,this.originalHash=window.location.hash,this.originalSearch=window.location.search,this.backUrl=null,this.backUrlPlaceholder="-BackUrl",this.urlSuffix="",this.options=t||{},this.module=i,this.mixin=a(),this.backUrl=l(i)};return c.prototype.isNewTab=function(){return 1===window.history.length},c.prototype.updateState=function(){var i=this.originalPath+this.backUrlPlaceholder;if(!(this.backUrl.indexOf("WidgetEmbed")>=0)){if(this.backUrl.indexOf(".htm")>=0){var t=this.originalPath.split(".htm");i=t[0]+this.backUrlPlaceholder+".htm"+t[1]}history.replaceState({backUrl:this.backUrl},document.title,i+this.urlSuffix),history.pushState({},document.title,this.originalPath+this.urlSuffix)}},c.prototype.init=function(){o()&&this.backUrl&&this.mixin.then(e.bind(null,this))},c});
define("servlets/responsivehotelreview-pl",["lib/jquery-amd","utils/BatchRequest","ta/Core/TA.Record","ta/util/Error","common/pixels-loader","ta/util/Element","ta/common/behavior/Ads-pagemoniker","calendars/ResponsiveStayDates","retargeting/listeners/desktop-meta-click","retargeting/listeners/mobile-hr-pageview","retargeting/listeners/desktop-bl-click","common/trackingStreams","historyinject/HistoryInject"],function(e,i,t,r,o,n,s,a,l,c,k,d,m){function g(e){try{o.init(e.remarketingOptions),s.loadMonikerForHotelPrices(),l(),c(e.holisticTrackingOptions),k(e.holisticTrackingOptions)}catch(e){d.error(e,"post-load initialization")}try{e.enableHistoryInjection&&new m("HOTEL_REVIEW_HISTORY_INJECT").init()}catch(e){d.error(e,"history injection")}}return{init:g,loadClickoutMonikers:s.loadClickoutMonikers.bind(s)}});
define("Logging",[],function(){var e="undefined"!=typeof IS_DEBUG&&IS_DEBUG?4:1;"boolean"==typeof __SERVER__&&__SERVER__&&(e=4);for(var n={},o=["error","warn","dir","info","debug"],r=0;r<o.length;r++){var l=o[r];n[l]=function(n,o){return function(){e<o||"undefined"!=typeof console&&console[n]&&console[n].apply&&console[n].apply(console,Array.prototype.slice.call(arguments))}}(l,r)}return n.setLevel=function(n){e=n},n});
define("facebook/authutils",["api-mod","lib/jquery-amd","Logging","ta/Core/TA.Store","ta/util/Deferred","ta/util/SessionStorage","ta/util/Cookie","ta/util/Error","ta/registration/RegEvents","ta/Core/TA.Event"],function(e,t,n,o,i,s,a,r,u,c){"use strict";var d=6e5,f="fbAutoLoginTime",g=new i,p=function(e,t){var n=t||"v1.0";return FB.init({appId:e,version:n,status:!0,cookie:!0}),g.resolve()},l=function(e){g.promise().success(e)},v=function(){a.setOneTimeCookieOnFQDN("FacebookAuthCode2","ConflictedFBAccount"),window.location.reload()},h=function(e){window.__REDUX_STORE__&&e&&__REDUX_STORE__.dispatch({type:"SET_AUTH_STATE",loggedInUserId:e})},m=function(){var e=new i;return T()?(FB.getLoginStatus(function(n){if("connected"===n.status&&n.authResponse){if(o.has("cached.facebookuid"))return void R(o.retrieve("cached.facebookuid"),n.authResponse.userID);var i=new XMLHttpRequest;i.open("POST","/FacebookConnectAjax",!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.send("a=autologin&signedRequest="+encodeURIComponent(n.authResponse.signedRequest)),i.onreadystatechange=function(){if(4==i.readyState){if(200!=i.status)return e.reject();if(e.resolve(),i.responseText){var n=t("<div>"+i.responseText+"</div>").find("#fbcajax_data");if(n.length){var o=n.data("fbAutologinTaUserId");o&&h(o)}}c.fireEvent("fbAutoLoginSuccess"),u.emit("success")}}}}),e.promise()):e.reject()},R=function(e,t){e!==""+t&&(r.record(null,"Mismatched Facebook uid between cached value and authResponse. cached: "+e+", response: "+t),v())},S=function(){T()&&FB.getLoginStatus(function(e){if("connected"===e.status&&e.authResponse){if(o.has("cached.facebookuid"))return void R(o.retrieve("cached.facebookuid"),e.authResponse.userID);var t=new XMLHttpRequest;t.open("POST","/FacebookConnectAjax",!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.send("a=refresh&signedRequest="+encodeURIComponent(e.authResponse.signedRequest))}})},b=function(e,n,o){var i=t("form#"+e),s=i.find("."+n).val();return s&&s.match(/.+\@.+\..+/)?void i.submit():void i.find("."+o).removeClass("hidden")},T=function(){if(s.canUseSessionStore())try{var e=(new Date).getTime(),t=sessionStorage.getItem(f);return null==t?(sessionStorage.setItem(f,e),!0):(t=parseInt(t),e-t<d?(n.info("Skipping FB autologin, tried too recently"),!1):(sessionStorage.setItem(f,e),!0))}catch(e){r.record(null,"Error storing FB autologin attempt: "+e)}return!0};return{init:p,autoLogin:m,queueForInit:l,refreshToken:S,submitEmailRegistration:b}});
define("google/authutils",["api-mod","lib/jquery-amd","Logging","ta/Core/TA.Store","ta/util/Deferred","ta/util/SessionStorage","ta/util/Error","page-model"],function(e,o,t,r,n,i,a,s){"use strict";var c=6e5,l=40185,u="googleOneTapTime",g="hideGoogleOneTap",d=new n,p=s.session.pageServlet.toLowerCase().replace("mobile",""),_=function(){return d.resolve()},f=function(e){d.promise().success(e)},m=function(e,o,t,r){var i=new n;if(!v())return i.reject();if(r)return require(["trjs!ta/Core/TA.Record"],function(e){e.trackEventOnPage("google_onetap","google_onetap_control","control_"+p)}),i.reject();var s=e.hint({supportedAuthMethods:[o],supportedIdTokenProviders:[{uri:o,clientId:t}],context:"signIn"});return require(["trjs!ta/Core/TA.Record"],function(e){e.trackEventOnPage("google_onetap","google_onetap_requested","requested_"+p,l)}),null==s?i.reject():(s.then(function(e){require(["trjs!ta/Core/TA.Record"],function(e){e.trackEventOnPage("google_onetap","google_onetap_selected","selected_"+p,l)});var o=window.location.pathname,t="/RegistrationController?flow=GOOGLE_ONETAP&pid="+l+"&requireSecure=true&forceDesktop=false&fullscreen=true&returnTo="+o;e.idToken&&(t=t+"&google_id_token="+e.idToken),window.location=t,i.resolve()})["catch"](function(e){switch(e.type){case"userCanceled":return document.cookie=g+"=1;domain="+cookieDomain,void require(["trjs!ta/Core/TA.Record"],function(e){e.trackEventOnPage("google_onetap","google_onetap_closed","closed_"+p,l)});case"noCredentialsAvailable":return;case"requestFailed":case"operationCanceled":case"illegalConcurrentRequest":case"initializationError":case"configurationError":default:return require(["trjs!ta/Core/TA.Record"],function(e){e.trackEventOnPage("google_onetap","google_onetap_unknown_error","unknown_error_"+p,l)}),void a.record(null,"Unknown error processing Google onetap hint request - type, message: "+e.type+", "+e.message,null,{},"WARN")}}),i.promise())},v=function(){if(i.canUseSessionStore())try{var e=(new Date).getTime(),o=sessionStorage.getItem(u);return null==o?(sessionStorage.setItem(u,e),!0):(o=parseInt(o),e-o<c?(t.info("Skipping Google onetap, tried too recently"),!1):(sessionStorage.setItem(u,e),!0))}catch(e){a.record(null,"Error storing Google onetap attempt: "+e)}return!0};return{init:_,sendHintRequest:m,queueForInit:f}});
define("ta/servlet/ShowSpecialOfferStub",["vanillajs","ta/Core/TA.Event","ns-exporter"],function(e,n,t){"use strict";var r={};return r.open=function(){var e=[].slice.call(arguments);require(["trjs!ta/servlet/ShowSpecialOffer"],function(n){n.openCoupon.apply(n,e)})},r.openOnOpen=function(){r.open.apply(null,arguments)},t.exportTo(r,"ta.servlet.ShowSpecialOffer"),r});
define("ta/common/behavior/globalSideEffects",["vanillajs","ns-exporter","api-mod","ta/util/Cookie","ta/util/Error","ta/Core/TA.Event","utils/browserutils","utils/resourceLoader","utils/ajax"],function(o,e,a,n,i,t,s,r,c){function l(o){for(var e=o?o.target:null;e&&"A"!=e.tagName&&"HTML"!=e.tagName;)e=e.parentNode;e&&"A"==e.tagName&&(/pid(\d+)/.test(e.className)&&n.setPIDCookie(RegExp.$1),window.linkMap&&(e.className.match(/(js_\w+)/g)||[]).forEach(function(a){"function"==typeof linkMap[a]&&linkMap[a](e,o)}))}function d(){if(window==window.top){var o=n.readRaw("ajaxAction");if(o){if(o=decodeURIComponent(o).split("|"),/^target:(\/[\w\d_-]+)/.test(o[0])){if(0!==window.location.pathname.indexOf(RegExp.$1))return;o=o.slice(1)}else if(window.opener)return;if(n.remove("ajaxAction","/",window.cookieDomain),("focus"==o[0]||"click"==o[0])&&o.length>1)for(var e=0;e<o.length;e+=2){var s=a.select(o[e+1]);if(s.length)try{s[0][o[e]]()}catch(a){i.record(a,"ajaxAction",null,{"funcName":o[e],"elmt":o[e+1]})}}else try{var r=o.slice(1);r.unshift({}),r.unshift(o[0]),t.run.apply(null,r)}catch(e){i.record(e,"ajaxAction",null,{"funcName":o[0]})}}}}function f(){if(s.firefox||s.safari||s.chrome){var o=a.find(location.hash);o&&o.offsetTop!=document.body.scrollTop&&window.scrollTo(0,o.offsetTop)}}function u(){if(/^#save/.test(location.hash)){var o=window.handleSavesPostLoginPopup;o?o():window.savesJS&&r.load(window.savesJS,u)}}function p(){if(window.freshVSTrackingCookie){var o=n.readRaw("v1st");o&&c("/VSCookieRequest")}}var w={processLinks:function(o){a.select("a",o).forEach(function(o){o.className.match(/js_|pid/)&&(a.addEvent(o,"click",l),window.noPopClass&&o.className.match(/\bjs_pop/)&&a.addClass(o,window.noPopClass))})}};return t.queueForLoad(function(){"undefined"==typeof behavior&&w.processLinks(document),n.remove("TATypeAhead"),d(),f(),u(),setTimeout(p,200)},1,"On_Load_Popups"),window.showPopup&&showPopup(),e.exportTo(w,window),w});
define("overlays/styles/flyout",["vanillajs","api-mod"],function(t,e){"use strict";function n(t){this.container=e.createElement("div",{"class":"ui_overlay ui_flyout"+(t?" "+t:"")}),this.contentElement=this.container}var i=function(t,e){return function(){n.call(this,e||this.sourceElement.getAttribute("data-flyout")||""),this.updateContent(t)}};return i});
define("overlays/options/fade",["lib/jquery-amd"],function(t){"use strict";function i(i){t(this.container).addClass(i),t(this.shade).addClass(i)}function n(i){t(this.container).removeClass(i),t(this.shade).removeClass(i)}var l=function(){},s="fade_in",a="fade_out",o=[function(t){i.call(this,t.cl)},function(t){i.call(this,s)},l,function(t){n.call(this,s)},l],c=[l,function(t){i.call(this,t.cl),i.call(this,s)},function(t){n.call(this,t.cl),n.call(this,s)},l,l],e=[l,l,l,function(t){i.call(this,t.out),i.call(this,a)},function(t){n.call(this,t.out),n.call(this,a)}],h=function(t,i,n){return function(){if(t){i=i!==!1,n=n!==!1;var l=this.show,s=this.hide,a=i&&n?o:i?c:e;a[0].call(this,t),i&&(this.show=function(){var i=arguments;l&&l.apply(this,i),a[1].call(this,t),setTimeout(function(){a[2].call(this,t)}.bind(this),t.len)}.bind(this)),n&&(this.hide=function(){var i=arguments;a[3].call(this,t),setTimeout(function(){a[4].call(this,t),s&&s.apply(this,i)}.bind(this),t.len)}.bind(this))}}};return h.NONE={cl:"fade_none",out:"fade_out_none",len:0},h.SHORT={cl:"fade_short",out:"fade_out_short",len:250},h.NORMAL={cl:"fade_normal",out:"fade_out_normal",len:500},h.LONG={cl:"fade_long",out:"fade_out_long",len:1e3},h});
require(["ta/p13n/placements"],function(e){var o=e.define.bind(e,"brand_login_callout","handlers",["handlers"]);o(["placement","lib/jquery-amd","ta/Core/TA.Record","ta/Core/TA.Event","ta/Core/TA.LocalStorage","overlays/Overlay","overlays/styles/flyout","overlays/position","overlays/options/matchWidth","overlays/options/closeOnDocClick","overlays/options/autoReposition","overlays/options/fade","overlays/options/closeOnScroll","overlays/options/centerArrowOnSrcElement","page-model","overlays/options/repositionOnTaEvent"],function(e,o,n,t,a,r,i,l,s,c,d,u,v,p,g,f){"use strict";var y,_=o(".core-login-button",".global-nav-profile"),m=o(".brand-login-test"),b=o(".brand-text",m),h=o("#brandLoginContainer"),w=g.session.pageServlet,O=g.GEO_ID,C=function(){return o(".ui_notification_container").length||o(".ui_overlay").length},k=function(){m.on("click",".ui_close_x",function(){y&&y.destroy()&&(y=null)}),y=new r(_.parent()[0],new i(m[0],"brand-callout ui_popover"),l.bottomLeft([-10,1]),d,p(_),c,s,v,f("showingCookieConsentBanner"),u(u.LONG,!1,!0)),y.show(),o("#brandLoginPopover").removeClass("hidden")},E=function(e,o){if(!require("page-model").session.loggedIn)return e&&k(),a.set(o,!0),void n.trackEventOnPage(o,"view","servletname_"+w)},S=function(){if(!C()){var e=h.attr("data-tracking-property")||"",o=m.length>0;a.has(e)||E(o,e)}},A=function(e){y&&y.destroy()&&(y=null),n.trackEventOnPage("pcb_campaign_callout_login","click","servletname_"+w,0,window.location.href),require("ta/registration/RegOverlay").show(e,e.target,{flow:"BRAND_SIGNUP_CORE_COMBINED",pid:40197,locationId:O}),e.preventDefault()};o(document).on("regUpdateMember",function(){h.length>0&&n.setEvtCookie("pcb_campaign_callout_Success","view","servletname_"+w,0,window.location.href)}),b.on("click",function(e){A(e)}),a.enabled&&("complete"===document.readyState?S():o(window).ready(S()))})});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"trip_planner_breadcrumbs","handlers",["handlers"]);n(["placement","ta/Core/TA.FireEvent","utils/urlDecoder"],function(e,n,i){"use strict";function r(n){var i=document.getElementById(e.id);i&&(i.innerHTML=n.innerHTML)}function t(e,n){i.goToLink(e,n)}function o(e,n){return require.defined("ta/util/Cookie")&&require("ta/util/Cookie").setOneTimeCookie(e,n)}return n.on("update-"+e.name,r),{goToLink:t,onClick:o}})});
require(["ta/p13n/placements"],function(e){var c=e.define.bind(e,"comscore","handlers",["handlers"]);c(["placement","ta/Core/TA.Event","vanillajs"],function(e,c){"use strict";c.queueForLoad(function(){var c=document.getElementById(e.id),o=c.querySelector(".dataHolder"),t=o.getAttribute("data-id"),n={c1:"2",c2:t,c3:"",c4:""};if("undefined"!=typeof COMSCORE)COMSCORE.beacon(n);else{window._comscore=window._comscore||[],window._comscore.push(n);var r=document.createElement("script");r.async=!0,r.src=("https:"==document.location.protocol?"https://sb":"http://b")+".scorecardresearch.com/beacon.js",c.appendChild(r)}},5,"comscore")})});
require(["ta/p13n/placements"],function(e){var o=e.define.bind(e,"facebook_autologin","handlers",["handlers"]);o(["placement","lib/jquery-amd","ta/Core/TA.Event","ta/util/Error","facebook/authutils"],function(e,o,t,n,a){"use strict";t.queueForAfterLoad(function(){var e=o("#fb_autologin_data");if(!e.length)return void n.record(null,"Could not find Facebook autologin data");var t=e.data("loadFbJs"),r=e.data("facebookJsUrl"),i=e.data("facebookConnectAppId"),c=e.data("facebookApiVersion"),u=e.data("fbAutoLogin"),d=e.data("fbFetchAccessToken");try{window.fbAsyncInit=function(){a.init(i,c)},t&&!function(e,o,t){var n,a=e.getElementsByTagName(o)[0];e.getElementById(t)||(n=e.createElement(o),n.id=t,n.src=r,a.parentNode.insertBefore(n,a))}(document,"script","facebook-jssdk"),u&&a.queueForInit(function(){a.autoLogin()}),d&&a.queueForInit(function(){a.refreshToken()})}catch(e){n.record(e,"Error setting up Facebook autologin JS")}},"placement: facebook_autologin")})});
require(["ta/prwidgets"],function(e){var t=e.define.bind(e,"homepage_footer_pickers","handlers",["handlers"]);t(["widget","lib/jquery-amd","ta/Core/TA.Record"],function(e,t,o){"use strict";function a(t,o,a,r){t&&t.stopPropagation(),o.onclick=null,e.require(["trjs!styleguide/overlays/Flyout","trjs!overlays/support/widgets","trjs!overlays/support/remoteWidget","trcss!src/build/styleguide/ui_overlays/flyouts"],function(n,s,i){n(t,o,s(e),i(a,{},r))})}return{showPos:function(r,n){var s=t(e.element).find(".point_of_sale_data");a(r,n,"POS_PICKER",{pageFeature:s.data("page-feature")||window.pageFeature||"",localeCodes:s.data("locale-codes")||window.localeCodes||"",relativeUrl:document.location.pathname+(document.location.search||"")+(document.location.hash||"")});var i=s.data("currentLocale");o.trackEventOnPage("POS_PICKER","Open",i)},showCurrency:function(e,t){a(e,t,"CURRENCY_PICKER")}}})});
define("ta/util/ActionRecord",["vanillajs","ta/util/Deferred","utils/ajax","ns-exporter","ta/Core/TA.Record"],function(r,t,e,o,n){function a(r,o,a,i){var c=new t;a||(a={});var u={url:a.url||r,method:a.method||"get",data:{action:o},success:function(r){a.onSuccess&&a.onSuccess(r),c.resolve(r)},error:function(r){a.onFailure&&a.onFailure(r),c.reject(r)}};for(var d in a)if(a.hasOwnProperty(d)&&!u.hasOwnProperty(d))u[d]=a[d];else if("data"==d)for(d in a.data)a.data.hasOwnProperty(d)&&(u.data[d]=a.data[d]);if(i){var s=n._toEvtParams(i);for(d in s)s.hasOwnProperty(d)&&(u.data[d]=s[d])}return e(u),i&&n._trackEventAfterAjax(i),c.promise()}var i={record:function(r,t,e){return a("/ActionRecord",r,t,e)},recordPlus:function(r,t,e){return a("/ActionRecordPlus",r,t,e)},recordPid:function(r){new e("/ActionRecord?pid="+r)}};return o.exportTo(i,"ta.util.action"),i});
require(["ta/prwidgets"],function(e){var n=e.define.bind(e,"homepage_partner_footer_links","handlers",["handlers"]);n(["widget","lib/jquery-amd","ta/util/ActionRecord"],function(e,n,t){"use strict";n(e.element).on("click",".inlineLink",function(){var e=n(this).parent(".footerLink").data("trackAction");e&&t.record("Footer"+e)})})});
require(["ta/prwidgets"],function(e){var t=e.define.bind(e,"homepage_social_footer_links","handlers",["handlers"]);t(["widget","lib/jquery-amd","ta/util/ActionRecord"],function(e,t,i){"use strict";t(e.element).on("click",".footerLink",function(){var e=t(this).data("trackAction");e&&i.record("Footer_"+e)})})});
require(["ta/prwidgets"],function(t){var e=t.define.bind(t,"homepage_tripadvisor_footer_links","handlers",["handlers"]);e(["widget","lib/jquery-amd","ta/util/Cookie","ta/util/ActionRecord","page-model"],function(t,e,r,i,a){"use strict";function n(t){var e=t?t.srcElement||t.target:null;e&&e.getAttribute("data-pid")&&r.setPIDCookie(e.getAttribute("data-pid"))}return e(t.element).on("click",'.js_click[data-id="help_center"]',function(){var r=this,i=e(r).data("url");t.require(["trjs!brand/HelpCenterOverlay","trcss!src/build/required/help_center_overlay"],function(t){t.open(r,i)})}),e(t.element).on("click",'.js_click[data-id="rs_footer_link"]',function(){var t=e(this),r=function(){t.data("url")&&(window.location=t.data("url"))};require(["ta/Core/TA.Record"],function(e){e.trackEventOnPage(a.session.pageServlet,t.data("trackAction")),r()})}),e(t.element).on("click",".footerLink",function(t){var r="Footer_",a=e(this),n=a.data("trackAction");if(n){var o="_blank"==a.attr("target");a.is("a")&&!o?(t.preventDefault(),i.record(r+n).always(function(){window.location=a.attr("href")})):i.record(r+n)}}),{checkForPid:n}})});
define("ta/util/openNewTab",["utils/browserutils","ta/Browser","ta/util/Cookie"],function(e,o,t){return function(n){var i;return o.isIE10Metro()||(i=e.ie&&!o.isIE9orHigher()?window.open(n,"_blank","location=yes,resizable=yes,menubar=yes,scrollbars=yes,toolbar=yes,width="+document.documentElement.clientWidth+",height="+document.documentElement.clientHeight):window.open(n,"_blank")),!i||i.closed||"undefined"==typeof i.closed?(t.setPIDCookie(38821),window.location=n,!1):i}});
define("ta/popups/CookieSettingsPanel",["ta/util/openNewTab","page-model"],function(e,n){return function(s){s&&s.stop();var o={en:451,en_UK:834,en_IE:835,en_ZA:2635,sv:720,no:721,da:1199,fr:1197,fr_BE:6409,fr_CH:6410,de:1201,de_AT:2719,de_CH:6431,el:1198,it:1202,it_CH:6432,es:1200,pl:1208,nl:1209,nl_BE:6411,fi:2968,hu:3049,cs:3128,sk:3233,pt_PT:13938,"default":451},i={en:8328,en_UK:8328,en_IE:8316,en_ZA:8324,sv:8322,no:8323,da:8310,fr:8312,fr_BE:8307,fr_CH:8326,de:8313,de_AT:8306,de_CH:8325,el:8314,it:8317,it_CH:8327,es:8321,pl:8319,nl:8318,nl_BE:8309,fi:8311,hu:8315,cs:8308,sk:8320,pt_PT:13939,"default":8328},t=n.isMobile?i:o,_=n.session&&n.session.posLocale&&t[n.session.posLocale]?t[n.session.posLocale]:t["default"],l="http://info.evidon.com/pub_info/"+_+"?v=1&nt=0";e(l)}});
require(["ta/prwidgets"],function(e){var t=e.define.bind(e,"homepage_tripadvisor_horizontal_footer_links","handlers",["handlers"]);t(["widget","lib/jquery-amd","ta/popups/CookieSettingsPanel","ta/util/ActionRecord"],function(e,t,i,o){"use strict";t(e.element).on("click",'.js_click[data-id="cookie-consent"]',function(){i()}),t(e.element).on("click",".footer_link",function(e){var i=t(this),n="Footer_",r=i.data("trackAction");r&&(i.is("a")&&(e.preventDefault(),o.record(n+r).always(function(){window.location=i[0].href})),o.record(n+r))})})});
require(["ta/prwidgets"],function(e){var n=e.define.bind(e,"homepage_pos_picker","handlers",["handlers"]);n(["widget","lib/jquery-amd","ta/util/Cookie","ta/util/ActionRecord"],function(e,n,i,t){"use strict";function o(i){var o=n(i).data("id"),r=n(e.element).find(".picker_dropdown").data("currentLocale");t.record("POS_PICKER_SELECT_POS_"+o+"_FROM_"+r).always(function(){window.location=i.href})}function r(){i.remove("TAPD","/",window.domain)}var a=n(".fixed_header",n(e.element));n(e.element).before(a);var d=n(e.element).find(".pos_item.selected")[0];d&&d.scrollIntoView(),n(e.element).on("click",".pos_link",function(e){e.preventDefault(),r(),o(this)})})});
require(["ta/prwidgets"],function(e){var r=e.define.bind(e,"homepage_currency_picker","handlers",["handlers"]);r(["widget","lib/jquery-amd","ta/util/Currency"],function(e,r,n){"use strict";function t(t){var d=r(e.element).find(".picker_dropdown").data("currentCurrency");n.setCurrencyAndReload(t,d)}var d=r(".fixed_header",r(e.element));return r(e.element).before(d),{setCurrencyAndReload:t}})});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"global_footer","handlers",["handlers"]);t(["ta/Core/TA.LocalStorage","ta/Core/TA.PageVisibility","placement","vanillajs","utils/ajax"],function(e,t,n,a,i){function l(){var e=window.location.pathname,t=e.indexOf("-"),a=e.length<=1?"Home":t>0?e.substring(1,t):e.substring(1);require(["trjs!ta/util/Element"],function(e){ta.util.element.trackWhenScrolledIntoView("#"+n.id,[a,"in_view","global_footer"])})}function o(){require(["trjs!common/PageDwell"],function(e){e.init(window.pageServlet)})}return l(),n.params.dwell_tracking&&o(),e.set("lastPageFocusTimestamp",Date.now()),t.addFocusListener(function(){e.set("lastPageFocusTimestamp",Date.now())}),t.addBlurListener(function(){e.set("lastPageBlurTimestamp",Date.now())}),{getFullDisclaimerText:function(e){i({url:"/TAMGFooterAjax",success:function(t){e.parentElement&&(e.parentElement.innerHTML=t)},data:{"a":"SHOW_FULL_DISCLAIMER"},evalScripts:!0,method:"get"})}}})});
require(["ta/p13n/placements"],function(e){var o=e.define.bind(e,"global_nav","handlers",["deferred/lateHandlers","handlers"]);o(["placement","lib/jquery-amd","common/Radio","ta/registration/RegEvents","utils/throttle","widget/components","utils/asdf-encoder"],function(e,o,n,t,a,i,r){"use strict";function s(){var e=o(window).scrollTop();if(b.length&&w.is(":visible")){var n=v.height()-e;e<=0&&b.css({"position":"absolute","top":0}),n>0&&(e>0&&e<=50?b.css({"position":"absolute","top":e,"bottom":"auto"}):n<=50&&b.css({"position":"absolute","top":"auto","bottom":0}))}}function l(){var e=o(".second-view",v),n=o(window).scrollTop();b.length&&(m.css({"display":"block"}),e.length&&w.is(":visible")&&(n=p.height()-m.height(),window.scroll(0,n),b.css({"position":"absolute","top":"auto","bottom":0})))}function c(){var e=o(".global-nav-persistent",v);e.length&&e.toggleClass("fixed",o(window).scrollTop()>v.offset().top)}function d(e,o){e.preventDefault();var n=o.getAttribute("data-ahref")?r.asdf(o.getAttribute("data-ahref")).replace(/&amp;/g,"&"):"/";window.open(n,"_self")}var u="TopNav",v=o("#"+e.id),f=n("global-nav"),g=null,h=null,p=o(".persistent-icons",v),b=o(".global-nav-icons",p),m=o(".global-nav-logo",p),y=o(".global-nav-logo-2018",v),w=o('[data-placement-name="global_nav_geopill"]',v),j=n("candy-bar-quick-links"),C=o(".global-nav-bottom",v),k=n("tripsearch-scroll-geo-pill");f.on("run-my-trips-test-3",function(){T(!1,!0)}),k.on("hide-on-header",function(e){y&&y.toggleClass("is-hidden-mobile",!e)});var _=function(e){window.userLoggedIn=!0;var t=0==v.find("[data-non-components]").length;if(t){var a=v.find(".components-nav-legacy-actions"),r=o("<div>").html(e).find(".components-nav-legacy-actions").html();a.html(r)}else{var s=o("<div>").append(v.find(".global-nav-no-refresh"));v.html(e),v.find(".global-nav-no-refresh").each(function(e,n){o(n).replaceWith(s.find("#"+n.getAttribute("id"))[0])}),g&&g.hide("replace-el")}v[0]&&(i.initComponentWidgets(v[0],"@ta/trips.trip-link"),i.initComponentWidgets(v[0],"@ta/brand.global-nav-action-content-collect")),n("inbox").trigger("setup_handler")}.bind(v),O=function(){return{skipLocation:e.location_id<=0,returnTo:document.location.pathname+(document.location.search||"")+(document.location.hash||"")}};t.on("success",function(){e.requestAJAXPlacement(_,null,O())}),v.on("mouseenter",".global-nav-links-container [data-element]",function(e){var n=o(this),t=n.find("a").first();g&&g.hide("new-overlay");var a=v.find(n.data("element")).clone();if(a.length){var i=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnMouseAway","trjs!overlays/position","trjs!overlays/options/destroyOnHide"];require(i,function(i,r,s,l,c){var d=new i(n[0],new r(a[0],"global-nav-flyout global-nav-menu"),s,l.bottomRight([0,1]),c);d.domParent=v.find(".global-nav-overlays-container")[0],d.show(),t.attr("data-active-menu-trigger",!0),o(e.currentTarget).find(".ui_tab").addClass("hovering"),d.on("hide",function(){t.removeAttr("data-active-menu-trigger"),o(e.currentTarget).find(".ui_tab").removeClass("hovering")}),g=d})}}),v.on("mouseenter",".subItem",function(e){o(this).siblings(".expandSubItem").removeClass("active")}),v.on("mouseenter",".expandSubItem",function(e){var n=o(this);if(!n.hasClass("active")){n.addClass("active"),n.siblings(".expandSubItem").removeClass("active");var t=n.find(".secondSubNav").clone(),a=n.parents(".ui_overlay"),i=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnMouseOut","trjs!overlays/options/destroyOnHide"];require(i,function(e,o,i,r){var s=new e(n[0],new o(t[0]),i,r);s.domParent=a[0],t.css("display","block"),s.show()})}}),v.on("mouseenter",".global-nav-links-ellipsis",function(e){var n=o(this);g&&g.hide("new-overlay");var t=v.find(".global-nav-links-container li"),a=t.filter(":hidden"),i=t.filter(function(e,n){return o(n).offset().top>t.offset().top}),r=o().add(a).add(i).clone(),s=v.find(".global-nav-links-menu-more").clone();s.prepend(r);var l=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnMouseAway","trjs!overlays/position","trjs!overlays/options/destroyOnHide"];require(l,function(e,o,t,a,i){var r=new e(n[0],new o(s[0],"global-nav-flyout global-nav-menu"),t,a.bottomRight([0,1]),i);r.domParent=v.find(".global-nav-overlays-container")[0],r.show(),n.find(".ui_tab").addClass("hovering"),r.on("hide",function(){n.find(".ui_tab").removeClass("hovering")}),g=r})}),v.on("click","#global-nav-HelpDesk",function(e){e.preventDefault();var o=this,n=["trjs!overlays/Overlay","trjs!overlays/styles/modal","trjs!overlays/options/closeOnEscape","trjs!overlays/position","trjs!overlays/options/closeOnDocClick","trjs!overlays/options/ajax","trcss!src/build/required/help_center_overlay"];require(n,function(e,n,t,a,i,r,s){var l=new e(o,[n(null,"","help_center"),t,a.cssCentered(),i,r("/uvpages/helpCenterOverlay.html")]);l.show(),f.emit("overlay-show")})}),v.on("click",".masthead-saves",function(e){h?(g&&g.hide("new-overlay"),h&&h.destroy()&&(h=null),require(["trjs!ta/Core/TA.Record"],function(e){e.trackEventOnPage("TopNav","mytrips_dropdown_cancel")})):(T(!1,!1,e.currentTarget),o(e.currentTarget).find(".ui_icon").addClass("hovering"))});var T=function(e,n,t){g&&g.hide("new-overlay");var a=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnDocClick","trjs!overlays/position","trjs!overlays/options/destroyOnHide","trjs!overlays/options/autoReposition","trjs!ta/Core/TA.Record"];require(a,function(a,i,r,s,l,c,d){var u=o(".masthead-saves"),f=new a(u[0],new i("","global-nav-flyout global-nav-utility trips-flyout-container"),r.withoutTouchEvents,u.data("nav-2018-enabled")?s.bottomLeft([u.width()/2-34,9]):s.bottomLeft([-20,-3]),l,c);f.domParent=v.find(".global-nav-overlays-container")[0],f.show(),v.find(".trips-flyout-container").addClass("hide-arrow"),g=f,require(["trdust!masthead-saves-dust","trdust!styleguide-dust","trjs!masthead-saves","trcss!masthead-saves"],function(a,i,r){setTimeout(function(){h=new window.MastheadSavesApp,h.start({inCreateTripFlow:e,runTest3:n}),f.on("hide",function(e){h&&h.destroy()&&(h=null),d.trackEventOnPage("TopNav","mytrips_dropdown_cancel"),t&&o(t).find(".ui_icon").removeClass("hovering")}),v.find(".trips-flyout-container").removeClass("hide-arrow")},0)})})}.bind(v);v.on("click",".global-nav-utility-activator",function(e){var n=o(this),t=v.find(n.data("element")).clone();if(t.length){if(g){if(g.sourceElement==this)return void(g.isOpen()?g.hide("close"):g.show());g.hide("new-overlay")}t=t.clone();var a=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnDocClick","trjs!overlays/position","trjs!overlays/options/autoReposition"];require(a,function(a,i,r,s,l){var c=new a(n[0],new i(t[0],"global-nav-flyout global-nav-utility"),r,n.data("nav-2018-enabled")?s.bottomLeft([n.outerWidth()/2-34,12]):s.bottomLeft([-20,-3]),l);c.domParent=v.find(".global-nav-overlays-container")[0],c.show(),n.addClass("menu-open"),o(e.currentTarget).find(".ui_icon").addClass("hovering"),c.on("hide",function(){n.removeClass("menu-open"),o(e.currentTarget).find(".ui_icon").removeClass("hovering")}),g=c})}}),v.on("click",".global-nav-logo",function(){require(["trjs!ta/Core/TA.Record"],function(e){e.setEvtCookie("TopNav_"+window.pageServlet,"click","TAlogo",0,"/Home")})}),n("inbox").on("has_unread_conversations",function(e){v.find(".global-nav-hamburger .ui_jewel.unread").removeClass("hidden"),v.find(".nav-sub-link.inbox .icon-and-jewel").removeClass("hidden")}),n("inbox").on("no_unread_conversations",function(e){v.find(".global-nav-hamburger .ui_jewel.unread").addClass("hidden"),v.find(".nav-sub-link.inbox .icon-and-jewel").addClass("hidden")}),v.on("click","a.login-button.mobile",function(e){var n="CORE_COMBINED",t=40422,a="login";o(this).hasClass("join-button")&&(a="join");var i={flow:n,pid:t,userRequestedForce:"true",locationId:require("page-model").GEO_ID,onSuccess:function(e){if(require("@ta/social.onboarding-state")){var o=e&&(e.hasCreatedMember||!e.hasAcceptedTermsOfUse),n=require("@ta/social.onboarding-state").ACTIONS.setShouldFire;require("redux-init").dispatch(n(o,"MASTHEAD"))}}},r={extraQueryParams:{flowOrigin:a}};i=o.extend(i,r),require("ta/registration/RegOverlay").showForMobile(e,e.target,i),e.preventDefault()}),l();var q=a(c,100);return o(window).scroll(function(){s(),q()}),j.on("border-top",function(e){C.toggleClass("home_ui_tabs",e)}),v.on("click","a.global-nav-link[data-tracking-label]",function(e){var n=o(e.target).data("trackingLabel");require(["trjs!ta/Core/TA.Record"],function(o){"HelpDesk"===n||"_blank"==e.target.target?o.trackEventOnPage(u,"click",n):o.setEvtCookie(u,"click",n,0,e.target.href)})}),{checkForPersistentIcons:s,checkForPersistentGlobalNav:c,clickLogoLink:d}})});
require(["ta/p13n/placements"],function(a){var n=a.define.bind(a,"global_nav_action_cart","handlers",["handlers"]);n(["placement","lib/jquery-amd"],function(a,n){"use strict";var e=n("#"+a.id);e.on("click","a.shopping-cart-link",function(){var a=n(this).data("tracking-label");require(["trjs!ta/Core/TA.Record"],function(n){n.trackEventOnPage("TopNav_"+window.pageServlet,"click",a)})})})});
define("ta/util/CommonMessagingUtil",["lib/jquery-amd","ta/Core/TA.LocalStorage","ta/support/Qualtrics","ta/util/SessionStorage","ta/Core/TA.Event"],function(e,t,n,a,i){"use strict";function r(e){if(t.enabled){var n=t.get(e+D);return n?parseInt(n):0}return null}function s(e){if(t.enabled&&e){var n=e+D;t.set(n,r(e)+1)}}function o(e){if(t.enabled){var n=t.get(e+y);return n?parseInt(n):0}return 0}function u(e){if(t.enabled&&e){var n=e+y;t.set(n,o(e)+1)}}function l(e){if(t.enabled){var n=t.get(e+p);return!!n}return!1}function c(e){t.enabled&&e&&t.set(e+p,"true")}function d(e){var n=(new Date).getDate();if(t.enabled&&e){var a=e+S;t.set(a,n.toString())}}function f(e){var n=(new Date).getDate();if(t.enabled&&e){var a=e+S,i=t.get(a);return!!i&&i===n.toString()}return!1}function m(e){var n=(new Date).getDate();t.enabled&&t.set(e,n.toString())}function g(e){var n=(new Date).getDate();if(t.enabled){var a=t.get(e);return!!a&&a===n.toString()}}function b(e,t,r){e&&"function"==typeof e&&e()&&(n.seenThisPageView()||n.canDisplaySmart()||n.canDisplay())||t&&"function"==typeof t&&t()||r&&"function"==typeof r&&(document.getElementById("FIXED_AD")?a.canUseSessionStore()&&a.getObject("ads.fixed.close")?r():i.on("ad_div_collapsed",function(){r()}):r())}function v(e){return e.toLowerCase().replace("mobile","")}var D="_view_count",p="_is_disabled",y="_times_dismissed",S="_disabled_for_day";return{getCurrentPageViews:r,incrementPageViews:s,getNumberOfTimesDismissed:o,incrementNumberOfTimesDismissed:u,isPlacementDisabled:l,disablePlacement:c,setPlacementDisabledForToday:d,isPlacementDisabledForToday:f,setPlacementGroupKey:m,checkPlacementGroupKey:g,parseServletName:v,displayPlacementIfNoSurveyNorAdIsPresent:b}});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"global_nav_action_inbox","handlers",["handlers"]);n(["placement","vanillajs","lib/jquery-amd","common/Radio","ta/Core/TA.Record","ta/util/CommonMessagingUtil"],function(e,n,o,i,t,a){function s(e){if(e.receivedCallback&&e.receivedCallback(),o(".inbox-flyout-container").length&&g)g.destroy();else{var n=e.el,i=e.bottomLeftOffset;l(void 0,n,i)}}function r(e){l(e,o(".masthead-inbox-icon")[0])}function l(n,i,a){var s=o("#"+e.id),r=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnDocClick","trjs!overlays/position","trjs!overlays/options/destroyOnHide","trjs!overlays/options/autoReposition","ta/registration/RegOverlay","trjs!unifiedinbox/inbox-lander","trcss!unified_inbox_lander"];require(r,function(e,r,l,c,d,v,_,b,f){var w=o(".inbox-nav-contents",s).clone()[0];if(w.classList.remove("hidden"),o(".login-cta",w).length){var p=o(".login-cta span",w);p.click(function(){n&&m&&(h=!0,t.trackEventOnPage("reg_trigger","mgp_click_login","Inbox Jewel Notification Log In Click | Nav | mgp_drs_mem",u)),g.destroy(),_.show({type:"dummy"},null,{flow:"CORE_COMBINED",pid:40472,userRequestedForce:!0,onSuccess:function(){o(".login-cta",s).remove(),o(".inbox-nav-dropdown",s).removeClass("with-login-cta")}.bind(this)})})}else for(var x,j=o(".js-inbox-lander-thread-list-item.loading",w),y=o(".inbox-masthead-wrapper",w),C=0;C<10;++C)x=j.clone(),x.removeClass("hidden"),y.append(x);var k=a;k||(k=o(i).data("nav-2018-enabled")?[o(i).width()/2-34,7]:[-20,-3]),g=new e(i,new r(w,"inbox-flyout-container"),l.withoutTouchEvents,c.bottomLeft(k),d,v),g.show(),n&&!n.hasClass("hidden")&&g.on("hide",function(){h||t.trackEventOnPage("reg_trigger","mgp_close","Inbox Jewel Notification | Nav | mgp_drs_mem",u),h=!1,m=!1}),o(".login-cta",s).length||b.loadMastheadDropdown()})}function c(e,n){if(n)if(n.hasClass("is-control"))t.trackEventOnPage("reg_trigger","mgp_view_control","Inbox Jewel Notification Control| Nav | mgp_drs_mem");else{var i=a.getCurrentPageViews(_);i>=b&&a.disablePlacement(_),a.isPlacementDisabledForToday(_)||a.isPlacementDisabled(_)||!n.hasClass("valid-for-test")||(o(".inbox-jewel-test",e).removeClass("hidden"),t.trackEventOnPage("reg_trigger","mgp_view","Inbox Jewel Notification | Nav | mgp_drs_mem",u))}}function d(){var n=o("#"+e.id),s=o(".inbox-jewel-test",n);c(n,s),o(".masthead-inbox-icon, .ui_jewel",n).click(function(e){e.stopPropagation(),s&&!s.hasClass("hidden")?(t.trackEventOnPage("reg_trigger","mgp_click","Inbox Jewel Notification | Nav | mgp_drs_mem",u),a.setPlacementDisabledForToday(_),a.incrementPageViews(_),m=!0,t.trackEventOnPage("Inbox|Dropdown","icon_jewel_click","no_unread",v)):o(".ui_jewel",n).length&&o(".ui_jewel",n).hasClass("hidden")?t.trackEventOnPage("Inbox|Dropdown","icon_jewel_click","no_unread",v):o(".ui_jewel",n).length&&t.trackEventOnPage("Inbox|Dropdown","icon_jewel_click","has_unread",v),o(".masthead-inbox-icon",n).attr("data-on-inbox")?window.location="/Inbox":o(".inbox-flyout-container").length&&g?g.destroy():r(s)}),i("inbox").on("thread_clicked",function(e){g&&g.destroy()}),i("inbox").on("has_unread_conversations",function(e){var i=o(".ui_jewel",n);"undefined"!==i&&i.length>0&&i.each(function(e,n){o(n).hasClass("inbox-jewel-test")||o(n).removeClass("hidden")})}),i("inbox").on("no_unread_conversations",function(e){var i=o(".ui_jewel",n);"undefined"!==i&&i.length>0&&i.each(function(e,n){o(n).hasClass("inbox-jewel-test")||o(n).addClass("hidden")})}),i("inbox").on("setup_handler",function(){d()})}var g,v=40186,u=40405,_="Membership_Inbox_Jewel_Test",b=3,m=!1,h=!1;return i("global-nav-inbox").on("open",function(e,n){s(e,n)}),d(),{}})});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"global_nav_action_profile","handlers",["handlers"]);t(["placement","lib/jquery-amd","page-model"],function(e,t,a){"use strict";function r(){var e=t(".button_container").data("pageProperty1"),a=t(".button_container").data("pageProperty2"),r=t(".button_container").data("pageProperty3"),n=t(".button_container").data("pageProperty4");(e&&""!==e||a&&""!==a||r&&""!==r||n&&""!==n)&&require("ta/Core/TA.Record").trackEventOnPage(e,a,r,n)}function n(e){if(c.hasClass("core-login-button")){var t=c.data("isControl"),a=c.data("trackingPid"),r=c.data("joinAttr"),n="reg_trigger",o="mgp_";t&&r&&"view"===e&&(o="mgp_view_control",require("ta/Core/TA.Record").trackEventOnPage(n,o,r)),!t&&r&&a&&require("ta/Core/TA.Record").trackEventOnPage(n,o+e,r,a)}}var o=t("#"+e.id),i=null,c=t(".join-copy-tracking");n("view"),o.on("click","a.login-button",function(e){i&&i.hide("replace-el");var a=t(".core-login-button").data("flowName"),o=t(".core-login-button").data("pid"),c="login";t(this).hasClass("core-login-button")&&(c="join",t(this).hasClass("join-copy-tracking")&&n("click"));var l={flow:a,pid:o,userRequestedForce:"true",locationId:require("page-model").GEO_ID,onSuccess:function(e){if(require("@ta/social.onboarding-state")){var t=e&&(e.hasCreatedMember||!e.hasAcceptedTermsOfUse),a=require("@ta/social.onboarding-state").ACTIONS.setShouldFire;require("redux-init").dispatch(a(t,"MASTHEAD"))}}},d={extraQueryParams:{flowOrigin:c}};l=t.extend(l,d),require("ta/registration/RegOverlay").show(e,e.target,l),e.preventDefault(),r()});var l=function(e,a){var r=t(e).data("trackingLabel");require(["trjs!ta/Core/TA.Record"],function(t){/\/#\s*$/.test(e.href)||"_blank"==e.target?t.trackEventOnPage(a,"click",r):t.setEvtCookie(a,"click",r,0,e.href)})};o.on("click",".global-nav-profile-menu a.subLink[data-tracking-label], .sidebar-nav-profile a.subLink[data-tracking-label]",function(){l(this,"UtilityNav")}),o.on("click","[data-track-profile-dropdown-open]",function(){var e=require("page-model").session.loggedIn?"Signed_in_profile_dropdown":"Signed_out_profile_dropdown";require(["trjs!ta/Core/TA.Record"],function(t){t.trackEventOnPage("UtilityNav","open",e)})})})});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"global_nav_action_trips","handlers",["handlers"]);t(["placement","lib/jquery-amd","api-mod","page-model","common/Radio","ta/Core/TA.Record","ta/Core/TA.LocalStorage"],function(e,t,n,o,a,i,l){"use strict";var r=t('[data-placement-name="global_nav_menus"]'),s=a("global-nav"),d=null,u={},c=t("#"+e.id),y=(c.find(".my-trips-dropdown-test"),c.find(".my-trips-dropdown-control"),c.find(".quick-save-test")),f="my-trips-dropdown-test-overlay",p="my_trips_educational_flyout",v=require("page-model").JS_SECURITY_TOKEN,m=require("page-model").session.pageServlet,g=function(e){t.ajax({type:"GET",url:"/data/1.0/trips/item",data:{limit:2},beforeSend:function(e){e.setRequestHeader("X-Requested-By",v)},success:e})},h=function(e){return(new Date).getTime()-e<2592e6},_=function(n){var o=["overlays/position","overlays/styles/flyout","overlays/options/destroyOnHide","overlays/options/autoReposition","overlays/options/fade"],a=function(e,t,o,a,i){return[new t(n[0],"global-nav-flyout global-nav-utility my-trips-dropdown-test-flyout"),e.bottomLeft([-20,-3]),o,a,i(i.SHORT,!0,!0)]};n.on("click",".ui_close_x",function(){s.trigger("hide-overlays",f)}),s.trigger("show-overlay",f,t("#"+e.id).find(".masthead-saves")[0],o,null,a)},w=function(){return t.find(".ui_notification_container").length||t.find(".ui_overlay").length||t.find("#qual_ol").length},b=function(){setTimeout(function(){!w()&&y.length>0&&l.has(p)&&!l.getObject(p)&&0==n.scrollTop()&&(_(y),l.set(p,!0),i.trackEventOnPage(p,"flyout_shown",m,0,!1))},1e3)};s.on("hide-overlays",function(e){e?u[e]&&u[e].hide("hide-overlay")&&(u[e]=null):d&&d.hide("replace-el")}),s.on("show-overlay",function(e,t,n,o,a){d&&d.hide("new-overlay");var i=["trjs!overlays/Overlay"].concat(n);require(i,function(n){var i=a.apply(null,[].slice.apply(arguments,1)),l=new n(t,i);l.domParent=r.find(".global-nav-overlays-container")[0],l.show(),o&&o(l),d=l,e&&(u[e]=l)})}),s.on("run-quick-save-test",function(){l.has(p)||g(function(e){e.data&&(e.data.length<=1||!h(e.data[1].date))&&(l.set(p,!1),b())})}),l.enabled&&("complete"===document.readyState?b():t(window).ready(b))})});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"global_nav_geopill","handlers",["deferred/GeoSearch","handlers"]);n([],function(){})});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"global_nav_links","handlers",["handlers"]);n(["utils/asdf-encoder"],function(e){function n(n,a){window.open(e.asdf(a.getAttribute("data-ahref")).replace(/&amp;/g,"&"),"_self")}return{clickAboutGeoLink:n}})});
require(["ta/p13n/placements"],function(e){var r=e.define.bind(e,"masthead_search","handlers",["deferred/lateHandlers","handlers"]);r(["placement","ta/Core/TA.Store","common/Radio"],function(e,r,a){function n(){if(e.params&&"typeahead_to_store"in e.params){var a=e.params.typeahead_to_store;if(a)for(var n in a)a.hasOwnProperty(n)&&r.store(n,a[n])}}n();var t=r.retrieve("typeahead_dual_search_options");return e.require(["trjs!deferred/lateHandlers"],function(e){a("masthead_search").on("open",function(){e.showSearchOverlay()})}),{getOptions:function(){return t}}})});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"browser_mode_tracking","handlers",["handlers"]);n(["placement","ta/Core/TA.Event","ta/Browser","ta/Core/TA.Record","ta/util/SessionStorage"],function(e,n,o,r,t){function s(e){r.trackEventOnPage("BROWSER_TRACKING",a,e,null,!0)}var a,i=e.id+"_browser_mode_tracked";n.queueForLoad(function(){t.canUseSessionStore()&&sessionStorage.getItem(i)||o.isChrome()&&(a="Chrome",o.isChromeIncognito(s),t.canUseSessionStore()&&sessionStorage.setItem(i,"1"))})})});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"slide_up_messaging","handlers",["handlers"]);t(["placement","lib/jquery-amd","ta/Core/TA.Event","ta/util/CommonMessagingUtil","ta/util/SessionStorage","ta/registration/RegEvents","page-model","commerce/offerclickEvents","ta/Core/TA.LocalStorage","utils/throttle","ta/support/Qualtrics","ta"],function(e,t,n,r,i,o,a,s,c,l,u,d){function f(){W.length>0?p():Z.length>0&&m()}function p(){40256===O()||40259===O()?ee.on("click",z):(ee.on("click",H),te.on("click",K));var t;fe&&(t=L(fe)),_()?Y():e.params.shouldDisplayAfterOfferClick&&!t?s.on("afterClick",function(){I(),v(0)}):e.params.shouldDisplayAfterPriceRefresh?n.on("price_refresh_overlay_closed",function(){setTimeout(function(){G()},1e3)}):e.params.shouldNotFireIfDatePickerOpen&&N()?B(j):!b()&&g()?v(1e3):window.addEventListener("scroll",oe)}function m(){var t=L();e.params.shouldDisplayAfterOfferClick?t?y():s.on("afterClick",function(){I(),b()||y()}):e.params.shouldDisplayAfterPriceRefresh?n.on("price_refresh_overlay_closed",function(){y()}):e.params.shouldNotFireIfDatePickerOpen?B(F):window.addEventListener("scroll",ae)}function g(){var e=[40335,40339,40340,40341,40342,40343,40344,40345,40346,40347];return e.indexOf(O())>-1}function v(e){T()?window.addEventListener("scroll",se):setTimeout(function(){G()},e)}function _(){var e,t,n=x(),i=S(),o=!1;return fe&&(e=r.isPlacementDisabled(fe)),n&&(t=r.getCurrentPageViews(fe)),i&&(o=r.checkPlacementGroupKey(i)),e||t>=n||o||r.isPlacementDisabledForToday(fe)}function w(){window.pageYOffset>ue&&(W.hasClass("slide_up_hidden")&&setTimeout(function(){G()},500),window.removeEventListener("scroll",oe))}function h(){window.pageYOffset>ue&&(W.hasClass("slide_up_hidden")&&G(),window.removeEventListener("scroll",se))}function y(){var e=t(".slide_up_messaging_control_container",J),n=e.data("controlProperty1"),r=e.data("controlProperty2");null!=n&&(D(n)?X(ie,"mgp_view_control",n):X(n,r,ne))}function k(){window.pageYOffset>ue&&(window.removeEventListener("scroll",ae),y())}function D(e){return e.indexOf("Price Refresh")!==-1||e.indexOf("Attractions Control | AttractionReview | Slideup")!==-1||e.indexOf("Attractions Control | Attractions | Slideup")!==-1||e.indexOf("Direct Bookers Control")!==-1}function P(e,t){Y();var n=R(),i=r.getNumberOfTimesDismissed(fe);i+1<n?r.incrementNumberOfTimesDismissed(fe):r.disablePlacement(fe),A()?X(ie,"mgp_close",e,O()):X(e,t,ne,O())}function C(e){return e=e.replace("mobile",""),"servletname_"+e}function O(){var e=$.attr("pid");return e?parseInt(e):40361}function b(){var e=$.attr("is-mobile");return"true"===e||"false"!==e&&null}function S(){return $.attr("placement-group")}function T(){var e=$.attr("is-tablet");return"true"===e||"false"!==e&&null}function E(){var e=$&&$.attr("flow-name");return e?e:"BRAND_SIGNUP_CORE_COMBINED"}function A(){var e=$.attr("use-new-tracking");return"true"===e}function R(){var e=$.attr("max-times-dismissed-before-disabled");return e?parseInt(e):1}function x(){var e=$.attr("max-page-views");return e?parseInt(e):null}function I(){var e=(new Date).getDate();c.enabled&&c.set(pe,e.toString())}function L(){var e=(new Date).getDate();return!!c.enabled&&c.get(pe)===e.toString()}function j(){N()||(d.page.off("dateSelected",j),d.page.off("datepickerRejected",j),G())}function q(){return"true"===$.attr("check-survey-will-fire")}function N(){var e=document.querySelector(".date_picker_modal");if(!e&&require.defined("mixins/page-dates/pop-calendar")){var t=require("mixins/page-dates/pop-calendar");e=t.shouldPop()||t.isShowing()}return e}function B(e){d.page.on("dateSelected",function(){setTimeout(e,1500)}),d.page.on("datepickerRejected",function(){setTimeout(e,1500)})}function F(){N()||(d.page.off("dateSelected",F),d.page.off("datepickerRejected",F),y())}function G(){q()&&(u.seenThisPageView()||u.canDisplaySmart()||u.canDisplay())||_()||(document.getElementById("FIXED_AD")?i.canUseSessionStore()&&i.getObject("ads.fixed.close")?U():n.on("ad_div_collapsed",function(){U()}):U())}function U(){W.css("display","block"),setTimeout(function(){W.removeClass("slide_up_hidden")},250),M(),V()}function V(){x()&&r.incrementPageViews(fe),r.setPlacementDisabledForToday(fe);var e=S();e&&r.setPlacementGroupKey(e)}function Y(){W.addClass("slide_up_hidden"),setTimeout(function(){W.css("display","none")},750)}function K(){Y(),Q()}function M(){var e=O(),t=W.data("pageProperty1");A()?X(ie,"mgp_view",t,e):X(t,"view",ne,e)}function Q(){var e=ee.length>0?ee:te,t=e.data("clickProperty1");if(e.length>0)if(A())X(ie,"mgp_click",t,O());else{var n=e.data("clickProperty2");X(t,n,ne,O())}}function X(e,t,n,r){require(["trjs!ta/Core/TA.Record"],function(i){i.trackEventOnPage(e,t,n,r)})}function z(e){e.stopPropagation(),e.preventDefault(),Q();var t=O(),n=window.location.href.slice(),r=/-k\d+-/,i="-p"+t+"-";n=n.replace(r,i);var o=/ShowTopic/,a="NewTopic";n=n.replace(o,a),window.location=n}function H(e){e.preventDefault(),Y(),Q();var t=O(),n={flow:re,pid:t,locationId:a.GEO_ID,returnTo:document.location.pathname,jsCallback:null};b()?require("ta/registration/RegOverlay").showFullScreen(e,e.target,n):require("ta/registration/RegOverlay").show(e,e.target,n)}var J=t("#"+e.id),W=t(".slide_up_messaging_container",J),Z=t(".slide_up_messaging_control_container",J),$=t(".thumbprint",J),ee=t(".joinButton",J),te=t(".savesButton",J),ne=a.session.pageServlet.toLowerCase(),re=E(),ie="reg_trigger";ne=C(ne);var oe=l(w,100),ae=l(k,100),se=l(h,10),ce=40256,le=O(),ue=20,de=600;le===ce&&(ue=de);var fe=$.text(),pe="hotels_returner_enabled_for_day";return f(),o.on("success",function(){W&&W.length>0&&!W.hasClass("slide_up_hidden")&&(Y(),window.removeEventListener("scroll",oe)),Z&&Z.length>0&&window.removeEventListener("scroll",ae)}),{dismiss:P}})});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"hotel_impression_tracker","handlers",["handlers"]);n(["placement","ta/Core/TA.Event"],function(e,n){"use strict";var t=function(e,n){var t=document.createComment("Activity name for this tag: "+n+" hotel impression"),a=document.createElement("img");a.src=e,a.height="1",a.width="1",a.border="0",a.setAttribute("style","display:none"),document.body.appendChild(t),document.body.appendChild(a)};n.queueForLoad(function(){if(e.params&&e.params.hotelBrand&&e.params.impressionPixels)for(var n=e.params.impressionPixels.length,a=0;a<n;a++)t(e.params.impressionPixels[a],e.params.hotelBrand)},"Initialization of "+e.name)})});
define("ta/sales/metaClickComScoreTag",["ta/util/Error","ta/Core/TA.Event"],function(e,i){"use strict";function t(e){e&&(this.providerName=e.providerName,this.isOTAPixel=e.isOTAPixel,this.vendorName=e.vendorName,this.trackingPixel=e.trackingPixel,this.brandName=e.brandName,this.locationIds=e.locationIds,this.valid=!(!this.trackingPixel||!this.vendorName&&!this.providerName))}var a=["vendorname","provider","locationid"],r="TripAdvisor",n="NoProvider",o=[],d=/\[timestamp\]/,c=/\[OrderValue\]/,l=/\[Partner\]/,s=function(i){if(window.IS_DEBUG){if(!i)return void e.record(null,"Click attributes are empty, pathname="+window.location.pathname);for(var t=0;t<a.length;t++)i[a[t]]||e.record(null,"Missing click attribute: "+a[t]+". Pathname="+window.location.pathname)}},m=function(e,i){var t=i.locationIds,a=e.dataset.locationid||-1;return window.Array&&window.Array.isArray(t)?0==t.length||t.indexOf(a)>-1:!t||t.includes&&t.includes(a)},u=function(e){if(e&&e.dataset){s(e.dataset);for(var i=0;i<o.length;i++){var t=o[i],a=e.dataset.provider===t.providerName||t.providerName===n,d=e.dataset.vendorname===r,c=a&&!(t.isOTAPixel||t.vendorName===r||d),l=a&&d&&t.vendorName===r,u=t.isOTAPixel&&!(a||d);l?t.brandName&&!m(e,t)||g(e,t,"IB"):(c||u)&&g(e,t,"meta")}}},v=function(){return o.length},h=function(e,i,t){try{if(t)return e.replace(i,t)}catch(e){}return e},g=function(e,i,t){t+=i.isOTAPixel?" OTA":"";var a=i.trackingPixel;a=h(a,d,(new Date).getTime()),a=h(a,l,e.dataset.offerclient),a=h(a,c,encodeURI(e.dataset.pernight));var r=document.createComment("Activity name for this tag: "+i.providerName+" "+t+" click page view tag"),n=document.createElement("img");n.src=a,n.height="1",n.width="1",n.border="0",n.setAttribute("style","display:none"),document.body.appendChild(r),document.body.appendChild(n)},p=function(){i.on("metaLinkClick",f.chkMetaClick)},f={};return f.chkMetaClick=function(e){v()&&u(e)},f.addTrackingProvider=function(i){var a=new t(i);a&&a.valid?o.push(a):e.record(null,"ta.sales.metaClickTag :: Tracker invalid : "+i.trackingPixel?i.trackingPixel:"missing tracking pixel")},f.registerEvents=function(){v()&&p()},f});
require(["ta/p13n/placements"],function(e){var r=e.define.bind(e,"meta_click_tracker","handlers",["handlers"]);r(["placement","ta/sales/metaClickComScoreTag"],function(e,r){"use strict";var n=function(e,n,t){r.addTrackingProvider(t)},t=function(e,n){r.registerEvents()};return{addTrackingProvider:n,registerEvents:t}})});
require(["ta/p13n/placements"],function(e){var s=e.define.bind(e,"ta_message_sensitive_issues_badge","handlers",["handlers"]);s(["placement","lib/jquery-amd"],function(e,s){"use strict";var e=s("#"+e.id),t=s(".ui_message_response",e),a=s(".response_header_text",e),n=s(".response_subheader_text",e),o=s(".ui_button.translate",e),r=(s(".response_title",t),s(".response_date",t),s(".response_content",t),s(".truncate_to_limit",t)),i=s(".toggle_limit",t),l=s(".disclaimer",t);i.length>0&&i.on("click",function(){t.toggleClass("expanded"),r.toggleClass("truncate")}),o.length>0&&o.on("click",function(){var e,t=s(this).data("target-language");s.ajax({type:"GET",url:"https://www.googleapis.com/language/translate/v2",data:{key:"AIzaSyCREBA1SPWdqdQJiR_dhej2mhzmMqOaK3I",target:t,q:r.text()},dataType:"jsonp",success:function(s){e=s.data.translations[0].translatedText;var t=["trjs!overlays/Overlay","trjs!overlays/styles/modal","trjs!overlays/options/closeOnEscape","trjs!overlays/options/closeOnDocClick","trjs!overlays/position","trjs!overlays/options/fade","trjs!overlays/options/autoReposition","trjs!overlays/styles/windowshade","trcss!src/build/styleguide/ui_modal","trcss!src/build/common/notification_response"],o="notification_response",r=a.html(),i=n.html(),c=e+l.html();require(t,function(e,s,t,a,n,l,d,u){var p=new e(null,[new s(null,"",o,r,i,c),t,a,n.cssCentered(),l(l.SHORT,!1,!0),d,u()]);p.show()})},error:function(s){e=""}})})})});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"back_to_list_responsive","handlers",["handlers"]);t(["placement","ta/Core/TA.Record"],function(e,t){"use strict";function n(e){if(e){var n=e.href,i=e.getAttribute("data-trackingName");i&&n&&t.setEvtCookie(i,"click",null,0,n)}}return{clickLink:n}})});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"background_update_dates","handlers",["handlers"]);n(["placement","lib/jquery-amd","utils/cookieutils","ta/page"],function(e,n,t,i){function o(e){var n,t,i;return n=u(e+"D"),t=u(e+"M"),i=u(e+"Y"),n&&t&&i?a(i+"/"+t+"/"+n):null}function u(e){var n=t.getCookie("TATravelInfo");if(n)for(var i=n.split("*"),o=0;o<i.length;o++){var u=i[o].split(".");if(u[0]===e)return u[1]}}function a(e){var n=e.split("/");return new Date(parseInt(n[0]),parseInt(n[1])-1,parseInt(n[2]))}function r(e){if(e&&2==e.length){var n=e[0],t=e[1];if(n instanceof Date&&t instanceof Date){if(n.setHours(0,0,0,0),t.setHours(0,0,0,0),!(g instanceof Date&&w instanceof Date))return[n,t];if(g.setHours(0,0,0,0),w.setHours(0,0,0,0),n.getTime()!=g.getTime()||t.getTime()!=w.getTime())return[n,t]}}}function f(e){i.pushDates(null,"STAYDATES",[e[0],e[1]])}function s(e,n,t){"STAYDATES"==n&&r(t)&&T()}function c(){if(p){var e=r([o("A"),o("D")]);e?(f(e),T()):setTimeout(c,m)}}function l(){p=!0,c(),D||(D=setTimeout(function(){T()},v))}function d(){p=!1,clearTimeout(D),D=null}function T(){d(),i.off("dateSelected",s),n(window).off("blur",l),n(window).off("focus",d)}var p,D,m=2e3,v=9e5,g=o("A"),w=o("D");i.on("dateSelected",s),n(window).on("blur",l),n(window).on("focus",d)})});
require(["ta/p13n/placements"],function(e){var i=e.define.bind(e,"breadcrumb_mobile","handlers",["handlers"]);i(["placement","utils/urlDecoder"],function(e,i){"use strict";function n(e,n){i.goToLink(e,n)}function r(e,i){return require.defined("ta/util/Cookie")&&require("ta/util/Cookie").setOneTimeCookie(e,i)}return{goToLink:n,onClick:r}})});
require(["ta/p13n/placements"],function(e){var a=e.define.bind(e,"detail_filter_bar","handlers",["handlers"]);a(["placement","ta/page","ta/Core/TA.FireEvent","common/page-filters"],function(e,a,t,r){function n(e){e&&(o.innerHTML=e.innerHTML)}function i(e,a){var t=a.className;t.match(c)||(a.className=t+" loading",require(["trjs!responsive/collapsibleLayout"],function(e){a.className=t,e.toggle()}))}function l(e,a){var t=a.getAttribute("data-param"),n=a.getAttribute("data-value");return t&&n&&(r.clear(t,n),a.parentNode.removeChild(a)),!1}var o=document.querySelector("#"+e.id+" .filter_bar"),c=/ *\bloading\b/;return t.on("update-"+e.name,n),{removeFilter:l,openFilters:i}})});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"detail_filters","handlers",["handlers"]);n(["placement","ta/Core/TA.FireEvent","ta/prwidgets","utils/nodePreserve"],function(e,n,t,i){function r(n){i.treePreserve(s,n.querySelector("#"+e.id+" .collapsibleContent")),t.initWidgets(s),i.treePreserve(u,n.querySelector("#"+e.id+" .noncollapsible")),t.initWidgets(u)}function o(){require(["trjs!responsive/collapsibleLayout"],function(e){e.toggle()})}function l(){n.on("update-"+e.name,r)}function c(){l()}var s=document.querySelector("#"+e.id+" .collapsibleContent"),u=document.querySelector("#"+e.id+" .noncollapsible");return c(),{done:o}})});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"featured_road_trip_hotels_impression_tracker","handlers",["handlers"]);t(["placement"],function(e){function t(e){if(e){var t=e.replace("[timestamp]",Date.now()),n=document.createElement("img");n.src=t,n.height="0",n.width="0",n.setAttribute("data-owner","Road Trips Pixel"),document.body.append(n)}}function n(){t(e.params.hotel_impression_pixel)}n()})});
define("cpm/BannerResizeHandler",["utils/throttle","utils/responsive","common/trackingStreams"],function(e,r,t){"use strict";function n(){i(),s||(window.addEventListener("resize",e(i,300)),s=!0)}function a(e){if(e&&e.getAttribute("data-size"))try{var r=JSON.parse(e.getAttribute("data-size")),n=[].concat.apply([],r);return n.indexOf(o)>-1}catch(e){t.error(e,"Error parsing banner ad size")}return!1}function i(){var e=document.querySelectorAll(".ppr_priv_header_banner_ad, .ppr_priv_footer_banner_ad, .ppr_priv_banner_ad, .ad_column_full");if(e.length)try{for(var n=r.mobile(),i=0;i<e.length;i++){for(var s=e[i],o=s.querySelectorAll(".gptAd"),d=!1,c=0;c<o.length;c++){var l=o[c];n===!a(l)?(d=!0,l.classList.remove("hidden"),l.classList.remove("inactive")):(l.classList.add("hidden"),l.classList.add("inactive"))}s.classList.toggle("hidden",!d)}}catch(e){t.error(e,"Error handling responsive header/footerbanners")}}var s=!1,o=728,d={};return d.init=n,d});
require(["ta/p13n/placements"],function(n){var e=n.define.bind(n,"footer_banner_ad","handlers",["handlers"]);e(["placement","cpm/BannerResizeHandler"],function(n,e){e.init()})});
define("cpm/ResponsiveBannerResizeHandler",["babel/babel-helpers","utils/throttle","utils/responsive","common/trackingStreams"],function(e,r,t,i){"use strict";function s(){l(),o||(window.addEventListener("resize",r(l,300)),o=!0)}function n(e){e&&e.classList&&e.classList.add("hidden"),e&&e.classList&&e.classList.add("inactive")}function a(e){e&&e.classList&&e.classList.remove("hidden"),e&&e.classList&&e.classList.remove("inactive")}function l(){var e=document.querySelectorAll(".ppr_priv_footer_banner_ad_billboard");if(e.length)try{for(var r=0;r<e.length;r++)for(var s=e[r],l=s.querySelectorAll(".gptAd"),o=0;o<l.length;o++){var c=l[o],d=c.getAttribute("data-breakpoint");if(d){var v=t[d];if(v){var f=v();f?a(c):n(c)}}}}catch(e){i.error(e,"Error handling responsive header/footer banners")}}var o=!1,c={};return c.init=s,c});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"footer_banner_ad_billboard","handlers",["handlers"]);n(["babel/babel-helpers","placement","cpm/ResponsiveBannerResizeHandler","utils/ResponsiveEvents","ta/Core/TA.Event"],function(e,n,r,o,t){function i(){clearTimeout(u),u=setTimeout(function(){t.fireEvent("responsiveAdSizeChanged")},1e3)}var u=void 0;r.init(),o.offOver("mobile",function(){return i}),o.onOver("mobile",function(){return i}),o.offUnder("mobile",function(){return i}),o.onUnder("mobile",function(){return i}),o.offOver("desktop",function(){return i}),o.onOver("desktop",function(){return i}),o.offUnder("desktop",function(){return i}),o.onUnder("desktop",function(){return i})})});
require(["ta/p13n/placements"],function(e){var r=e.define.bind(e,"h_hr_refresh_rates_prompt","handlers",["deferred/popper","trcss!deferred/prompt","handlers"]);r(["placement","lib/jquery-amd","ta"],function(e,r,t){function o(){return!m&&(u?(f=0,void(u=!1)):f<c?void(f+=1):t.page&&t.page.hasDates&&t.page.hasDates("STAYDATES")?void n():void(f=0))}function n(){m=!0,e.require(["trjs!deferred/popper","trhtml!deferred/prompt","trcss!deferred/prompt"],function(e,r){m&&!u?e.showPrompt(r):a()})}function a(){m=!1,f=0,u=!0,p()}function p(){require(["ta/Core/TA.Event"],function(e){e.fireEvent("price_refresh_overlay_closed")})}function d(){f=0}var s="mousemove mousedown scroll keypress touchmove MSPointerMove",i=6e4,c=30,u=!1,f=0,m=!1;return r(document).on(s,d),t.page&&t.page.hasDates&&t.page.on("dateSelected",d),setInterval(o,i),{cleared:a}})});
define("cpm/AdBlockDetect",["lib/jquery-amd","utils/browserutils","ta/Core/TA.Event","ta/Core/TA.Record","ta/util/Error"],function(e,t,n,o,r){"use strict";var i,c,u={},a="ab_chk",d=!1,l=window.CDNHOST||"",f="/img2/x.gif?&ads=1&adsize=2&adslot=3&rnd=",s=function(){var t=Math.floor(1e5*Math.random());return e('<img src="'+l+f+t+'" style="position:absolute" class="ad ad_column" height="0" width="0" />')},v=function(){var e=document.querySelectorAll(".gptAd:not(.inactive)").length;return screen.width<768&&(e+=document.querySelectorAll(".inline_ad_wrapper").length),e},h=function(e,n,r){(!d&&n===a||n&&n!==a)&&((e||r)&&o.trackEventOnPage(n,t.name,e,v(),!1),d=!0)},m=function(e,t,n,o){if(void 0!=typeof o&&(c=o),i){var r=!!c||!i[0].offsetParent;h(r,t,n),r&&e()}};return u.runIfDetected=function(t,o,c){return"function"!=typeof t?void r.record(null,"runIfDetected requires a function"):void n.queueForLoad(function(){d=!1,i?m(t,o,c):(i=s(),i.on("load",function(){m(t,o,c,!1)}),i.on("error",function(){m(t,o,c,!0)}),e("body").append(i))},"AdBlockDetect")},u});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"header_banner_ad","handlers",["handlers"]);t(["placement","page-model","ta","ta/Core/TA.LocalStorage","cpm/AdBlockDetect","cpm/BannerResizeHandler"],function(e,t,n,a,r,s){var i="lastHrVisitTime",d="header_banner_ad_resp",o=55978451,c=6048e5,l=document.getElementById(e.id),p=function(){var e=(new Date).getTime(),t=a.get(i);if(null===t||e-parseInt(t,10)>c){var n=document.getElementById(d);n&&n.parentNode&&n.parentNode.removeChild(n)}a.set(i,e)},m=function(e){if(e&&/970x66/.test(e.id)){var t=l.querySelector(".ldrBackupContent");t&&e.classList&&(e.classList.remove("taEmpty"),e.innerHTML=t.innerHTML,n.trackEventOnPage("brand_fallback","displayed","save_money",0,!0))}},u=function(e){if(e&&!e.offsetTop){var t=document.getElementById(d),n=l.querySelector(".ldrBkUp");t&&n&&n.classList&&(n.classList.add("height66"),t.appendChild(n.cloneNode(!0)))}},f=function(){n.on("onAdRender",function(a){if(a){var r=l.querySelector(".gptAd");if(a.domId===r.id){(a.isEmpty||a.advertiserId===o)&&m(r),r.classList&&(66==r.clientHeight?r.classList.add("height66"):r.classList.remove("height66"));var s=JSON.stringify({testGroup:e.params?e.params.testGroup:"test group unknown",sessionId:t&&t.session&&t.session.sessionId||0,adCreativeId:a.creativeId||0,adWasShown:a.advertiserId!==o});n.trackEventOnPage("inventory_1_5_ad_impression","impression",s,!0)}}})};p(),s.init(),f(),r.runIfDetected(function(){u(l.querySelector(".gptAd"))},"brand_fallback_ab",!1)})});
require(["ta/prwidgets"],function(e){var r=e.define.bind(e,"common_ratings_histogram_overview","handlers",["handlers"]);r(["widget","ta/Core/TA.FireEvent"],function(e,r){function i(e,i,t,n){if(require.defined("common/page-filters")){var a=require("common/page-filters");a.clearAll("trating"),a.set("trating",t)}else r.fireEvent("review_filters.toggle_rating",t,n);r.fireEvent("TabHeader_clickTab",document.getElementById("TABS_REVIEWS"),300)}return{click:i}})});
define("overlays/position/centerWithGutters",["lib/jquery-amd","overlays/position/base"],function(t,e){"use strict";return function(i,n){var o=e();return i=i||0,n=n||0,o.onPosition=function(){var e=t(this.container);e.css({"position":"fixed","left":0,"right":"auto","top":0,"bottom":"auto"});var o=document.documentElement.clientWidth-this.container.clientWidth;e.css({"left":o>2*i?o/2:i,"right":o>2*i?"auto":i});var c=document.documentElement.clientHeight-this.container.clientHeight;e.css({"top":c>2*n?c/2:n,"bottom":c>2*n?"auto":n})},o}});
define("overlays/options/closeOnBackButton",[],function(){"use strict";return function(n){if(!window.history||!window.history.pushState)return function(){};var t=function(t){return function(){location.hash!==n&&t&&t.isOpen()&&t.hide()}};return function(){var o=this,i=t(o);o.on("show",function(){history.pushState({showOverlayHash:n},"",location.href.replace(/#.*|$/,"#"+n)),window.addEventListener("popstate",i,!1)}).on("hide",function(){window.removeEventListener("popstate",i,!1),location.hash==="#"+n&&history.back()})}}});
define("hotels/ChildAgesSerialization",["vanillajs"],function(){function n(n){return null==n||0===n.length?[]:n.split(t).map(function(n){return parseInt(n,10)}).filter(function(n){return!isNaN(n)})}function e(n,e){if(null==e||0===e.length)return"";for(var t=Math.floor(e.length/n),l=e.length-t*n,a=[],u=0,o=0;o<n;++o){var f=0;if(f=o<l?t+1:t){var h=Math.min(u+f,e.length),s=e.slice(u,h);u=h,a.push(s.join(i))}}return a.join(r)}var i=",",r=":",t=new RegExp(i+"|"+r);return{deserialize:n,serialize:e}});
define("overlays/EmailHotelOverlay",["ta/Core/TA.Store","overlays/Overlay","overlays/styles/modal","overlays/position","overlays/options/closeOnEscape","overlays/options/closeOnDocClick","overlays/options/autoReposition","overlays/styles/windowshade","overlays/options/ajax","hotels/ChildAgesSerialization"],function(e,o,t,s,a,l,r,n,i,c){return function(u,v,m,y){return new Promise(function(d){require(["trjs!ta/t4b/Emailhotel","trcss!t4b/emailhotel"],function(g){function f(){O++,O>=2&&g.init(E)}var p={detail:u,isOfferEmail:v,overrideOfferEmail:m,contactColumn:y},h=ta.page&&ta.page.guests?ta.page.guests.toJson():e.retrieve("guests.rooms.object");h&&(p.rooms=h.rooms,p.guests=(h.adults||h.guests)+c.deserialize(h.child_rm_ages).length);var E=new o(null,[t(null,"center","",""),s.center([0,0]),a,l,r,n(),i("/EmailHotel",{reqParams:p})]),O=0;E.on("contentLoaded",f).on("show",f),d(E)})})}});
define("ta/common/Flyout",["vanillajs","utils/ajax","ns-exporter","ta/Core/TA.Store","overlays/Overlay","overlays/styles/modal","overlays/styles/tooltip","overlays/position","overlays/options/closeOnEscape","overlays/options/closeOnDocClick","overlays/options/autoReposition","overlays/styles/windowshade","overlays/options/ajax","hotels/ChildAgesSerialization","overlays/EmailHotelOverlay"],function(e,o,n,t,a,l,s,i,r,c,y,u,v,m,p){var w,d={showRecentLocationSaveOverlay:function(){setPID(3832);var e=new a(null,[l(null,"center","RecentlyViewedOverlay",""),i.center([0,0]),r,c,y,u(),v("/RecentlyViewedAjax",{reqParams:{a:"save_overlay"}})]);e.on("show",function(){e.inner.innerHTML.match("emptyRecentlyViewed")&&e.hide()}),e.show()},showEmailHotelOverlay:function(e,o,n,t){p(e,o,n,t).then(function(e){e.show()})},bestValue:function(e,o){e&&e.preventDefault(),o.onmouseover=null;var n=new a(o,[s(o,"below","",""),i.below(),v("/vpages/bestValueFly.html?log=false")]);return n.show(),!1},amenities:function(e,n,t,s){e&&e.preventDefault(),n.onclick=null,t&&t>0&&(setPID(t),o("/ActionRecord?excludeFromVS=false&action=HRAmenitiesFlyout"));var c="/LocationTab?tab=amenities&from="+location.pathname.replace(/^[\/]|-.*$/g,"")+"&suppressLinks="+!!s;return 0==n.id.indexOf("amenity_")&&(c+="&d="+n.id.substring(8)),w=w||new a(n,[l(n,"center","small",""),i.center([0,0]),r,y,u(),v(c,{resources:[amenityOverlayCss]})]),w.show(),!1}};return n.exportTo(d,"ta.common.flyout"),d});
define("ta/util/Link",["vanillajs","utils/object/set-props","utils/stopevent","common/trackingStreams","ajax-request","utils/asdf-encoder","ta/Browser","ns-exporter"],function(e,t,r,a,i,n,o,f){"use strict";var s,l={popResWidth:function(e,r,i){try{var n=475,o=390,f=210;screen.width>1024?(n=800,o=600,f=240):screen.width>800&&(n=620,o=500,f=240);var s=t({width:n,height:o,xOffset:f,yOffset:5},i);l.popup(e,r,s)}catch(t){a.error(t,"ta.util.link - popCustom",e,s)}},popup:function(e,i,f){try{var l=t({name:!1,width:950,height:610,xOffset:!1,yOffset:!1,noScroll:0,aHref:!1,fullOptions:!0,ensureReferrer:!1,isAsdf:!1},f);e&&r(e);var c=!1,p="",d=s;if("undefined"==typeof d&&(d=1),l.aHref||(l.aHref=i.href),l.aHref=l.aHref.replace("%7Cnavarea%7C",ta.meta.link.getPhotoNavArea(i)),l.isAsdf&&l.aHref&&(l.aHref=n.asdf(l.aHref).replace(/&amp;/g,"&")),l.aHref&&l.aHref.indexOf("p=HotelsCom")>-1){l.width=Math.max(l.width,960);try{l.height=Math.max(l.height,window.getHeight(),600)}catch(e){l.height=Math.max(l.height,600)}}if(l.width&&(p+=",width="+l.width),l.height&&(p+=",height="+l.height),l.xOffset&&(p+=",screenX="+l.xOffset+",left="+l.xOffset),l.yOffset&&(p+=",screenY="+l.yOffset+",top="+l.yOffset),o.isChrome||(l.noScroll=1),l.fullOptions){var h=1;o.isIE9orHigher()&&(h=0),p="toolbar=1,resizable=1,menubar="+h+",location=1,status=1,scrollbars="+l.noScroll+p}else p="toolbar=0,resizable=1,menubar=0,location=0,status=0,scrollbars="+l.noScroll+p;if(l.name||(l.name="p"+d++),s=d,l.ensureReferrer&&o.isIE())try{var u=document.createElement("a");u.target=l.name,u.href=l.aHref,document.body.appendChild(u),c=window.open("",l.name,p),u.click(),document.body.removeChild(u)}catch(t){a.error(t,"ta.util.link - pop ensure referrer",e,l)}else try{c=window.open(l.aHref,l.name,p)}catch(t){a.error(t,"ta.util.link - popping window",e,{"href":l.aHref,"name":l.name,"args":p})}if("undefined"!=typeof c&&null!==c)try{c.opener=self,c.focus()}catch(e){}}catch(t){a.error(t,"ta.util.link - popup",e,l)}},directionsPop:function(e,t,r,n){n&&i("/ActionRecord?action="+n),a.trackEvent("map_pin_overlay","directions_click"),l.popup(e,t,r)},directionsPopInfoCard:function(e,t,r,n){n&&i("/ActionRecord?action="+n),a.trackEvent("dynamic_large_map","map_info_window","directions_cta"),l.popup(e,t,r)},targetBlank:function(e,r,i){try{var o=t({aHref:!1,isAsdf:!1},i);o.isAsdf&&o.aHref&&(o.aHref=n.asdf(o.aHref).replace(/&amp;/g,"&")),o.newTab||navigator.appVersion.indexOf("MSIE 7.")!=-1?window.open(o.aHref,"_blank"):require.defined("ta/Core/TA.Store")&&require("ta/Core/TA.Store").retrieve("ta.bl_calendar_lb")?ta.servlet.Popup.openExternalWithDefaultOptions(o.aHref):window.open(o.aHref,"_blank")}catch(t){a.error(t,"ta.util.link - targetBlank",e,o)}}};return f.exportTo(l,"ta.util.link"),l});
define("ta/servlet/ShowSpecialOffer",["lib/jquery-amd","overlays/Overlay","overlays/styles/modal","overlays/styles/windowshade","overlays/position/centerWithGutters","overlays/options/closeOnEscape","overlays/options/closeOnTaEvent","overlays/options/closeOnWindowshadeClick","overlays/options/repositionOnEvent","overlays/options/ajax","overlays/options/closeOnBackButton","overlays/options/closeAllOtherOverlaysOnShow","ns-exporter","ta/util/Cookie","common/trackingStreams","utils/classnameUtils","ta/Core/TA.Store","ta/Core/TA.Event","ta/Core/TA.Record","utils/responsive","ta/common/Flyout","ta/util/Link"],function(e,o,s,t,a,l,n,r,i,c,v,p,u,d,f,m,w,y,C,O,h,S){"use strict";var k,x,A={};return A.openCoupon=function(e,u,C,h,S,A,E,b,g,T,I){d.setPIDCookie(A),f.trackEvent("SpecialOffer","click",E||window.pageServlet);var j=E||window.pageServlet,D="/CouponAjax?"+(u?"couponId="+u+"&":"")+(C?"announcementId="+C+"&":"")+(b?"locale="+b+"&":"")+(g&&"false"!==g?"isAmex="+g+"&":"")+(T&&"false"!==T?"showLocs="+T+"&":"")+("locationId="+h+"&")+"listing=true&"+("from="+j+"&")+("sp="+(!!I&&/true/i.test(I)));D!==x&&(k=null);var P=g&&"false"!=g?"amex":"couponDetail";if(k)k.updateContent(D),m.removeClass(k.container,"couponDetail"),m.removeClass(k.container,"amex"),m.addClass(k.container,P),k.show();else{var q={act:e},B=E||window.pageServlet;B&&(q.act+="-"+B),x=D,k=new o(null,[s(null,"center",P,""),t(),a(16,16),l,n("closeCouponOverlay"),r,i(window,"resize"),O.mobile()&&v("coupon"),p,c(D,{resources:[S],reqParams:q})]);var H=!1,L="suppressCalendarPop";w.retrieve(L)||(w.store(L,!0),H=!0),k.show(),k.on("hide",function(){H&&w.remove(L),y.fireEvent("specialOfferClosed"),ta.servlet&&ta.servlet.blcoupons&&ta.servlet.blcoupons.closeHandler&&ta.servlet.blcoupons.closeHandler()})}},u.exportTo(A,"ta.servlet.ShowSpecialOffer"),A});
require(["ta/prwidgets"],function(e){var n=e.define.bind(e,"bl_hr_overview_special_offer","handlers",["handlers"]);n(["babel/babel-helpers","widget","ta/servlet/ShowSpecialOffer","t4b/tracking/b2bClickTracking","ta/common/Flyout","utils/asdf-encoder"],function(e,n,l,r,i,o){function a(e,n,i,a,c,t,u,f,s,d){require(["babel/babel-helpers","trjs!ta/servlet/BLCoupons"],function(e){var n=void 0;if(c&&t)n="viewcouponandannouncement";else if(c)n="viewcoupon";else{if(!t)return;n="viewannouncement"}l.openCoupon(n,c,t,a,f,"",i,"",!1,null,d)}),s&&r.trackOfferlessCommerceClick(o.asdf(s)),r.trackSpecialOfferClick({locationId:a,specialOfferType:c?u:"INVALID",couponId:c||null,announcementId:t||null})}return{click:a}})});
require(["ta/prwidgets"],function(t){var e=t.define.bind(t,"bl_hr_overview_contact_offer","handlers",["handlers"]);e(["babel/babel-helpers","widget","ta/util/Link","ta/util/Cookie","t4b/tracking/b2bClickTracking"],function(t,e,i,n,a){function o(t,o,c,r,l,d,b,f){a.trackContactClick({locationId:l,contactType:d,contactColumn:b,isCommerce:f}),r&&n.setPIDCookie(r),i.targetBlank(t,o,{aHref:c,isAsdf:!0,detailId:e.location_id,newTab:!0})}return{onOfferClick:o}})});
require(["ta/prwidgets"],function(e){var o=e.define.bind(e,"hotels_hotel_address_resp","handlers",["handlers"]);o(["widget","lib/jquery-amd","common/trackingStreams","utils/cookieutils","ta/page","ta/Core/TA.FireEvent","common/Radio","page-model"],function(e,o,n,a,r,i,t,l){return{openLocalLang:function(){a.addPidToCookie(39242),e.element.querySelector(".localLB").classList.remove("hidden")},closeLocalLang:function(){e.element.querySelector(".localLB").classList.add("hidden")},openResponsiveMap:function(){var e=t("hr-map"),o=l.LOC_ID;e&&e.trigger("open-trigger-clicked"),n.trackEvent("hr_overview_address","click","open_float_map|"+o)}}})});
define("widget/rideService",["lib/jquery-amd","ta/Core/TA.Record"],function(e,n){function t(e,t,a){n.trackEventOnPage(a,a+"_clicked","launch"+a+"MW"),require(["trjs!mobile/bauhaus/components/"+a.toLowerCase()],function(n){n.handleClick&&n.handleClick(e,t)})}function a(){e(".callout_container[data-provider]").each(function(){var t=e(this).attr("data-provider");n.trackEventOnPage(t,t+"_shown","",0,!0)})}return{init:a,handleClick:t}});
require(["ta/prwidgets"],function(e){var i=e.define.bind(e,"mobile_ride_service","handlers",["handlers"]);i(["widget","widget/rideService"],function(e,i){return i.init(),{handleClick:i.handleClick}})});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"hotel_detail_overview_cards_thin_content","handlers",["handlers"]);t(["placement","lib/jquery-amd","ta/Core/TA.FireEvent","mobile/lite/image-loader","common/Radio","common/trackingStreams","common/page-filters","page-model","ta/util/Element"],function(e,t,r,a,i,n,c,o,l){function v(e){e.preventDefault();var r=t(this).attr("data-target-tab");u(r)}function d(e){e.preventDefault&&e.preventDefault();var r=t(e.target),a=r.attr("data-keyword").toLowerCase();c.clearAll("t"),c.set("t",a),u("TABS_REVIEWS")}function u(e){var t=document.getElementById(e);r.fireEvent("TabHeader_clickTab",t,300)}function k(){var r=t("#"+e.id);t(".reviewSnippets.defer",r).length&&e.require(["trhtml!deferred/translatedSnippets"],function(e){t(".reviewSnippets",r).replaceWith(e)})}function w(){k(),a.init(200),r.on("reasons-keywordClick",d),t("#"+e.id+" [data-target-tab]").on("click",v),t("#"+e.id+" [data-keyword]").on("click",d),t("#"+e.id+" [data-track]").on("click",_),t("#"+e.id+" .linkedLocation").on("click",s),r.on("review_filters.toggle_rating",p),l.trackWhenScrolledIntoView("#"+e.id,["overview","in_view"])}function s(){var r=t("#"+e.id+" [data-airport-url]");r.length&&window.open(r[0].getAttribute("data-airport-url"))}function p(e,t){n.trackEvent("overview_traveler_rating","click",t)}function m(){f.trigger("open-trigger-clicked")}function _(e){var t=e.target,r=t.getAttribute("data-track");switch(r){case"write-review":return n.trackEvent("overview","write_review","",0,"/UserReviewEdit");case"map":return n.trackEvent("overview","click","open_float_map|"+g);case"all-details":return n.trackEvent("overview","click","hr_overview_amenities_more");case"all-nearby":return n.trackEvent("overview","click","hr_overview_location_more");case"all-reviews":return n.trackEvent("overview","click","review_count");case"talk-about":return n.trackEvent("overview","click",t.getAttribute("data-keyword"))}}var f=i("hr-map"),g=o.LOC_ID;return w(),{track:_,openMap:m}})});
define("maps/v3/models/eventTypes",["babel/babel-helpers","utils/objutils"],function(e,E){"use strict";var n={PIN_CLICK:"pinClick",PIN_HOVER_START:"pinHoverStart",PIN_HOVER_END:"pinHoverEnd",PIN_INTENT_HOVER:"pinHoverLong",PIN_UPDATED:"pinUpdated"},t={CLICK:"mapClick",CENTER_CHANGE:"centerChange",PAN_START:"panStart",ZOOM_CHANGE:"zoomChange",RENDER_COMPLETE:"renderComplete"},R={PRERENDER:"preRender",RENDER:"render",POSTRENDER:"postRender",BEFORE_CLOSE:"beforeClose",CLOSE:"close",AFTER_CLOSE:"afterClose",LOAD_CONTENT_START:"loadContentStart",CONTENT_RECEIVED:"contentReceived",CONTENT_FAILED:"contentFailed",LOAD_CONTENT_END:"loadContentEnd",LOADING_START:"loadingStart",LOADING_END:"loadingEnd",REFRESH_CONTENT:"refreshContent",DIMENSIONS_RESIZE:"dimensionsResize",SIZE_CHANGE_REQUESTED:"sizeChangeRequested",REDO_SEARCH_REQUESTED:"redoSearchRequested",PIN_DATA_REQUESTED:"pinDataRequested",DEMAND_LOAD_REQUESTED:"demandLoadRequested",PIN_SELECTION_CHANGED:"pinTypeChanged"},C={CAROUSEL_CARD_SELECTED:"carouselCardSelected"},N=[];E.each(n,function(){N.push(this)}),E.each(t,function(){N.push(this)});var _={pin:n,map:t,state:R,providerEvents:N,external:C};return E.deepFreezeCopy(_)});
define("maps/v3/baselineShims/mapStateControllerShim",["babel/babel-helpers","common/trackingStreams"],function(e,r){"use strict";var n=null,t=new Promise(function(e){return n=e}),o=!1,l={waitForModule:function(){return t},resolve:function(e){return o?void r.error("Resolved multiple mapStateController modules"):(n(e),void(o=!0))}};return l});
define("maps/v3/mapStateController",["babel/babel-helpers","mixins/Events","utils/objutils","maps/v3/models/eventTypes","maps/v3/baselineShims/mapStateControllerShim"],function(n,t,e,i,a){"use strict";function s(n){for(var t in n)if(n.hasOwnProperty(t)&&n[t])return!1;return!0}function o(n,t){return n+":"+t}function p(){var n=this,i=new t(m),a={};this.on=i.on.bind(i),this.off=i.off.bind(i),this.emit=i.emit.bind(i),this.initialOpenMapOptions=null,this.loadingContent=!1,this.autoscaleEnabled=!0,this.autoscalingNow=!1,this.mapOpen=!1,this.cacheBustValue=null,this.mapHasOpened=!1,this.pinsShown=!1,this.openMap=function(t){t?n.initialOpenMapOptions=Object.assign({},n.initialOpenMapOptions,t):t=e.extend({},n.initialOpenMapOptions),n.mapHasOpened||(n.mapHasOpened=!0,t.refreshPrices=!0,n.emit(O.LOADING_START,t)),n.emit(O.PRERENDER,t),n.emit(O.RENDER,t),n.mapOpen=!0,n.emit(O.POSTRENDER,t)},this.closeMap=function(t){n.emit(O.BEFORE_CLOSE,t),n.emit(O.CLOSE,t),n.emit(O.AFTER_CLOSE,t),n.mapOpen=!1},this.toggleMap=function(t,e){"undefined"==typeof e&&(e=!n.mapOpen),e?n.openMap(t):n.closeMap(t)},this.on(O.LOAD_CONTENT_START,function(t,e){a[o(t,e)]=!0,n.loadingContent||(n.loadingContent=!0,n.emit(O.LOADING_START))}),this.on(O.LOAD_CONTENT_END,function(t,e){delete a[o(t,e)],n.loadingContent&&s(a)&&(n.loadingContent=!1,n.emit(O.LOADING_END,t,e))})}var O=i.state,l=e.deepFreeze({MAP_INIT:"mapInit",DEMAND_LOAD_ON_INIT:"demandLoadOnInit",PINS:"pins",ROUTE:"route"}),r={},m=[];e.each(O,function(){m.push(this)});var u={forMap:function(n){if(r[n])return r[n];var t=new p;return r[n]=t}};return u.EVENT=O,u.CONTENT_TYPE=l,a.resolve(u),u});
define("maps/v3/models/ContentRequestParams",["babel/babel-helpers"],function(t){var e=function(){function e(n,s,i,o,a,r){t.classCallCheck(this,e),this.geoBounds=n,this.centerPoint=s,this.radius=i,this.currentLocationId=o,this.isBounded=!!a,this.isInitialDemand=!!r}return t.createClass(e,[{key:"getParamsObject",value:function(){var t={minLat:this.geoBounds?this.geoBounds.getSouthWest().getLat():"",maxLat:this.geoBounds?this.geoBounds.getNorthEast().getLat():"",minLng:this.geoBounds?this.geoBounds.getSouthWest().getLng():"",maxLng:this.geoBounds?this.geoBounds.getNorthEast().getLng():"",centerLat:this.centerPoint?this.centerPoint.getLat():"",centerLng:this.centerPoint?this.centerPoint.getLng():"",searchRadius:this.radius,currentLocationId:this.currentLocationId?this.currentLocationId:"",isBounded:this.isBounded,isInitialDemand:this.isInitialDemand};return t}}]),e}();return e});
define("maps/v3/models/GeoPoint",["babel/babel-helpers"],function(t){"use strict";function n(t){return t*Math.PI/180}var a=6378137,e=function(){function e(n,a){t.classCallCheck(this,e),this._lat=n,this._lng=a}return t.createClass(e,[{key:"lat",value:function(){return this._lat}},{key:"lng",value:function(){return this._lng}},{key:"getLat",value:function(){return this.lat()}},{key:"getLng",value:function(){return this.lng()}},{key:"getDistanceFromPoint",value:function(t){if(t.constructor.name!==this.constructor.name)throw"Error: Must pass in a GeoPoint for comparison";var e=n(this._lat),s=n(t._lat),r=n(t._lat-this._lat),i=n(t._lng-this._lng),l=Math.sin(r/2)*Math.sin(r/2)+Math.cos(e)*Math.cos(s)*Math.sin(i/2)*Math.sin(i/2),o=2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l));return a*o}}]),e}();return e});
define("overlays/styles/default",["lib/jquery-amd"],function(t){"use strict";function e(e,a,i,s){this.container=t("<"+(s||"div")+"/>").addClass("ui_overlay").addClass(e||"").get(0),a&&(this.header=t("<div/>",{"class":"header_text"}).html(a).appendTo(this.container).get(0)),i&&(this.subheader=t("<div/>").addClass("subheader_text").html(i).appendTo(this.container).get(0)),this.contentElement=t("<div/>").addClass("body_text").appendTo(this.container).get(0),this.close=t("<div/>").addClass("ui_close_x").appendTo(this.container).get(0)}var a=function(a,i,s,n,d,o){return i=(i||"")+(a&&" "+a.getAttribute("data-overlay")||""),s=s||a&&a.getAttribute("data-header")||"",n=n||a&&a.getAttribute("data-subheader")||"",function(){e.call(this,i,s,n,o),this.updateContent(d),t(this.close).on("click",function(){this.hide.apply(this,arguments.length?arguments:["close-button"])}.bind(this))}};return a});
define("overlays/styles/translucentheader",["lib/jquery-amd"],function(e){"use strict";function n(n){this.translucentHeader=e("<div/>").addClass("translucent-header "+n).appendTo(this.container).get(0)}var t=function(e){return e=e||"",function(){n.call(this,e)}};return t});
define("overlays/position/conditional",["overlays/position/base"],function(o){"use strict";return function(i,n,t){var s=o();s.label="conditional";var f;return s.onPosition=function(){var o=i()?n:t;f&&o!==f&&f.offPosition&&f.offPosition.apply(this),(f=o).onPosition&&f.onPosition.apply(this)},s.offPosition=function(){f=null;var o=i()?n:t;o.offPosition&&o.offPosition.apply(this)},s}});
define("overlays/position/fixed",["lib/jquery-amd","overlays/position/base"],function(n,o){"use strict";return function(t,e,i,u){var f=o();return f.onPosition=function(){var o="undefined"==typeof t||null==t?"auto":t,f="undefined"==typeof e||null==e?"auto":e,d="undefined"==typeof i||null==i?"auto":i,l="undefined"==typeof u||null==u?"auto":u;n(this.container).css({position:"fixed",top:o,right:f,bottom:d,left:l})},f}});
define("overlays/position/fullscreen",["lib/jquery-amd","overlays/position/base","overlays/options/disableBodyScroll"],function(o,i,t){"use strict";return function(n){function s(){e.call(this),l.call(this)}var e=i(),l=t(n);return s.onPosition=e.onPosition=function(){o(this.container).css({position:"fixed",top:0,left:0,bottom:0,right:0,height:"auto",width:"auto"}).addClass("fullscreen")},s.offPosition=e.offPosition=function(){o(this.container).removeClass("fullscreen")},s}});
define("overlays/support/placement",["vanillajs"],function(){"use strict";return function(n){return function(){this.container.className+=" ppr_rup ppr_dyn ppr_priv_"+n.name.replace(/:[^:]*$/,"")}}});
define("dynamic-placement/loader",["babel/babel-helpers","ajax-request","page-model","utils/to-array","amdloaders"],function(e,t,a,r,n){"use strict";function l(e){var t=document.createElement("div");t.innerHTML=e;var a=r(t.querySelectorAll("style, link, script")).reduce(function(e,t){return e["STYLE"===t.tagName||"LINK"===t.tagName?"styles":"scripts"].push(t),t.parentNode.removeChild(t),e},{styles:[],scripts:[]});return Object.assign(a,{html:t.innerHTML})}var s=1e4;return function(e,r){return t({url:"/DynamicPlacementAjax",data:Object.assign({placementRollUps:e,geo:a.GEO_ID,detail:a.LOC_ID,occOffset:s++,updateType:"full",metaReferer:a.session.pageServlet},n.getLoadedFilesParams(),r)}).then(l)}});
define("dynamic-placement/dom-renderer",["babel/babel-helpers","amdloaders"],function(e,n){"use strict";return function(e){return function(r){var t=r.scripts,l=r.styles,s=r.html;return n.installStyles(l),e.innerHTML+=s,n.installScripts(t)}}});
define("maps/v3/hashHandler",["babel/babel-helpers","maps/v3/baselineShims/mapStateControllerShim"],function(a,n){"use strict";function t(a){var n=a.mapStateController,t=a.mapState,i=a.hash,s={hash:i},w=function(){t&&t.mapOpen&&window.location.hash!==i&&t.closeMap()};t.on(n.EVENT.POSTRENDER,o.bind(null,s)),t.on(n.EVENT.AFTER_CLOSE,function(){window.removeEventListener("popstate",w,!1),e(s),window.addEventListener("popstate",w,!1)}),window.addEventListener("hashchange",h.bind(null,{mapState:t,hash:i}),!1),window.addEventListener("popstate",w,!1)}function o(a){a.hash&&i&&window.location.hash!==a.hash&&(a.hashRemovePushed?window.history.back():window.history.pushState(null,"",window.location.href.replace(/#.*|$/,a.hash)),a.hashAddPushed=!a.hashRemovePushed)}function e(a){if(a.hash&&i&&window.location.hash===a.hash){var n=window.location.search,t=window.location.pathname,o=function a(){window.removeEventListener("popstate",a,!1),window.location.pathname===t&&window.location.search!==n&&window.history.replaceState(window.history.state,"",""+window.location.pathname+n+window.location.hash)};a.hashAddPushed?(window.addEventListener("popstate",o,!1),window.history.back()):window.history.pushState(null,"",window.location.href.replace(a.hash,"")),a.hashRemovePushed=!a.hashAddPushed}}function h(a){var n=a.mapState,t=a.hash;t&&n&&window.location.hash===t&&!n.mapOpen&&n.openMap()}var i=!(!window.history||!window.history.pushState);return{init:function(a,o){a&&o&&n.waitForModule().then(function(n){var e=n.forMap(a);e&&(t({mapStateController:n,mapState:e,hash:o}),h({mapState:e,hash:o}))})},initListeners:t}});
define("maps/v3/map-loader",["babel/babel-helpers","dynamic-placement/loader","dynamic-placement/dom-renderer"],function(e,n,r){"use strict";function a(){return o||(o={},o.promise=new Promise(function(e){o.resolve=e})),o}function t(e){s&&l&&a().resolve(e.querySelector(".mapContainer"))}var o=null,l=!1,s=!1;return{waitForMap:function(){return a().promise},resolveBaseMapPlacement:function(e){l=!0,t(e)},resolveMapPageContainer:function(e){s=!0,t(e)},createMap:function(e,a,t){n(e,{servletName:a.servletName,servletClass:a.servletClass}).then(r(t))}}});
define("utils/uuid",["babel/babel-helpers"],function(x){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(x){var n=16*Math.random()|0,e="x"===x?n:3&n|8;return e.toString(16)})}});
define("hotels/tracking/timing",["babel/babel-helpers","common/metric-recorder","utils/uuid","ta/Core/TA.PageVisibility"],function(e,r,n,t){function i(){a||(a=!0,t.addBlurListener(function(){return o={}}))}function u(e,t){if(!a)return function(){return Promise.resolve()};var i=n();o[i]=!0;var u=Date.now();return function(){if(!o[i])return Promise.resolve();delete o[i];var n=Date.now()-u;return r([{name:e,value:n,labels:[t]}])}}var a=!1,o={};return{enable:i,start:u}});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"hotel_review_map_container","handlers",["handlers"]);n(["babel/babel-helpers","placement","lib/jquery-amd","common/Radio","maps/v3/mapStateController","maps/v3/tracking","maps/v3/models/eventTypes","utils/responsive","maps/v3/providers/providerShim","maps/v3/models/ContentRequestParams","maps/v3/models/GeoPoint","ta/Core/TA.FireEvent","overlays/Overlay","overlays/styles/default","overlays/styles/windowshade","overlays/styles/translucentheader","overlays/position/conditional","overlays/position/fixed","overlays/position/fullscreen","overlays/options/repositionOnEvent","overlays/options/closeOnWindowshadeClick","overlays/options/keepInDom","overlays/options/disableBodyScroll","overlays/support/placement","dynamic-placement/loader","dynamic-placement/dom-renderer","maps/v3/hashHandler","maps/v3/map-loader","hotels/tracking/timing"],function(e,n,o,a,t,r,i,l,s,p,d,m,c,v,u,E,f,h,g,_,y,D,w,O,C,b,M,R,S){function N(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1&&void 0!==arguments[1]&&arguments[1]);if(z)return void(!z.isOpen()&&z.show());if(!F){F=!0;var o=S.start("map_load",require("page-model").LOC_ID),a=S.start("map_shown",require("page-model").LOC_ID),t=V.find(Q)[0];R.resolveMapPageContainer(t),R.createMap("responsive_map",{servletName:n.servletName,servletClass:n.servletClass},t),R.waitForMap().then(function(n){return A(n,o,a,e)})}e||(z=I(),z.show())}function A(e,a,l,p){var d=e.getAttribute("data-current-location-id")||-1,c=t.forMap(e);c.on(t.EVENT.POSTRENDER,l),c.on(t.EVENT.LOADING_END,a),M.initListeners({mapStateController:t,mapState:c,hash:W}),s.waitForMap(e).then(function(e){o.isEmptyObject(e)||k(c,d,e)}),c.on(i.state.REDO_SEARCH_REQUESTED,L.bind(null,c,d)),c.on(t.EVENT.RENDER,N),c.on(t.EVENT.CLOSE,T),p&&!z&&(z=I()),z.on("hide",function(){return c.closeMap({triggeredOnModalHide:!0})}),m.on("page-polling-complete",q.bind(null,c)),U.off("open-trigger-clicked",P).on("open-trigger-clicked",function(){r.trackMapOpenRequested("v3"),c.openMap({enableScrollWheelZoom:n.params.enable_scroll_wheel_zoom,mapConfig:n.params.mapConfig})}),p&&!z.isOpen()||c.openMap({enableScrollWheelZoom:n.params.enable_scroll_wheel_zoom,mapConfig:n.params.mapConfig})}function T(e){!z||e&&e.triggeredOnModalHide||z.hide()}function k(e,n,o){var a=o.getCenter(),t=!1,r=!0,l=new p(null,a,null,n,t,r);e.emit(i.state.DEMAND_LOAD_REQUESTED,l),G=l}function L(e,n,o){var a=new p(o.getGeoBounds(),o.getCenterPoint(),o.getRadius(),n,!0);e.emit(i.state.DEMAND_LOAD_REQUESTED,a),G=a}function q(e){if(G){var n=G;n.isInitialDemand=!0,e.emit(i.state.DEMAND_LOAD_REQUESTED,n)}}function I(){var e=H[0];return new c(e,v(e,"ui_modal"),E(),f(l.mobile,g(!0),h(j,B,Z,x)),_(window,"resize"),D,u(),y,w(),O(n))}function P(){r.trackMapOpenRequested("v3"),N()}var V=o("#"+n.id),H=V.find(".overlay-content-wrapper"),Q=".hr-map-container",U=a("hr-map"),W="#MAPVIEW",z=void 0,F=!1,G=null,j="5%",B="8%",Z="5%",x="8%";U.on("open-trigger-clicked",P),window.location.hash===W?N():n.params.map_preload&&N({},!0)})});
define("utils/resize-invalidated-cache",["babel/babel-helpers"],function(e){"use strict";var t="__resize-cache",n=Date.now();return window.addEventListener("resize",function(){return n=Date.now()}),function(e){var a=e[t];return(null==a||a.timestamp<n)&&(a=e[t]={timestamp:n,value:e()}),a.value}});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"hotels_loading_box","handlers",["handlers"]);n(["placement","ta/Core/TA.FireEvent","utils/responsive","utils/resize-invalidated-cache"],function(e,n,i,a){function r(e,n){var r=t.innerHTML.indexOf("smart_deals_responsive")==-1,l=a(i.mobile),o=n<2&&(r||l)&&(e.TRAVEL_INFO||e.FILTERS||e.MAIN_META||e.UNKNOWN||e.REVIEW_LIST||e.SORT_ORDER||e.PAGE_OFFSET);!o!=!s&&t&&(s=o,t.style.display=o?"block":"none")}var t=document.querySelector("#"+e.id),s=!1;return n.on("page-changes-pending",r),{}})});
require(["ta/prwidgets"],function(t){var e=t.define.bind(t,"ibex_photo_carousel","handlers",["handlers"]);e(["widget","api-mod","ta/common/Swipe","common/trackingStreams","ta/Core/TA.Store","ta/Core/TA.Dust"],function(t,e,n,a,o,i){"use strict";function r(){var t,n,a;H=A.querySelector(".carousel"),H&&L&&L.length&&(I=A.querySelector(".nav_bubbles"),M=A.getElementsByClassName("pic_bubble"),0===M.length&&(M=null),S=ta.getEventPathOptions("room_photo_viewer_click",!1,H),S.category=H.getAttribute("data-tracking-placement")||S.category,S.action=H.getAttribute("data-tracking-action")||S.action,S.label=H.getAttribute("data-tracking-label")||S.label,S.value=H.getAttribute("data-tracking-value")||S.value,W=!H.hasAttribute("data-auto-adjust-height")||"false"!==H.getAttribute("data-auto-adjust-height"),n="true"===H.getAttribute("data-automatic"),t=!H.hasAttribute("data-click-to-advance")||"false"!==H.getAttribute("data-click-to-advance"),P=parseInt(H.getAttribute("data-selected-photo"),10)||0,j=parseFloat(H.getAttribute("data-scale-width-threshold"))||0,_(),m(0,L.length),d(t),f(),a=L[P],a&&e.addClass(a,q),n&&(window.setTimeout(s,B),window.addEventListener("scroll",v)))}function l(){return O<0&&(O=H.offsetWidth||-1),Math.max(0,O)}function c(){return R<0&&(R=H.offsetHeight||-1),Math.max(0,R)}function u(t){t=t||window.event;var n=t.srcElement||t.target;n&&(e.removeClass(n,T),e.removeClass(n,x))}function d(t){var e,o=A.querySelector(".navLeft"),i=A.querySelector(".navRight");o&&i&&(o.addEventListener("click",function(t){a.trackEvent("ibex_inline_room_grid","sherpa_room_photo_gallery_previous_photo_click"),t=t||window.event,t.stopPropagation(),b(!1)}),i.addEventListener("click",function(t){a.trackEvent("ibex_inline_room_grid","sherpa_room_photo_gallery_next_photo_click"),t=t||window.event,t.stopPropagation(),b(!0)}));var r=document.getElementById("nav_controls");if(r){var l=r.querySelector(".left"),c=r.querySelector(".right");l&&c&&(l.addEventListener("click",function(t){t=t||window.event,t.stopPropagation(),b(!1)}),c.addEventListener("click",function(t){t=t||window.event,t.stopPropagation(),b(!0)}))}if(H&&L.length>0){t&&H.addEventListener("click",function(t){t=t||window.event,t.stopPropagation(),b(!0)});var d=function(t){b("left"===t.direction)};for(e=0;e<L.length;e++)n.addSwipeListener(L[e],d)}if(I&&M){var s,v=function(t){return function(e){p(e,t)}};for(e=0;e<M.length;e++)s=M[e],s.onclick=v(e)}if(C)for(e=0;e<L.length;e++)L[e].addEventListener(C,u);var g=!1,f=!1;document.addEventListener("keydown",function(t){if(g&&!f){var e=t.which||t.keyCode;39===e?(b(!0),t.preventDefault()):37===e&&(b(!1),t.preventDefault())}}),A&&(A.addEventListener("mouseenter",function(){D=!0,g=!0}),A.addEventListener("mouseleave",function(){D=!1,g=!1}))}function s(){A&&(D||b(!0),window.setTimeout(s,B))}function v(){if(A){var t=document.body.scrollTop,e=A.getBoundingClientRect().top+t+A.offsetHeight,n=e>t&&e<t+document.documentElement.clientHeight;return D=!n,n}}function g(){ta.trackEventOnPage(S.category,S.action,S.label,S.value,!1)}function f(){if(I&&M){var t,n,a=I.querySelector('.pic_bubble[data-bubble_index="'+P+'"]');for(n=0;n<M.length;n++)t=M[n],e.removeClass(t,"active_bubble"),t===a&&e.addClass(t,"active_bubble")}}function h(t,n){if(t!==P){e.addClass(L[t],q);for(var a=0;a<L.length;a++)e.removeClass(L[a],x),e.removeClass(L[a],T);e.addClass(L[P],n),e.removeClass(L[P],q),P=t,g(),f()}}function m(e,n){var a={currentIndex:e+1,photoCount:n};i.render(t.name+"__nav_controls",a,"#nav_controls_hold")}function b(t){var e,n;t?(e=P+1,e>=L.length&&(e=0),n=x):(e=P-1,e<0&&(e=L.length-1),n=T),h(e,n),m(e,L.length)}function p(t,e){a.trackEvent("ibex_inline_room_grid","sherpa_room_photo_gallery_thumbnail_click"),t=t||window.event,t.stopPropagation(),e!==P&&h(e,e>P?x:T)}function _(){if(L)for(var t=0;t<L.length;t++)w(L[t])}function w(t){var e=t.style.backgroundImage;if(e){var n=e.replace(/url\((['"])?(.*?)\1\)/gi,"$2").split(",")[0],a=document.createElement("img");a.src=n,a.complete?E(t,a):a.onload=function(e){k(t,e)}}}function k(t,e){e=e||window.event;var n=e.srcElement||e.target;n&&n.complete&&E(t,n)}function E(t,n){var a=n.naturalWidth||n.width,o=n.naturalHeight||n.height;o>a&&(e.addClass(t,"tall"),a/o*c()<j*l()&&(t.style.backgroundSize=100*j+"%")),y(a,o)}function y(t,e){var n,a=l(),o=c();W&&(t=t||0,e=e||0,n=t<=a?e:Math.ceil(a*e/t),n>o&&(o=n,H.style.height=o+"px"))}var C,A=t.element,L=A.querySelectorAll(".carouselPhoto"),S=null,x="exitLeft",T="exitRight",q="inView",P=0,H=null,I=null,M=null,B=3e3,D=!1,O=-1,R=-1,W=!0,j=0;C=function(){var t,e=document.createElement("fakeelement"),n={"transition":"transitionend","OTransition":"oTransitionEnd","MozTransition":"transitionend","WebkitTransition":"webkitTransitionEnd"};for(t in n)if(void 0!==e.style[t])return n[t]}(),r()})});
define("utils/store",["vanillajs","ta/Core/TA.Store"],function(e,r){return{add:r.store,get:r.retrieve,has:r.has,getOrAdd:r.retrieveOrStore,remove:r.remove}});
define("booking/common/features",["vanillajs","utils/store"],function(n,e){"use strict";function t(n){return n&&(n=n.trim().toUpperCase()),n}function i(n){var i=e.get(o),r=!1;return n&&i&&(r=i.indexOf(t(n))>=0),r}function r(n){if(n&&(n=t(n),!i(n))){var r=e.get(o);r||(r=[],e.add(o,r)),r.push(n)}}function a(n){if(n){n=t(n);var i=e.get(o);if(i){var r=i.indexOf(n);r>=0&&i.splice(r,1)}}}function u(){return i("attraction_shoppingcart_checkout_ui_redesign")}var o="BOOKING_FEATURES";return{isEnabled:i,enable:r,disable:a,isCheckoutV2Enabled:u}});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"ibex_room_details_lightbox","room_details_lightbox",["trcss!deferred/book_now_button","trcss!deferred/book_on_header","trcss!deferred/room_details_lightbox","handlers","room_details_lightbox"]);t(["booking/common/features","ta/Core/TA.Event","ta/prwidgets","ta/Core/TA.Record","common/trackingStreams"],function(e,t,o,n,i){function r(t){if(v){var o=document.body,n=v.querySelector(".roomDetailsLightbox"),i=e.isEnabled("TW_IRG_SEE_MORE_POPUP_FONT_AND_GREY_SPACE");if(n&&(n.style.visibility="hidden"),v.style.display="block",u=o.style.overflow,h=o.style.height,o.style.height="100%",o.style.overflow="hidden",o.addEventListener("touchmove",l),n.addEventListener("touchmove",s),n){if(!t){var r=window.innerHeight||document.documentElement.clientHeight,a=n.offsetHeight;a>0&&a<r&&(n.style.top=Math.floor((r-a)/2)+"px",n.style.marginTop=0)}i&&(window.addEventListener("orientationchange",f),f(!0)),n.style.visibility="visible"}}}function l(e){e.preventDefault()}function s(e){e.stopPropagation()}function a(){if(v){if(!b)return void n.trk("sherpa_rv_close_ib_blocked",!1,v);var e=document.body,t=v.querySelector(".roomDetailsLightbox");v.style.display="none",e.style.overflow=u,e.style.height=h,e.removeEventListener("touchmove",l),t.removeEventListener("touchmove",s)}}function c(e){for(var t=0;t<e.length;t++)e[t].removeEventListener("click",a),e[t].addEventListener("click",a,!1)}function d(e){e.stopPropagation()}function m(e){var n,l,s;if(a(),v=document.querySelector(e.contentSelector),!v)return void i.error(null,"Cannot find lightbox wrapper for Room Details Lightbox.");if(n=v.querySelector(".roomDetailsLightbox"),!n)return void i.error(null,"Cannot find lightbox content for Room Details Lightbox.");if(c(v.getElementsByClassName("overlayBG")),c(v.getElementsByClassName("close")),n.removeEventListener("click",d),n.addEventListener("click",d,!1),e.closeOnBookNowHandler){var m=e.bookNowHandler;e.bookNowHandler=function(e){a(),"function"==typeof m&&m(e)}}if(e.bookNowHandler)for(l=v.getElementsByClassName("book_now"),s=0;s<l.length;s++)l[s].removeEventListener("click",e.bookNowHandler),l[s].addEventListener("click",e.bookNowHandler);document.addEventListener("keydown",function(e){var t=e.which||e.keyCode;27===t&&(a(),e.preventDefault())}),r(e.isTablet),o.initWidgets(v),t.fireEvent("refreshedDOMContent",n)}function f(e){var t=v.querySelector(".roomDetailsLightbox"),o=t.querySelector(".roomDetailsInner"),n=function(){ta.common.tablet&&ta.common.tablet.isPortrait()?o.style.maxHeight=window.screen.height+"px":o.style.maxHeight=.7*window.screen.width+"px"};o&&(e?n():setTimeout(n,100))}var v=null,u="",h="",b=!0;return{open:m,toggleUserInteraction:function(e){b=e}}})});
require(["ta/p13n/placements"],function(e){var o=e.define.bind(e,"ibex_room_details_lightbox","handlers",["trcss!deferred/book_now_button","trcss!deferred/book_on_header","trcss!deferred/room_details_lightbox","handlers","room_details_lightbox"]);o(["placement","api-mod","ta/Core/TA.Dust","room_details_lightbox","booking/common/features","common/trackingStreams","ta/Core/TA.Record"],function(e,o,t,n,i,r,a){"use strict";var d,l,s,c,h,u,g,_,m,b="#"+e.id,f=function(){window.addEventListener("roomDetailsLightbox",w,!1),window.addEventListener("roomListToggleUserInteraction",function(e){e.detail&&n.toggleUserInteraction(e.detail.enabled)},!1);var o=document.getElementById(e.id),t=o.querySelector(".data.photoCarouselWidgetModel");if(t){try{s=JSON.parse(t.innerHTML)}catch(o){r.error(o,e.name+"._init: invalid photoCarouselWidgetModel")}var i=t.dataset?t.dataset.tablet:t.getAttribute("data-tablet");u=i&&"true"===i.toLowerCase()}},p=function(f){f.showDefaultHotelPhoto&&f.photos&&f.defaultHotelPhoto&&(f.photos=f.photos.length?f.photos:[f.defaultHotelPhoto],f.numPhotos=f.photos.length);var p=o.merge({},s);p.clickToAdvance=!0,p.data={photos:f.photos,tracking:d?a.getEventPathOptions("room_photo_viewer_click",!1,d):null,initialSelectedPhoto:c,maxBubbles:8},i.isEnabled("TW_IRG_SEE_MORE_POPUP_FONT_AND_GREY_SPACE")&&(p.autoAdjustHeight="false"),f.widgetModel=p,f.isTablet=u,f.hideBookNowButton=g,f.showMismatchMessaging=_,f.hidePricing=m;var w=e.name;w.indexOf(":")>0&&(w=w.substring(0,w.indexOf(":"))),e.require(["trcss!deferred/room_details_lightbox"],function(){var o=t.render(w+"__room_details_lightbox",f,b,function(){n.open({contentSelector:b,bookNowHandler:l,closeOnBookNowHandler:h,isTablet:u})});o||r.error(null,e.name+"._render: Did not render dust.")})},w=function(e){var o=e.detail;o&&(l=o.bookNowHandler,h=o.closeOnBookNowHandler,d=o.trackingElement,c=o.initialSelectedPhoto,g=o.hideBookNowButton,_=o.showMismatchMessaging,m=o.hidePricing,p(o.model))};return f(),{open:w}})});
require(["ta/prwidgets"],function(n){var t=n.define.bind(n,"common_north_star_pagination","handlers",["handlers"]);t(["widget","vanillajs","ta/Core/TA.Event","common/trackingStreams"],function(n,t,i,a){"use strict";function e(n,t){i.fireEvent("paginationChanged",t)}function r(n,t,i,e,r){a.trackEvent(i,"click",e,r)}return{paginate:e,trackClick:r}})});
define("ta/util/ReCaptcha",["vanillajs","ns-exporter","common/trackingStreams"],function(e,t,r){"use strict";var n=!1,a={},c={},o="",i=function(e){if(e<0)return 300;switch(e){case 0:return 0;case 1:return 250;case 2:return 500;case 3:return 1e3;default:return 2e3}},l=function(e,t){require.defined("ta/util/Error")?require("ta/util/Error").record(t+": "+e):ta.merror&&ta.merror.recordError&&"function"==typeof ta.merror.recordError&&ta.merror.recordError(t,null,null,null,e)},u=function(){r.trackEvent("captcha","recaptcha","displayed")},d=function(e,t){var r=document.getElementById(t);return r&&"INPUT"===r.tagName?void(r.value=e||""):void l(null,"The recaptcha input id was not found on the page: "+t)},p={init:function(e,t,r,a){try{if(c[r]=a,n)return;e||l(null,"No language specified for recaptcha."),t&&(o=t);var i=document.createElement("script");i.type="text/javascript",i.async=!0,i.defer=!0,i.src="https://www.google.com/recaptcha/api.js?onload=recaptchaCallback&render=explicit&hl="+e,document.getElementsByTagName("head")[0].appendChild(i),n=!0}catch(e){l(e,"Could not inject recaptcha script on to page.")}},reset:function(e){if(!e)return void l(null,"No reset key specified.");if(a[e]||0===a[e])try{"undefined"!=typeof grecaptcha&&grecaptcha&&grecaptcha.reset&&"function"==typeof grecaptcha.reset&&grecaptcha.reset(a[e])}catch(t){l(t,"Error resetting recaptcha object: "+e)}},resetAll:function(){for(var e in a)a.hasOwnProperty(e)&&p.reset(e)},clear:function(){a={}},checkGrecaptcha:function(){return!("undefined"==typeof grecaptcha||!grecaptcha||!grecaptcha.render||"function"!=typeof grecaptcha.render)},checkCaptchaRendered:function(e){return!(!a[e]&&0!==a[e])},showSync:function(e,t,r){var n=0,a=window.setInterval(function(){return++n>=40?(window.clearInterval(a),void l(null,"Recaptcha JS was not loaded on the page.")):void("undefined"!=typeof grecaptcha&&(p.show(e,t,r),window.clearInterval(a)))},250)},showAll:function(e){for(var t in c)c.hasOwnProperty(t)&&p.show(e,t,c[t])},waitForElm:function(e,t,r){var n=0,a=function(){if(++n>=5)return window.clearInterval(c),void l(null,"Recaptcha element id was not loaded on the page."+t);var a=document.getElementById(t);a&&(window.clearInterval(c),p.show(e,t,r))},c=window.setInterval(a,250)},execute:function(){return"undefined"==typeof grecaptcha||"function"!=typeof grecaptcha.execute?void l(null,"Calling execute while captcha is not rendered"):void grecaptcha.execute()},show:function(e,t,r,n,c,f,h){try{if("undefined"==typeof grecaptcha||!grecaptcha||!grecaptcha.render||"function"!=typeof grecaptcha.render)return void l(null,"Recaptcha JS was not loaded on the page.");if(!e||!t||!r)return void l(null,"Please pass a site key, element id, and input id.");var s=document.getElementById(t);if(!s)return void p.waitForElm(e,t,r);if(a[t]&&"object"==typeof a[t])return;var g=0,w=i(g),y=document.getElementById("captchaSpinner"),m=function(){if(1==g&&null!==y&&(y.style.display="block"),++g>=5){window.clearTimeout(v),y&&(y.style.display="none"),l(null,"Couldn't load recaptcha"),"function"==typeof h&&h.call();var u=document.getElementById("captchaError");return void(null!==u&&(u.className="captchaError errorMsg warning wrap",u.innerHTML=o))}if("undefined"==typeof a[t]){var s=n?"compact":"normal";c&&(s="invisible"),a[t]=grecaptcha.render(t,{"sitekey":e,"theme":"light","type":"image","tabindex":0,"size":s,"callback":function(e){d(e,r),"function"==typeof f&&f(e,r)},"expired-callback":function(){p.reset(t)}}),w=i(g),v=window.setTimeout(m,w)}else window.clearTimeout(v),y&&(y.style.display="none")},v=window.setTimeout(m,w);u()}catch(e){l(e,"Error loading recaptcha.")}}};return t.exportTo(p,"ta.util.ReCaptcha"),p});
define("ta/util/GeeTest",["ns-exporter","common/trackingStreams"],function(e,t){"use strict";var n=!1,r="float",o={},a={},c="",i=t.error,s=function(){t.trackEvent("captcha","geetest","displayed")},u=function(e){var t=e.getElementsByClassName("gt_guide_tip");t&&t.length>0&&c&&(t[0].innerHTML=c)},l=function(){},d={init:function(e,t){try{if(n||"undefined"!=typeof Geetest&&Geetest)return;r=t?t:r,c=e;var o=Math.floor(1e4*Math.random())+Date.now(),a="geetest_"+o;window[a]=l;var s=document.createElement("script");s.type="text/javascript",s.async=!0,s.defer=!0,s.src="https://api.geetest.com/get.php?callback="+a,document.getElementsByTagName("head")[0].appendChild(s),n=!0}catch(e){i(e,"Could not inject geetest script on to page.")}},reset:function(e){try{o[e]&&"function"==typeof o[e].refresh&&(o[e].refresh(),a[e]=null)}catch(t){i(t,"Error resetting recaptcha object: "+e)}},resetAll:function(){for(var e in o)o.hasOwnProperty(e)&&d.reset(e)},clear:function(){o={},a={}},waitForLoad:function(){return new Promise(function(e,t){var n=0,r=window.setInterval(function(){return++n>=40?(window.clearTimeout(r),i(null,"GeeTest JS was not loaded on the page."),void t()):void("undefined"!=typeof Geetest&&(window.clearTimeout(r),e()))},250)})},showSync:function(e,t,n){return d.waitForLoad().then(function(){return d.show(e,t,n)})},show:function(e,t,n){try{if("undefined"==typeof Geetest||!Geetest)return i(null,"GeeTest JS was not loaded on the page."),Promise.reject();if(!e||!t)return i(null,"Please pass a site key and element id."),Promise.reject();var c=document.getElementById(t);if(!c)return i(null,"The geetest element id was not found on the page: "+t),Promise.reject();("object"!=typeof o[t]||n)&&(o[t]=new Geetest({gt:e,product:r,https:!0}),o[t].onReady(function(){u(c)}).appendTo(c));var l=o[t];return a[t]=new Promise(function(e){l.onSuccess(function(){e({challenge:c.querySelector(".geetest_challenge").value,validate:c.querySelector(".geetest_validate").value,seccode:c.querySelector(".geetest_seccode").value})})}),s(),a[t]}catch(e){return i(e,"Error loading geetest captcha."),Promise.reject()}},checkGeeTestRendered:function(e){return!!o[e]}};return e.exportTo(d,"ta.util.GeeTest"),d});
define("pages/inappropriate_vote_stub",["ta","ta/util/Element","ta/Core/TA.Store","vanillajs","overlays/Overlay","overlays/styles/default","overlays/position/conditional","utils/responsive","overlays/position/fullscreen","overlays/position/center","overlays/options/closeOnEscape","overlays/position/autosize","overlays/options/autoReposition","overlays/options/closeOnWindowshadeClick","overlays/options/closeOnBackButton","overlays/styles/windowshade","overlays/options/ajax"],function(e,o,t,n,i,s,r,a,l,p,d,u,c,w,v,y,m){"use strict";function _(e){o.isScrolledIntoView(e.elmt)||o.scrollIntoView(e.elmt),window.JS_SECURITY_TOKEN=e.token||window.JS_SECURITY_TOKEN,!window.JS_SECURITY_TOKEN&&window.ta.m&&window.ta.m.secureToken&&(window.JS_SECURITY_TOKEN=window.ta.m.secureToken);var n="/ReportIAP?token="+window.JS_SECURITY_TOKEN+"&step=START&voteContentType="+e.voteContentType;n+=e.owner?"&action=explain&reason=21&reviewid="+e.reviewid+"&isGeo="+e.isGeo+"&locationid="+e.locationid:"&action=reportIAP&contentId="+e.contentId,E?(E.updateContent(n),E.sourceElement=e.elmt,require("pages/inappropriate_vote").updateContentId(e.contentId),E.show()):require(["trjs!inappropriate_vote_dlg"],function(){E=new i(e.elmt,[s(e.elmt,"iapFlyout ui_modal"),r(a.mobile,l(),p()),d,u(0),c,y("light"),w,v("ReportProblem"),m(n,{})]),E.on("contentLoaded",function(){E.sourceElement.getAttribute("data-owner")||require("pages/inappropriate_vote").initUI(E,E.sourceElement)}),E.show(),t.store("iapFlyout",E)})}var E,T={};return T.open=function(e,o,t){t.elmt=t.elmt||o;var n={flow:"CORE_COMBINED",pid:t.reg_pid||39841,userRequestedForce:!0,loggedInBypass:!0,onSuccess:_.bind(null,t)};require(["trjs!ta/registration/RegOverlay"],function(e){e.show({type:"dummy"},t.elmt,n)})},T});
require(["ta/prwidgets"],function(e){var r=e.define.bind(e,"common_location_topic_resp","handlers",["handlers"]);r(["widget","overlays/loading-spinner","ta/prwidgets","ajax-request","common/trackingStreams","ta/util/ReCaptcha","ta/util/GeeTest","pages/inappropriate_vote_stub","ta/Core/TA.FireEvent","utils/classnameUtils"],function(e,r,t,n,a,l,i,o,s,c){"use strict";function d(){var e=O.querySelector(".answerForm");c.removeClass(e,"hidden"),O.querySelector(".answerText").focus(),a.trackEvent(I,"click","answer")}function u(n,l,i){var o=O.querySelector(".answerList");o&&(o.innerHTML=r(),e.require(["trhtml!LOCATION_TOPIC_WIDGETS/HSX_RESP?t="+i+"&o=0&limit=20"],function(e){o.innerHTML=e.innerHTML,t.initWidgets(o),c.addClass(O.querySelector(".showAll"),"hidden"),c.removeClass(O.querySelector(".hideAll"),"hidden");var r=O.querySelectorAll(".answerList > *");Array.prototype.forEach.call(r,function(e){c.removeClass(e,"hidden")})}),a.trackEvent(I,"click","show_all_answers"))}function h(){c.addClass(O.querySelector(".hideAll"),"hidden"),c.removeClass(O.querySelector(".showAll"),"hidden");var e=O.querySelectorAll(".answerList > *");Array.prototype.forEach.call(e,function(e){c.addClass(e,"hidden")}),c.removeClass(O.querySelector(".answerList > *"),"hidden")}function v(){c.addClass(O.querySelector(".delete"),"hidden"),c.removeClass(O.querySelector(".confirmDelete"),"hidden"),c.removeClass(O.querySelector(".cancelDelete"),"hidden"),c.removeClass(O.querySelector(".confirmDeleteExplanation"),"hidden")}function f(r,t,l,i){c.addClass(O.querySelector(".confirmDelete"),"hidden"),c.addClass(O.querySelector(".cancelDelete"),"hidden"),c.addClass(O.querySelector(".confirmDeleteExplanation"),"hidden"),c.removeClass(O.querySelector(".delete"),"hidden"),s.fireEvent("qaQuestionDeleted");var o=function(){var r=O.parentElement;r.removeChild(O),r.querySelector("[data-prwidget-name="+e.name+"]")||s.fireEvent("qaLastQuestionDeleted")},d=function(e){a.error(I,"Failed to delete answer (location_topic_resp/handlers)",e)};n("/AnswersAjax",{method:"POST",dataType:"html",data:{"act":"dt","tpcid":l,"token":i},trackEvent:{module:"answers_faq_answer_crud",action:"answers_faq_delete_answer",context:l,value:0,noninteraction:!1}}).then(o,d)}function m(){c.addClass(O.querySelector(".confirmDelete"),"hidden"),c.addClass(O.querySelector(".cancelDelete"),"hidden"),c.addClass(O.querySelector(".confirmDeleteExplanation"),"hidden"),c.removeClass(O.querySelector(".delete"),"hidden")}function y(){var e=O.querySelector(".answerText");if(!e.value.length)return void e.focus();var r={username:!0};return require(["trjs!ta/registration/AuthCheck"],function(e){if(e.isAuthorized(r))S();else{var t={flow:"CONTENT_SUBMISSION",pid:-1,userRequestedForce:!0,onSuccess:function(){S()}};require(["trjs!ta/registration/RegOverlay","utils/responsive"],function(e,r){e.showRegOverlay(null,null,r.mobile(),t)})}}),!1}function p(){c.addClass(O.querySelector(".answerForm"),"hidden")}function q(e){return e?e.value:""}function S(){var r=O.querySelector(".answerForm"),a=r.querySelector(".answerText"),o={act:"ap",psttxt:q(a),tpcid:r.topicid.value,pid:-1,altsessid:r.altsessid.value,token:r.token.value,lcid:r.lcid.value,"g-recaptcha-response":q(r.querySelector(".recaptcha_input")),geetest_challenge:q(r.geetest_challenge),geetest_validate:q(r.geetest_validate),geetest_seccode:q(r.geetest_seccode),useJson:!0},s=r.querySelector(".formSubmit");c.addClass(s,"loading");var d=function(n){l.resetAll(),i.resetAll(),w(n),c.removeClass(s,"loading"),c.addClass(r,"hidden");var o=JSON.parse(n);o.postingId&&e.require(["trhtml!LOCATION_POSTING_WIDGETS/HSX_RESP?lp="+o.postingId],function(e){var r=O.querySelector(".answerList");r.insertBefore(e,r.firstChild),t.initWidgets(r),a.value="",C()})},u=function(e){l.resetAll(),i.resetAll(),null!==e&&w(e),c.removeClass(s,"loading")};n("/AnswersAjax",{method:"POST",dataType:"html",data:o,trackEvent:{module:"answers_faq_answer_crud",action:"answers_faq_create_answer",context:o.tpcid,value:0,noninteraction:!1}}).then(d,u)}function C(){O.querySelector(".errors").innerHTML=""}function w(e){try{var r=JSON.parse(e)}catch(e){return}if(r.ALERT&&(r.errors=[r.ALERT]),r.errors&&r.errors.length>0){var t=O.querySelector(".errors",O);t.innerHTML="";for(var n=0;n<r.errors.length;n++){var a=document.createElement("li");a.innerHTML=r.errors[n],t.appendChild(a)}c.removeClass(t,"hidden")}}function _(e,r,t){o.open(e,r,{voteContentType:"LOCATION_TOPIC",contentId:t})}function g(e,r,t){a.trackEvent(I,"click","answers_faq_answer_form",t)}function A(){require(["trjs!ta/util/CaptchaHandler"],function(){var e=O.querySelector(".captcha_here");e&&null==e.querySelector("#sharedCaptcha")&&e.appendChild(document.getElementById("sharedCaptcha"))})}function E(e,r){return require(["trjs!members/memberOverlay"],function(t){t.initMemberOverlay(e,r,r.getAttribute("data-overlay-id"),"Answers","user_name_photo"),a.trackEvent(I,"click","show_reviewer_info_window")}),!1}function T(e){require(["trjs!overlays/widgetoverlays"],function(r){r.showLightbox("QA_GET_VERIFIED",{locationId:e},{})})}function k(e,r,t){require(["trjs!overlays/widgetoverlays"],function(e){e.showLightbox("QA_POSTING_GUIDELINES",{locationId:t},{})})}var O=e.element,I="faq";return{answerButtonClick:d,showAllClick:u,hideAllClick:h,deleteClick:v,confirmDeleteClick:f,cancelDeleteClick:m,clearErrors:C,submitAnswer:y,cancelAnswer:p,moveCaptchaHere:A,iapVote:_,trackAnswerFormClick:g,initMemberOverlay:E,initGetVerifiedOverlay:T,initPostingGuidelinesOverlay:k}})});
require(["ta/prwidgets"],function(e){var t=e.define.bind(e,"common_location_posting_resp","handlers",["handlers"]);t(["widget","vanillajs","ta/prwidgets","common/trackingStreams","pages/inappropriate_vote_stub","ajax-request","utils/classnameUtils"],function(e,t,n,r,a,o,i){"use strict";function l(e,t,n,a,o){d(n,a,o,1),r.trackEvent(y,"click","upvote")}function s(e,t,n,a,o){d(n,a,o,-1),r.trackEvent(y,"click","downvote")}function c(e,t,n,a){var i=function(e){var t=JSON.parse(e),n=q.querySelector(".score");n&&(n.innerHTML=t.votes);var r=q.querySelector(".voteCount");r&&(r.dataset.content=t.message,r.innerHTML=t.text),require(["trjs!overlays/uiOverlay"],function(e){e(null,r)})},l=function(e){r.error(y,"Failed to vote on Q&A location_posting_resp",e)};o("/AnswersAjax",{method:"POST",dataType:"json",trackEvent:{module:"answers_faq_vote",action:"answers_faq_vote_add",context:e,value:a,noninteraction:!1},data:{altsessid:n,act:"av",pstid:e,vs:a,pid:-1,token:t,useJson:!0}}).then(i,l)}function d(e,t,n,r){require(["trjs!ta/registration/AuthCheck"],function(a){if(a.isAuthorized())c(e,t,n,r);else{var o={flow:"CORE_COMBINED",pid:-1,userRequestedForce:!0,onSuccess:function(){c(e,t,n,r)}};require(["trjs!ta/registration/RegOverlay"],function(e){e.show(null,null,o)})}})}function u(){i.addClass(q.querySelector(".delete"),"hidden"),i.removeClass(q.querySelector(".confirmDelete"),"hidden"),i.removeClass(q.querySelector(".cancelDelete"),"hidden"),i.removeClass(q.querySelector(".confirmDeleteExplanation"),"hidden")}function v(e,t,n,a){i.addClass(q.querySelector(".confirmDelete"),"hidden"),i.addClass(q.querySelector(".cancelDelete"),"hidden"),i.addClass(q.querySelector(".confirmDeleteExplanation"),"hidden"),i.removeClass(q.querySelector(".delete"),"hidden");var l=function(e){q.parentElement.removeChild(q)},s=function(e){r.error(y,"Failed to delete posting from Q&A",e)};o("/AnswersAjax",{method:"POST",dataType:"html",data:{"act":"dp","pstid":n,"token":a},trackEvent:{module:"answers_faq_answer_crud",action:"answers_faq_delete_answer",context:n,value:0,noninteraction:!1}}).then(l,s)}function f(){i.addClass(q.querySelector(".confirmDelete"),"hidden"),i.addClass(q.querySelector(".cancelDelete"),"hidden"),i.addClass(q.querySelector(".confirmDeleteExplanation"),"hidden"),i.removeClass(q.querySelector(".delete"),"hidden")}function m(e,t,n){a.open(e,t,{voteContentType:"LOCATION_POSTING",contentId:n}),r.trackEvent(y,"click","flag")}function p(){var e=q.querySelector(".abbreviated");i.addClass(e,"hidden");var t=q.querySelector(".unabbreviated");i.removeClass(t,"hidden")}function h(e,t){return require(["trjs!members/memberOverlay"],function(n){n.initMemberOverlay(e,t,t.getAttribute("data-overlay-id"),"Answers","user_name_photo"),r.trackEvent(y,"click","show_reviewer_info_window")}),!1}var q=e.element,y="faq";return{voteUp:l,voteDown:s,deleteClick:u,confirmDeleteClick:v,cancelDeleteClick:f,iapVote:m,unabbreviateContent:p,initMemberOverlay:h}})});
define("hotels/HRContentBlockUtils",["ta/prwidgets","utils/classnameUtils","utils/objutils"],function(e,t,i){function n(e,i){var n=!t.hasClass(e,u)||i,o=e&&e.querySelector(".block_body_bottom"),d=o&&o.querySelector(".inner");o&&d&&(o.style.height=n?d.offsetHeight+"px":0,t.toggleClass(e,u,n))}function o(e){delete c[e]}function d(t,d,r){var l=t&&document.getElementById(t.id);if(l)if(c[t.id])(r||n)(l);else{if(c[t.id]===!1)return;c[t.id]=!1,t.requestAJAXPlacement(function(i){var d=l.querySelector(".block_body_bottom .inner");d&&i?(c[t.id]=!0,d.innerHTML=i,e.initWidgets(d),require.defined("mobile/lite/image-loader")&&require("mobile/lite/image-loader").init(200,d),setTimeout(r||n,0,l)):o(t.id)},function(){o(t.id)},i.extend({"more_content_request":!0},d))}}function r(t,i,n){var d=t&&document.getElementById(t.id);d&&(i.updateContentRequest=!0,c[t.id]!==!1&&(c[t.id]=!1,t.requestAJAXPlacement(function(i){var r=d.querySelector(".block_body_top");r&&i?(c[t.id]=!0,r.innerHTML=i,e.initWidgets(r),n&&n(!0)):(o(t.id),n&&n(!1))},function(){o(t.id),n&&n(!1)},i)))}function l(d,r){var l=d&&document.getElementById(d.id);if(l)if(c[d.id])n(l,!0);else{if(c[d.id]===!1)return;c[d.id]=!1,d.requestAJAXPlacement(function(i){var r=l.querySelector(".block_body_bottom .inner");if(r&&i){delete c[d.id];var u=document.createElement("div");if(u.innerHTML=i,u=u.firstElementChild,r.appendChild(u),t.hasClass(u,"last_batch")){var s=l.querySelector(".block_footer");s&&(s.style.display="none")}e.initWidgets(r),setTimeout(n,0,l,!0)}else o(d.id)},function(){o(d.id)},i.extend({"more_content_request":!0},r))}}var u="expanded",c={};return{expandContent:d,updateContent:r,expandContentNoToggle:l,toggleSection:n}});
define("overlays/options/pinnable",["vanillajs","api-mod","ta/Core/TA.Event"],function(i,n,e){"use strict";return function(){function i(){if(c.pinned&&n.inDocument(c.container)&&!o){var i=c.invisibleBackdrop?"ui_backdrop":"ui_backdrop dark";o=n.createElement("div",{"class":i}),o.setAttribute("style","z-index:499"),n.addEvent(o,"click",function(){c.hide()}),c.domParent.appendChild(o)}}function t(n){c.pinned=!0,c.invisibleBackdrop=n,i()}var o,c=this;this.pinned=!1,this.invisibleBackdrop=!1,this.pin=t,this.on("show",function(){i(),e.on(c.sourceElement,"click",t)}),this.on("hide",function(){o&&(c.domParent.removeChild(o),o=void 0,e.off(c.sourceElement,"click",t))})}});
define("overlays/ux/elementToggle",["lib/jquery-amd"],function(n){"use strict";return function(t,e){e&&(e["on"+t.type]=null);var i=t.type||"click";return function(){n(this.sourceElement).on(i,function(n){n.stopPropagation(),this.isOpen()?"click"==i&&this.hide():this.show()}.bind(this))}}});
define("overlays/support/radio",["common/Radio"],function(n){"use strict";return{hide:function(o,i){return o||(o="overlays"),i||(i="shown"),function(){var t=this,u=n(o),e=function(n){n!=t&&t.hide()};this.on("show",function(){u.on(i,e)}).on("hide",function(){u.off(i,e)})}},announce:function(o,i,t){return i||(i="overlays"),t||(t="shown"),function(){var u=this,e=n(i);this.on("show",function(){e.emit(t,u,o)})}}}});
define("styleguide/overlays/Modal",["lib/jquery-amd","utils/responsive","overlays/Overlay","overlays/styles/default","overlays/styles/windowshade","overlays/position/autosize","overlays/position/conditional","overlays/position/center","overlays/position/fullscreen","overlays/options/repositionOnEvent","overlays/ux/elementToggle","overlays/options/closeOnWindowshadeClick","overlays/options/closeOnDocClick","overlays/support/radio"],function(e,o,s,i,l,r,n,a,t,y,u,v,d,p){"use strict";return function(e,c){var h=[i(c,"ui_modal"),n(o.mobile,t(),a()),r(0),y(window,"resize"),p.hide(),p.announce(),Array.prototype.slice.call(arguments,2)];e&&h.push(u(e,c));var w=c&&c.getAttribute("data-sg-overlay")||"";return w.indexOf("nobackdrop")<0?h.push(l(),v):h.push(d),new s(c,h).show()}});
define("overlays/widgetoverlays",["ta","api-mod","overlays/Overlay","overlays/styles/popover","overlays/styles/modal","overlays/styles/dropdown","overlays/styles/windowshade","overlays/position","overlays/options/ajax","overlays/options/pinnable","overlays/options/closeOnWindowshadeClick","overlays/options/repositionOnEvent","styleguide/overlays/Modal"],function(e,i,n,r,t,o,a,s,l,v,d,m,u){"use strict";function p(e,i){var n=e.prwidget_ovl||(e.prwidget_ovl={key:i});return n.key!==i&&(n.showtimer&&(clearTimeout(n.showtimer),delete n.showtimer),n.overlay&&(n.overlay.destroy(),delete n.overlay),n.key=i),n}function c(){var n=this,r=n.prwidget_ovl;if(r&&(r.showtimer&&(clearTimeout(r.showtimer),delete r.showtimer),!(e.page&&e.page.usingUnifiedDates&&i.find(".ui_modal.date_picker_modal",document.body)))){var t=r.overlay;!t||t.pinned||t.prw_leaveTimer||(t.prw_leaveTimer=setTimeout(function(){t.pinned||t.hide()},250))}}function y(){var e=this;e&&(e.prw_entered=!0,e.prw_leaveTimer&&(clearTimeout(e.prw_leaveTimer),delete e.prw_leaveTimer))}function w(){if(!(e.page&&e.page.usingUnifiedDates&&i.find(".ui_modal.date_picker_modal",document.body))){var n=this;!n||n.pinned||n.prw_leaveTimer||(n.prw_leaveTimer=setTimeout(function(){n.pinned||n.hide()},250))}}function h(e,n){var r=!e.pinned&&y.bind(e),t=!e.pinned&&w.bind(e),o=function(){r&&i.removeEvent(e.container,"mouseenter",r),t&&i.removeEvent(e.container,"mouseleave",t),e.off("hide",o),delete n.overlay};r&&i.addEvent(e.container,"mouseenter",r),t&&i.addEvent(e.container,"mouseleave",t),e.on("hide",o)}function f(e,i){var n=i.url||"/OverlayWidgetAjax?Mode="+encodeURIComponent(e);return"string"==typeof crPageServlet&&(n+="&metaReferer="+encodeURIComponent(crPageServlet)),n}function g(e,t,o,a,d){var m=p(e,o);if(m.showtimer&&(clearTimeout(m.showtimer),delete m.showtimer),!m.overlay){var u=(d.position||"wideside").split(" ").filter(function(e){return!!e.length}),c=u.shift();if("wideside"===c)try{var y=i.getPosition(e).left,w=i.getSize(e).x,g=i.getSize(document.body).x;c=y>g-y-w?"leftEvenInRtl":"rightEvenInRtl"}catch(e){c="right"}var T=""|d.classes,_=f(o,d);d.reqParams=a,d.inlineResourceId=o,d.isWidget=!0;var x=[r(e,c,T,""),l(_,d),s[c](u,!1),v];d.mixins&&d.mixins.length>0&&x.push.apply(x,d.mixins);var E=new n(e,x);"click"===t&&E.pin(d.invisibleBackdrop),E.show(),m.overlay=E,h(E,m),d.onLoad&&E.on("contentsUpdated",d.onLoad)}}function T(e,i,r){r=r||{};var o=(r.position||"center").trim().split(" ")[0],v=f(e,r);r.reqParams=i,r.inlineResourceId=e,r.isWidget=!0;var u=[t(null,null,r.classes),l(v,r),s[o](void 0,!0),a(),d,m(window,"resize")];r.mixins&&r.mixins.length>0&&u.push.apply(u,r.mixins);var p=null;r.sourceElement&&(p=r.sourceElement);var c=new n(p,u);return c.show(),c}function _(e,i,n){n=n||{};var r=f(e,n);n.reqParams=i,n.inlineResourceId=e,n.isWidget=!0;var t=[l(r,n)];return n.mixins&&n.mixins.length>0&&t.push.apply(t,n.mixins),u(null,n.sourceElement||null,t)}function x(e,n,r,t,o){e=e||window.event,n=n||e.currentTarget;var a=e&&e.type||"click";e&&i.stopEvent(e);var s=p(n,r);if("click"===a)s.overlay||g(n,a,r,t,o);else{if(s.overlay)return s.overlay.prw_leaveTimer&&(clearTimeout(s.overlay.prw_leaveTimer),delete s.overlay.prw_leaveTimer),!1;if(s.showtimer)return!1;s.hasLeaveHandler||(i.removeEvent(n,"mouseleave",c),i.addEvent(n,"mouseleave",c),s.hasLeaveHandler=!0),s.showtimer=setTimeout(function(){g(n,a,r,t,o)},o.delay||300)}return!1}function E(e,r,t,a,v){e=e||window.event,r=r||e.currentTarget,e&&i.stopEvent(e),v=v||{};var d=(v.position||"below").trim().split(" ")[0],m=f(t,v);v.reqParams=a,v.inlineResourceId=t,v.isWidget=!0;var u=[o(r,d,v.classes,null,v.containerStyles,v.elementType||"div"),l(m,v),s[d](void 0,!0)];v.mixins&&v.mixins.length>0&&u.push.apply(u,v.mixins);var p=new n(r,u);return p.show(),p}return{triggerFlyout:x,showLightbox:T,showDropdown:E,showStyleguideModal:_}});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"location_qa_resp","handlers",["handlers"]);t(["placement","vanillajs","hotels/HRContentBlockUtils","ta/util/ReCaptcha","ta/util/GeeTest","common/trackingStreams","ajax-request","overlays/widgetoverlays","ta/Core/TA.Event","utils/classnameUtils","ta/util/Element"],function(e,t,n,r,a,o,i,s,l,u,c){function d(){var e=S.querySelector(".askQuestionForm");u.removeClass(e,"hidden");var t=S.querySelector(".topicText");t&&t.focus(),o.trackEvent(_,"click","ask_a_question"),o.trackEvent("content_submission|question","start_submission","POI|Hotel")}function v(){var e=S.querySelector(".askQuestionForm");u.addClass(e,"hidden")}function f(){var e=S.querySelector(".topicText");if(!e.value.length)return void e.focus();var t={username:!0};return require(["trjs!ta/registration/AuthCheck"],function(e){if(e.isAuthorized(t))m();else{var n={flow:"CONTENT_SUBMISSION",pid:-1,userRequestedForce:!0,onSuccess:m};require(["trjs!ta/registration/RegOverlay","utils/responsive"],function(e,t){e.showRegOverlay(null,null,t.mobile(),n)})}}),!1}function h(e){return e?e.value:""}function m(){var e=S.querySelector(".askQuestionForm");if(e){var t=e.querySelector(".topicText").value,n=!!e.querySelector("[name=optin]:checked"),s={act:n?"ats":"at",topicText:t,detail:e.detail.value,pid:-1,optIn:n,altsessid:e.altsessid.value,token:e.token.value,"g-recaptcha-response":h(e.querySelector(".recaptcha_input")),geetest_challenge:h(e.geetest_challenge),geetest_validate:h(e.geetest_validate),geetest_seccode:h(e.geetest_seccode),redirect:!0},l=e.querySelector(".formSubmit");u.addClass(l,"loading");var c=function(e){r.resetAll(),a.resetAll(),p(e)||(S.querySelector(".topicText").value="",window.location=e),u.removeClass(l,"loading")},d=function(e){if(r.resetAll(),a.resetAll(),null!==e){var t=p(e);t||o.error("Unexpected Error submitting question",e)}u.removeClass(l,"loading")};i("/AnswersAjax",{method:"POST",url:"MetaPlacementAjax",dataType:"html",data:s,evalScripts:!0,trackEvent:{module:"answers_faq_question_crud",action:"answers_faq_create_question",context:s.detail,value:0,noninteraction:!1}}).then(c,d)}}function p(e){var t=null;try{t=JSON.parse(e)}catch(e){return!1}if(t&&t.ALERT&&(t.errors=[t.ALERT]),t&&t.errors&&t.errors.length>0){var n=S.querySelector(".errors");n.innerHTML="";for(var r=0;r<t.errors.length;r++){var a=document.createElement("li");a.innerHTML=t.errors[r],n.appendChild(a)}u.removeClass(n,"hidden")}return!0}function q(){require(["trjs!ta/util/CaptchaHandler"],function(){var e=S.querySelector(".captcha_here");e&&null==e.querySelector("#sharedCaptcha")&&e.appendChild(document.getElementById("sharedCaptcha"))})}function g(e){s.showLightbox("QA_POSTING_GUIDELINES",{locationId:e},{})}var S=document.getElementById(e.id),_="faq";return l.on("paginationChanged",function(t){document.getElementById(e.id).contains(t)&&(l.fireEvent("TabHeader_clickTab",document.getElementById("TABS_ANSWERS")),n.updateContent(e,{"offset":t.getAttribute("data-offset")},function(){l.fireEvent("qaListUpdated")}))}),l.on("qaQuestionDeleted",q),l.on("qaLastQuestionDeleted",d),l.queueForLoad(function(){var t=S.querySelector(".shouldUpdateOnLoad");t&&t.getAttribute("data-should-update")&&n.updateContent(e,{"offset":"0"})}),c.trackWhenScrolledIntoView("#"+e.id,["faq","in_view"]),{moreClick:function(){n.expandContent(e)},askQuestionClick:d,submitAskQuestion:f,cancelAskQuestion:v,moveCaptchaHere:q,initPostingGuidelinesOverlay:g}})});
define("members/memberOverlay",["utils/stopevent","overlays/widgetoverlays","common/trackingStreams","utils/responsive","amdloaders","hotels/tracking/timing","common/Radio"],function(e,r,t,i,n,o,a){function m(a,m,s,d,c){if(a&&("click"===a.type||"mouseenter"===a.type||"mouseover"===a.type)){var l=i.mobile();if(l&&"click"!==a.type)return!1;"click"===a.type&&e(a);for(var v="",u="",f="",p=!1,w=!1,b=s.split("-"),y=0;y<b.length;y++){var g=b[y];g.match(/\bUID_([0-9A-F]+)\b/)?v=RegExp.$1:g.match(/\bSRC_(\d+)\b/)?u=RegExp.$1:g.match(/\bCATID_(\d+)\b/)?f=RegExp.$1:g.match("FUS")?p=!0:g.match("PATT")&&(w=!0)}var h="";if("undefined"!=typeof window.footprintGet&&(h=window.footprintGet()),l){var _=p?"https://www.tripadvisor.com":"";return window.location.href=_+"/MemberProfile-a_uid."+v,!1}var E="/MemberOverlay?Mode=owa&uid="+v+"&c="+f+"&src="+u+"&fus="+p+"&partner="+w+"&LsoId="+h,k=o.start("member_load",require("page-model").LOC_ID);return r.triggerFlyout(a,m,"MEMBER_OVERLAY",n.getLoadedFilesParams(),{url:E,mixins:[function(){d&&c&&t.trackEvent(d,"show_reviewer_info_window",c)}],invisibleBackdrop:!0,onLoad:k}),!1}}function s(e,r,t,i,n){return!r[d]&&(r[d]=!0,r.addEventListener("click",function(e){m(e||window.event,this,t,i,n)}),r.addEventListener("mouseenter",function(e){m(e||window.event,this,t,i,n)}),e&&m(e,r,t,i,n),!1)}var d="members_memberOverlay_init";return a("memberOverlay").on("initMemberOverlay",s),{initMemberOverlay:s}});
require(["ta/prwidgets"],function(e){var n=e.define.bind(e,"reviews_member_social_info_resp","handlers",["handlers"]);n(["widget","members/memberOverlay","common/trackingStreams","ta/util/Element"],function(e,n,r,i){function t(e,r){return n.initMemberOverlay(e,r,r.id,"Reviews","user_name_photo"),!1}function a(){r.trackEvent("Reviews","click","user_name_name_click")}return i.autoResizeTextInNode(e.element),{initMemberOverlay:t,usernameClick:a}})});
require(["ta/prwidgets"],function(e){var t=e.define.bind(e,"reviews_text_summary_hsx","handlers",["handlers"]);t(["widget","lib/jquery-amd","common/Radio"],function(e,t,i){function r(){t(e.element).trigger("review:expand",[e.element,o])}function n(){t(e.element).trigger("review:collapse",[e.element,o])}function a(){i("member_growth_interstitial").emit("fire",function(){r()})}var l=t(e.element).closest(".reviewSelector"),o=Number(l.attr("data-reviewId"));return{clickExpand:r,clickCollapse:n,fireRegistrationInterstitial:a}})});
define("overlays/options/disablePageScroll",["vanillajs"],function(o){"use strict";return function(){function o(){e=document.body.style.position,document.body.style.position="absolute",document.body.style.overflow="hidden",document.body.style.width="100%"}function t(){document.body.style.position=e,document.body.style.overflow="auto",document.body.style.width="auto"}var e;this.on("show",o),this.on("hide",t)}});
require(["ta/prwidgets"],function(e){var o=e.define.bind(e,"reviews_google_translate_button_hsx","handlers",["handlers"]);o(["widget","overlays/Overlay","overlays/styles/modal","overlays/position","overlays/options/closeOnEscape","overlays/options/closeOnDocClick","overlays/options/autoReposition","overlays/styles/windowshade","overlays/options/ajax","overlays/options/disablePageScroll"],function(e,o,r,t,a,n,l,s,i,y){function v(v){var d=v.getAttribute("data-url");ta.util.cookie.setPIDCookie(16009),e.require(["trcss!src/build/common/translation_overlay"],function(){c.overlay&&c.overlay.hide(),c.overlay=new o(v,[r(v,"center",""),t.center([0,0]),l,y,a,n,s(),i(d)]),c.overlay.container.style.maxWidth="90%",c.overlay.container.style.width="800px",c.overlay.container.style.maxHeight=.8*window.innerHeight+"500px",c.overlay.container.style.overflowY="scroll",c.overlay.show()})}var c=this;return{open:v}}.bind({}))});
require(["ta/prwidgets"],function(e){var i=e.define.bind(e,"reviews_mt_header_hsx","handlers",["handlers"]);i(["widget","ta/util/Cookie"],function(e,i){function t(e,t){return"true"===t.value?i.setPIDCookie(25173):"false"===t.value&&i.setPIDCookie(25172),t.form.elements[0].value=window.location.href,t.form.submit(),!1}return{clickSubmit:t}})});
require(["ta/prwidgets"],function(e){var t=e.define.bind(e,"reviews_mt_footer_hsx","handlers",["deferred/mtReview","handlers"]);t(["widget","api-mod","overlays/uiOverlay","overlays/Overlay","overlays/styles/default","overlays/position/conditional","utils/responsive","overlays/position/fullscreen","overlays/position/center","overlays/options/autoReposition","overlays/options/closeOnEscape","overlays/options/ajax","utils/ajax","overlays/styles/windowshade","ta/Core/TA.Store","common/trackingStreams"],function(e,t,r,i,a,n,o,l,s,d,v,y,c,u,f,m){function p(e){g.editOverlay?g.editOverlay.updateContent("/MachineTranslationEdit?r="+e):(g.editOverlay=new i(null,[a(null,"ui_modal mtedit_overlay"),n(o.mobile,l(),s()),d,v,u(),y("/MachineTranslationEdit?r="+e)]),f.store("translationEditOverlay",g.editOverlay),g.editOverlay.on("contentLoaded",function(){try{var e=document.getElementById("mtedit_mt"),t=document.getElementById("mtedit_english");if(e&&t){var r=e.querySelector(".mtedit_text");r.style.height=t.clientHeight+e.offsetTop-r.offsetTop+"px"}g.editOverlay.reposition()}catch(e){m.error(e,"openMTEdit:onLoad")}})),g.editOverlay.show()}function h(r,i,a){t.stopEvent(r),ta.servlet||(ta.servlet={}),ta.servlet.Reviews?p(a):e.require(["trjs!deferred/mtReview"],function(e){ta.servlet.Reviews=e,p(a)})}function O(i,a){t.stopEvent(i),g.rateOverlay&&g.rateOverlay.hide();var n=t.find(".ratingList",a);n&&e.markMine(n),a.overlay=null,r(i,a),g.rateOverlay=t.retrieve(a,"overlay")}function w(r,i,a,n,o){if(n){var l=t.find(".mtRatingButton",e.element);l&&t.addClass(l,"hidden");var s=t.find(".thanksText",e.element);s&&t.removeClass(s,"hidden"),c("/RateUserReviewSlider?at=true&rateValue="+a+","+n+","+o,{})}g.rateOverlay&&g.rateOverlay.hide()}var g=this;return{clickEdit:h,clickRate:O,rateReview:w}}.bind({}))});
require(["ta/prwidgets"],function(e){var t=e.define.bind(e,"reviews_vote_line_hsx","handlers",["deferred/clicks","handlers"]);t(["widget","overlays/uiOverlay","vanillajs"],function(e,t){function r(e,r){t(e,r)}function i(e,r){r.getAttribute("data-first")||(ta.trackEventOnPage("Reviews","respond_to_review","hover"),r.setAttribute("data-first",1)),t(e,r)}return{hoverReport:r,respondLinkMouseover:i}})});
define("overlays/options/closeOnEmit",["babel/babel-helpers"],function(n){"use strict";return function(n,e,o){return function(){var t=this,i=function(){o&&!o.apply(void 0,arguments)||t.hide("on-event")};this.on("show",function(){return n.on(e,i)}).on("hide",function(){return n.off(e,i)})}}});
define("photoviewer/tracking",["babel/babel-helpers","common/trackingStreams","ta/Core/TA.FireEvent","lib/jquery-amd","utils/responsive","utils/throttle","page-model"],function(i,e,t,o,n,r,c){"use strict";function l(i,t,o){e.trackEvent(i,t,o,Q)}function a(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";_(i)&&e.trackEvent(S,i,t,Q)}function d(i){e.trackEvent(S,i,"",Q)}function _(i){var e=void 0;if(i.includes("grid_view"))e=M;else{if(!i.includes("detail_view"))return!1;e=K}return o(U).hasClass(e)}function v(){Y=o(window).height(),X=o(window).width(),o(window).off("resize",Z).on("resize",Z)}function u(){o(window).off("resize",Z)}function w(){n.desktop()&&t.fireEvent("galNavClick"),l(S,D,null)}function k(){l(S,P,null,Q)}function s(){l(S,H,null,Q)}function h(i){var e=i?"detail_view_show_nav_click":"detail_view_hide_nav_click";l(S,e,null,Q)}function f(i){l(S,i,B,Q)}function p(i){l(S,i,B,Q)}function g(){l(S,R,null,Q)}function m(){l(S,F,null,Q)}function C(){n.desktop()&&l(S,G,null,Q)}function b(){l(S,I,null)}function T(){n.mobile()&&t.fireEvent("galThumbClick")}function A(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";l(S,V,i+"|"+e+"|"+t+"|"+o)}function E(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";l(S,x,i+"|"+e+"|"+o+"|"+r),n.desktop()&&t.fireEvent("galThumbClick")}function y(i,e,t){var n=o(e).closest(U).hasClass(K),r=o(e).hasClass(J),c=n?"detail":"grid",a=r?"dropdown_open":"dropdown_select";l(S,""+c+L[t],a+"_"+i)}function z(i,e,t,o){l(S,N,i+"|"+e+"|"+t+"|"+o)}var S="photoviewer",D="detail_view_image_arrow_click",P="detail_view_gallery_click",R="detail_view_caption_review_click",F="detail_view_caption_attribution_url_click",G="detail_view_desktop_image_click",H="detail_view_photostrip_arrow_click",I="detail_view_image_swipe_click",V="grid_view_thumbnail_click",x="detail_view_photostrip_tile_click",N="helpful_vote_click",O="_view_album_click",j="_view_type_click",q="_view_category_click",B="dropdown_abandoned",L={"album":O,"type":j,"category":q},U=".photoviewerContainer",J="tabs_item",K="hero",M="grid",Q=c.LOC_ID,W=1e3,X=void 0,Y=void 0,Z=r(function(){setTimeout(function(){var i=o(window).width(),t=o(window).height();i===X&&t===Y||(e.trackEvent("screenSizeRecord","resize","s"+X+"x"+Y+"b"+i+"x"+t,""),X=i,Y=t)},W)},W);return{attachResizeTracker:v,detachResizeTracker:u,trackPhotoViewerEvent:l,trackPhotoViewerImpression:a,trackSimpleAction:d,recordBackToGalleryClick:k,recordCaptionReviewClick:g,recordCaptionAttributionUrlClick:m,recordPhotoStripArrowClick:s,recordGridDropdownAbandonment:f,recordAlbumDropdownAbandonment:p,recordHeroClickOnDesktop:C,recordNavArrowVisibilityChange:h,recordArrowClick:w,recordPhotoSwipe:b,recordFilmstripThumbClick:T,recordGridTileClick:A,recordHeroThumbClick:E,recordFilterItemClick:y,recordHelpfulClick:z}});
define("utils/HistoryManager",[],function(){"use strict";function t(){function t(){return(new Date).getTime()+""+Math.random()}function i(t){var i=t.state;if(!a&&i&&i.id){var e=i.id,s=n[e];s&&s(i.data)}}var n={},e={},a=!1;this.pushState=function(i,e,a,s){var r=t();n[r]=s,i.id=r,history.pushState(i,e,a)},this.replaceState=function(i,e,a,s){var r=t();n[r]=s,i.id=r,history.replaceState(i,e,a)},this.addCallback=function(t,i){e[t]||(e[t]=[]),e[t].push(i)},this.removeCallback=function(t,i){if(e[t]){var n=e[t].indexOf(i);n>=0&&e[t].splice(n,1)}},this.doCallbacks=function(t){e[t]&&e[t].each(function(t){t()})},this.isSupported=function(){return"undefined"!=typeof history&&"pushState"in history},this.disableCallbacks=function(t){a=t},window.addEventListener("popstate",i)}return t});
define("photoviewer/loader",["babel/babel-helpers","lib/jquery-amd","page-model","overlays/Overlay","overlays/styles/modal","overlays/position/fullscreen","overlays/options/closeOnEmit","overlays/options/ajax","overlays/support/radio","overlays/options/closeOnEscape","common/trackingStreams","common/Radio","ta/Core/TA.FireEvent","ta/Core/TA.Store","photoviewer/tracking","utils/responsive","utils/HistoryManager","utils/urlutils","mixins/page-dates/pop-calendar","commerce/offerclickEvents"],function(e,o,t,n,i,r,a,d,l,s,c,p,u,v,h,f,w,g,m,b){"use strict";function y(e){var n=e,i=f.mobile()?2:f.desktop()?5:3;return n.heroMinWidth=o(window).width()-2*x,n.heroMinHeight=o(window).height()-2*x,n.gridItemMinWidth=n.heroMinWidth/i,n.updateType=n.updateType||"partial",n.placementRollUps="responsive-photo-viewer",n.albumid=e.albumid||e.albumId,n.puid=t.session.uid,n.geo=n.geo||t.GEO_ID,n.detail=n.detail||t.LOC_ID,n.geo&&n.detail?(e.albumViewMode||(n.albumid=n.albumid||P,n.filter=n.filter||T,e.ff||e.imageId?(n.albumViewMode="hero",n.ff=e.ff||e.imageId):e.panoId?n.albumViewMode="hero":n.albumViewMode="grid"),n.area="QC_Meta_Mini|Photo_Lightbox",window.pageServlet&&(n.metaReferer=window.pageServlet),n):(c.error(null,"photoviewer/loader.js:load missing required arguments"),!1)}function E(e){return"/DynamicPlacementAjax?"+o.param(y(e))}function I(){return A.contentElement?A.contentElement.id:""}function C(){if(A.contentElement){var e=A.contentElement.querySelector(".photoviewerContainer");e&&e.parentNode&&(A.contentElement=e.parentNode),A.contentElement.id||(A.contentElement.id="photo_viewer_default_id");var o=k();o&&o.clear(),p("responsive-photoviewer").trigger("content-loaded",A.contentElement.id)}}function k(){if(A){var e=A.contentElement.id;if(e)return p(e)}return null}function M(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],f="no_padding";if(e.currentHeroId=e.ff,A){var w=void 0,g=k();g&&(w=g.request("currentHeroId")),w&&(e.currentHeroId=w),A.updateContent(E(e),!0)}else A=new n(document.body,i(null,"",f),r(),s,a(b,"beforeClick",function(e){return e.isBooking}),d(E(e),{resources:[],noCache:!0,skipInvalidate:!0}),l.hide("responsive-photoviewer","close")),_(t,e),A.on("contentLoaded",C),A.on("contentsUnchanged",function(){p("responsive-photoviewer").trigger("contents-unchanged")}),A.on("data-targetEvent",u.fireEvent),A.on("hide",function(){p("responsive-photoviewer").trigger("overlay-hide"),h.trackSimpleAction("photoviewer_close_click"),h.detachResizeTracker(),j&&v.remove("suppressCalendarPop");var e=o("[data-datetype='CHECKIN']").get(0);m.shouldPop(e)&&m.popCalendar(e)}),A.on("show",function(){p("responsive-photoviewer").trigger("overlay-shown")});c||t||O(e),A.show()}function O(e){var t=e.aggregationId,n=e.albumid,i=e.ff,r=e.filter,a=e.panoId,d={aggregationId:t,albumid:n,filter:r};i&&(d.ff=i),a&&(d.panoId=a);var l=H+o.param(d);p("responsive-photoviewer").trigger("addHistory",{data:d},document.title,l,function(){return M(d,!1,!0)})}function _(e,o){var t=new w;if(t.isSupported()){if(e){var n=window.location.href;window.setTimeout(function(){if(n===window.location.href){var e=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search;window.history.replaceState(null,"",e),O(o)}},0)}p("responsive-photoviewer").on("addHistory",t.pushState);var i=!1;A.on("hide",function(){window.location.hash.indexOf(S)>=0&&(i=!0,t.disableCallbacks(!0),history.back())}),window.addEventListener("popstate",function(){window.location.hash.indexOf(S)>=0?i?history.back():A.show():(i=!1,t.disableCallbacks(!1),A.hide())})}}var x=20,S="#photos",H=S+";",T=7,P=101,A=void 0,j=!1;return o(function(){var e=window.location.hash;if(e.indexOf(S)>=0){v.retrieve("suppressCalendarPop")||(j=!0,v.store("suppressCalendarPop","true"));var o=void 0,t=e.indexOf(H)>=0&&e.substring(e.indexOf(H)+H.length,e.length);o=t&&t.length>0?g.getUrlQueryArgs("?"+t):y({}),o.updateType="full",M(o,!0)}}),p("responsive-photoviewer").on("load",M),{load:M,buildUrl:E,getOverlayId:I}});
define("actions/openRespPhotoViewer",["common/trackingStreams","ta/util/Cookie","photoviewer/loader"],function(e,o,t){function i(i,n,a,r,l,p){e.trackEvent("photoviewer","click","btf_userphotos"),o.setPIDCookie(5042);var c={detail:a,geo:r,imageId:l,filter:p};l>0&&(c.ff=l),c.albumViewMode="hero",c.updateType="full",t.load(c)}function n(e){t.load(e)}return{open:i,openWithOptions:n}});
require(["ta/prwidgets"],function(e){var i=e.define.bind(e,"reviews_review_resp","handlers",["handlers"]);i(["widget","lib/jquery-amd","ta/util/Cookie","common/trackingStreams","common/Radio"],function(e,i,t,n,r){function o(){i(e.element).trigger("review:expand",[e.element,m])}function l(){i(e.element).trigger("review:collapse",[e.element,m])}function c(r,o,l){n.trackEvent("Reviews","click","title",0,o.href),t.setPIDCookie(l),i(e.element).trigger("review:toggle",[e.element,m])}function a(){t.setPIDCookie(24687),n.trackEvent("Reviews","click","via_mobile_itunes"),window.open("/apps")}function s(e,i){n.setEvtCookie("Reviews","click","title",0,e),t.setPIDCookie(i)}function v(e,i){s(e,i),r("member_growth_interstitial").emit("fire",function(){window.location.href=e})}var w=i(".reviewSelector",e.element),m=Number(w.attr("data-reviewId"));return{clickExpand:o,clickCollapse:l,toggleReviewInline:c,viaMobileClick:a,reviewClick:s,fireRegistrationInterstitial:v}})});
require(["ta/prwidgets"],function(e){var t=e.define.bind(e,"common_responsive_pagination","handlers",["handlers"]);t(["widget","ta/page","common/trackingStreams"],function(e,t,n){"use strict";function a(e,a){var i=a.getAttribute("href")||a.getAttribute("data-href");return i?void t.applyPaginationOffset(i,!0):void n.error("No href, data-href or data-page found in pagination element.","responsive_pagination paginate")}function i(e,t,a,i){n.trackEvent("Reviews","click",a,i)}return{paginate:a,trackClick:i}})});
require(["ta/prwidgets"],function(e){var r=e.define.bind(e,"reviews_member_info_resp","handlers",["handlers"]);r(["widget","members/memberOverlay","common/trackingStreams"],function(e,r,n){function i(e,n){return r.initMemberOverlay(e,n,n.id,"Reviews","user_name_photo"),!1}function t(){n.trackEvent("Reviews","click","user_name_name_click")}return{initMemberOverlay:i,usernameClick:t}})});
define("mixins/attraction-traveler-info/PaxMix",["ta/Core/TA.Event"],function(i){"use strict";var n="attractionPaxPicker.missingAges",e=9,t=function(i,n){return n.some(function(n){return i[n]>0})},r=function(i,n){return n.indexOf(i)!==-1},s=function(s){var a=0,u={},h=[],o=!1,c=!1,f=!1,d=!1,g=[],A=[];!function(){if(s){for(var n in s)A.push(n),s[n]&&h.indexOf(n)===-1&&h.push(n),u[n]=0;i.on("requestTourGrades",function(){d=!1})}}(),this.getNumTravelers=function(){return a},this.getAgeBandVal=function(i){return u[i]?u[i]:0},this.hasAdultTravelers=function(){return o},this.isPaxMixValid=function(){return this.hasAdultTravelers()&&!this.hasUnspecifiedChildAges()&&!this.hasUnspecifiedSeniorAges()},this.displayPaxMixErrors=function(e,t,r,s){this.hasAdultTravelers()||e(),this.hasUnspecifiedChildAges()&&this.hasUnspecifiedSeniorAges()?(t(),i.fireEvent(n)):this.hasUnspecifiedChildAges()?(r(),i.fireEvent(n)):this.hasUnspecifiedSeniorAges()&&(s(),i.fireEvent(n))},this.hasUnspecifiedChildAges=function(){return c},this.hasUnspecifiedSeniorAges=function(){return f},this.hasUpdatedPaxSinceLastAvailCheck=function(){return d},this.incrementAgeBand=function(i){this.incrementAgeBandByCount(i,1)},this.incrementAgeBandByCount=function(i,n){void 0!==u[i]&&a<e&&(u[i]=u[i]+n,a+=n,o=o||r(i,h),d=!0)},this.decrementAgeBand=function(i){void 0!==u[i]&&a>0&&u[i]>0&&(u[i]=u[i]-1,a-=1,0===u[i]&&r(i,h)&&(o=t(u,h)),d=!0)},this.clearTravelerData=function(){g=[],a=0,o=!1,c=!1,f=!1,A.forEach(function(i){u[i]=0})},this.addTravelerAge=function(i){g.push(i)},this.addChildWithUnspecifiedAge=function(){c=!0},this.addSeniorWithUnspecifiedAge=function(){f=!0},this.getFormattedPaxMix=function(){var i=[];for(var n in u)i.push(n+":"+u[n]);return i.join()},this.getFormattedPaxAges=function(){return g.join()},this.getTrackingPaxMix=function(){var i=[];for(var n in u)i.push("ab"+n+":["+u[n]+"]");return i.join(",")}};return s});
define("mixins/ReviewPagination",["ta/common/Repoll"],function(e){"use strict";function t(o){function a(e,t){var a=location.pathname!==e;if(a){if(!history.replaceState)return void setTimeout(function(){window.location.href=e},10);if(history.replaceState(history.state,document.title,e),t)if(o.scrollCallback)o.scrollCallback();else{var n=document.querySelector(l);n&&n.scrollIntoView&&n.scrollIntoView()}i.setPageUrl(e),i.setOneTimeParams(r,"REVIEW_LIST")}}o=o||{};var i=o.repoll||new e({evaluateScripts:!0}),l=o.scrollToSelector||"[data-reviewsScrollTarget]",r=o.oneTimeParams||{};t.prototype.applyPaginationOffset=a}return t});
define("mixins/Decoder",["utils/urlDecoder"],function(t){"use strict";function e(){function n(e){return t.decodeUrl(e)}function o(e){return t.getUrl(e)}function r(e,n,o,r){return t.goToLink(e,n,o,r)}e.prototype.decodeString=n,e.prototype.getUrl=o,e.prototype.goToLink=r}return e});
define("servlets/mobileattractionproductdetail",["mixins/mixin","mixins/attraction-traveler-info/PaxMix","mobile/lite/image-loader","mixins/ReviewPagination","mixins/Decoder","common/trackingStreams","common/pixels-loader","lib/jquery-amd"],function(e,i,a,t,n,s,l,o){"use strict";function r(e){if(e){var i=e.addClass("hidden").closest(".product_overview");o(i).find(".collapsed_display").removeClass("collapsed_display");var a=e.parentNode.className.contains("panel")?e.parentNode:void 0;a&&(a.style.maxHeight=a.scrollHeight+"px")}}function c(e){var i="ui_icon single-chevron-up",a="ui_icon single-chevron-down",t=e.getElementsByClassName("ui_icon")[0];t&&t.className===i?t.className=a:t&&t.className===a&&(t.className=i);var n=e.nextElementSibling;if(n.className.contains("preview")){var l=n.getElementsByClassName("read_more")[0];r(l),n.removeClass("preview")}n.style.maxHeight?(n.style.maxHeight=null,n.style.paddingTop="0px",s.trackEvent("AttractionProductDetail","header_section_collapse",n.id)):(n.style.maxHeight=n.scrollHeight+"px",n.style.paddingTop="12px",s.trackEvent("AttractionProductDetail","header_section_open",n.id))}function d(e){var i=e.getElementsByClassName("collapsed_display")[0];if(i)r(i.nextElementSibling);else{var a=e.previousElementSibling;c(a)}}function m(s){if(!p){var o=this;e(o,new i(s.productAgeBands)),l.init(s.remarketingOptions),e(o,new t({oneTimeParams:{crate:"mobile_bauhaus_attraction_attraction_responsive_reviews"},scrollToSelector:v})),e(o,new n),a.init(200),p=!0}return this}var p=!1,v="#REVIEWS";return{init:m,expandDisplay:r,handleAccordionClick:c,handleContentClick:d}});
define("attractions/ApdPlacementSectionUtil",["lib/jquery-amd","utils/urlDecoder","servlets/mobileattractionproductdetail"],function(e,t,a){"use strict";var n=function(n){function i(e){var a,n=e.attr("data-language"),i=t.decodeUrl(e.attr("data-partner")),r=t.decodeProductCode(e.attr("data-product-code")),o=e.attr("data-section-key");return n&&i&&r?(a="?language="+n+"&partner="+i+"&productCode="+r,o&&(a+="&sectionKey="+o),a):null}function r(){var t=o.find(".readMore");t.each(function(){var t=e(this).siblings(".subsection.content");t.length>0&&t[0].clientHeight<t[0].scrollHeight&&(e(t[0]).addClass("hasReadMore"),e(this).removeClass("hidden"))})}var o=e("#"+n.id);this.ajaxLoadPlacementContent=function(e,t){var a=o.find(e),d=i(a);return d?new Promise(function(i){n.require(["trhtml!placement"+d],function(n){var o=n.querySelector(e);o&&(a.html(o.innerHTML),t&&r(),i())})}):Promise.reject()},this.ajaxLoadDustTemplate=function(e,t){var a=o.find(e),r=i(a);return r?new Promise(function(e){n.require(["trhtml!"+t+r],function(t){t&&(a.html(t.innerHTML),e())})}):Promise.reject()},this.displayReadMoreIfNecessary=r,this.handleReadMoreClickDT=function(t,a){a=a||window.event,a.stopPropagation();var n=e(t),i=n.siblings(".subsection.content.collapse");if(i.length>0){var r=i[0];r.style.maxHeight=r.scrollHeight+"px",e(r).removeClass("hasReadMore"),e(r).removeClass("collapse"),n.hide()}},this.handleReadMoreClickMW=function(t){var a=e(t).addClass("hidden").closest(".product_overview");a.find(".collapsed_display").addClass("hidden"),a.find(".expanded_display").removeClass("hidden")},this.handleAccordionClick=function(e){a.handleAccordionClick(e)},this.handleContentClick=function(e){a.handleContentClick(e)},this.ajaxSeeMoreReviewButton=function(){var e=o.find(".seeMoreTAPReviewsButton");if(null!=e){var t=e.attr("data-lastPage"),a=e.attr("data-prod");t&&"isLastPage"===t&&a&&"isProduct"===a&&this.ajaxLoadDustTemplate(".seeMoreTAPReviewsButton","deferred/more_tap_reviews_button")}}};return n});
define("sponsoredlisting/utils",["vanillajs"],function(t){"use strict";var n={};return n.isInViewport=function(t){var n=t.getBoundingClientRect(),i=document.documentElement;return n.top>=0&&n.left>=0&&n.bottom<=(window.innerHeight||i.clientHeight)&&n.right<=(window.innerWidth||i.clientWidth)},n});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"location_reviews_list_resp","handlers",["handlers"]);t(["placement","lib/jquery-amd","overlays/ajaxUtil","ta/Core/TA.FireEvent","ta/prwidgets","ta/registration/RegOverlay","ta/util/ajaxPreserves","common/trackingStreams","utils/urlDecoder","page-model","attractions/ApdPlacementSectionUtil","ta/util/Element","sponsoredlisting/utils","ta/Core/TA.Record"],function(e,t,n,i,a,o,r,d,c,s,l,u,v,p){function f(e){var t=e.currentTarget||this;if(v.isInViewport(t)){var n="owners_favorite_review_displayed",i=s.LOC_ID;p.trackEventOnPage(s.session.pageServlet,n,i),A.removeEventListener("pageScroll",f),A.removeEventListener("ownerFavReviewLoadComplete",f)}}function g(){T=[],O={},I.find(".review-container[data-reviewId]").each(function(e,t){var n="true"===t.getAttribute("data-collapsed"),i="true"===t.getAttribute("data-deferred"),a=Number(t.getAttribute("data-reviewId")),o="true"===t.getAttribute("data-showMt"),r={elem:t,id:a,deferred:i,saved:!1,frozen:!n&&!i,expanded:!n&&!i,showMt:o};T.push(r),O[a]=r}),I.off("review:expand",S),I.on("review:expand",S),I.off("review:collapse",h),I.on("review:collapse",h),I.off("review:toggle",x),I.on("review:toggle",x),L();var t=new l(e);t.ajaxSeeMoreReviewButton()}function w(e){var n=O[e];if(n&&n.source&&!n.frozen){var i=n.source,o=n.elem;i.isLoading?t(o).addClass("listingLoading"):i[e]?(t(o).removeClass("listingLoading"),o.innerHTML=i[e],a.initWidgets(o)):(t(o).removeClass("listingLoading"),o.expandedSource===i&&(o.expandedSource=void 0,o.expanded=!1),o.collapsedSource===i&&(o.collapsedSource=void 0))}}function E(e,t){var n=O[e];n&&!n.frozen&&(!!n.expanded!=!!t||!t&&n.deferred)&&(n.expanded&&!n.expandedSource&&(n.expandedSource={},n.expandedSource[e]=n.elem.innerHTML),n.expanded||n.collapsedSource||n.defered||(n.collapsedSource={},n.collapsedSource[e]=n.elem.innerHTML),n.expanded=t,n.source=t?n.expandedSource:n.collapsedSource,t&&(n.wasExpanded=!0),w(e))}function m(e,n){if(!n.isBusy()&&e.isLoading){var i=document.createElement("div");t(i).html(n.data).children("[data-reviewListingId]").each(function(t,n){e[Number(n.getAttribute("data-reviewListingId"))]=n.innerHTML}),e.isLoading=!1,t.each(T,function(t,n){n.source===e&&w(n.id)})}}function S(e,a,r){var d=[],c=[],s=!1,l={},u=!1;if(t.each(T,function(e,t){s=s||t.id===r,!s||t.expanded||t.frozen||t.id!==r&&t.wasExpanded||(d.push(t.id),t.expandedSource||(t.expandedSource=l,c.push(t.id),0===e&&(u=!0)))}),c.length>0){var v=n.loadOverlayWidget("EXPANDED_HOTEL_REVIEWS_RESP",{loadingContent:"",noCache:!0,reqParams:{reviews:String(c),contextChoice:I.attr("data-contextChoice"),loadMtHeader:u}});l.isLoading=!0,v.on("update",m.bind({},l,v)),m(l,v)}return t.each(d,function(e,t){E(t,!0)}),y&&(y=!1,o.show({type:"dummy"},e.target||a,{flow:"CORE_COMBINED",pid:39415,onSuccess:function(){}})),i.fireEvent("ReviewExpanded"),!1}function h(e,t,n){E(n,!1)}function x(e,t,n){var i=O[n];i&&i.expanded?h(e,t,n):S(e,t,n)}function C(){return"true"===I.attr("data-loadDeferredExpanded")?"EXPANDED_HOTEL_REVIEWS_RESP":"true"===I.attr("data-socialReviewMemberInfo")?"COLLAPSED_SOCIAL_REVIEWS_RESP":"COLLAPSED_HOTEL_REVIEWS_RESP"}function L(){var e=[],i=[],a={},o=I.attr("data-contextChoice"),r="true"===I.attr("data-forceReviewExpansion")?"true":"false",d=!1;if(t.each(T,function(t,n){n.deferred&&!n.frozen&&(n.collapsedSource=a,e.push(n.id),0===t&&(d=!0)),n.showMt&&i.push(n.id)}),e.length>0){var c=n.loadOverlayWidget(C(),{loadingContent:"",reqParams:{reviews:String(e),idxMtReviews:String(i),forceReviewExpansion:r,contextChoice:o,loadMtHeader:d}},s.session.pageServlet);a.isLoading=!0,c.on("update",m.bind({},a,c)),m(a,c)}t.each(e,function(e,t){E(t,!1)})}function _(e,t,n,i){n=c.decodeProductCode(n),d.trackEvent("tac_product_detail_reviews_click_offsite",n,"1"),c.goToCommerceLinkWithProductCode(i)}function R(n){r.setContentElement(M,n,!0),M=n,I=t("#"+e.id+" .listContainer"),a.initWidgets(M),W&&P(),g()}function P(e,t){W=!0,I.removeClass("hide-more-mobile")}var b=document.querySelectorAll(".ownerFavLabel");if(b){var A=b[0];A&&(window.addEventListener("scroll",function(e){var t;"function"==typeof window.CustomEvent?t=new CustomEvent("pageScroll"):(t=document.createEvent("CustomEvent"),t.initCustomEvent("pageScroll",!0,!0,null)),A.dispatchEvent(t)}),window.setTimeout(function(){A.addEventListener("pageScroll",f),A.addEventListener("ownerFavReviewLoadComplete",f)},0))}var I=t("#"+e.id+" .listContainer"),M=I[0],T=[],O={},y=!!I.children(".info[data-expansionSoftGate=true]")[0],W=!1;return g(),i.on("update-"+e.name,R),u.trackWhenScrolledIntoView("#"+e.id,["reviews","in_view"]),{trackExtraReviews:_,viewMore:P,goToCommerceLink:c.goToCommerceLinkWithProductCode}})});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"location_reviews_newer_reviews","handlers",["handlers"]);n(["placement","ta/util/Cookie"],function(e,n){function i(){n.setPIDCookie(3978)}return{setPid:i}})});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"recently_viewed_helper_detail","handlers",["handlers"]);n(["hotels/recentlyViewedHotels"],function(e){e.visitedLocation(require("page-model").LOC_ID)})});
require(["ta/prwidgets"],function(e){var i=e.define.bind(e,"common_location_preview","handlers",["handlers"]);i(["widget","vanillajs","ta/util/openNewTab","ta/Core/TA.Record"],function(e,i,n,t){"use strict";function o(e,i,o){t.setEvtCookie("About","click",e,0,i),o&&n(i)}return{handleClick:o}})});
define("utils/animateH",[],function(){function e(t){t.target.style[n]="",t.target.style.height="",t.target.removeEventListener("transitionend",e)}function t(t,i,r){if(!t||!n||t.clientWidth<=0)return void r(t);var o=!1,s=t.clientHeight;""===t.style.height&&""===t.style[n]&&(t.removeEventListener("transitionend",e),t.addEventListener("transitionend",e),t.style.height=s+"px",t.style[n]="height "+i+"ms",o=!0),r(t);var l=t.scrollHeight;if(l<=s){var f=t.lastElementChild;f&&f.offsetParent&&null!=f.offsetTop&&null!=f.offsetHeight&&(l=f.offsetTop+f.offsetHeight,f.offsetParent!==t&&(l-=t.offsetTop))}var a=l+"px";t.style.height!=a?t.style.height=a:o&&(t.style[n]="",t.style.height="",t.removeEventListener("transitionend",e))}var n=function(){if(!document.documentElement.addEventListener||!document.documentElement.removeEventListener)return null;var e=function(e){return"string"==typeof document.documentElement.style[e]?e:null};return e("transition")||e("MozTransition")||e("WebkitTransition")}();return t});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"resp_hr_about_redesign","handlers",["handlers"]);t(["placement","ta/prwidgets","utils/animateH","common/trackingStreams","ta/Core/TA.FireEvent","ta/util/Element"],function(e,t,n,a,i,o){"use strict";function r(i,o){if(!u.className.match(p))return a.trackEvent("About","click","hr_about_show_more"),n(u,f,function(){u.className=u.className+" expanded"}),m&&(m=!1,e.require(["trhtml!placement"],function(e){var a=e.querySelector(".aboutContainer");n(u,f,function(){u&&a&&(u.innerHTML=a.innerHTML,t.initWidgets(d))})})),!1}function c(e,t){a.trackEvent("About","click","coe_award_btf")}function s(e,t){return u.className.match(p)&&(window.scrollTo(0,d.getBoundingClientRect().top+window.pageYOffset-40),n(u,f,function(){u.className=u.className.replace(p,"")})),!1}function l(e,t){var n,a=u.className.match(p),i=d.querySelector(".morefade"),o=i.offsetHeight;t?(u.classList.add("introExpanded"),u.classList.remove("introCollapsed"),n=o+e):(u.classList.add("introCollapsed"),u.classList.remove("introExpanded"),n=o-e),a||(i.style.maxHeight=n+"px")}var d=document.getElementById(e.id),u=d.querySelector(".aboutContainer"),m=u&&"true"==u.getAttribute("data-ajaxMore"),f=300,p=/ *\bexpanded\b/;return i.on("TabHeader_clickTab",function(e,t){"TABS_ABOUT"===e.id&&window.setTimeout(r,t)}),i.on("locationIntroExpanded",l),document.addEventListener("clickDescriptionMoreLink",r),o.trackWhenScrolledIntoView("#"+e.id,["about","in_view"]),{showMore:r,showLess:s,coeClick:c}})});
define("utils/ScrollInContainer",["lib/jquery-amd","ta/Core/TA.Event","utils/throttle"],function(t,e,o){function i(i){function n(){var e=t(i.bottomAnchor);e.length||(y=!0)}function f(e,o){if(!y&&"undefined"!=typeof d){e=e||window.event;var n,f=i.topMargin+(t(i.topDodgeFixed).outerHeight()||0);n=i.topAnchor?t(i.topAnchor).offset().top+t(i.topAnchor).height():l.offset().top;var r,g=t(window).scrollTop()+f,u=0,v=0;if(g>n){var b=t(i.bottomAnchor);if(b.length){if(u=b.offset().top,u-n<=h.height())return void h.css({position:"static",width:l.width()})}else u=n+l.height();u-=s(),g+h.height()>=u?(r="absolute",v=i.bottomMargin,v+=c?n+l.height()-u:a.height()+a.offset().top-(b.length?b.offset().top:0)):r="fixed"}else r="static";if(r!==m||o||!e||"resize"===e.type){if(e&&"resize"===e.type&&"right"===i.stickySide){var A=a.width();w+=A-p,p=A}if(m=r,"fixed"===r)h.css({bottom:"auto",top:f,left:l.offset().left+d});else if("absolute"===r){var S=h.offset().left,x=l.offset().left;w=c?S-x:S-a.offset().left,h.css({bottom:v,top:"auto",left:w})}if(h.css({position:m,width:l.width()}),"center"===i.stickySide){var z=l.innerWidth()/2-h.width()/2;"fixed"===r&&(z+=l.offset().left),h.css("left",z)}}}}function s(){var e=t(S),o=i.bottomMargin;return"Restaurant_Review"===window.pageServlet&&e.length>0&&(o+=750),o}function r(e){var i=Date.now();f(e);var n=Date.now()-i;n>u&&(b++,b>=v&&(t(window).off("scroll resize",r),t(window).on("scroll resize",o(f,300))))}var l,h,a,c,d,w,g,p,u=50,v=5,b=0,m="static",y=!1,A=!0,S=".belowScrolingAd";i=t.extend({bottomMargin:0,topMargin:0,stickySide:"left"},i),this.init=function(s,u){var v=t(i.bottomAnchor);if(v.length){t(window).on("scroll",o(n,500)),l=t(s),h&&h.is(u)||(h=t(u),a=h.offsetParent()),m="",p=a.width();var b=h.width();if(A){A=!1;var y=h.offset().left,S=l.offset().left;d=y-S,c=a.is(l),w=c?y-S:y-a.offset().left,t(window).on("scroll resize",r),e.on("page-changes-pending",this.test.bind(this))}else{var x=g-b;x&&(d+=x,"right"===i.stickySide&&(w+=x))}g=b,f()}},this.test=function(){f(null,!0)}}return i});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"resp_hr_ad_wrapper","handlers",["handlers"]);t(["placement","ta/Core/TA.FireEvent","utils/ScrollInContainer"],function(e,t,n){function o(e){var t=document.getElementById(e.domId);t&&a.contains(t)&&c&&c.contains(t)&&i.offsetTop>d.offsetTop+d.offsetHeight&&s.init(c,d)}function r(){t.on("onAdRender",o),e.params.contentUpdatedEvent&&t.on(e.params.contentUpdatedEvent,s.test.bind(s))}var a=document.getElementById(e.id),c=a.querySelector(".ad_column_sticky"),d=c&&c.querySelector(".stickyAds"),i=a.querySelector(".bottom_anchor"),s=new n({topMargin:24,bottomMargin:18,stickySide:"center",topDodgeFixed:".persistent_tabs_header",topAnchor:a.querySelector(".top_anchor"),bottomAnchor:i}),p=a.querySelector(".hide-ad");if(p){var l=p.querySelector(".gptAd");l&&l.classList.add("inactive")}r()})});
require(["ta/prwidgets"],function(n){var i=n.define.bind(n,"common_location_photos","handlers",["handlers"]);i(["widget","lib/jquery-amd","common/trackingStreams"],function(n,i,o){"use strict";function e(){var n=window.modelLocId,i="atf_secondary";o.trackEvent("photoviewer","click",i,n)}i(".imageThumbnail").on("click",e)})});
define("ta/photos/oysterTracking",["vanillajs"],function(t){function n(t){return a.contains(t)}var a=["LB_OPEN","FEATURED_REEL","EOAR_SINGLE","EOAR_HERO","PHOTO_CONTENT_BLOCK","FEATURED_REEL_LR","HERO","ALBUM"];return{trackCandidateSession:function(t,a,E){n(E)&&ta.trackEventOnPage("Oyster","CANDIDATE_SESSION",E)},trackImpression:function(t,a,E){n(E)&&ta.trackEventOnPage("Oyster","IMPRESSION",E)},trackInterest:function(t,a,E){n(E)&&ta.trackEventOnPage("Oyster","INTEREST",E)},trackAction:function(t,a,E){n(E)&&ta.trackEventOnPage("Oyster","ACTION",E)}}});
define("ta/media/viewerScaffold",["api-mod","vanillajs","utils/HistoryManager","utils/objutils","utils/urlutils","ta/photos/oysterTracking","overlays/Overlay","overlays/styles/modal","overlays/position","overlays/styles/windowshade","overlays/options/closeOnEmit","commerce/offerclickEvents","overlays/options/ajax"],function(e,t,a,i,o,n,r,l,s,d,c,u,m){function w(){var e=[];this.register=function(t,a,i,o){i||(o=!0,i=ta);var n=o?"on":"addEvent",r=o?"off":"removeEvent";i[n](t,a),e.push(function(){i[r](t,a)})},this.addCleanup=function(t){e.push(t)},this.cleanup=function(){e.forEach(function(e){e()}),e=[]}}function h(){x&&x.onResize&&x.onResize()}function v(){M.register("resize",h,window),h(),x&&x.onLoad&&x.onLoad();var e=ta.retrieve("oyster_location_data");e&&e.hasOyster&&e.hasOyster[O]&&n.trackCandidateSession(null,null,null,"LB_OPEN"),M.register("mediaViewerEscapePressed",function(){try{L.fireEvent("onClose",L)}catch(e){}L.hide()})}function f(){document.body.addClass("remove-scrolling"),ta.retrieve("checkrates.meta_ui_post_click_prices")&&ta.retrieve("meta.baseLocationId")&&ta.meta.update&&ta.commerce.meta.updateProvAreaFromLightBox(ta.retrieve("meta.baseLocationId")),x&&x.onShow&&x.onShow(),I&&(ta.retrieve("tabletRacOnPhotoViewer")&&(ta.remove("RASCalendar"),ta.restaurantAvailabilitySearch&&(_=ta.restaurantAvailabilitySearch.getContainerSelector())),ta.find(".albumLightbox .ui_close_x").addClass("svgico")),ta.fireEvent("refreshedDOMContent",L.container)}function g(){L.container.removeClass("loaded"),ta.fireEvent("mediaViewerLightboxHide"),document.body.removeClass("remove-scrolling"),x&&x.onClose&&x.onClose(),ta.remove("meta.requestFromArea");var e=ta.retrieve("metaCheckRatesOverlay");e&&(e.hide(),ta.remove("metaCheckRatesOverlay")),ta.meta.linkTracking&&ta.meta.linkTracking.restoreCRPageServlet(),ta.retrieve("photo.viewer.refreshOnClose")&&(window.location=window.location),ta.has("translationOverlay")&&ta.retrieve("translationOverlay").hide(),ta.widgets.calendar.closeCalendarWidgets(),M.cleanup(),I&&ta.retrieve("tabletRacOnPhotoViewer")&&(ta.remove("RASCalendar"),ta.restaurantAvailabilitySearch&&ta.restaurantAvailabilitySearch.setContainerSelector(_)),x&&x.onHide&&x.onHide(),ta.fireEvent("photoLightBoxHidden")}function b(e){ta.store("media.albums.loadOnEvent",!0),M.register("show",f,L,!0),M.register("hide",g,L,!0),v(),f(),ta.has("albumViewer.historyEnabled")&&A(e),setTimeout(function(){ta.fireEvent("mediaViewerDOMLoaded"),ta.prwidgets&&ta.prwidgets.initWidgets(L.container)},1)}function p(e){var t=e;t.heroMinWidth=window.innerWidth-2*T,t.heroMinHeight=window.innerHeight-2*T,t.albumid=e.albumId,e.albumViewMode||((e.ff||e.imageId)&&(t.ff=e.ff||e.imageId,t.albumid=101,t.albumViewMode="hero",t.albumPartialsToUpdate="full",t.thumbnailMinWidth=50,t.cnt=30,t.offset=-5,t.baseMediaId=t.ff,t.extraAlbumCoverCount=2),e.albumId&&(t.albumViewMode="images",t.albumPartialsToUpdate="full",t.extraAlbumCoverCount=4));var a="QC_Meta_Mini|Photo_Lightbox";t.area=a,window.pageServlet&&i.extend(t,{metaReferer:window.pageServlet});var n="/LocationPhotoAlbum?"+o.toQueryString(t),r=n;if(ta&&ta.commerce&&ta.commerce.meta&&ta.commerce.meta.tracking)try{ta.commerce.meta.tracking.resetTimingLockForNavArea(a),n=ta.commerce.meta.tracking.updateUrlWithTiming(n,a)}catch(e){ta.util.error.record(e,"problem updating url with timing in viewerScaffold"),n=r}return n}function y(e,t){var a=window.location.hash;if(a.indexOf(R)>=0){var i=C();i?(!i.detail&&window.modelLocId&&(i.detail=window.modelLocId),!i.geo&&window.modelGeoId&&(i.geo=window.modelGeoId),S(i,!0)):S({detail:e,geo:t},!0)}}function C(){var e=window.location.hash,t=e.indexOf(H)>=0&&e.substring(e.indexOf(H)+H.length,e.length);return t&&t.length>0?t.parseQueryString(!1,!1):null}function A(t){var i=new a;if(i.isSupported()){if(t){var o=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search;window.history.replaceState(null,null,o)}M.register("albumViewerPushState",i.pushState),M.register("albumViewerReplaceState",i.replaceState);var n=!1;M.register("mediaViewerLightboxHide",function(){window.location.hash.indexOf(R)>=0&&(n=!0,i.disableCallbacks(!0),history.back())}),e.addEvent(window,"popstate",function(){window.location.hash.indexOf(R)>=0?n?history.back():L.show():(n=!1,i.disableCallbacks(!1),L.hide())})}}function S(e,t){if(!e.geo||!e.detail)return ta.util.error.record(null,"viewerScaffold.js:load missing required arguments"),!1;x=e.evtDelegates,e.evtDelegates=null,O=e.detail,E=e.geo;var a="dark mediaAlbumsBackdrop",i="albumLightbox",o=s.framed([0,0]),n=[ta.isTabletAlbumViewer&&ta.isTabletAlbumViewer()&&window.getCssAlbumPhotoLBIconAsset&&window.getCssAlbumPhotoLBIconAsset(),window.cssAlbumViewerAssetHotels,window.cssPhotoLightboxAsset,window.cssAlbumViewerExtendedAsset,window.hrExtraCssLightboxAsset,window.jsAlbumViewerExtendedAsset,window.g_jqueryFiles];if(L)L.updateContent(p(e));else{var w=0,h=setInterval(function(){ta.trackEventOnPage("Photo_LB","slow_load",30*++w,navigator.userAgent)},3e4);L=new r(document.body,l(null,"",i),o,d(a),c(u,"beforeClick",function(e){return e.isBooking}),m(p(e),{resources:n,noCache:!0})),L.on("contentLoaded",function(){clearInterval(h),b(t)}).on("hide",clearInterval.bind(null,h)),L.on("data-targetEvent",ta.fireEvent.bind(ta))}P||(V=Date.now(),P=!0),L.show()}function k(){return V?Date.now()-V:null}var L,x,O,E,V,P=!1;if(ta.isTabletAlbumViewer)var I=ta.isTabletAlbumViewer();var _,T=I?0:20,M=new w,R="#photos",H=R+";";return{getTimeSincePhotoviewerFirstOpened:k,load:S,handleFragment:y,parseFragment:C}});
require(["ta/prwidgets"],function(t){var e=t.define.bind(t,"common_location_photo_carousel_responsive","handlers",["handlers"]);e(["widget","lib/jquery-amd","common/trackingStreams","mobile/lite/image-loader","ta/media/viewerScaffold","photoviewer/loader","ta/util/I18N"],function(t,e,a,r,n,o,i){"use strict";function s(t){var a=parseInt(t.attr("data-pageindex"),10);if(a>=0&&!$[a]){var r={},n=Array.prototype.reverse.call(e(".photo",t));return n=n.filter(function(){var t=parseInt(e("[data-mediaid]",this).attr("data-mediaid"),10);return!(t>0)||t in r||t in Z&&Z[t]!=a?(e(this).remove(),!1):(Z[t]=a,r[t]=a,!0)}),$[a]={page:t,photos:n},a}return-1}function d(t){var e=s(t);if(e>=0){var a=u(D);a?e<D?a.after(t):a.before(t):E.prepend(t)}}function l(t){return $[t]&&$[t].photos.length||0}function u(t){return $[t]&&$[t].page}function c(t,e){return $[t]&&$[t].photos[e]}function f(t){return t<0?R>0?R-1:-1:R>0&&t>=R?0:t}function h(a,r){function n(){if(l(a)>0){if(J=0,H!=a){var t=u(H);t&&t.remove(),delete $[H]}H=D;var e=r>0?0:l(a)-1;setTimeout(function(){v(a,e)},0)}else++J>=2&&(R=a),h(a+r,r)}a=f(a),a<0||($[a]?n():(U=!0,t.require(["trhtml!LOCATION_PHOTO_CAROUSEL/RESPONSIVE?locationId="+Q+"&width="+X+"&height="+z+"&pagesize="+V+"&pageindex="+a+"&paging="+B],function(t){var o=e("[data-lastpage='true']",t).length;if(o)R=a,h(a,r);else{var i=e(".page_images",t);d(i.clone()),n()}U=!1})))}function p(t){if(!U){var e=j+t;e<0?h(D-1,t):e>=l(D)?h(D+1,t):v(D,e),w()}}function v(t,a){var n=c(D,j),o=c(t,a);e(n).removeClass("current"),e(o).removeClass("hidden"),o&&e(o).addClass("current")&&r.demandLoadImages(o);var i=j,s=D;j=a,D=t,g(),_(i,s)}function g(){y.toggleClass("hidden",R<=0&&D<=0&&j<=0),M.toggleClass("hidden",!1)}function m(a){var r,n=e(".dot-wrapper .dot",e(t.element));n.removeClass("active").removeClass("middle-transition"),a===F-1?r=n[n.length-2]:a===F-2?r=n[n.length-3]:a>2?(n.addClass("middle-transition"),r=n[3]):r=n[a+1],e(r).addClass("active")}function _(a,r){function n(t,e){return e+t*V}var o=e(".dot-wrapper",e(t.element));if(o.length){var s=n(D,j),d=n(r,a),l=s-d;l>0?o.find(".dot:first").appendTo(o):o.find(".dot:last").prependTo(o),m(s);var u=0,c=i.isRtl()?"right":"left";o.find(".dot").each(function(t){e(this).css(c,20*t+"px"),u=20*t}),u+=6,u<126&&o.css("width",u+"px"),o.removeClass("hidden")}}function I(t,e){var r=Y?Y:Q,i={detail:r,geo:W,albumId:101,filter:7};e>0?(i.ff=e,i.baseMediaId=e,i.albumViewMode="hero"):i.albumViewMode="grid","RESPONSIVE"===A?(i.updateType="full",o.load(i)):n.load(i),a.trackEvent("photoviewer","click",t,i.detail)}function w(){var t=c(D,j),r=t?parseInt(e("[data-mediaid]",t).attr("data-mediaid"),10)||0:0,n={event_name:"carousel_scroll",location_id:Q,media_id:r};a.trackEvent(G,K,JSON.stringify(n),Q)}function C(t){var a=e(t.target);if(a.hasClass("left-nav"))return p(-1);if(a.hasClass("right-nav"))return p(1);if(a.hasClass("more-photos"))return!0;if(N){if((a.hasClass("see_all_count")||a.parents(".see_all_count").length>0)&&"ALL"==N)return I(P+"_all_photos");var r=c(D,j),n=r?e("[data-mediaid]",r).attr("data-mediaid"):0;return I(P+"_hero",n)}return p(1)}function x(t){t&&t.touches&&1===t.touches.length&&(e(O).off("touchmove",L).on("touchmove",L),e(O).off("touchend",S).on("touchend",S),tt.swipeThreshold=e(t.target).width()*k,tt.xStart=t.touches[0].pageX-t.target.offsetLeft,tt.xLast=null)}function L(t){if(t&&t.touches&&1===t.touches.length){tt.xLast=t.touches[0].pageX-t.target.offsetLeft;var e=tt.xStart-tt.xLast;Math.abs(e)>tt.swipeThreshold&&S(t)}}function S(t){if(null!=tt.xLast&&null!=tt.xStart){e(O).off("touchmove",L),e(O).off("touchend",S);var a=tt.xStart-tt.xLast;(null==tt.xLast||Math.abs(a)>tt.swipeThreshold)&&(t.preventDefault(),p(a/Math.abs(a)))}}function b(){a.trackEvent("photoviewer","click","add_photo_click",Q)}var k=.1,O=t.element,T=e(".carousel",O),E=e(".carousel_images",O),y=e(".left-nav",O),M=e(".right-nav",O),N=T.attr("data-pop-photo-viewer"),A=T.attr("data-photo-viewer"),P=T.attr("data-page-position"),R=parseInt(T.attr("data-numpages"),10)||0,V=parseInt(T.attr("data-pagesize"),10)||0,q=parseInt(T.attr("data-initialOffset"),10)||0,z=parseInt(T.attr("data-height"),10),X=parseInt(T.attr("data-width"),10),j=0,D=0,H=-1,J=0,U=!1,B=R<0,F=parseInt(T.attr("data-totalcount"),10),G="photoviewer",K=P+"_hero_arrow_click",Q=parseInt(T.attr("data-locationid"),10)||-1,W=parseInt(T.attr("data-geoid"),10)||-1,Y=parseInt(T.attr("data-parentImageLocationId")),Z={},$={};e(".page_images",O).each(function(){s(e(this))});var tt={xStart:null,xLast:null,stepInterval:null};return e(".entry_cta_wrap",O).hover(function(){T.addClass("hovered")},function(){T.removeClass("hovered")}),e(O).on("click",C),e(O).on("touchstart",x),q>0&&q<V?v(D,q):v(D,j),{addPhotoClick:b}})});
require(["ta/prwidgets"],function(o){var t=o.define.bind(o,"bl_location_storyboard_cta","handlers",["handlers"]);t(["widget","lib/jquery-amd","ta/Core/TA.Record"],function(o,t,a){"use strict";function e(a){ta.localStorage&&ta.localStorage.enabled&&ta.localStorage.set("storyboard.out_"+window.modelLocId,!0),t(".storyboard_cta",o.element).addClass("hidden")}return ta.localStorage&&ta.localStorage.enabled&&(ta.localStorage.get("storyboard.out_"+window.modelLocId)||(t(".storyboard_cta",o.element).removeClass("hidden"),a.trackEventOnPage("restaurant_solutions_cta","Storyboard_CTA_display",window.modelLocId))),t(".times",o.element).on("click",e),{}})});
require(["ta/prwidgets"],function(e){var t=e.define.bind(e,"bl_automated_storyboard_cta","handlers",["handlers"]);t(["widget","lib/jquery-amd","ta/Core/TA.Record","page-model","common/Radio"],function(e,t,a,r,o){"use strict";function n(e){a.trackEventOnPage("Restaurant_Review","autostoryboard_upsell_click",r.LOC_ID)}function d(a){t(".storyboard_cta",e.element).addClass("hidden");var r=e.element.parentElement;t(".with_storyboard.large_photo_wrapper",r).addClass("hidden"),t(".mobile_flex_container",r).removeClass("with_storyboard"),o("location-detail-storyboard").trigger("opt-out-clicked")}return t(".storyboard_cta",e.element).removeClass("hidden"),a.trackEventOnPage("Restaurant_Review","autostoryboard_upsell_impression",r.LOC_ID),t(".button",e.element).click(n),t(".times",e.element).on("click",d),{}})});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"resp_hr_nearby","handlers",["handlers"]);t(["babel/babel-helpers","placement","ta/prwidgets","mobile/lite/image-loader","ta/Core/TA.FireEvent","utils/VisibilityChecker","utils/throttle","utils/responsive","common/Radio","common/trackingStreams"],function(e,t,n,r,i,a,l,o,c,d){function s(){t.servletName.includes("Restaurant_Review")&&(d.trackEvent("Restaurant_Review","map_click_staticimage_nearby",t.location_id),p.trigger("open-trigger-clicked")),d.trackEvent("nearby","click","open_float_map"),u.trigger("open-trigger-clicked")}function m(){require(["babel/babel-helpers","trjs!ta/p13n/placements-ajax"],function(e,i){return i.enableAutoRefresh(t,{allowUndated:t.params.allow_undated,customUpdater:function(e){var i=document.getElementById(t.id),a=document.createElement("div");a.innerHTML=e;var l=a.querySelector(".grids"),o=i.querySelector(".grids");l instanceof Element&&o instanceof Element&&(o.parentNode.replaceChild(l,o),n.initWidgets(l),r.init(20,l))}})})}var u=c("hr-map"),p=c("restaurant-detail-map"),g=a({elements:["#"+t.id],callback:function(){window.removeEventListener("scroll",_),d.trackEvent("nearby_hr","in_view"),m()}}),v=t.params.loadOnScrollThreshold||0,b=function(){var e=document.getElementById(t.id);window.innerHeight+v>=e.getBoundingClientRect().top&&(window.removeEventListener("scroll",_),d.trackEvent("nearby_hr","within_scroll_threshold"),m())},h=v>0?b:g,_=l(function(){return o.tablet()&&h()},20);return window.addEventListener("scroll",_),_(),r.init(20,document.getElementById(t.id)),{mapClick:s}})});
require(["ta/prwidgets"],function(e){var t=e.define.bind(e,"meta_responsive_hr_meta_persistent_footer_hotel_auction","handlers",["handlers"]);t(["widget","commerce/offerclick","common/trackingStreams"],function(e,t,r){function n(n,o,c){var a=o.getAttribute("data-clickToken");a?t.clickEvent(n,o,a):r.error(null,e.name+" missing click token."),c&&i(n,c)}function i(e,t){e&&e.stopPropagation&&e.stopPropagation(),r.trackEvent("resp_hr_persistent_footer","meta_click",t)}return{clickOffer:n}})});
require(["ta/prwidgets"],function(e){var t=e.define.bind(e,"meta_responsive_hr_direct_booker_mw","handlers",["handlers"]);t(["babel/babel-helpers","widget","ta/Core/TA.FireEvent","ta/Core/TA.LocalStorage","ta/util/Element","common/trackingStreams"],function(e,t,n,o,a,r){var i=864e5,s=6e3,l=1e3,_="showDirectBooker",c=function(){o.enabled&&!o.get(_)&&(o.set(_,"true",i),a.autoResizeTextInNode(t.element),setTimeout(function(){t.flags.TRACK_DIRECT_BOOKER&&r.trackEvent("DIRECT_BOOKER","db_tooltip_shown_dbi_only"),t.flags.TRACK_ALL_USERS&&r.trackEvent("DIRECT_BOOKER","db_tooltip_shown_all");var e=t.element.querySelector("#db_message");e&&e.innerHTML&&(t.element.classList.add("show_message"),setTimeout(function(){t.element.classList.remove("show_message")},s))},l))},m=function e(){c(),n.off("hrTabBarFixBegin",e)};n.on("hrTabBarFixBegin",m)})});
define("utils/PersistentFooterHelper",["babel/babel-helpers"],function(e){var t="fixed",i=function(){function i(t,s){if(e.classCallCheck(this,i),this.placeholder=null,this.setFooter(t),!s)throw"pageContainer is not a DOM element";this.pageContainer=s}return e.createClass(i,[{key:"isVisible",value:function(){return this.footer&&this.footer.className.indexOf(t)>-1}},{key:"show",value:function(){this.footer.classList.add(t),this.placeholder||this.createPlaceholder(),this.placeholder.classList.remove("hidden"),this.placeholder.style.height=this.getHeight()+"px"}},{key:"hide",value:function(){this.footer.classList.remove(t),this.placeholder&&this.placeholder.classList.add("hidden")}},{key:"getHeight",value:function(){if(!this.isVisible())throw"Cannot get height in hidden state.";return this.footer.offsetHeight}},{key:"createPlaceholder",value:function(){this.footer&&(this.placeholder=document.createElement("div"),this.placeholder.className+=" persistentFooterPlaceholder",this.pageContainer.appendChild(this.placeholder))}},{key:"setFooter",value:function(e){if(!e||e.className.indexOf("ui_persistent_footer")===-1)throw"PersistentFooterHelper requires an element with class .ui_persistent_footer";this.footer=e}}]),i}();return i});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"resp_hr_persistent_footer","handlers",["handlers"]);t(["placement","ta/prwidgets","ta/Core/TA.FireEvent","utils/throttle","utils/PersistentFooterHelper","common/Radio"],function(e,t,o,r,n,i){function s(){u=document.getElementById(e.id),l=u.querySelector(".ui_persistent_footer"),c?c.setFooter(l):c=new n(l,document.body),d()}function d(){var e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,t=e>u.offsetTop;t?(c.show(),a.trigger("show"),p.trigger("hide")):(c.hide(),p.trigger("show"))}var u,l,c,p=i("QualtricsSurvey"),a=i("hr-persistent-footer");s(),document.addEventListener("scroll",r(d,100)),p.reply("shouldSuppress",function(){return!!c.isVisible()}),o.on("update-"+e.name,function(e){u.innerHTML=e.outerHTML,s(),t.initWidgets(u)})})});
define("tab_bar/TabBar",["lib/jquery-amd","api-mod","mixins/Events","utils/throttle"],function(t,i,n,e){"use strict";function o(o,r,s){function a(i,n){if(!d){i=t(i);var e=c.getAnchor(i),o=u.getElements();if(e.length&&!e.is(":visible")){var r=o.anchors,s=r.index(e);if(s>=0)for(;s<r.length&&!e.is(":visible");s++)e=r.eq(s);else e=t("[data-tab="+i.attr(g)+"]")}if(c.emit("beforeTabClick",i.get(0),e.get(0)),e.length){var a=n||b;d=!0,setTimeout(function(){d=!1},2*a);var l=function(){d=!1,c.emit("afterTabClick",i.get(0),t("[data-tab="+i.attr(g)+"]").get(0))},f=u.getScrollable(o.scrollWindow),h=u.getTopInScrollable(o.scrollWindow,e)-u.getClickOffset();f.stop?f.stop(!0,!0).animate({scrollTop:h},{duration:a,complete:l}):(window.scrollTo(0,h),l())}}}function l(){var i=t(this);i.is(":visible")&&a(i)}i.mixin(this,new n("init","uninit","test","redraw","beforeTabClick","afterTabClick")),function(){var t=this.emit;this.emit=function(){v=!0,t.apply(this,arguments),w=null,v=!1}}.bind(this)(),r=r||{};var c=this,u={},f={},h={},b=r.scrollSpeed||300,d=!1,g=r.tabAttr||"data-anchor",m=r.anchorAttr||"data-tab",w=null,v=!1;if(s)for(var p=0;p<s.length;p++)s[p]&&s[p].call(this,u);this.init=function(){var i=u.getElements();return this.uninit(),i.scrollWindow.on("scroll",T),t(window).on("resize orientationchange",k),i.anchors.each(function(i,n){n=t(n),f[n.attr(m)]=n}),i.tabs.each(function(i,n){n=t(n),h[n.attr(g)]=n}),i.tabs.on("click",l),setTimeout(this.emit.bind(this,"init"),1),setTimeout(k,1),this},this.uninit=function(){var i=u.getElements();i.scrollWindow.off("scroll",T),t(window).off("resize orientationchange",k),f={},d=!1,i.tabs.off("click",l),this.emit("uninit")},this.redraw=this.emit.bind(this,"redraw"),this.test=this.emit.bind(this,"test");var T=e(this.emit.bind(this,"test"),300);this.isScrolling=function(){return d},this.show=function(t,i){a.apply(null,arguments)},this.getAnchor=function(i){var n=i.substr?i:t(i).attr(g);return f[n]||t()},this.getTab=function(i){var n=i.substr?i:t(i).attr(m);return n in h?h[n].get(0):null};var k=function(){this.redraw(),this.test()}.bind(this);!function(){var i=o,n=r.clickOffset||0;u.getElements=function(){if(v&&w)return w;var n=t(i.tabBar),e={tabBar:n,scrollRegion:t(i.scrollRegion||"body"),scrollWindow:t(i.scrollWindow||window),content:i.content?t(i.content):t(".tb_content",n),tabs:i.tabs?t(i.tabs):t(".tb_tab",n)};if(i.anchors)e.anchors=t(i.anchors);else{var o=e.scrollRegion.attr(m);e.anchors=t(o?i.scrollRegion:null).add(t("["+m+"]",i.scrollRegion))}return v&&(w=e),e},u.getClickOffset=function(){return n},u.getAnchorAttr=function(){return m},u.getScrollable=function(i){return u.isWinOrBody(i)?t("html,body"):i},u.getTopInScrollable=function(i,n){return n=t(n),u.isWinOrBody(i)?n.offset().top:t(i).scrollTop()+n.position().top},u.isWinOrBody=function(t){return t.get(0)==window||t.get(0)==document.body}}()}return o});
define("tab_bar/ScrollPastBottom",["lib/jquery-amd"],function(t){"use strict";function i(){return function(i){var e,n=-1;return this.on("beforeTabClick",function(o,r){if(r){var c=i.getElements();e||(e=t("<div></div>").css("height",0),c.scrollRegion.append(e));var h=c.scrollRegion.height()-e.height(),l=h-i.getTopInScrollable(c.scrollWindow,r),s=c.scrollWindow.height()-l;n=-1,s>e.height()?e.css("height",s+"px"):n=Math.max(s,0)}}).on("afterTabClick",function(){n>=0&&e.css("height",n+"px")}),this}}return i});
define("tab_bar/MoreTab",["lib/jquery-amd"],function(e){"use strict";function t(t){return function(n){function i(n){var i=o||(t.tab?e(t.tab):e(".tb_more",n.tabBar));return{tab:i,content:t.content?e(t.content):e(".tb_more_content",i),dodge:t.dodge?e(t.dodge):e()}}function a(t,n){for(var i=0;i<t.length;i++){var a=e(t[i]);if(a.is(":visible")&&a.offset().top>n)return!0}return!1}function r(){var t=n.getElements(),a=i(t);a.content.is(":visible")&&a.content.css("display",""),e(window).off("click",r)}var o;t=t||{};var d=function(n){var i=e(n.dodge);if(i=i.add(n.tab),t.neverHide)for(var a=0;a<t.neverHide.length;a++){var r=this.getTab(t.neverHide[a]);r&&(i=i.add(r))}return i}.bind(this);this.on("redraw",function(){var r=n.getElements(),c=i(r),s=e(r.tabs).not(".hidden"),l=function(e){var t=s.index(e);t>=0&&s.splice(t,1)};if(o||(c.tab.addClass("hidden"),c.tab.before(c.content.children().detach()),l(c.tab)),t.neverHide)for(var b=0;b<t.neverHide.length;b++)l(this.getTab(t.neverHide[b]));for(var f=!1,g=r.tabs.filter(":visible"),v=e(g.length?g.get(0):r.tabs.get(0)),h=v.offset().top+v.height()/2,u=d(c);s.length&&(a(s.last(),h)||a(u,h));){var p=e(s.splice(-1,1));if(o){var m=v;g.length&&(g.get(g.length-1)==c.tab.get(0)?g.length>=2&&(m=e(g.get(g.length-2))):m=e(g.get(g.length-1))),m.after(c.tab),o=null,c=i(r)}c.content.prepend(p.detach()),c.tab.removeClass("hidden"),f=!0}f||o||(o=c.tab.detach())}).on("beforeTabClick",function(t){t=e(t);var a=n.getElements(),o=i(a);o.tab.get(0)==t.get(0)&&(o.content.is(":visible")?o.content.css("display",""):(o.content.css("display","block"),setTimeout(function(){e(window).on("click",r)},1)))})}}return t});
define("tab_bar/HighlightActiveTab",["lib/jquery-amd","api-mod","mixins/Events"],function(t,e,i){"use strict";function n(e){function n(e){for(var i=t(e.tabs.get(0));i.length&&i.get(0)!=e.tabBar.get(0);i=i.parent()){if("fixed"==i.css("position")||"absolute"==i.css("position"))return i.height();if("body"==i.prop("tagName").toLowerCase())break}return 0}e=e||{};var s=e.activeClassName||"current",o=e.offset||0,r="undefined"==typeof e.defaultToFirstTab||e.defaultToFirstTab;return function(a){i.extend(this,["activeChanged"]);var l=t(),f=t();this.getActiveTab=function(){return l.get(0)},this.on("uninit",function(){l.removeClass(s),l.empty()}).on("test",function(){var i,c=null,g=a.getElements(),u=g.tabBar.closest(g.scrollRegion).length>0,h=t(g.anchors.filter(":visible").get().reverse());if(u){var v,b,d;h.each(function(e,s){var r=!1,l=t(s),f=t(this.getTab(s));if(l.get(0)==document.body?r=!0:f.is(":visible")&&(void 0===v&&(v=a.isWinOrBody(g.scrollRegion),d=n(g)+o),v?(void 0===b&&(b=t(g.scrollWindow).scrollTop()),r=l.offset().top-d<=b):r=l.position().top-d<=0),r)return i=f,c=l,!1}.bind(this))}else h.each(function(e,n){var s=t(n);if(s.position().top<=0)return i=t(this.getTab(s.get(0))),c=s,!1}.bind(this));if(!i&&r){var p=g.tabs.filter(":visible");i=p.length?p.first():g.tabs.first()}if(i&&(i.length&&i.get(0)!=l.get(0)?(l.removeClass(s),i.addClass(s),this.emit("activeChanged",l.get(0),i.get(0)),l=i,f=c):!i.length&&l.length&&(l.removeClass(s),this.emit("activeChanged",l.get(0),null),l=t(),f=t())),e.scrollToTab){var m=l.position().left+t(g.content).scrollLeft();g.content.prop("scrollLeft",m)}})}}return n});
define("tab_bar/StickyBar",["lib/jquery-amd","api-mod","mixins/Events"],function(t,i,s){"use strict";function n(i,n){return function(e){function o(s){return i?t(i):t(".tb_stickyElt",s.tabBar)}function r(t){var i=t.tabBar.offset().top+(n.lastYOffset||0);return t.scrollWindow.scrollTop()>i}s.extend(this,["beforeSticky","afterSticky"]),n.stickyClass||(n.stickyClass="sticky");var a,c=!1,u=function(t){t.addClass(n.stickyClass).css({transition:"none",top:"-"+t.height()+"px"}),this.redraw(),this.test(),setTimeout(function(){t.css({transition:"",top:0})},1)}.bind(this),f=function(t){a=!0,t.css("top","-"+t.height()+"px"),setTimeout(function(){a=!1,t.removeClass(n.stickyClass).css({transition:"none",top:""}),this.redraw(),this.test()}.bind(this),n.transitionDuration)}.bind(this),h=function(){var t=e.getElements(),i=r(t),s=c!=i;s&&(this.emit("beforeSticky",i),c=i,n.transitionDuration?i?u(o(t)):a||f(o(t)):o(t).toggleClass(n.stickyClass,i),setTimeout(function(){this.emit("afterSticky",i)}.bind(this),n.transitionDuration))}.bind(this);this.on("test",h)}}return n});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"resp_hr_tab_bar","handlers",["handlers"]);t(["placement","tab_bar/TabBar","tab_bar/ScrollPastBottom","tab_bar/MoreTab","tab_bar/HighlightActiveTab","tab_bar/StickyBar","common/trackingStreams","ta/Core/TA.FireEvent"],function(e,t,a,r,n,i,c,o){function s(){var a=m.querySelector(".persistent_tabs_container"),r=m.querySelector(".persistent_tabs_header");p=new t({tabBar:a,content:a.querySelector(".tabs_pers_content"),tabs:".tabs_pers_item, .tabs_commerce_button"},{clickOffset:h},_(a,r)),p.init().on("activeChanged",function(e,t){l(t),o.fireEvent("tab_bar_active_change",t)}).on("beforeTabClick",function(e){e.classList.contains("tabs_more")?c.trackEvent("persistentheader","click","more"):c.trackEvent("persistentheader","click",e.getAttribute("data-track").toLowerCase().replace("tabs_",""))}).on("beforeSticky",function(t){t&&c.trackEvent("persistentheader","in_view");var a=(e.params.eventPrefix||"")+(t?"TabBarFixBegin":"TabBarUnFixBegin");o.fireEvent(a)}).on("redraw",function(){var e=m.querySelector(".tabs_pers_content .tabs_pers_item:not(.hidden)");e&&(a.className=a.className.replace(v,""))})}function b(){var e=m.querySelectorAll(".tabs_pers_item:not(.hidden)");Array.prototype.forEach.call(e,function(e){var t=e.getAttribute("data-anchor");document.querySelector('[data-tab="'+t+'"]')||e.classList.add("hidden")})}function d(){o.on("TabHeader_clickTab",function(e,t){p.show(e,t?t:1)}),o.on("tabExpand_End",function(){l(p.getActiveTab())})}function l(t){var a=e.params.dealInactiveTab,r=e.params.dealInactiveClass,n=m.querySelector('[data-tab="'+a+'"]');if(a&&n){var i=t&&a===t.getAttribute("data-anchor");i&&r&&(i=!!n.querySelector("."+r));var c=m.querySelector(".tabBarOffer");c.classList.contains("hidden")!==i&&(c.classList.toggle("hidden"),p.redraw())}}function u(){var e=window.location.hash&&window.location.hash.substring(1);if(e){var t=document.getElementById("TABS_"+e);t&&p.show(t)}}function _(e,t){var c=".tabBarOffer",o=[a(),r({tab:".tabs_more",content:".tabs_more .tabs_more_content",dodge:e.querySelector(c)}),n({offset:150})];return o.push(i(t,{stickyClass:"fixed",lastYOffset:h*-1,transitionDuration:150})),o}function f(){var e=m.querySelector(".persistent_tabs_header");e&&(b(),s(),d(),u())}var h=54,v=/ *\bhidden\b/,m=document.getElementById(e.id),p=null;f()})});
require(["ta/prwidgets"],function(t){var e=t.define.bind(t,"meta_responsive_hr_meta_mini_cta_hotel_auction","handlers",["handlers"]);e(["widget","commerce/offerclick","common/trackingStreams"],function(t,e,n){function i(i,r,o){var a=r.getAttribute("data-clickToken");a?e.clickEvent(i,r,a):n.error(null,t.name+" missing click token."),o&&c(i,o)}function c(t,e){t&&t.stopPropagation&&t.stopPropagation(),n.trackEvent("NAV_RIGHT_CTA","click",e)}return{clickOffer:i}})});
require(["ta/prwidgets"],function(e){var o=e.define.bind(e,"meta_responsive_hr_direct_booker","handlers",["handlers"]);o(["babel/babel-helpers","widget","ta/Core/TA.FireEvent","ta/Core/TA.LocalStorage","common/trackingStreams"],function(e,o,r,t,n){var a="showDirectBooker",s=864e5,i=6e3,l=1e3,b=function(){if(t.enabled&&!t.get(a)){var e=o.element.parentNode;t.set(a,"true",s),o.flags.TRACK_DIRECT_BOOKER&&n.trackEvent("DIRECT_BOOKER","db_tooltip_shown_dbi_only"),o.flags.TRACK_ALL_USERS&&n.trackEvent("DIRECT_BOOKER","db_tooltip_shown_all");var r=o.element.querySelector("#db_message");r&&r.innerHTML&&setTimeout(function(){require(["babel/babel-helpers","trjs!overlays/Overlay","trjs!overlays/position","trjs!overlays/styles/popover","trjs!overlays/options/closeOnSourceClick","overlays/options/closeOnTaEvent","trjs!overlays/options/maxWidth","trjs!overlays/options/fadeInOut"],function(r,t,n,a,s,l,b,c){var v=new t(e,[a(e,"below",o.element.className,null,o.element.outerHTML),n.below(),b(400),c("fade_short"),s,l("hrTabBarUnFixBegin")]);v.show(),setTimeout(function(){v.destroy()},i)})},l)}},c=function e(){b(),r.off("hrTabBarFixBegin",e)};r.on("hrTabBarFixBegin",c)})});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"resp_hr_tab_bar_offer","handlers",["handlers"]);n(["placement","ta/prwidgets","ta/Core/TA.FireEvent","utils/nodePreserve"],function(e,n,t,r){function a(t){var a=document.getElementById(e.id);r.treePreserve(a,t),n.initWidgets(a)}t.on("update-"+e.name,a)})});
;
define("utils/onClickOrFocus",["utils/domEventUtils"],function(n){return function(t,i,o){var c=!0;t&&"function"==typeof i&&(n.addEvent(t,"mousedown",function(){c=!1}),n.addEvent(t,"focus",function(n){c&&i.call(this,n),c=!0}),o||n.addEvent(t,"click",i))}});
define("common/DatePicker",["ta/page","ta-i18n","common/trackingStreams","mixins/Events","common/Radio","mixins/page-dates/DateTypeStore","utils/domUtils","utils/classnameUtils","utils/onClickOrFocus","utils/stopevent"],function(t,e,a,r,n,i,c,o,s,l){var u=function(u,d){function f(t){for(var e=0;e<y.length;e++)if(c.isOrContainsElement(y[e],t))return y[e];return null}function m(e,a,r){return c.isOrContainsElement(document.body,u)?void i.flattenType(a).forEach(function(t,e){p(h[t],r[e])}):void t.off("dateSelected",m)}function p(t,a){var r=t&&t.querySelector(".picker-label");if(r){var n=t.getAttribute("data-dateFormat"),i=a&&n&&e.formatDate(n,a);r.innerHTML=i||t.getAttribute("data-emptyText"),o.toggleClass(r,"ghost_text",!i)}}function g(e){var a=f(e&&e.target)||y[0];l(e),v.emit("DatePicker-clicked",a),n("DatePicker").emit("clicked"),k(e),t.gatherDates(a,null,d)}function k(t){if(t&&t.target){var e="datepicker";o.getParentByClassname(u,"persistent_trip_search_fixed")&&(e+="_persistent");var r="module",n=f(t.target);if(n){var i=n.getAttribute("data-datetype");r=i?i.toLowerCase():"none"}else o.hasClass(t.target,"caret-down")&&(r="caret");a.trackEvent(e,"click",r)}}var v=new r("DatePicker-clicked"),y=c.querySelectorArray(u,"[data-datetype]"),h=y.reduce(function(t,e){return t[e.getAttribute("data-datetype")]=e,t},{});return t.on("dateSelected",m),y.forEach(function(t){s(t,function(t){g(t,this,d)},!0)}),u.addEventListener("click",g),v.popPrimaryPicker=function(){var e=document.querySelector("[data-primary-datepicker]");e&&t.gatherDates(e,null,d)},v.openCalendar=g,v};return u});
require(["ta/prwidgets"],function(e){var a=e.define.bind(e,"datepickers_trip_search_dates_corgi_sft","handlers",["handlers"]);a(["widget","common/Radio","mixins/page-dates/default-dates","common/DatePicker","ta/page"],function(e,a,t,n,r){"use strict";function i(){var e=r&&"function"==typeof r.getHacStatus;return e&&!r.getHacStatus().hasCommerce}function c(){var a=e.element.classList.contains("unavailableV2");return a&&i()}var o=n(e.element,!1);return c()||a("search").on("popDatePicker",function(){o.popPrimaryPicker()}),t.apply(e.element,c()),{openCalendar:o.openCalendar}})});
define("hotels/RoomsGuests",["hotels/ChildAgesSerialization","api-mod","ta/Core/TA.Store","utils/objutils","mixins/Events","vanillajs"],function(e,n,t,i,r,s){"use strict";function l(e){for(var n=new Array(e),t=0;t<e;++t)n[t]=u;return n}var u=-1,o=1,a=2,h=0,c=4,d=10,A={ROOMS_CHANGED:"roomsChanged",ADULTS_CHANGED:"adultsChanged",CHILDREN_CHANGED:"childrenChanged"},g={MIN_ROOMS:1,MAX_ROOMS:8,MIN_ADULTS:1,MAX_ADULTS:8*c,MIN_CHILDREN:0,MAX_CHILDREN:20,MAX_CHILD_AGE:17,MAX_ADULTS_PER_ROOM:4,MAX_CHILDREN_PER_ROOM:10},m=function(s){function m(e,n,t){return isNaN(e)||e%1!==0?null:Math.min(t,Math.max(n,e))}function f(e){return m(e,g.MIN_ROOMS,g.MAX_ROOMS)}function C(e){return m(e,g.MIN_ADULTS,g.MAX_ADULTS)}function _(e){return m(e,g.MIN_CHILDREN,g.MAX_CHILDREN)}function M(e){return m(e,u,g.MAX_CHILD_AGE)}function N(e){return e.map(function(e){return M(e)})}function E(t){R=f(t.nRooms)||o,D=C(t.nAdults)||a;var i;t.childrenAges?(H=N(n.isArray(t.childrenAges)?t.childrenAges:e.deserialize(t.childrenAges)),i=_(H.length),H=H.slice(0,i)):(i=_(t.nChildren)||h,H=l(i))}var R,D,H,S=s||{},b=S.roomChangedCallback||function(){},O=S.adultsChangedCallback||function(){},I=S.childrenChangedCallback||function(){},L=new(r.bind.apply(r,Object.keys(A).map(function(e){return A[e]})));if(S.initialValues)E(S.initialValues);else if(S.initialValuesHolder){var v={nRooms:Number(S.initialValuesHolder.getAttribute("numRooms")),nAdults:Number(S.initialValuesHolder.getAttribute("numAdults")),nChildren:Number(S.initialValuesHolder.getAttribute("numChildren")),childrenAges:S.initialValuesHolder.getAttribute("childrenAges")};E(v)}else E({});this.get=function(){return{nAdults:D,nRooms:R,childrenAges:H}},this.fromStore=function(){var n=t.retrieve("guests.rooms.object");this.update({nRooms:n.rooms,nAdults:n.guests,childrenAges:e.deserialize(n.child_rm_ages)})},this.hasStoreValues=function(){return t.has("guests.rooms.object")},this.updateStore=function(){var n=t.retrieve("guests.rooms.object"),i=H.map(function(e){return parseInt(e,10)}),r={guests:D,rooms:R,child_rm_ages:e.serialize(R,i)};return n&&n.guests===r.guests&&n.rooms===r.rooms&&n.child_rm_ages===r.child_rm_ages?null:(t.store("guests.rooms.object",r),r)},this.clear=function(){return this.update({nRooms:o,nAdults:a,nChildren:h})},this.update=function(e){var t,r,s,g,m,M,E=e.nRooms||R,S=e.nAdults||D;if(n.isArray(e.childrenAges)?(r=N(e.childrenAges),t=r.length):"undefined"!=typeof e.nChildren?(t=e.nChildren,r=H.length<t?l(t).map(function(e,n){return n<H.length?H[n]:u}):H.slice(0,t)):(t=H.length,r=H),R===E&&D===S&&H.length===t)return!i.shallowEquals(H,r)&&(H=r,I(H),L.emit(A.CHILDREN_CHANGED,H),!0);var v=_(t)||h;if(E!==R)m=f(E)||o,s=m>S?m:Math.min(E*c,S),g=Math.min(E*d,v);else{var p=C(S)||a,T=Math.ceil(p/c);T=Math.max(T,E);var G=Math.ceil(v/d);m=Math.max(T,G),m=Math.min(m,p),g=Math.min(v,m*d),s=p}M=r.length>g?r.slice(0,g):r;var j=!1;return m!==R&&(b(m),L.emit(A.ROOMS_CHANGED,m),j=!0),s!==D&&(O(s),L.emit(A.ADULTS_CHANGED,s),j=!0),i.shallowEquals(H,M)||(I(M),L.emit(A.CHILDREN_CHANGED,M),j=!0),R=m,D=s,H=M,j},this.equals=function(e){return R===e.nRooms&&D===e.nAdults&&i.shallowEquals(H,e.childrenAges)},this.updateChildAge=function(e,n){return"string"==typeof n&&(n=parseInt(n,10)),n=M(n),e>=0&&e<H.length&&H[e]!==n&&(H[e]=n,I(H),L.emit(A.CHILDREN_CHANGED,H),!0)},this.cleanMissingChildrenAges=function(){var e=H.filter(function(e){return e>=0});return H=e,I(e),L.emit(A.CHILDREN_CHANGED,e),e},this.hasMissingChildrenAges=function(){for(var e=0;e<H.length;++e)if(H[e]===-1)return!0;return!1},this.on=L.on.bind(L),this.off=L.off.bind(L)};return Object.freeze?(m.EVENTS=Object.freeze(A),m.CONSTANTS=Object.freeze(g)):(m.EVENTS=A,m.CONSTANTS=g),m});
define("ta/util/LegacyDateShim",["vanillajs","api-mod","ns-exporter","ta/util/Error","ta/Core/TA.Event","utils/ajax","ta/Core/TA.Store","ta/util/Date"],function(e,t,a,r,n,s,o,l){function i(){return ta.page&&ta.page.hasDates&&ta.page.hasDates("STAYDATES")}function u(){return ta.page&&ta.page.hasDates&&ta.page.hasDates("ROUNDTRIP")}function d(e){var t=ta.page.datesToQueryJson(e||"STAYDATES");if(o.has("guests_rooms_picker.enabled")){var a=ta.page.guests.toJson();for(var r in a)t[r]=a[r]}else t.adults=f();return t}function c(){var e=ta.page.guests.toJson();return e.guests=e.adults,delete e.adults,e}function g(){return ta.page&&ta.page.getDates&&ta.page.getDates("CHECKIN")[0]||void 0}function p(){return ta.page&&ta.page.getDates&&ta.page.getDates("CHECKOUT")[0]||void 0}function D(){if(!i())return!1;var e=ta.widgets.calendar.getPageInDate(),t=ta.widgets.calendar.getPageOutDate(),a=Math.round(Math.abs((e.getTime()-t.getTime())/l.MS_IN_DAY));return a>=1&&a<=l.MAX_STAY_DURATION_DAYS}function f(){var e=2;return ta.page.guests?e=ta.page.guests.getAdults():o.has("multiDP.adultsCount")&&(e=o.retrieve("multiDP.adultsCount"),o.store("date.picker.adultsCount",e)),e}function v(e){return"classic"===e&&"undefined"!=typeof DATE_PICKER_CLASSIC_FORMAT?DATE_PICKER_CLASSIC_FORMAT:"short"===e&&"undefined"!=typeof DATE_PICKER_SHORT_FORMAT?DATE_PICKER_SHORT_FORMAT:"undefined"!=typeof DATE_PICKER_META_FORMAT?DATE_PICKER_META_FORMAT:("string"!=typeof e&&(e="not_a_string"),"")}function h(){var e="no dates";try{var t=v("classic");i()&&(e=ta.widgets.calendar.dateToString(ta.widgets.calendar.getPageInDate(),t),e=e+" - "+ta.widgets.calendar.dateToString(ta.widgets.calendar.getPageOutDate(),t))}catch(e){}return e}function E(e,t){var a,r,n,s,i,u,d,c,g;return e&&e.getDate&&t?t==v("classic")?(a=new Date(e),o.retrieve("thai_buddhist_era_year")&&a.setFullYear(a.getFullYear()+l.THAI_BUDDHIST_YEAR_OFFSET),r="MM",n="yyyy",s="dd",c=a.getDate()+"",t.indexOf("dd")!=-1?c&&1===c.length&&(c="0"+c):s="d",g=a.getMonth()+1+"",t.indexOf("MM")!=-1?g&&1===g.length&&(g="0"+g):r="M",t=t.replace(r,g).replace(s,c).replace(n,a.getFullYear()).replace(/'/g,"")):t==v("short")?(a=new Date(e),r="MM",s="dd",c=a.getDate()+"",c&&1==c.length&&(c="0"+c),g=a.getMonth()+1+"",g&&1==g.length&&(g="0"+g),t=t.replace(r,g).replace(s,c).replace(/'/g,"")):(i=o.retrieve("multiDP.abbrevMonthList"),u=e.getDay(),o.retrieve("multiDP.isMondayFirstDayOfWeek")&&(u-=1),u==-1&&(u=6),d="EEE",r="MMM","EEEE d MMMM"==t&&(d="EEEE",r="MMMM"),t=t.replace(d,jsGlobalDaysAbbrev[u]).replace(r,i[e.getMonth()]).replace(/\bd\b/,e.getDate()).replace(/'/g,"")):""}function T(){try{var e=g(),t=p(),a=f();if(!e||!t||!a)return null;var n=e.getDate(),s=e.getMonth()+1,o=e.getFullYear(),l=t.getDate(),i=t.getMonth()+1,u=t.getFullYear(),d={"inDay":n,"inMonth":s+" "+o,"outDay":l,"outMonth":i+" "+u,"adults":a};return d}catch(e){return r.record(e,"Unable to create calendar date args object"),null}}function y(){ta.page&&ta.page.processNewTravelInfo&&ta.page.processNewTravelInfo()}function C(e,t,a){return t&&!i()?void(e&&"function"==typeof e&&e()):(s({url:"/UpdateSessionDatesAjax",data:d(),method:"post",async:a!==!0,success:function(){"function"==typeof e&&e(),n.fireEvent("hotels.sessionDatesUpdated")}}),!0)}function M(e){ta.page.gatherDatesNear(e),!window.event||window.event.target!==e&&window.event.currentTarget!==e||t.stopEvent(window.event)}function _(e){if(e){e=JSON.decode(e);var t=e.url;o.retrieve("is_from_sdprospect")&&t.contains("Hotels")&&(t=t.replace("Hotels","SmartDeals")),window.location=t}else window.location="/Hotels"}function m(){var e,t,a,r=null;if(ta.page.hasDates("CHECKIN")){e=document.querySelectorAll(".meta_date_field.first .date_picker.date"),a=null;for(var n=0;n<e.length;++n)t=e[n].firstChild,t&&3==t.nodeType&&(r=r||v("classic"),a=a||E(ta.page.getDates("CHECKIN")[0],r),t.nodeValue=a)}if(ta.page.hasDates("CHECKOUT")){e=document.querySelectorAll(".meta_date_field .out_date .date_picker.date"),a=null;for(var n=0;n<e.length;++n)t=e[n].firstChild,t&&3==t.nodeType&&(r=r||v("classic"),a=a||E(ta.page.getDates("CHECKOUT")[0],r),t.nodeValue=a)}}function A(e,t,a){var r="date.picker.calendarflyout",n=o.retrieve(r);n||(n=[]);var s={};s.elmt=e,s.overlay=t,s.overlaySrc=a,n.push(s),o.store(r,n),o.remove("date.picker.calendarflyout.allCleared")}function w(){var e="date.picker.calendarflyout",t=o.retrieve(e);t&&(t.forEach(function(e){var t=e.elmt,a=e.overlay,r=e.overlaySrc;t&&a&&r&&(t.removeEventListener("mouseenter",a.showWithDelay),t.removeEventListener("mouseleave",a.hideWithDelay),t.removeEventListener("mouseenter",a.show),t.removeEventListener("mouseleave",a.hide),t.removeEventListener("click",a._pin),t.appendChild(r))}),o.store("date.picker.calendarflyout.allCleared",!0))}function S(){t.select(".roomsButton .grp-rooms-value").forEach(function(e){e.innerHTML=ta.page.guests.getRooms()}),t.select(".guestsButton .grp-guests-value").forEach(function(e){e.innerHTML=ta.page.guests.getAdults()}),ta.widgets.calendar.syncAllDatePickers()}function R(){}if(ta.widgets&&ta.widgets.calendar&&ta.widgets.calendar.hasPageDates)return ta.widgets.calendar;var P={hasPageDates:i,hasRoundTripDates:u,datesExist:i,datesInRange:D,getCheckRatesData:d,getDateArgsObject:T,getGuestsRoomsPickerData:c,updateGuestsRoomsPickerDataFromCookie:R,updateGuestsRoomsPickerUI:R,getPageInDate:g,getPageOutDate:p,getPageAdultsCount:f,getDatePickerFormat:v,getErrorDates:h,dateToString:E,checkDatesMakeHacCallHR:y,justUpdateSessionDates:C,setErrorStyling:M,redirectToHotelOverview:_,updateLegacyDatePickers:m,trackCalendarEvent:R,closeCalendarWidgets:R,handleNewDates:R,syncAllDatePickers:R,trackCRButtonClick:R,clearCalendarFlyouts:w,trackCalendarFlyout:A,removeMetaCalendarFromSync:R,updateAllGuestsRoomsButtons:S,isShim:!0};return a.exportTo(P,"ta.widgets.calendar"),P});
define("hotels/RoomsGuestsUI",["babel/babel-helpers","lib/jquery-amd","hotels/RoomsGuests","ta/Core/TA.Dust","mixins/Events","ta/Core/TA.Store","mixins/mixin","overlays/Overlay","overlays/styles/dropdown","overlays/options/closeOnDocClick","overlays/options/closeOnLegacyOverlay","overlays/options/closeOnTargetEvent","overlays/options/repositionOnEvent","overlays/options/matchWidth","overlays/options/autoReposition","overlays/position"],function(e,t,o,i,n,r,s,a,l,c,u,_,p,h,d,f){"use strict";var v=Object.freeze({VALUE_CHANGED:"valueChanged",WILL_OPEN:"willOpen",CLOSED:"closed"}),y=function(){function o(i,r,a,l,c,u,_){e.classCallCheck(this,o),this._placeHolder=t(i),this._topClass=r,this._valueDecorator="function"==typeof a?a:function(e){return e},this._valueProvider="function"==typeof l?l:function(){return 0},this._min=c,this._max=u,this._options=t.extend({},_),s(this,new n(v.VALUE_CHANGED,v.WILL_OPEN,v.CLOSED))}return e.createClass(o,[{key:"setValue",value:function(e){var t=Math.min(Math.max(this._min,e),this._max),o=this._valueDecorator(t);this._label&&this._label.text(o)}}]),o}(),k=function(o){function n(o,r,s,a,l,c,u){e.classCallCheck(this,n);var _=e.possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,o,r,s,a,l,c,u));_._element=null,_._overlay=null;var p=function(e){var t=e.attr("data-val");_.setValue(t),d(),_.emit(v.VALUE_CHANGED,t)},h=function(){if(_._overlay&&_._overlay.container){var e=t(_._overlay.container).find(".options-container");e.scrollTop(e.scrollTop()+1),e.scrollTop(e.scrollTop()-1)}},d=function(){var e=!0;_._overlay&&(e=!_._overlay.isOpen()),_._showPicker(e)},f=function(){_._overlay||(_._overlay=_._setupDropdown(),_._overlay.on("hide",_.emit.bind(_,v.CLOSED,_))),d(),h()},y=_;return i.render(_._getTemplate(),_._getData(),_._placeHolder.get(0),function(){t(o).find(".curoption").on("click",function(e){e.stopPropagation(),d(),h()}),t(o).find(".option").on("click",function(e){e.stopPropagation(),p(t(this))}).each(function(){var e=t(this).attr("data-val"),o=parseInt(e,10),i=s(o);t(this).text(i)}),y.setValue(l),y._element=t(o).find(".unified-picker"),y._element.on("click",function(){return y._overlay&&y._overlay.hide()}),y._element.find(".picker-inner").on("click",function(e){e.stopPropagation(),f()})}),_}return e.inherits(n,o),e.createClass(n,[{key:"_setupDropdown",value:function(){var e=this._element.find(".picker-dropdown"),t=this._element.get(0);e.removeClass("hidden");var o=new a(t,l(t,"below",[],e.get(0),null,"div"),!this._options.flexWidth&&h(t),c,u,_(window,["date_bar_docked","date_bar_undocked"]));return o&&(o.domParent=t),o}},{key:"_getTemplate",value:function(){return"rooms-guests/desktop/dropdown.dust"}},{key:"_getData",value:function(){return{topClass:this._topClass,min:this._min,max:this._max+1,titleClass:this._options.titleClass}}},{key:"_showPicker",value:function(e){this._overlay&&(e&&this.emit(v.WILL_OPEN,this),this._overlay.isOpen&&(e?this._overlay.show():this._overlay.hide()))}},{key:"setValue",value:function(e){var o=this._valueDecorator(e);this._overlay?t(this._overlay.container).find(".picker-dropdown .picker-label").text(o):this._placeHolder.find(".picker-dropdown .picker-label").text(o),this._placeHolder.find(".picker-inner .picker-label").text(o)}},{key:"hidePopup",value:function(){this._showPicker(!1)}},{key:"destroy",value:function(e){this._overlay&&this._overlay.destroy(),e&&this._element.parent().length?this._element.parent().remove():this._element.remove()}},{key:"toggleVisible",value:function(e){this._element.toggleClass("hidden",!e)}},{key:"toggleError",value:function(e){this._element.find(".picker-inner").toggleClass("error",e),this._element.toggleClass("error",e)}},{key:"setTitle",value:function(e){this._options.titleClass&&this._element.find("."+this._options.titleClass).text(e)}}]),n}(y),g=function(o){function i(t,o,n,r,s,a,l){return e.classCallCheck(this,i),e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,o,n,r,s,a,l))}return e.inherits(i,o),e.createClass(i,[{key:"_setupDropdown",value:function(){var e=this._element.find(".picker-dropdown").removeClass("hidden").get(0),t=this._element.find(".picker-inner").get(0);return new a(t,l(t,"below ",this._options.dropdownClasses,e,null,"div"),f.overlapRightTop(),h(t),c,u,p(window,["date_bar_docked","date_bar_undocked"]),d)}},{key:"_getTemplate",value:function(){return"rooms-guests/desktop/checkmark_dropdown.dust"}},{key:"_getData",value:function(){return t.extend(e.get(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"_getData",this).call(this),{icon:this._options.icon})}},{key:"_resetSelection",value:function(e){var o=this._overlay&&this._overlay.container||this._placeHolder;t(o).find(".option.selected").removeClass("selected"),t(o).find(".option[data-val="+e+"]").addClass("selected")}},{key:"setValue",value:function(t){e.get(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"setValue",this).call(this,t),this._resetSelection(t)}}]),i}(k),m=function(){function o(r,s,a,l,c,u){var _=this;e.classCallCheck(this,o);var p="rooms-guests/desktop/ticker.dust",h=new n(v.VALUE_CHANGED);this._min=c,this._max=u,this._valueDecorator=a,a&&"function"==typeof a||(this._valueDecorator=function(e){return e}),l&&"function"==typeof l||(l=function(){return 0}),this.placeHolder=t(r),this.on=h.on.bind(h),this.off=h.off.bind(h);var d=function(e){if(e){var t=l(),o=t+e;_.setValue(o),h.emit(v.VALUE_CHANGED,o,t)}},f={topClass:s};i.render(p,f,this.placeHolder.get(0),function(){_._increase=_.placeHolder.find(".plus-circle"),_._decrease=_.placeHolder.find(".minus-circle"),_._increase.on("click",function(){return d(1)}),_._decrease.on("click",function(){return d(-1)}),_.setValue(l())})}return e.createClass(o,[{key:"setValue",value:function(e){var t=Math.min(Math.max(this._min,e),this._max),o=this._valueDecorator(t);this.placeHolder.find(".picker-label").text(o),this._increase.toggleClass("inactive",e>=this._max),this._decrease.toggleClass("inactive",e<=this._min)}}]),o}(),C=function(t){function o(t,n,r,s,a,l,c){e.classCallCheck(this,o);var u=e.possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,t,n,r,s,a,l,c));return i.render(u._getTemplate(),u._getData(),u._placeHolder.get(0),function(){u._increase=u._placeHolder.find(".rg-ticker-plus"),u._decrease=u._placeHolder.find(".rg-ticker-minus"),u._increase.on("click",function(){return u._delta(1)}),u._decrease.on("click",function(){return u._delta(-1)}),u._label=u._placeHolder.find(".rg-ticker-label"),u.setValue(u._valueProvider())}),u}return e.inherits(o,t),e.createClass(o,[{key:"_getTemplate",value:function(){return"rooms-guests/desktop/label_ticker.dust"}},{key:"_getData",value:function(){return{topClass:this._topClass}}},{key:"_delta",value:function(e){if(e){var t=this._valueProvider(),o=t+e;this.setValue(o),this.emit(v.VALUE_CHANGED,o,t)}}},{key:"setValue",value:function(t){e.get(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"setValue",this).call(this,t),this._increase.toggleClass("inactive",t>=this._max),this._decrease.toggleClass("inactive",t<=this._min)}}]),o}(y),b=function(o){function i(t,o,n,r,s,a,l){return e.classCallCheck(this,i),e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,o,function(e){return e},r,s,a,l))}return e.inherits(i,o),e.createClass(i,[{key:"_getTemplate",value:function(){return"rooms-guests/desktop/count_ticker.dust"}},{key:"_getData",value:function(){return t.extend(e.get(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"_getData",this).call(this),{icon:this._options.icon,label:this._options.label})}}]),i}(C),D=function(e){var t=r.retrieve(e);return function(e){return t&&t.length>e&&e>=0?t[e]:""}};return{DropDownPicker:k,CheckmarkDropdownPicker:g,Ticker:m,CountTicker:b,createStoreValuesDecorator:D,EVENTS:v}});
require(["ta/prwidgets"],function(e){var n=e.define.bind(e,"ibex_trip_search_rooms_guests_corgi_sft","pickers",["handlers","pickers"]);n(["lib/jquery-amd","ta/Core/TA.Store","hotels/RoomsGuests","hotels/RoomsGuestsUI","mixins/Events","common/trackingStreams"],function(e,n,t,r,o,i){function l(l,c,s){function d(){function o(e){return"string"==typeof e&&(e=parseInt(e,10),isNaN(e))?m:e<0?m:0===e?"0-1":e.toString()}function l(l){var c=e("<span/>",{"class":"age-picker"});P.append(c);var a=new R.childDropdownUI(c.get(0),"",o,null,0,t.CONSTANTS.MAX_CHILD_AGE,{titleClass:"age-of-child",flexWidth:!0,dropdownClasses:P.attr("data-dropdown-classes")});D.push(a),c.css("order",l),a.on(r.EVENTS.WILL_OPEN,N),a.on(r.EVENTS.WILL_OPEN,s.bind(null,!0)),a.on(r.EVENTS.CLOSED,s.bind(null,!1)),a.on(r.EVENTS.VALUE_CHANGED,function(e){i.trackEvent("childrenpicker","click","age",e),b.updateChildAge(l,e)});var d=n.retrieve(R.childLabelKey),u=d&&d.length>l+1?d[l+1]:"";a.setTitle(u)}function c(e,n){P.toggleClass("hidden",0===e.length);for(var t=0;t<e.length;++t)D.length<=t&&l(t),D[t].setValue(e[t]),e[t]>=0?D[t].toggleError(!1):n&&D[t].toggleError(!0);for(;D.length>e.length;)D.pop().destroy(!0);a()}function a(){P&&(P.scrollTop(P.scrollTop()+1),P.scrollTop(P.scrollTop()-1))}function s(e){P&&P.toggleClass("no-scroll",e)}return{createAgePickersWithAges:c}}function u(){for(var e=b.get().childrenAges,n=!1,t=0;t<e.length;++t)e[t]<0?(n=!0,D[t].toggleError(!0)):D[t].toggleError(!1);return!n}function g(e){T.setValue(e)}function h(e){_.setValue(e)}function p(e){d().createAgePickersWithAges(e),S.setValue(e.length)}function f(e,n,t){require(["ta/page","trjs!mixins/page-dates/Utils","trjs!ta/Core/TA.Record"],function(r,o,i){var l="https://tripadvisor.hotelplanner.com/Group-Rate/?kw="+e+"Plus",c=r.getDates("STAYDATES");c&&2===c.length&&(l+="&InDate="+encodeURIComponent(o.dateToIso(c[0]).replace(/_/g,"/")),l+="&OutDate="+encodeURIComponent(o.dateToIso(c[1]).replace(/_/g,"/"))),t&&(l+="&City="+encodeURIComponent(t)),i.trackEventOnPage("hotel_planner_cta","click","rooms_value",n),window.open(l,"_blank")})}function E(e,n){v&&v.toggleClass("hidden",e<n),v&&!I&&e>=n&&require(["trjs!ta/Core/TA.Record"],function(n){n.trackEventOnPage("hotel_planner_cta","shown","rooms_value",e),I=!0})}function k(){var e=b.get();T.setValue(e.nRooms),_.setValue(e.nAdults),S&&(S.setValue(e.childrenAges.length),d().createAgePickersWithAges(e.childrenAges)),E(e.nRooms,v&&v.attr("data-min-rooms-value"))}function A(e,n){V.emit(e),i.trackEvent(n,"Click")}function N(){T&&T.hidePopup&&T.hidePopup(),_&&_.hidePopup&&_.hidePopup(),S&&S.hidePopup&&S.hidePopup();for(var e=0;e<D.length;e++)D[e].hidePopup&&D[e].hidePopup()}function C(){R.containerClass&&L.addClass(R.containerClass),P=e(".ages-wrap",L);var o=L.find(".childrenPlaceholder"),l=o.length>0;I=!1,v=L.find(".hpCTAPlaceholder");var c;if(v){c=v.attr("data-min-rooms-value");var a=v.attr("data-address");v.on("click",function(){f(c,b.get().nRooms,a)}),E(b.get().nRooms,c)}var s={label:n.retrieve("rgPicker.roomsLabel"),icon:"hotels"};T=new R.UI(L.find(".roomsPlaceholder"),"rooms-picker",r.createStoreValuesDecorator("rgPicker.nRooms"),function(){return b.get().nRooms},t.CONSTANTS.MIN_ROOMS,t.CONSTANTS.MAX_ROOMS,s),T.on(r.EVENTS.WILL_OPEN,N),T.on(r.EVENTS.VALUE_CHANGED,function(e,n){i.trackEvent("roompicker","click",e>n?"add":"subtract",e),b.update({nRooms:e}),E(e,c)});var d={label:n.retrieve(l?"rgPicker.adultsLabel":"rgPicker.guestsLabel"),icon:"friends"};if(_=new R.UI(L.find(".adultsPlaceholder"),"adults-picker",r.createStoreValuesDecorator(l?"rgPicker.nAdults":"rgPicker.nGuests"),function(){return b.get().nAdults},t.CONSTANTS.MIN_ADULTS,t.CONSTANTS.MAX_ADULTS,d),_.on(r.EVENTS.WILL_OPEN,N),_.on(r.EVENTS.VALUE_CHANGED,function(e,n){i.trackEvent("adultpicker","click",e>n?"add":"subtract",e),b.update({nAdults:e})}),l){m=L.find(".age-translated").text();var u={label:n.retrieve("rgPicker.childrenLabel"),icon:"children"};S=new R.UI(L.find(".childrenPlaceholder"),"children-picker",r.createStoreValuesDecorator("rgPicker.nChildren"),function(){return b.get().childrenAges.length},t.CONSTANTS.MIN_CHILDREN,t.CONSTANTS.MAX_CHILDREN,u),S.on(r.EVENTS.WILL_OPEN,N),S.on(r.EVENTS.VALUE_CHANGED,function(e,n){i.trackEvent("childrenpicker","click",e>n?"add":"subtract",e),b.update({nChildren:e}),S.setValue(b.get().childrenAges.length)})}b.on(t.EVENTS.ROOMS_CHANGED,g),b.on(t.EVENTS.ADULTS_CHANGED,h),b.on(t.EVENTS.CHILDREN_CHANGED,p),L.find(".btn_confirm").on("click",A.bind(null,"submit","RGP_submit")),L.find(".ui_close_x").on("click",A.bind(null,"cancel","RGP_X")),L.find(".btn_cancel").on("click",A.bind(null,"cancel","RGP_cancel")),L.find(".btn_apply").on("click",A.bind(null,"apply","RGP_apply"))}var T,_,S,P,m,v,I,b=l,L=c,D=[],V=new o("markErrors","hide"),R=a[s]||a.control;this.on=V.on.bind(V),this.off=V.off.bind(V),C(),this.verifyAgesOfChildren=u,this.setInitialState=k}var c={containerClass:"rg-picker-sft",childLabelKey:"rgPicker.nChildIndex",childDropdownUI:r.CheckmarkDropdownPicker},a={"sft_1":e.extend({},c,{UI:r.CountTicker}),"control":{UI:r.Ticker,containerClass:"",childLabelKey:"rgPicker.nAgeOfChildIndex",childDropdownUI:r.DropDownPicker}};return l})});
require(["ta/prwidgets"],function(e){var t=e.define.bind(e,"ibex_trip_search_rooms_guests_corgi_sft","handlers",["handlers","pickers"]);t(["widget","lib/jquery-amd","common/trackingStreams","ta/Core/TA.Event","ta/Core/TA.Store","ta/page","common/Radio","hotels/RoomsGuests","overlays/Overlay","overlays/styles/popover","overlays/styles/inlinepopup","overlays/position","overlays/position/animateFromLastSource","overlays/options/closeOnDocClick","overlays/options/closeOnLegacyOverlay","overlays/options/closeAllOtherOverlaysOnShow","overlays/options/repositionOnEvent","overlays/options/repositionOnTaEvent","overlays/options/autoReposition","overlays/options/highlightElement","overlays/options/dimElement","overlays/options/centerArrowOnSrcElement","overlays/options/blurSourceOnHide","utils/responsive","utils/ResponsiveEvents","ta/util/LegacyDateShim","ta/Core/TA.LocalStorage","pickers","responsive/text-resizer"],function(e,t,n,i,o,r,s,a,l,c,d,u,p,g,v,f,h,m,_,k,y,b,w,O,A,S,C,E,x){"use strict";function T(){H.fromStore(),j(!1)}function j(e){K&&K.setInitialState(),R(),P(),e&&H.updateStore();var t=Object.assign({},H.get().childrenAges);M=Object.assign({},H.get()),M.childrenAges=t;var n=X.parents(".trip_search").get(0);n&&x.refresh(n)}function G(){o.store("guests_rooms_picker.enabled",!0);var e=X.find(".initial-values-holder");H=new a({initialValuesHolder:e.get(0)}),I(),H.hasStoreValues()?T():j(!0),A.on("breakpoint",function(){V&&V.isOpen()?(Z=!0,z(),V.show()):z()})}function I(){i.on("searchFieldsChanged",T)}function P(e){var n=e||H.get().nRooms,i=o.retrieve("rgPicker.nRooms"),r=i&&i.length>n?i[n]:"";t(".traveler_info_numeric .room-info").text(n),t(".traveler_info_text .room-info").text(r),t(".rooms-picker .picker-label:visible").text(r)}function R(e,n){var i=H.get(),r=e||i.nAdults,s=(n||i.childrenAges).length,a=r+s;t(".traveler_info_numeric .guest-info").text(a);var l=X.find(".traveler_info_text .guest-info");if(l.length){var c=o.retrieve("rgPicker.nGuests"),d=c&&c.length>a?c[a]:"";l.text(d)}else{var u=o.retrieve("rgPicker.nAdults"),p=u&&u.length>r?u[r]:"",g=o.retrieve("rgPicker.nChildren"),v=g&&g.length>s?g[s]:"";X.find(".traveler_info_text .adult-info").text(p),X.find(".traveler_info_text .child-info").text(v)}}function L(e){if(ie.focus(),B(),V.isOpen()){var t=e&&(e.isTrusted||e.screenX||e.screenY)?"manual":"auto",i=X.parents(".persistent_trip_search_fixed").length?1:0;n.trackEvent("roomguestpicker_module","click",t,i)}s("rooms-guests").emit("popped")}function U(){R(),P();var e=H.updateStore();e&&(i.fireEvent("onLegacyGuestsChanged",e),S.justUpdateSessionDates())}function q(e){if(K&&K.verifyAgesOfChildren()){if(!H.equals(M)){U(),i.fireEvent("searchFieldsChanged",X.get(0));var t=Object.assign({},H.get().childrenAges);M=Object.assign({},H.get()),M.childrenAges=t,!e&&r.processNewTravelInfo&&r.processNewTravelInfo(X.get(0))}var n=!1;C.enabled&&(C.getObject("userUpdatedGuestPicker")||(n=!0),C.set("userUpdatedGuestPicker",!0,864e5)),V.hide("update"),n&&s("rooms-guests").emit("firstUserUpdate")}}function N(e){n.trackEvent("roomguestpicker_module","click",e);var t=H.get()||{},i=t.nRooms||0,o=t.nAdults||0,r=t.childrenAges?t.childrenAges.length:0,s="room="+i+",adult="+o+",children="+r;n.trackEvent("roomguestpicker_module","final_selection",s)}function D(e){return Z?void(Z=!1):(H.fromStore(),K&&K.setInitialState(),void N(e&&"update"===e.trigger?"update":"dismiss"))}function F(e){var t={position:"below",offsets:[0,-8]},n=(e&&e.getAttribute("data-position")||"").split(" ").filter(function(e){return!!e.length});return n.length&&!O.mobile()&&(t.position=isNaN(n[0])?n.shift():null,t.offsets=n.map(function(e){return parseInt(e,10)||0}),t.position="function"==typeof u[t.position]?t.position:"below"),t}function z(){V&&V.destroy();var e=X.find(".picker-field").get(0),n=X.parents(".trip_search").get(0),i="rooms_guests_children no_x no_padding";i+=X.parents(".responsive_inline").length?" responsive_inline":"";var o=Q&&O.mobile()?document.querySelector('[data-inlinepopup-name="calendar-inline-container"]'):null,r=[];if(o)r=[d(e,o,"below",i+" inline-guest-picker-enabled",W.get(0),"min-width: 288px;"),b(e),f,h(window,["resize","date_bar_docked","date_bar_undocked"]),m("showingCookieConsentBanner"),k,y(n),w];else{var s=F(e);r=[c(e,s.position,i,"",W.get(0)),p(u[s.position](s.offsets,!1,!1,[16]),function(){return O.tablet()}),b(e),g.withoutTouchEvents,v,f,h(window,["date_bar_docked","date_bar_undocked"]),m("showingCookieConsentBanner"),_,k,y(n),w]}V=new l(e,r),V.on("hide",D);var a=t(".pickers",V.contentElement);a.removeClass("hidden"),K||(K=new E(H,a,$),K.on("submit",q),K.on("cancel",function(){V.hide()}),K.on("apply",q.bind(null,!0)),K.setInitialState())}function B(){V&&t.contains(document,V.sourceElement)||z(),V.isOpen()?V.hide():(V.show(),n.trackEvent("roomguestpicker_module","in_view"))}var H,V,K,M,X=t(e.element),Y=!0,J=!1,Q=!!e.element.getAttribute("data-inlineGuestPickerEnabled"),W=X.find(".popup_content"),Z=!1,$=X.attr("data-picker-ui-key"),ee="",te=o.retrieve("tracking.impression.key"),ne=o.retrieve("page.location");te&&(ee="IK:"+te),ne&&(ee+="/L:"+ne);var ie=X.find(".traveler_info_container");X.on("click",L),G(),s("search").on("loading",function(n){t(e.element).toggleClass("loading",n)}).reply("is-valid",function(){return J||(Y=K?K.verifyAgesOfChildren():!H.hasMissingChildrenAges()),Y||n.trackEvent("GuestSelector-tripsearch","age_validation_error",ee,"1",!1),Y}).on("toggleStripe",function(n){t(e.element).toggleClass("no-stripe",!n)})})});
require(["ta/prwidgets"],function(n){var e=n.define.bind(n,"common_progress_bar","handlers",["handlers"]);e(["widget","lib/jquery-amd","ta/page","ta/Core/TA.Event"],function(n,e,o,a){"use strict";function i(){t.removeClass("loading"),setTimeout(function(){t.addClass("loading"),t.one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",r)},0)}function r(){t.removeClass("loading")}var t=e(".progress_bar",n.element);return o.on("newPageTravelInfo",i),a.on("page-polling-complete",r),a.on("page-repoll-failed",r),{}})});
require(["ta/prwidgets"],function(e){var r=e.define.bind(e,"datepickers_trip_search_dates_corgi_refactor","handlers",["handlers"]);r(["widget","common/Radio","mixins/page-dates/default-dates","common/DatePicker"],function(e,r,a,n){"use strict";var t=n(e.element,!1);return r("search").on("popDatePicker",function(){t.popPrimaryPicker()}),a.apply(e.element),{openCalendar:t.openCalendar}})});
require(["ta/prwidgets"],function(e){var t=e.define.bind(e,"ibex_trip_search_rooms_guests_corgi_refactor","pickers",["handlers","pickers"]);t(["lib/jquery-amd","ta/Core/TA.Store","hotels/RoomsGuests","hotels/RoomsGuestsUI","mixins/Events","common/trackingStreams"],function(e,t,r,n,i,o){function c(c,s){function l(){function i(e){return"string"==typeof e&&(e=parseInt(e,10),isNaN(e))?T:e<0?T:0===e?"0-1":e.toString()}function c(){for(var e=0;e<V.length;++e)V[e].hidePopup()}function s(s){var l=e("<span/>",{"class":"age-picker"});k.append(l);var a=new n.DropDownPicker(l.get(0),"",i,null,0,r.CONSTANTS.MAX_CHILD_AGE,{titleClass:"age-of-child",flexWidth:!0});V.push(a),l.css("order",s),a.on(n.EVENTS.VALUE_CHANGED,function(e){o.trackEvent("childrenpicker","click","age",e),p.updateChildAge(s,e)}),a.on(n.EVENTS.WILL_OPEN,c);var u=t.retrieve("rgPicker.nAgeOfChildIndex"),d=u&&u.length>s+1?u[s+1]:"";a.setTitle(d)}function l(e,t){k.toggleClass("hidden",0===e.length);for(var r=0;r<e.length;++r)V.length<=r&&s(r),V[r].setValue(e[r]),e[r]>=0?V[r].toggleError(!1):t&&V[r].toggleError(!0);for(;V.length>e.length;)V.pop().destroy(!0)}return{createAgePickersWithAges:l}}function a(){for(var e=p.get().childrenAges,t=!1,r=0;r<e.length;++r)e[r]<0?(t=!0,V[r].toggleError(!0)):V[r].toggleError(!1);return!t}function u(e){E.setValue(e)}function d(e){N.setValue(e)}function g(e){l().createAgePickersWithAges(e),S.setValue(e.length)}function h(){var e=p.get();E.setValue(e.nRooms),N.setValue(e.nAdults),S&&(S.setValue(e.childrenAges.length),l().createAgePickersWithAges(e.childrenAges))}function f(){_.emit("submit",!1)}function A(){k=e(".ages-wrap",C);var t=C.find(".childrenPlaceholder"),i=t.length>0;E=new n.Ticker(C.find(".roomsPlaceholder"),"rooms-picker",n.createStoreValuesDecorator("rgPicker.nRooms"),function(){return p.get().nRooms},r.CONSTANTS.MIN_ROOMS,r.CONSTANTS.MAX_ROOMS),E.on(n.EVENTS.VALUE_CHANGED,function(e,t){o.trackEvent("roompicker","click",e>t?"add":"subtract",e),p.update({nRooms:e})}),N=new n.Ticker(C.find(".adultsPlaceholder"),"adults-picker",n.createStoreValuesDecorator(i?"rgPicker.nAdults":"rgPicker.nGuests"),function(){return p.get().nAdults},r.CONSTANTS.MIN_ADULTS,r.CONSTANTS.MAX_ADULTS),N.on(n.EVENTS.VALUE_CHANGED,function(e,t){o.trackEvent("adultpicker","click",e>t?"add":"subtract",e),p.update({nAdults:e})}),i&&(T=C.find(".age-translated").text(),S=new n.Ticker(C.find(".childrenPlaceholder"),"children-picker",n.createStoreValuesDecorator("rgPicker.nChildren"),function(){return p.get().childrenAges.length},r.CONSTANTS.MIN_CHILDREN,r.CONSTANTS.MAX_CHILDREN),S.on(n.EVENTS.VALUE_CHANGED,function(e,t){o.trackEvent("childrenpicker","click",e>t?"add":"subtract",e),p.update({nChildren:e}),S.setValue(p.get().childrenAges.length)})),p.on(r.EVENTS.ROOMS_CHANGED,u),p.on(r.EVENTS.ADULTS_CHANGED,d),p.on(r.EVENTS.CHILDREN_CHANGED,g),C.find(".btn_confirm").on("click",f)}var E,N,S,k,T,p=c,C=s,V=[],_=new i("markErrors","hide");this.on=_.on.bind(_),this.off=_.off.bind(_),A(),this.verifyAgesOfChildren=a,this.setInitialState=h}return c})});
require(["ta/prwidgets"],function(e){var t=e.define.bind(e,"ibex_trip_search_rooms_guests_corgi_refactor","handlers",["handlers","pickers"]);t(["widget","lib/jquery-amd","common/trackingStreams","ta/Core/TA.Event","ta/Core/TA.Store","ta/page","common/Radio","hotels/RoomsGuests","overlays/Overlay","overlays/styles/popover","overlays/styles/inlinepopup","overlays/position","overlays/position/animateFromLastSource","overlays/options/closeOnDocClick","overlays/options/closeOnLegacyOverlay","overlays/options/closeAllOtherOverlaysOnShow","overlays/options/repositionOnEvent","overlays/options/autoReposition","overlays/options/highlightElement","overlays/options/dimElement","overlays/options/centerArrowOnSrcElement","overlays/options/blurSourceOnHide","utils/responsive","utils/ResponsiveEvents","ta/util/LegacyDateShim","ta/Core/TA.LocalStorage","pickers"],function(e,t,n,i,o,r,s,a,l,c,d,u,g,p,v,f,h,m,_,k,y,b,w,A,O,S,E){"use strict";function x(){U.fromStore(),r.processNewTravelInfo&&r.processNewTravelInfo(M.get(0)),C(!1)}function C(e){z&&z.setInitialState(),G(),j(),e&&U.updateStore();var t=Object.assign({},U.get().childrenAges);K=Object.assign({},U.get()),K.childrenAges=t}function R(){o.store("guests_rooms_picker.enabled",!0);var e=M.find(".initial-values-holder");U=new a({initialValuesHolder:e.get(0)}),T(),U.hasStoreValues()?x():C(!0),A.on("breakpoint",function(){V&&V.isOpen()?(Q=!0,F(),V.show()):F()})}function T(){i.on("searchFieldsChanged",x)}function j(e){var n=e||U.get().nRooms,i=o.retrieve("rgPicker.nRooms"),r=i&&i.length>n?i[n]:"";t(".traveler_info_numeric .room-info").text(n),t(".traveler_info_text .room-info").text(r),t(".rooms-picker .picker-label:visible").text(r)}function G(e,n){var i=U.get(),r=e||i.nAdults,s=(n||i.childrenAges).length,a=r+s;t(".traveler_info_numeric .guest-info").text(a);var l=M.find(".traveler_info_text .guest-info");if(l.length){var c=o.retrieve("rgPicker.nGuests"),d=c&&c.length>a?c[a]:"";l.text(d)}else{var u=o.retrieve("rgPicker.nAdults"),g=u&&u.length>r?u[r]:"",p=o.retrieve("rgPicker.nChildren"),v=p&&p.length>s?p[s]:"";M.find(".traveler_info_text .adult-info").text(g),M.find(".traveler_info_text .child-info").text(v)}}function I(e){if(ee.focus(),H(),V.isOpen()){var t=e&&(e.isTrusted||e.screenX||e.screenY)?"manual":"auto",i=M.parents(".persistent_trip_search_fixed").length?1:0;n.trackEvent("roomguestpicker_module","click",t,i)}}function L(){G(),j();var e=U.updateStore();e&&(i.fireEvent("onLegacyGuestsChanged",e),O.justUpdateSessionDates())}function P(){if(z&&z.verifyAgesOfChildren()){if(!U.equals(K)){L(),i.fireEvent("searchFieldsChanged",M.get(0));var e=Object.assign({},U.get().childrenAges);K=Object.assign({},U.get()),K.childrenAges=e}S.enabled&&S.set("userUpdatedGuestPicker",!0,864e5),V.hide("update")}}function q(e){n.trackEvent("roomguestpicker_module","click",e);var t=U.get()||{},i=t.nRooms||0,o=t.nAdults||0,r=t.childrenAges?t.childrenAges.length:0,s="room="+i+",adult="+o+",children="+r;n.trackEvent("roomguestpicker_module","final_selection",s)}function N(e){return Q?void(Q=!1):(U.fromStore(),void q(e&&"update"===e.trigger?"update":"dismiss"))}function D(e){var t={position:"below",offsets:[0,-8]},n=(e&&e.getAttribute("data-position")||"").split(" ").filter(function(e){return!!e.length});return n.length&&!w.mobile()&&(t.position=isNaN(n[0])?n.shift():null,t.offsets=n.map(function(e){return parseInt(e,10)||0}),t.position="function"==typeof u[t.position]?t.position:"below"),t}function F(){V&&V.destroy();var e=M.find(".picker-field").get(0),n=M.parents(".trip_search").get(0),i="rooms_guests_children no_x no_padding";i+=M.parents(".responsive_inline").length?" responsive_inline":"";var o=B&&w.mobile()?document.querySelector('[data-inlinepopup-name="calendar-inline-container"]'):null,r=[];if(o)r=[d(e,o,"below",i+" inline-guest-picker-enabled",J.get(0),"min-width: 288px;"),y(e),f,h(window,["resize","date_bar_docked","date_bar_undocked"]),_,k(n),b];else{var s=D(e);r=[c(e,s.position,i,"",J.get(0)),g(u[s.position](s.offsets,!1,!1,[16]),function(){return w.tablet()}),y(e),p.withoutTouchEvents,v,f,h(window,["date_bar_docked","date_bar_undocked"]),m,_,k(n),b]}V=new l(e,r),V.on("hide",N);var a=t(".pickers",V.contentElement);a.removeClass("hidden"),z||(z=new E(U,a),z.on("submit",P),z.setInitialState())}function H(){V&&t.contains(document,V.sourceElement)||F(),V.isOpen()?V.hide():(V.show(),n.trackEvent("roomguestpicker_module","in_view"))}var U,V,z,K,M=t(e.element),X=!0,Y=!1,B=!!e.element.getAttribute("data-inlineGuestPickerEnabled"),J=M.find(".popup_content"),Q=!1,W="",Z=o.retrieve("tracking.impression.key"),$=o.retrieve("page.location");Z&&(W="IK:"+Z),$&&(W+="/L:"+$);var ee=M.find(".traveler_info_container");M.on("click",I),R(),s("search").on("loading",function(n){t(e.element).toggleClass("loading",n)}).reply("is-valid",function(){return Y||(X=z?z.verifyAgesOfChildren():!U.hasMissingChildrenAges()),X||n.trackEvent("GuestSelector-tripsearch","age_validation_error",W,"1",!1),X})})});
define("mixins/page-dates/picker-autoadvance-utils",[],function(){var e={};return e.keepOverlayOpenOnSelection=function(e){for(var n=document.querySelectorAll(".ui_overlay"),r=0;r<n.length;r++){var t=n[r].overlay,a=t&&t.sourceElement;if(a===e){t.dontHideOnSelection=!0;break}}},e});
define("mixins/page-dates/picker-autoadvance-corgi",["mixins/page-dates/DateTypeStore","mixins/page-dates/picker-autoadvance-utils","ta/Core/TA.LocalStorage","common/Radio","utils/domUtils"],function(e,t,a,i,n){"use strict";function o(o){var r=ta.page;r&&r.on("dateSelected",function c(s,d,l){if(!n.isOrContainsElement(document.body,o))return void r.off("dateSelected",c);if(s&&n.isOrContainsElement(o,s)){var p=e.getCorrespondingDateType(d);if(p){if(e.isStartDateType(d)){var u=new Date(l[0].getFullYear(),l[0].getMonth(),l[0].getDate()+1);r.pushDates(null,p,[u]);var f=o.querySelector('[data-datetype="'+p+'"]');f&&(t.keepOverlayOpenOnSelection(s),setTimeout(r.gatherDates.bind(r,f)))}if(e.isEndDateType(d)&&!a.getObject("userUpdatedGuestPicker")){var g=o.querySelector(".traveler_info_container");g&&(t.keepOverlayOpenOnSelection(s),setTimeout(function(){g.click()}))}else e.isEndDateType(d)&&i("picker-autoadvance").emit("flow-complete")}}})}return{apply:o}});
require(["ta/p13n/placements"],function(e){var a=e.define.bind(e,"trip_search_detail_page","handlers",["handlers"]);a(["placement","ta/page","mixins/page-dates/picker-autoadvance-corgi","hotels/ClickSourceTracking","responsive/text-resizer","ta/Core/TA.FireEvent"],function(e,a,t,n,i,r){function s(){var e=a.getHacStatus();e&&!e.isAnyAvailable&&l.classList.add("hidden")}var c=document.getElementById(e.id);if(c.addEventListener("click",function(e){n.trackElement(e.target,c)}),t.apply(c),i.init(c),a.on("newPageTravelInfo",i.refresh.bind(null,c)),e.params.listenToHacStatus){var l=c.getElementsByClassName("trip_search_label").item(0);r.on("hacListenerUpdate",function(){s()}),s()}return{}})});
require(["ta/p13n/placements"],function(n){var i=n.define.bind(n,"url_tracking_guid","handlers",["handlers"]);i(["placement","ta/Core/TA.Event","ta/Core/TA.Record"],function(n,i,a){function e(i){var e=r(i);e.ss&&e.apg&&n.params.sessionId!==e.ss&&a.trackEventOnPage("shared_url","clicked",e.apg)}function r(n){var i=n.split("#")[1];return i?o(i.indexOf("?")>=0?i.split("?")[1]:i):{}}function o(n){var i={};if(!n)return i;if(n.indexOf("=")<0)return i;for(var a=n.indexOf("?")>=0?n.split("?")[1]:n,e=a.split("&"),r=0;r<e.length;r++){var o=e[r].split("=");o[0]&&(i[decodeURIComponent(o[0])]=decodeURIComponent(o[1]))}return i}function t(n){var i=n.split("#")[1];return i?i.indexOf("?")>0?i.split("?")[0]:i.indexOf("=")>0?"":i:""}i.queueForLoad(function(){if(n&&n.params&&n.params.apg&&n.params.sessionId&&window&&window.location&&window.location.href){var i=t(window.location.href);i||(e(window.location.href),window.location.href=window.location.href.split("#")[0]+"#"+i+(i?"?":"")+"apg="+n.params.apg+"&ss="+n.params.sessionId)}},"Page URL GUID initialization")})});
require(["ta/prwidgets"],function(e){var t=e.define.bind(e,"ibex_mismatch_message","handler",["handler"]);t(["widget","vanillajs","api-mod","ta/Core/TA.Event","ta/util/Element"],function(e,t,n,i,a){"use strict";var r=e.element,s=500,c=1e4,d=function(){if(!document.body.contains(r))return void l();var e=r.querySelector(".mismatchMessage");if(e){setTimeout(function(){n.addClass(e,"fadeIn")},s);var t=function(){n.removeClass(e,"fadeIn")},d=e.querySelector(".closeMismatch");d&&(d.addEventListener("click",t),setTimeout(t,s+c));var o=e.querySelector(".linkDates");o&&o.addEventListener("click",function(){i.fireEvent("mismatchShowCalendarRequest")});var u=e.querySelector(".viewAllDeals");u&&u.addEventListener("click",function(){a.scrollIntoView("#HEADING",0,!1)})}},o=function(){window.addEventListener("mismatchRendered",d)},l=function(){window.removeEventListener("mismatchRendered",d)};o()})});
define("utils/stringutils",["utils/uuid"],function(t){function e(t){return a?new Buffer(t,"base64").toString():window&&window.atob?atob(t):i(t)}function r(t){return a?new Buffer(t).toString("base64"):window&&window.btoa?btoa(t):o(t)}function n(t){this.message=t}function o(t){for(var e,r,o=String(t),i=0,a=d,f="";o.charAt(0|i)||(a="=",i%1);f+=a.charAt(63&e>>8-i%1*8)){if(r=o.charCodeAt(i+=.75),r>255)throw new n("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");e=e<<8|r}return f}function i(t){var e=String(t).replace(/\s/g,"").replace(/=+$/,"");if(e.length%4==1)throw new n("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,o,i=0,a=0,f="";o=e.charAt(a++);~o&&(r=i%4?64*r+o:o,i++%4)?f+=String.fromCharCode(255&r>>(-2*i&6)):0)o=d.indexOf(o);return f}var a="undefined"!=typeof exports,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return n.prototype=new Error,n.prototype.name="InvalidCharacterError",{atob:e,btoa:r,generateGuid:t}});
require(["ta/prwidgets"],function(e){var r=e.define.bind(e,"ibex_room_grid_responsive","tracking",["handlers","tracking"]);r(["ta/Core/TA.Record","utils/stringutils"],function(e,r){var t=function(e,r){return"\\"+e+":"+r},n=function(e){return t("PN",e.commerce.providerName)+"/PI:"+e.commerce.providerId+t("JA",e.hotel.partnerHotelCode)},a=function(e,r){for(var t,n,a={},i=0;i<Math.min(e.length,r.length);i++)t=r[i].getAttribute("data-partner_name"),a.hasOwnProperty(t)||(a[t]=[]),n=a[t],n.push(e[i]);return a},i=function(r,t){e.trackEventOnPage("ibex_inline_room_grid",r,t?"IK:"+t:null)},o=function(i,o,l){var c=i.querySelector(".dustTree[data-tree],.dustTree[data-full-tree]"),d=i.querySelector(".trackingTree[data-trk-tree]"),f=c.getAttribute("data-tree");if(f&&o&&1===o.length)return void u(i,o,l);if(f||(f=c.getAttribute("data-full-tree")),f&&o&&!(o.length<=0)){var s,g,m,p=/(\/FK:)([^\\\/]+)/,v=f.match(/(.+?)(\\PR:\d+.*?)(\\N:\d+.+)+/),h=v?v[1]:"",b=v?v[3].split(/(?=\\N:\d+)/):[],k=r.generateGuid().replace(/-/g,""),A={};if(h){for(h=p.test(h)?h.replace(p,"$1"+k):h.replace(/(\/V:[^\\\/]+)/,"$1/FK:"+k),b.map(function(e){return e.replace(/\\+$/,"\\")}),A=a(b,l),o.length>0&&o[0].hotel.checkInOutPolicy&&(h+=t("F","CIP",h)),m=0;m<o.length;m++)s=o[m],g=A[s.partner],g&&(h+=n(s),h+=t("PR",g.length),g.length>0&&(h+=t("PC",s.priceCurrency),h+=t("PC",s.userCurrency)),h+=g.join(""),h+="\\");return e.recordImpression(h),c.removeAttribute("data-tree"),c.setAttribute("data-full-tree",f),d&&(d.removeAttribute("data-trk-tree"),d.parentNode.removeChild(d)),k}}},u=function(r,t,n){var a=r.querySelector(".dustTree[data-tree],.dustTree[data-full-tree]"),i=r.querySelector(".trackingTree[data-trk-tree]"),o=a.getAttribute("data-tree");if(i&&(i.removeAttribute("data-trk-tree"),i.parentNode.removeChild(i)),o){var u=document.querySelector(".roomListTable");if(u&&u.querySelector(".roomRow")){var l=u.parentElement;if(l){var c=n?n.length:0;if(c){var d=/N:\d+/,f=o.split("\\"),s=!1,g=0;f=f.filter(function(e){return null!==d.exec(e)&&(g++,s=!0),g<=c||(s&&""===e?(s=!1,g<=c):!s)}),o=f.join("\\")}}e.recordImpression(o)}}};return{fireRoomListImpression:o,trackCTA:i}})});
require(["ta/prwidgets"],function(e){var t=e.define.bind(e,"ibex_room_grid_responsive","handlers",["handlers","tracking"]);t(["widget","tracking","api-mod","utils/store","utils/objutils","common/trackingStreams","ta/util/Element"],function(e,t,n,o,r,i,s){"use strict";var l,a,u=4,m=".roomList .roomRow",f={},c=4,d=0,h=function(e){f=e.detail,f?l=f.impressionKey:i.error("roomListData is null for room_grid"),E()},g=function(t){if(t.offsetWidth>0&&t.offsetHeight>0){var n=e.element.querySelector(".roomList");return!(!n||n.offsetWidth<=0||n.offsetHeight<=0)&&t.offsetTop+t.offsetHeight<=n.offsetHeight+1}return!1},p=function(){return Array.prototype.slice.call(e.element.querySelectorAll(m)).filter(function(e){return g(e)})},v=function(){var e=p().length;return e<=0&&(e=d),e},y=function(){return Array.prototype.slice.call(e.element.querySelectorAll(m))},L=function(){return y().length},C=function(t){var n=e.element.querySelector(".roomList .expandListWrapper .expandListCTA"),o=y();if(n)if(t<o.length){var r=n.querySelector(".nextAvailablePrice");if(r){var i=o[t].getAttribute("data-price");i&&(r.innerHTML=i)}}else n.classList.add("hidden")},w=function(t){var n=e.element.querySelector(".roomsCountHeader .visibleRoomsCount");n&&(t=Math.min(t,L()),n.innerHTML=t)},x=function(e){var t,o,r,i,s,l,a=e.querySelector(".roomLongDescription span"),u=e.querySelector(".roomLongDescription"),m=2;if(a&&!n.retrieve(a,"shortened")&&(n.store(a,"shortened",!0),s=a.innerText,i=s.split(/[-:'"?\s><]+/).filter(function(e){return""!==e})))for(t=parseInt(window.getComputedStyle(a,null).getPropertyValue("line-height"),10),isNaN(t)&&(t=20),a.innerHTML=s.trim()+" ",o=u.offsetHeight,r=o/t,r<=m&&n.addClass(e.querySelector(".seeMoreLink"),"hidden");r>m;){var f=1;if(r>3){var c=m/r;f=i.length*(1-c)-8,f=Math.max(f,1)}for(l=0;l<f;++l){var d=i.pop(),h=s.lastIndexOf(d);s=s.substring(0,h).trim()}a.innerHTML=s.trim()+"... ",o=u.offsetHeight,r=o/t}},H=function(e){var t,n,o,r,i,s=e.querySelector(".roomShortDescription"),l=2,a="&hellip; ";if(s&&(i=s.innerText,r=i.split(/[-:'"?\s><]+/).filter(function(e){return""!==e})))for(t=parseInt(window.getComputedStyle(s,null).getPropertyValue("line-height"),10),isNaN(t)&&(t=23),s.innerHTML=i.trim()+" ",n=s.offsetHeight,o=n/t;o>l;){var u;if(r.length>4)u=i.lastIndexOf(r.pop()),i=i.substring(0,u).trim();else{var m=i.lastIndexOf(a);u=m>0?m:i.length,i=i.substring(0,u-1).trim()}s.innerHTML=i.trim()+a,n=s.offsetHeight,o=n/t}},S=function(e,t){for(var n=t.querySelectorAll(".hsx_row"),o=0;o<e&&o<n.length;++o)x(n[o]),H(n[o]);s.autoResizeTextInNode(t)},R=function(t,o){var r,i,s,l,a,u,m,f=e.element.querySelector(".roomList"),c=4,d=n.hasClass(f,"controlStyle");if(!(!f||f.offsetWidth<=0||f.offsetHeight<=0)){if(S(t,f),t<o){if(r=f.querySelectorAll(".hsx_row")[t-1],!r||!r.offsetParent)return;m=f.querySelector(".expandListWrapper"),i=r.offsetParent.getBoundingClientRect(),s=r.getBoundingClientRect(),l=s.bottom-i.top,m&&!d&&(l+=m.getBoundingClientRect().height+c)}else a=f.querySelector(".roomListTable"),a?(l=a.getBoundingClientRect().height+2,u=f.querySelector(".seeAllRoomsRow"),u&&(l+=u.getBoundingClientRect().height)):l=2*f.getBoundingClientRect().height;f.style.maxHeight=l+"px"}},b=function(o){o=o||window.event;var r,i,s=o.target||o.srcElement,a=e.element.querySelector(".roomList"),m=a&&a.querySelector(".expandListWrapper .expandListCTA");if(s&&m)if(m.contains(s)){var c=a.offsetHeight+"px";a.style.maxHeight!==c&&(n.removeClass(a,"animateHeight"),a.style.maxHeight=a.offsetHeight+"px",c=a.offsetHeight+"px"),n.addClass(a,"animateHeight"),n.removeClass(a,"fewRows"),i=y(),r=v()+u,R(r,i.length),t.trackCTA("sherpa_see_more_rooms",l),C(r),w(r),r=Math.min(r,i.length),q(f,r);var d=function(){M(f),a.removeEventListener("transitionend",d)};v()===r?d():a.addEventListener("transitionend",d)}else{var h=Array.prototype.slice.call(a.querySelectorAll(".priceContainer"));h.some(function(e){return e.contains(s)})&&t.trackCTA("sherpa_price_column_click",l)}},q=function(e,t){var n,o={hotelName:e.hotelName,totalRoomCount:L(),impressionKey:l};t||(t=v()),o.roomCount=t,window.CustomEvent&&"function"==typeof window.CustomEvent?n=new CustomEvent("ibRoomGridVisibleRoomsUpdated",{bubbles:!0,cancelable:!0,detail:o}):(n=document.createEvent("CustomEvent"),n.initCustomEvent("ibRoomGridVisibleRoomsUpdated",!0,!0,o)),window.dispatchEvent(n)},M=function(n){var o,r=p(),i=[];0===r.length&&(r=y().splice(0,v())),i=n.partners.reduce(function(e,t){return t.available&&t.roomCount>0&&i.push(t),i},i),r.length>0&&i.length>0&&(o=t.fireRoomListImpression(e.element,i,r),o&&f&&(f.roomSelectionKey=o))},E=function(){if(!document.body.contains(e.element))return void _();var t,n,o,i,s,l,a,u=[],m=!1,h=!1,g=0,v=0;for(l=0;l<f.partners.length;l++)if(i=f.partners[l],i&&i.available&&i.roomCount>0&&(m=m||i.showExpandedRoomData,h=h||i.hasRoomPhotos,g=Math.max(g,i.numGridColumns),i.roomList.length>0))for(a=0;a<i.roomList.length;a++)s=r.extend({},i.roomList[a]),s.partnerName=i.displayName,s.isHighlight&&(s.isHighlight=!1),u.push(s);t=p(),v=t.length,o=v,n=u.length,o=v<=0?Math.min(c,n):t.length,d=Math.min(o,n),R(o,n),C(o),w(o),M(f),q(f)},T=function(){if(!a)return void(a=e.element.offsetWidth);var t=e.element.offsetWidth;if(t!==a){a=t;var n=L(),o=v(),r=Math.ceil((o-c)/u)*u+c;r=Math.min(r,n),R(r,n)}},A=function(){window.addEventListener("ibRoomGridRendered",h),window.addEventListener("resize",T),e.element.addEventListener("DOMNodeRemovedFromDocument",_),e.element.addEventListener("click",b);var t=e.element.querySelector(".mismatchMessage");t&&setTimeout(function(){n.addClass(t,"closeMismatch")},5e3)},_=function(){window.removeEventListener("ibRoomGridRendered",h)};A()})});
define("mixins/page-dates/picker-autoadvance",["mixins/page-dates/DateTypeStore","mixins/page-dates/picker-autoadvance-utils","utils/domUtils"],function(e,t,a){"use strict";function i(i,r,s){var o=ta.page;o&&o.on("dateSelected",function d(l,u,p){if(!a.isOrContainsElement(document.body,i))return void o.off("dateSelected",d);if(l&&a.isOrContainsElement(i,l)){var c=e.getCorrespondingDateType(u);if(c){var f=e.isStartDateType(u),g=!o.hasDates(c)||s&&f&&u!==n;if(g){if(r&&!o.hasDates(c)&&Array.isArray(p)){var v=new Date(p[0].getFullYear(),p[0].getMonth(),p[0].getDate()+(f?1:-1));o.pushDates(null,c,[v])}var y=i.querySelector('[data-datetype="'+c+'"]');y&&(n=c,t.keepOverlayOpenOnSelection(l),setTimeout(o.gatherDates.bind(o,y)))}}}})}var n=null;return{apply:i}});
require(["ta/prwidgets"],function(e){var t=e.define.bind(e,"datepickers_hr_north_star_dates","handlers",["handlers"]);t(["widget","lib/jquery-amd","api-mod","ta/Core/TA.Event","mixins/page-dates/picker-autoadvance","mixins/page-dates/default-dates"],function(e,t,a,r,n,i){"use strict";function d(e,a){var r,n=e.attr("data-dateFormat");r=a?ta.i18n.formatDate(n,a):e.attr("data-emptyText"),t(".picker-inner .picker-count",e).html(r)}function o(t,r,n){return a.inDocument(e.element)?void("CHECKIN"===r?d(u,n[0]):"CHECKOUT"===r?d(s,n[0]):"STAYDATES"===r&&(d(u,n[0]),d(s,n[1]))):(ta.page.removeListener("dateSelected",o),u=null,void(s=null))}function l(e){t(e.target).parents(".unified-picker").length||(u.attr("data-popup-direction-override","below"),s.attr("data-popup-direction-override","below"),p(u.get(0),!0))}function p(e,a){if(e){a||c();var r=t(u).data("defersearch")===!0;ta.page.gatherDates(e,null,r)}}function c(){var a="data-popup-direction-override";t(e.element).hasClass("override-popup-direction-below")?(u.attr(a,"below"),s.attr(a,"below")):(u.removeAttr(a,null),s.removeAttr(a,null))}var u=t("[data-datetype=CHECKIN]",e.element),s=t("[data-datetype=CHECKOUT]",e.element),m=t(".datepicker_container",e.element).hasClass("autoPopDisabled");return ta.page.on("dateSelected",o),r.queueForLoad(function(){c(),n.apply(e.element),i.apply(e.element,m)},"datepicker widget handlers"),{onDatePickerContainerClick:l,onDatePickerClick:p}})});
require(["ta/prwidgets"],function(e){var n=e.define.bind(e,"ibex_hr_north_star_rooms_guests","pickers",["handlers","pickers"]);n(["lib/jquery-amd","ta/Core/TA.Store","hotels/RoomsGuests","hotels/RoomsGuestsUI","mixins/Events"],function(e,n,r,t,o){function i(n,i){function a(n){function o(e){return"string"==typeof e&&(e=parseInt(e,10),isNaN(e))?_:e<0?_:0===e?"0-1":e.toString()}var i=e("<span/>");i.addClass("age-picker"),T.append(i);var s=new t.DropDownPicker(i.get(0),"",o,null,0,r.CONSTANTS.MAX_CHILD_AGE);C.push(s),i.css("order",n),s.on(t.EVENTS.VALUE_CHANGED,function(e){D.updateChildAge(n,e)&&g()}),s.on(t.EVENTS.WILL_OPEN,h)}function l(e,n){var r;for(V.find(".children-ages-explain").toggleClass("hidden",0===e.length),r=0;r<e.length;++r)C.length<=r&&a(r),C[r].setValue(e[r]),e[r]>=0?C[r].toggleError(!1):n&&C[r].toggleError(!0);for(;C.length>e.length;)C.pop().destroy(!0)}function u(){for(var e=D.get().childrenAges,n=0;n<e.length;++n)if(e[n]<0){var r=T.find(".age-picker-"+(n+1));r.addClass("error")}return!D.hasMissingChildrenAges()}function E(e){A.setValue(e)}function c(e){p.setValue(e)}function d(e){l(e),S.setValue(e.length)}function N(){var e=D.get();A.setValue(e.nRooms),p.setValue(e.nAdults),S&&(S.setValue(e.childrenAges.length),l(e.childrenAges)),I.emit(s.HIDE,!1)}function g(){I.emit(s.UPDATE,!0),u()&&I.emit(s.HIDE,!0)}function h(){p.hidePopup(),A.hidePopup(),S&&S.hidePopup();for(var e=0;e<C.length;++e)C[e].hidePopup()}function f(){T=e(".ages-wrap",V);var n=V.find(".children-picker").length>0;A=new t.DropDownPicker(V.find(".rooms-picker"),"rooms",t.createStoreValuesDecorator("rgPicker.nRooms"),null,r.CONSTANTS.MIN_ROOMS,r.CONSTANTS.MAX_ROOMS),A.on(t.EVENTS.VALUE_CHANGED,function(e){D.update({nRooms:parseInt(e,10)})&&g()}),A.on(t.EVENTS.WILL_OPEN,h),p=new t.DropDownPicker(V.find(".adults-picker"),"adults",t.createStoreValuesDecorator(n?"rgPicker.nAdults":"rgPicker.nGuests"),null,r.CONSTANTS.MIN_ADULTS,r.CONSTANTS.MAX_ADULTS),p.on(t.EVENTS.VALUE_CHANGED,function(e){D.update({nAdults:parseInt(e,10)})&&g()}),p.on(t.EVENTS.WILL_OPEN,h),n&&(S=new t.DropDownPicker(V.find(".children-picker"),"children",t.createStoreValuesDecorator("rgPicker.nChildren"),null,r.CONSTANTS.MIN_CHILDREN,r.CONSTANTS.MAX_CHILDREN),S.on(t.EVENTS.VALUE_CHANGED,function(e){D.update({nChildren:parseInt(e,10)})&&g(),S.setValue(D.get().childrenAges.length)}),S.on(t.EVENTS.WILL_OPEN,h)),D.on(r.EVENTS.ROOMS_CHANGED,E),D.on(r.EVENTS.ADULTS_CHANGED,c),D.on(r.EVENTS.CHILDREN_CHANGED,d)}var A,p,S,T,D=n,V=e(i),C=[],_=V.find(".age_label").text(),I=new o(s.HIDE,s.UPDATE);this.on=I.on.bind(I),this.off=I.off.bind(I),f(),this.verifyAgesOfChildren=u,this.setInitialState=N}var s={HIDE:"hide",UPDATE:"update"};return Object.freeze?i.EVENTS=Object.freeze(s):i.EVENTS=s,i})});
require(["ta/prwidgets"],function(e){var t=e.define.bind(e,"ibex_hr_north_star_rooms_guests","handlers",["handlers","pickers"]);t(["widget","lib/jquery-amd","ta/Core/TA.Record","ta/Core/TA.Event","ta/Core/TA.Store","ta/page","hotels/RoomsGuests","hotels/RoomsGuestsUI","overlays/Overlay","overlays/styles/popover","overlays/position","overlays/options/closeOnDocClick","overlays/options/closeOnLegacyOverlay","overlays/options/closeOnTargetEvent","overlays/options/autoReposition","overlays/options/highlightElement","ta/util/LegacyDateShim","pickers"],function(e,t,n,o,r,s,i,a,l,c,g,d,h,u,v,f,m,p){"use strict";function E(){var e=D.get(),t=r.retrieve("rgPicker.nRooms"),n=t&&t.length>e.nRooms?t[e.nRooms]:"",o=r.retrieve("rgPicker.nAdults"),s=o&&o.length>e.nAdults?o[e.nAdults]:"",i=r.retrieve("rgPicker.nChildren"),a=i&&i.length>e.childrenAges.length?i[e.childrenAges.length]:"",l=b.find(".traveler_info_text");l.html([n,s,a].join(", "))}function S(e){var t=D.updateStore(),n=!!t,r=JSON.stringify(s.getDates("STAYDATES"));n||(n=O!==r),O=r,n&&(o.fireEvent("onLegacyGuestsChanged",t),y()&&e&&s.processNewTravelInfo(b.get(0)),o.fireEvent("searchFieldsChanged",b.get(0)),m.justUpdateSessionDates())}function _(e){e!==b.get(0)&&(D.fromStore(),A(!1))}function y(){if(!s.hasDates("STAYDATES"))return!1;for(var e=D.get().childrenAges,t=0;t<e.length;++t)if(e[t]<0)return!1;return!0}function A(e){R&&R.setInitialState(),E(),e&&S(!1)}function T(){var e=b.find(".initial-values-holder");D=new i({initialValuesHolder:e.get(0)}),O=JSON.stringify(s.getDates("STAYDATES")),o.on("searchFieldsChanged",_),D.hasStoreValues()?_():A(!0)}function k(e){C.hide(b.get(0)),e&&S(!0)}function w(e){if(!C||!t.contains(document,C.sourceElement)){var o=t(".pickers",b);o.removeClass("hidden"),C=new l(e,c(e,"below","","",o.get(0)),g.below(),d,h,u(window,["date_bar_docked","date_bar_undocked"]),v,f),R=new p(D,C.contentElement),R.on(p.EVENTS.HIDE,k),R.on(p.EVENTS.UPDATE,E),R.setInitialState()}C.isOpen()?C.hide():(C.show(),n.trackEventOnPage("roomguestpicker_module","in_view"));var r=!t(e).hasClass("highlight");r?n.trackEventOnPage("ATF_HR_Room_Guest_More","click"):n.trackEventOnPage("GuestSelector-hotelreview","close_click")}var D,O,C,R,b=t(e.element);return T(),{toggleTravelerInfo:w}})});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"resp_hr_room_grid","handlers",["handlers","hideable/PollingInitiator","hideable/RateVerificationController","hideable/RateVerificationView","hideable/RoomListController","hideable/bookingflow","hideable/latehandlers","hideable/pollingdatautils","hideable/pollingparamsfactory","hideable/roomlistconfig","hideable/roomlistmodel","hideable/tooltips","hideable/viewcontroller"]);t(["babel/babel-helpers","placement","ta/page","ta/Core/TA.Store","ta/Core/TA.FireEvent","utils/responsive","ta/util/Element"],function(e,t,a,i,n,o,l){function r(e){m&&"block"!==m.style.display&&(m.style.display="block"),e&&g&&"block"!==g.style.display&&(g.style.display="block")}function s(e){if(e&&"true"===e.getAttribute("data-hacLoading")&&n.fireEvent("page-repoll-not-done"),e&&!p){v=e;var t=f.querySelector(".fakeRow"),a=t&&/\bpaneLoading\b/.test(t.className);"true"===e.getAttribute("data-ibAvailability")?(r(o.tablet()),a&&(t.className=t.className.replace(/ *\bpaneLoading\b/,""))):t&&!a&&(t.className+=" paneLoading")}}function c(){m&&l.scrollIntoView(m,-68,!1)}function d(e,t){return e.srcElement&&"A"===e.srcElement.tagName&&e.srcElement.href?(document.location=e.srcElement.href,!0):void w(function(t){return t.loadRoomsClick(e,this)})}function u(e,t,a){w(function(e){e.ibClickIntercept(a)}),setTimeout(c,200)}function b(e){w(function(t){return t.navBarClick(e,this)})}function h(e){w(function(t){t.showLoadingPane(e)})}var f=document.getElementById(t.id),m=f.querySelector(".hr_tabs"),g=document.getElementById("TABS_ROOMS"),p=!1,v=null,w=function(e){var a=this;if(a.func=e,!a.active){if(a.active=!0,!p){m&&"true"===m.getAttribute("data-ibAvailability")&&r(!0);var i=f.querySelector(".ibLoadingPane"),n=f.querySelector(".fakeRow");if(i){if(i.style.height="",n){var o=n.className.replace(/ *\bpaneLoading\b/,"").replace(/ *\bactivePane\b/,"");n.className=o+" paneLoading"}i.className+=" activePane"}}t.require(["trjs!hideable/latehandlers","trjs!hr_responsive_irg","trcss!hr_responsive_irg","trdust!hr_responsive_irg-dust"],function(e){if(a.active=!1,p||(p=!0,e.init(v,!a.func),v=null),a.func){var t=a.func;a.func=null,t(e)}})}}.bind({});if(g){var y=m&&m.classList&&m.classList.contains("hiddenForNonReturnBooker");!y&&m&&"none"!==m.style.display&&(g.className=g.className.replace(/ *\bhidden\b/,"")),g.addEventListener?g.addEventListener("click",b.bind(g)):g.attachEvent&&g.attachEvent("onclick",b.bind(g))}var k=m&&"true"===m.getAttribute("data-autoShow"),S=m&&"true"===m.getAttribute("data-autoScroll");return window.sessionStorage&&null!==sessionStorage.getItem("showRooms")&&window.location.href.indexOf(sessionStorage.getItem("showRooms"))!==-1&&(sessionStorage.removeItem("showRooms"),k=S=!0),window.location.hash.indexOf("showRooms")>=0&&(k=S=!0),(k||S)&&(w(null),S&&c()),n.on("update-"+t.name,s),n.on("newInlinePageDates",h),a.on("newPageTravelInfo",h),m.querySelector(".inner[data-hacLoading=true]")&&n.fireEvent("page-repoll-not-done"),l.trackWhenScrolledIntoView("#"+t.id,["rooms","in_view"]),{roomsTabClick:d,ibClickIntercept:u}})});
