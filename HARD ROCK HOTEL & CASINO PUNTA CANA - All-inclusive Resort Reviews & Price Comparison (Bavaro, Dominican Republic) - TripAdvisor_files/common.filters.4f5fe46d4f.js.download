(window.$WP=window.$WP||[]).push({id:"@ta/common.filters",d:["vendor-babel","ta-platform","vendor-react-libs","ta-common","@ta/styleguide.checkbox","@ta/overlays.tooltip","@ta/common.typeahead","@ta/input.slider","@ta/input.dropdown","@ta/input.text-input","@ta/list.navigable-list","@ta/events.window","@ta/overlays.managers","@ta/common.page-dates","@ta/common.page-guests","@ta/overlays.modal","@ta/overlays.slide-in","@ta/styleguide.radio-button","@ta/events.event-boundary"],e:["./packages/common/filters/entrypoint.jsx"],x:{"./packages/common/filters/ActionPill.jsx":["a"],"./packages/common/filters/CategorySelections.jsx":["a"],"./packages/common/filters/CheckboxFilter.jsx":["a"],"./packages/common/filters/CheckboxList.jsx":["a"],"./packages/common/filters/DistanceFromFilter.jsx":["a"],"./packages/common/filters/FilterCounts.jsx":["a"],"./packages/common/filters/Filters.jsx":["a"],"./packages/common/filters/FiltersSelector.jsx":["a"],"./packages/common/filters/FiltersSharedUIState.jsx":["b","i","h","a","e","d","g","f","c"],"./packages/common/filters/Header.jsx":["a"],"./packages/common/filters/PageFilters.jsx":["d","a","b","c"],"./packages/common/filters/SelectionPills.jsx":["a"],"./packages/common/filters/StaticResultsFetcher.jsx":["a"],"./packages/common/filters/selection.jsx":["c","b","d","a"],"./packages/common/routing/Link.jsx":["a"]},m:{"./packages/common/filters/ActionPill.jsx":function(e,t,n){"use strict";var r=n("@babel/runtime/helpers/esm/defineProperty"),a=n.n(r),i=n("react"),l=n("@ta/common.classnames"),o=n.n(l),s=function e(t){var n=t.chevron,r=t.displayType,l=t.onClick,s=t.label;return i.createElement("li",{className:"".concat("common-filters-ActionPill__actionListItem--2nNoS"," label")},i.createElement("div",{className:o()(["ui_tag_box","is-action",{ui_icon:n,"single-chevron-down ":n},"common-filters-ActionPill__action--3zOr6",a()({},"common-filters-ActionPill__large--qshnb","large"===r)]),onClick:l},s))};s.defaultProps={displayType:"default",chevron:!1},t.a=s},"./packages/common/filters/CategorySelections.jsx":function(e,t,n){"use strict";var r=n("react"),a=n("@ta/common.i18n"),i=function e(t){return r.createElement("span",{className:"common-filters-CategorySelections__selectionPreview--Dpo0K"},t.items.length?t.items.map(function(e){return r.createElement("span",{className:"common-filters-CategorySelections__selectionPreviewItem--1Fqt9",key:"".concat(e.id,"-").concat(e.name||"")},e.value)}):r.createElement("span",null,Object(a.localize)("CRITERIA_ANY")))};i.defaultProps={items:[]},t.a=i},"./packages/common/filters/CheckboxFilter.jsx":function(e,t,n){"use strict";var r=n("@babel/runtime/helpers/esm/classCallCheck"),a=n.n(r),i=n("@babel/runtime/helpers/esm/createClass"),l=n.n(i),o=n("@babel/runtime/helpers/esm/possibleConstructorReturn"),s=n.n(o),c=n("@babel/runtime/helpers/esm/getPrototypeOf"),u=n.n(c),p=n("@babel/runtime/helpers/esm/inherits"),m=n.n(p),d=n("@babel/runtime/helpers/esm/assertThisInitialized"),h=n.n(d),f=n("@babel/runtime/helpers/esm/defineProperty"),g=n.n(f),v=n("react"),b=n("@ta/styleguide.icon"),k=n("@ta/common.i18n"),y=n("./packages/common/filters/CheckboxList.jsx");n.d(t,"a",function(){return C});var C=function(e){function t(){var e,n;a()(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return n=s()(this,(e=u()(t)).call.apply(e,[this].concat(i))),g()(h()(h()(n)),"expandOptionsToggle",function(e){n.props.onExpandChanged&&n.props.onExpandChanged(e)}),n}return m()(t,e),l()(t,[{key:"render",value:function e(){var t=this,n=this.props,r=n.choices,a=n.onValueChange,i=n.initialChoiceCount,l=n.displayCounts,o=n.includeLinks,s=n.isExpanded,c=s?Object(k.localize)("skinny_nav_less"):Object(k.localize)("more_link"),u=r.length>i,p=!s&&u?r.slice(0,i):r;return v.createElement(v.Fragment,null,function e(t){return v.createElement(y.a,{choices:t,onValueChange:a,includeLinks:o,displayCounts:l})}(p),u&&v.createElement("div",{onClick:function e(){return t.expandOptionsToggle(!s)},className:"common-filters-CheckboxFilter__moreLess--DKiZH"},c,v.createElement(b.Icon,{name:s?"caret-up":"caret-down",className:"common-filters-CheckboxFilter__inlineBlock--1LaOE"})))}}]),t}(v.PureComponent);g()(C,"defaultProps",{initialChoiceCount:4})},"./packages/common/filters/CheckboxList.jsx":function(e,t,n){"use strict";var r=n("react"),a=n("@ta/styleguide.checkbox"),i=n("@babel/runtime/helpers/esm/defineProperty"),l=n.n(i),o=n("@ta/common.classnames"),s=n.n(o),c=n("@ta/common.i18n"),u=n("@ta/styleguide.bubble-rating"),p=n("@babel/runtime/helpers/esm/classCallCheck"),m=n.n(p),d=n("@babel/runtime/helpers/esm/createClass"),h=n.n(d),f=n("@babel/runtime/helpers/esm/possibleConstructorReturn"),g=n.n(f),v=n("@babel/runtime/helpers/esm/getPrototypeOf"),b=n.n(v),k=n("@babel/runtime/helpers/esm/inherits"),y=n.n(k),C=n("@ta/overlays.tooltip"),F=n.n(C),_=n("@ta/styleguide.icon"),x=n("@ta/common.responsive"),S=n.n(x),E=function(e){function t(){return m()(this,t),g()(this,b()(t).apply(this,arguments))}return y()(t,e),h()(t,[{key:"render",value:function e(){var t,n=S()(),a="DESKTOP"!==n;a&&(t="MOBILE"===n?"windowX":"right");var i="right"===t?14:0;return r.createElement(F.a,{rightOf:!a,below:a,alignEdge:t,shiftX:i,shiftArrow:i,message:this.props.children,hideOnParentScroll:!0},function(e,t){return r.createElement("span",{ref:e,onClick:function e(n){n.preventDefault(),t&&t()},style:{marginLeft:5}},r.createElement(_.Icon,{name:"information-circle"}))})}}]),t}(r.PureComponent),T=function e(t){t.preventDefault(),t.currentTarget.parentNode.click()},I=function e(t){return function e(t,n,a){var i,o=t.label,p=t.displayLink,m=t.count,d=t.disabled,h=t.additiveCounts,f=t.infoTipText,g=t.subscript,v=t.bubbleRating,b=t.displayRatingAsBubbles,k=o;v&&b&&(k=r.createElement(u.BubbleRatingWithLabel,{rating:v,label:r.createElement("span",{className:s()("common-filters-LinkableFilterLabel__bubbleRatingLabel--2vNug",l()({},"common-filters-LinkableFilterLabel__disabled--3IE_P",d))},Object(c.localize)("ampersand_up"))}));var y=s()("common-filters-LinkableFilterLabel__label--XOPWc",(i={},l()(i,"common-filters-LinkableFilterLabel__disabled--3IE_P",d),l()(i,"common-filters-LinkableFilterLabel__withCounts--2XJlh",a),i)),C=function e(t,n){return{target:"_blank",className:n,href:t,onClick:T}}(p,y),F=h&&m?Object(c.localize)("plus_x_more_symbol_only",{0:m}):m,_=a?r.createElement("span",{className:s()("common-filters-LinkableFilterLabel__count--fSpDk",l()({},"common-filters-LinkableFilterLabel__disabled--3IE_P",d))},F):null,x=n?r.createElement("a",C," ",r.createElement("span",null,k)," "):r.createElement("span",{className:y},k);return r.createElement(r.Fragment,null,r.createElement("div",{className:"common-filters-LinkableFilterLabel__linkableFilterLabelWrapper--lsKRk"},r.createElement("span",{className:"common-filters-LinkableFilterLabel__labelWrapper--1X145"},x,f&&r.createElement(E,null,r.createElement("div",{className:"common-filters-LinkableFilterLabel__infoTipText--1KEuY"},f)),g&&r.createElement("span",{className:"common-filters-LinkableFilterLabel__subscript--3XMYh"},g)),_))}(t.choice,t.includeLinks,t.displayCounts)};t.a=function e(t){var n=t.choices,i=t.onValueChange,l=t.includeLinks,o=t.displayCounts;return r.createElement(r.Fragment,null,n.map(function(e){var t=e.value,n=e.selected,s=e.disabled;return r.createElement("div",{key:t,className:"common-filters-CheckboxList__checkboxWrapper--3_ghM"},r.createElement(a.Checkbox,{value:String(t),checked:n,onValueChange:i,disabled:s},r.createElement(I,{choice:e,includeLinks:l,displayCounts:o&&!n})))}))}},"./packages/common/filters/DistanceFromFilter.jsx":function(e,t,n){"use strict";var r=n("@babel/runtime/helpers/esm/classCallCheck"),a=n.n(r),i=n("@babel/runtime/helpers/esm/createClass"),l=n.n(i),o=n("@babel/runtime/helpers/esm/possibleConstructorReturn"),s=n.n(o),c=n("@babel/runtime/helpers/esm/getPrototypeOf"),u=n.n(c),p=n("@babel/runtime/helpers/esm/inherits"),m=n.n(p),d=n("@babel/runtime/helpers/esm/assertThisInitialized"),h=n.n(d),f=n("@babel/runtime/helpers/esm/defineProperty"),g=n.n(f),v=n("react"),b=n("react-redux"),k=n("@ta/common.i18n"),y=n("@ta/common.typeahead"),C=n("@ta/input.slider"),F={distSliderWrapper:"common-filters-DistanceFromFilter__distSliderWrapper--ZQL1L",distSliderLabel:"common-filters-DistanceFromFilter__distSliderLabel--3o8qO"},_=n("@ta/input.dropdown"),x=function(e){function t(){return a()(this,t),s()(this,u()(t).apply(this,arguments))}return m()(t,e),l()(t,[{key:"render",value:function e(){var t=this.props,n=t.options,r=t.magnitude,a=t.defaultIndex,i=t.onClick,l=t.onValueChange,o=t.open,s=n.map(function(e){return e.label}),c=n.findIndex(function(e){return e.magnitude===r});return v.createElement("div",{className:"common-filters-DistanceDropdown__dropdownWrapper--3Js4T"},v.createElement(_.Dropdown,{options:s,selectedIndex:c>=0?c:a,onSelect:function e(t){return l(n[t].magnitude)},onClick:i,open:o}))}}]),t}(v.PureComponent),S=n("./packages/common/filters/FiltersSelector.jsx"),E=n("./packages/common/filters/StaticResultsFetcher.jsx"),T=function(e){function t(e){var n;a()(this,t),n=s()(this,u()(t).call(this,e)),g()(h()(h()(n)),"onLocationChange",function(e){var t=n.state.hasUserSetDistance,r=e.displayValue||"",a=parseInt(e.value,10);n.props.onTextInputChange(r),n.setState({openDropdown:!t,focusTypeAhead:!1},n.props.onLocationSet(a,r))}),g()(h()(h()(n)),"onDistanceChange",function(e,t){setTimeout(function(){n.setState({openDropdown:!1,hasUserSetDistance:!0},function(){return n.props.onDistanceChange(e,t)})},0)}),g()(h()(h()(n)),"getDistanceSelector",function(){if(n.props.useDistSlider){var e=n.props.listFilter.units,t=n.props.listFilter.maxDistanceOption||25,r=n.props.selectedDistance||25,a=r>t;r>.5&&(r=Math.round(Math.min(r,t)));var i="".concat(r).concat(a?"+":""," ").concat(e);return v.createElement("div",{className:F.distSliderWrapper},v.createElement(C.ManagedSlider,{tappable:!0,min:1,max:2*t,minEnabled:!1,minHandleValue:1,maxHandleValue:2*r,step:1,exponent:2,onChange:function e(t,r){n.onDistanceChange(r/2,!0)},onRelease:function e(){n.onDistanceChange(r,!1)},maxLabel:v.createElement("div",{className:F.distSliderLabel},i)}))}return v.createElement(x,{options:n.props.listFilter.choices,magnitude:n.props.selectedDistance||1,onValueChange:function e(t){n.onDistanceChange(t,!1)},open:n.state.openDropdown,defaultIndex:1,onClick:function e(){n.setState({focusTypeAhead:!1,openDropdown:!0})}})}),g()(h()(h()(n)),"getPresetFetcher",function(e){return new E.a({results:e})}),g()(h()(h()(n)),"getTypeAheadFetcher",function(e,t){return new y.TypeaheadJsonFetcher({interleaved:!0,types:e||["attr","air","uni","train","hotel","eat","theme_park"],filter:["nobroad"],parentids:[t],name_depth:1,details:!0,legacy_format:!0,urlList:!1,max:8,uiOrigin:n.props.uiOrigin,source:n.props.uiOrigin,searchSessionId:n.props.searchSessionId})}),g()(h()(h()(n)),"presetPoiFetcher",void 0),g()(h()(h()(n)),"typeaheadFetcher",void 0);var r=e.listFilter,i=e.geoId,l=r.poiTypes,o=r.presetPOI;return n.presetPoiFetcher=n.getPresetFetcher(o),n.typeaheadFetcher=n.getTypeAheadFetcher(l,i),n.state={focusTypeAhead:!1,openDropdown:!1,hasUserSetDistance:!1},n}return m()(t,e),l()(t,[{key:"render",value:function e(){var t=this,n=this.props,r=n.listFilter,a=n.textInputValue,i=n.onTextInputChange,l=r.placeholderText,o=[{header:Object(k.localize)("hotels_popular_locations"),fetchers:[this.presetPoiFetcher,this.typeaheadFetcher]}];return v.createElement("div",null,v.createElement(S.a,{fetcherGroups:o,selectionChanged:this.onLocationChange,textInputValue:a,onTextInputChange:i,placeHolder:l,onClear:this.props.onClear,onOpen:function e(){t.setState({focusTypeAhead:!0,openDropdown:!1}),t.props.onTypeaheadOpen&&t.props.onTypeaheadOpen()},onBlur:function e(){t.setState({focusTypeAhead:!1,openDropdown:!1})},focus:this.state.focusTypeAhead,uiOrigin:this.props.uiOrigin,searchSessionId:this.props.searchSessionId}),this.getDistanceSelector())}}]),t}(v.PureComponent);t.a=Object(b.connect)(function(e){return{searchSessionId:e.tracking.searchSessionId||""}})(T)},"./packages/common/filters/FilterCounts.jsx":function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n("@babel/runtime/helpers/esm/classCallCheck"),a=n.n(r),i=n("@babel/runtime/helpers/esm/createClass"),l=n.n(i),o=n("@babel/runtime/helpers/esm/defineProperty"),s=n.n(o),c=function(){function e(t,n){a()(this,e),s()(this,"countsMap",{}),s()(this,"filterCountsEnabled",!1),t&&(this.countsMap=t,this.filterCountsEnabled=n)}return l()(e,[{key:"hasCounts",value:function e(){return this.countsMap&&this.countsMap.length}},{key:"getCount",value:function e(t,n){var r=this.countsMap[t];return r&&r[n]||0}},{key:"isEnabled",value:function e(){return this.filterCountsEnabled}}]),e}()},"./packages/common/filters/Filters.jsx":function(e,t,n){"use strict";var r=n("@babel/runtime/helpers/esm/objectSpread"),a=n.n(r),i=n("@babel/runtime/helpers/esm/slicedToArray"),l=n.n(i),o=n("@babel/runtime/helpers/esm/toConsumableArray"),s=n.n(o),c=n("@babel/runtime/helpers/esm/classCallCheck"),u=n.n(c),p=n("@babel/runtime/helpers/esm/createClass"),m=n.n(p),d=n("@babel/runtime/helpers/esm/possibleConstructorReturn"),h=n.n(d),f=n("@babel/runtime/helpers/esm/getPrototypeOf"),g=n.n(f),v=n("@babel/runtime/helpers/esm/inherits"),b=n.n(v),k=n("@babel/runtime/helpers/esm/assertThisInitialized"),y=n.n(k),C=n("@babel/runtime/helpers/esm/defineProperty"),F=n.n(C),_=n("react"),x=n("react-redux"),S=n("@ta/common.tracking"),E=n.n(S),T=n("@ta/common.responsive"),I=n.n(T),O=n("@ta/common.i18n"),P=n("@ta/common.features"),N=n("@ta/overlays.managers"),j=n("@ta/common.page-dates"),L=n("@ta/common.page-guests"),M=n("./packages/common/filters/CheckboxFilter.jsx"),R=n("./packages/common/filters/DistanceFromFilter.jsx"),w=n("@ta/overlays.tooltip"),A=n.n(w),D=n("@ta/events.event-boundary"),V=n.n(D),B=n("@ta/input.slider"),H=n("@ta/input.dropdown"),W=function(e){function t(e){var n;return u()(this,t),n=h()(this,g()(t).call(this,e)),F()(y()(y()(n)),"getFormattedPriceText",function(e,t){var r=O.globalize.formatCurrencyInteger(e);return t&&e>=n.props.maxPriceRange?Object(O.localize)("price_slider_plus_short",{0:r}):r}),F()(y()(y()(n)),"getTooltipAlignment",function(){if(n.isTooltipBelow())return"MOBILE"===I()()?"windowX":"right"}),F()(y()(y()(n)),"isTooltipBelow",function(){return"DESKTOP"!==I()()}),e.updatePriceRange(e.minPrice,e.maxPrice),n}return b()(t,e),m()(t,[{key:"render",value:function e(){var t=this,n=this.props,r=n.minPrice,a=n.maxPrice,i=n.maxPriceRange,l=n.pricingModes,o=n.selectedPricingMode,s=n.onPricingModeChange,c=n.disabled,u=this.isTooltipBelow(),p=this.getTooltipAlignment(),m=r,d=a;c||(m=-1===r?0:r,d=-1===a||a>i||isNaN(a)?i:a);var h=null;if(l&&l.length>1){var f=l.map(function(e){return _.createElement(_.Fragment,null,_.createElement(V.a,{events:["onClick"],className:"common-filters-PriceFilter__tooltip--1k_rf"},_.createElement(A.a,{rightOf:!u,below:u,alignEdge:p,message:e.disclaimerText,shiftX:12,shiftArrow:"right"===p?12:0,hideOnParentScroll:!0},function(e){return _.createElement("span",{className:"ui_icon information-circle",ref:e})})),_.createElement("span",{className:"common-filters-PriceFilter__pricingLabel--g1heY"},e.displayValue))}),g=l.findIndex(function(e){return e.value===t.props.selectedPricingMode})||0;h=_.createElement("div",{className:"common-filters-PriceFilter__dropdownWrapper--1Flii","data-testtarget":"pricing-mode"},_.createElement(H.Dropdown,{options:f,selectedIndex:g>=0?g:0,onSelect:function e(t){s&&s(t,o)}}))}return _.createElement("div",null,_.createElement(B.ManagedSlider,{disabled:this.props.disabled,minEnabled:!0,tappable:!0,min:0,max:i,minHandleValue:m,maxHandleValue:d,step:5,onChange:this.props.updatePriceRange,onRelease:this.props.onSet,minLabel:_.createElement("div",{className:"common-filters-PriceFilter__priceLabel--C0KL_"},this.getFormattedPriceText(m)),maxLabel:_.createElement("div",{className:"common-filters-PriceFilter__priceLabel--C0KL_"},this.getFormattedPriceText(d,!0))}),h)}}]),t}(_.PureComponent),z=n("@ta/styleguide.bubble-rating"),U=n("@ta/styleguide.radio-button"),G=n.n(U),K=n("@ta/common.classnames"),q=n.n(K),X=function(e){function t(){return u()(this,t),h()(this,g()(t).apply(this,arguments))}return b()(t,e),m()(t,[{key:"render",value:function e(){var t=this,n=this.props.choices;return _.createElement("div",null,(n||[]).map(function(e){var n=e.value,r=e.disabled,a=e.count,i=n===t.props.selectedVal,l=Number(n),o=l<5?Object(O.localize)("ampersand_up"):"",s=t.props.displayCounts&&!i?_.createElement("span",{className:q()("common-filters-TravelerRatingFilter__count--2Vsqm",F()({},"common-filters-TravelerRatingFilter__disabled--2UTO5",r))},a):null;return _.createElement("div",{className:"common-filters-TravelerRatingFilter__choiceWrapper--2zzcC",key:"key_".concat(n)},_.createElement(G.a,{name:"traveler_rating_filter",value:n,selected:i,disabled:r,onSelect:function e(){return t.props.onValueChange(n)}},_.createElement(z.BubbleRatingWithLabel,{rating:l,label:_.createElement("span",{className:q()("common-filters-TravelerRatingFilter__bubbleRatingLabel--1JcJk",F()({},"common-filters-TravelerRatingFilter__disabled--2UTO5",r))},o)})),s)}))}}]),t}(_.PureComponent),J=n("@babel/runtime/helpers/esm/extends"),Q=n.n(J),Y=function(e){function t(){return u()(this,t),h()(this,g()(t).apply(this,arguments))}return b()(t,e),m()(t,[{key:"render",value:function e(){var t=this.props.previewText,n=this.props.paramName?{"data-param":this.props.paramName}:{};return _.createElement("div",Q()({className:"common-filters-FilterWrapper__container--3m4Qd"},n),_.createElement("div",{className:"common-filters-FilterWrapper__headerText--1G5Z1"},this.props.headerText,t&&_.createElement("div",{className:"common-filters-FilterWrapper__selectionPreview--18xmQ"},t)),_.createElement("div",{className:"common-filters-FilterWrapper__content--3RxLJ"},this.props.children))}}]),t}(_.PureComponent),Z=n("./packages/common/filters/FiltersSharedUIState.jsx"),$=n("./packages/common/routing/Link.jsx"),ee=function(e){function t(){var e,n;u()(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=h()(this,(e=g()(t)).call.apply(e,[this].concat(a))),F()(y()(y()(n)),"state",{userHasInteractedWithFilter:!1,lastActionWasDeselect:!1}),n}return b()(t,e),m()(t,[{key:"render",value:function e(){var t=this,n=this.props,r=n.onValueChange,a=n.choices,i=n.linkChoice,l=n.onLinkChoiceClick,o=n.allChoicesSelected,s=this.state,c=s.userHasInteractedWithFilter,u=s.lastActionWasDeselect,p=a,m=!1;return c&&!u||!o||(p=a.map(function(e){return Object.assign(e,{selected:!1})})),p.forEach(function(e){e.selected&&(m=!0)}),_.createElement(_.Fragment,null,_.createElement(M.a,{choices:p.map(function(e){return Object.assign(e,{additiveCounts:m})}),includeLinks:!0,isExpanded:!1,onValueChange:function e(n,a){t.setState({userHasInteractedWithFilter:!0,lastActionWasDeselect:!a},function(){r(n,a)})},displayCounts:this.props.displayCounts}),i&&_.createElement($.a,{target:"_blank",href:i.displayLink,className:"common-filters-CategoryFilter__link--2_QC2",onClick:l},i.label))}}]),t}(_.PureComponent),te=n("@ta/styleguide.icon"),ne=function(e){function t(){return u()(this,t),h()(this,g()(t).apply(this,arguments))}return b()(t,e),m()(t,[{key:"render",value:function e(){var t=this.props,n=t.onValueChange,r=t.choices,a=t.isExpanded,i=t.linkOption,l=t.onLinkOptionClick,o=t.displayCounts,s=t.onExpandChanged;return _.createElement(_.Fragment,null,_.createElement(M.a,{choices:r,initialChoiceCount:6,includeLinks:!0,onValueChange:n,isExpanded:a,displayCounts:o,onExpandChanged:s}),i&&_.createElement($.a,{target:"_blank",href:i.displayLink,className:"common-filters-CheckboxWithLinkFilter__link--1jvLt",onClick:l},i.label,_.createElement(te.Icon,{name:"single-chevron-right-circle-fill",className:"common-filters-CheckboxWithLinkFilter__arrowIcon--1T5Y1"})))}}]),t}(_.PureComponent),re=n("@ta/common.typeahead"),ae=n("./packages/common/filters/FiltersSelector.jsx"),ie=n("./packages/common/filters/StaticResultsFetcher.jsx"),le=function(e){function t(e){var n;u()(this,t),n=h()(this,g()(t).call(this,e)),F()(y()(y()(n)),"state",{isTypeaheadOpen:!1}),F()(y()(y()(n)),"getPresetFetcher",function(e,t,n,r){return new ie.a({results:e,id:t,searchable:n,limit:r||-1})}),F()(y()(y()(n)),"getTypeAheadFetcher",function(e,t){return new re.TypeaheadJsonFetcher({interleaved:!0,types:e||["attr","air","uni","train","hotel","eat","theme_park"],filter:["nobroad"],parentids:[t],name_depth:1,details:!0,legacy_format:!0,urlList:!1,max:8})}),F()(y()(y()(n)),"locationSelectionChanged",function(e){var t,r=e.value,a=e.displayValue,i=e.scope;r&&(t="brands"===i?"b_".concat(r,"_").concat(n.props.geoId):"h_".concat(r,"_").concat(n.props.geoId)),n.props.onTextInputChange(a||""),n.props.onSet(t||"",a||"")}),F()(y()(y()(n)),"presetBrandsFetcher",void 0),F()(y()(y()(n)),"presetPoiFetcher",void 0),F()(y()(y()(n)),"typeaheadFetcher",void 0);var r=e.listFilter,a=e.geoId,i=r.poiTypes,l=r.presetBrands,o=r.presetPOI;return n.presetBrandsFetcher=n.getPresetFetcher(l,"brands",!0,3),n.presetPoiFetcher=n.getPresetFetcher(o,"hotels",!1),n.typeaheadFetcher=n.getTypeAheadFetcher(i,a),n}return b()(t,e),m()(t,[{key:"render",value:function e(){var t=this,n=this.props,r=n.listFilter,a=r.paramName,i=r.placeholderText,l=n.textInputValue,o=n.onTextInputChange,s=[{header:Object(O.localize)("popular_brands"),fetchers:[this.presetBrandsFetcher]},{header:Object(O.localize)("popular_hotels"),fetchers:[this.presetPoiFetcher,this.typeaheadFetcher]}];return _.createElement("div",{className:q()("common-filters-HotelBrandSearchFilter__container--1PRkZ",F()({},"common-filters-HotelBrandSearchFilter__typeaheadOpen--3G461",this.state.isTypeaheadOpen))},_.createElement(ae.a,{fetcherGroups:s,selectionChanged:this.locationSelectionChanged,textInputValue:l,onTextInputChange:o,placeHolder:i,onClear:function e(){return t.props.onClear(a)},onOpen:function e(){t.props.onOpen&&t.props.onOpen(),t.setState({isTypeaheadOpen:!0})},onClose:function e(){t.setState({isTypeaheadOpen:!1})}}))}}]),t}(_.PureComponent),oe=n("./packages/common/filters/CheckboxList.jsx"),se=function(e){function t(){return u()(this,t),h()(this,g()(t).apply(this,arguments))}return b()(t,e),m()(t,[{key:"render",value:function e(){var t=this.props,n=t.choices,r=t.includeLinks,a=t.displayCounts,i=t.onValueChange,l=function e(t){return _.createElement(oe.a,{choices:t,onValueChange:i,includeLinks:r,displayCounts:a})};return _.createElement("div",{style:{position:"relative"}},_.createElement("div",{className:"common-filters-CheckboxGrid__gridContent--1egka"},_.createElement("div",{className:"common-filters-CheckboxGrid__leftCol--3Ny_o"},l(n.slice(0,n.length/2))),_.createElement("div",{className:"common-filters-CheckboxGrid__rightCol--2TjTS"},l(n.slice(n.length/2+1)))),_.createElement("div",{className:"common-filters-CheckboxGrid__fadeShadow--D7Wgw"}))}}]),t}(_.PureComponent),ce=function(e){function t(){var e,n;u()(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=h()(this,(e=g()(t)).call.apply(e,[this].concat(a))),F()(y()(y()(n)),"state",{isTypeaheadOpen:!1}),n}return b()(t,e),m()(t,[{key:"render",value:function e(){var t=this,n=this.props,r=n.fetcherGroups,a=n.choices,i=n.placeholderText,l=n.isExpanded,o=n.textInputValue,s=n.onTextInputChange,c=n.onExpandChanged,u=n.onTypeaheadResultSelected,p=n.onValueChange,m=n.useCheckboxGrid,d=n.displayCounts;return _.createElement("div",{className:q()("common-filters-CheckboxSearchFilter__container--1ALQN",F()({},"common-filters-CheckboxSearchFilter__typeaheadOpen--26O4G",this.state.isTypeaheadOpen))},_.createElement("div",{className:"common-filters-CheckboxSearchFilter__searchWrapper--3a0kG"},_.createElement(ae.a,{fetcherGroups:r,selectionChanged:u,textInputValue:o,onTextInputChange:s,placeHolder:i,onClear:function e(){},onOpen:function e(){t.props.onOpen&&t.props.onOpen(),t.setState({isTypeaheadOpen:!0})},onClose:function e(){t.setState({isTypeaheadOpen:!1})}})),function e(){return 0===a.length?null:m?_.createElement(se,{choices:a,onValueChange:p,displayCounts:d}):_.createElement(M.a,{choices:a,onValueChange:p,isExpanded:l,onExpandChanged:c,initialChoiceCount:6,displayCounts:d})}())}}]),t}(_.PureComponent),ue=function(e){function t(e){var n;u()(this,t),n=h()(this,g()(t).call(this,e)),F()(y()(y()(n)),"onValueChange",function(e,t){var r=0===e.indexOf("h_"),a={value:r?e.split("_")[1]:e,scope:r?"hotels":"brands",type:r?"location_id":"brand"};n.locationSelectionChanged(a,t)}),F()(y()(y()(n)),"getPresetFetcher",function(e,t,n,r){return new ie.a({results:e,id:t,searchable:n,limit:r||-1,waitForUserInput:!0})}),F()(y()(y()(n)),"getTypeAheadFetcher",function(e,t){return new re.TypeaheadJsonFetcher({interleaved:!0,types:e||["hotel"],filter:["nobroad"],parentids:[t],name_depth:1,details:!0,legacy_format:!0,urlList:!1,max:8})}),F()(y()(y()(n)),"locationSelectionChanged",function(e,t){var r,a=e.value,i=e.displayValue,l=e.scope;a&&(n.props.onTextInputChange(""),"brands"===l?(r="b_".concat(a,"_").concat(n.props.geoId),n.props.onSet(r||"","",t)):(r="h_".concat(a,"_").concat(n.props.geoId),n.props.onSet(r||"",i||"",t)))}),F()(y()(y()(n)),"presetBrandsFetcher",void 0),F()(y()(y()(n)),"typeaheadFetcher",void 0);var r=e.listFilter,a=e.geoId,i=r.poiTypes,l=r.presetBrands;return n.presetBrandsFetcher=n.getPresetFetcher(l,"brands",!0,6),n.typeaheadFetcher=n.getTypeAheadFetcher(i,a),n}return b()(t,e),m()(t,[{key:"render",value:function e(){var t=this,n=this.props,r=n.listFilter,a=r.placeholderText,i=r.presetBrands,l=n.selectedHotelChoices,o=n.isExpanded,c=n.textInputValue,u=n.onTextInputChange,p=n.onExpandChanged,m=n.useCheckboxGrid,d=n.displayCounts,h=[{header:Object(O.localize)("popular_brands"),fetchers:[this.presetBrandsFetcher]},{header:Object(O.localize)("popular_hotels"),fetchers:[this.typeaheadFetcher]}],f=(i||[]).map(function(e){return{value:e.value,label:e.name,selected:!!t.props.selectedBrandIds.find(function(t){return e.value===t}),count:e.count,additiveCounts:t.props.selectedBrandIds.length>0}}),g=m?f:f.sort(function(e,t){return e.selected?-1:t.selected?1:isNaN(e.count)||isNaN(t.count)?f.indexOf(t)-f.indexOf(e):t.count-e.count});return g=[].concat(s()(l),s()(g)),_.createElement(ce,{choices:g,onValueChange:this.onValueChange,fetcherGroups:h,onTypeaheadResultSelected:function e(n){return t.locationSelectionChanged(n,!0)},placeholderText:a,isExpanded:o,onExpandChanged:p,textInputValue:c,onTextInputChange:u,useCheckboxGrid:m,displayCounts:d})}}]),t}(_.PureComponent),pe=function(e){function t(e){var n;u()(this,t),n=h()(this,g()(t).call(this,e)),F()(y()(y()(n)),"state",{textInputValue:""}),F()(y()(y()(n)),"getPresetFetcher",function(e,t,n){return new ie.a({results:e,id:t,searchable:n,limit:4})}),F()(y()(y()(n)),"selectionChanged",function(e){var t=e.value,r=n.props;(0,r.onSet)(r.listFilter.paramName,t||"")}),F()(y()(y()(n)),"handleItemRemoveClick",function(e){n.props.onClear(n.props.listFilter.paramName,e)}),F()(y()(y()(n)),"presetFetcher",void 0);var r=e.listFilter,a=r.presetOptions,i=r.scopeId;return n.presetFetcher=n.getPresetFetcher(a,i,!0),n}return b()(t,e),m()(t,[{key:"render",value:function e(){var t=this,n=this.props,r=n.listFilter,a=r.paramName,i=r.placeholderText,l=r.multiSelect,o=r.listHeader,s=n.selectedItems,c=this.state.textInputValue;!l&&s&&s.length>0&&(c=s[0].details.name);var u=[{header:o,fetchers:[this.presetFetcher]}];return _.createElement("div",null,_.createElement(ae.a,{fetcherGroups:u,selectionChanged:this.selectionChanged,textInputValue:c,onTextInputChange:function e(n){t.setState({textInputValue:n})},placeHolder:i,onClear:function e(){t.setState({textInputValue:""}),t.props.onClear(a)},clearAfterSelection:l,onOpen:this.props.onOpen}),l?_.createElement("div",null,s.map(function(e){var n=e.details,r=n.id,a=n.name;return _.createElement("div",{className:"ui_tag_box ui_icon times ".concat("common-filters-StaticListSearchFilter__pill--E3MuI"),key:r,onClick:function e(){return t.handleItemRemoveClick(r.toString())}},a)})):"")}}]),t}(_.PureComponent),me=n("@ta/styleguide.button"),de=n.n(me),he=n("@ta/overlays.modal"),fe=n("@ta/overlays.slide-in"),ge=n.n(fe),ve=function(e){function t(){return u()(this,t),h()(this,g()(t).apply(this,arguments))}return b()(t,e),m()(t,[{key:"render",value:function e(){var t="MOBILE"===I()(),n=this.props,r=n.title,a=n.applyButtonText,i=n.children,l=n.modalKey,o=n.clearAll,s=function e(t){return _.createElement("div",{className:"common-filters-FilterModal__modalBottom--2gzCl"},_.createElement("div",{className:"common-filters-FilterModal__modalActions--22u_H"},_.createElement("span",{onClick:o},Object(O.localize)("deselect_all_filters"))," "),_.createElement(de.a,{type:"primary",onClick:t},a))};return _.createElement(_.Fragment,null,_.createElement(N.Closer,null,function(e){return function e(n){if(t){var a=_.createElement("div",{className:"common-filters-FilterModal__backBar--1qlfu"},_.createElement("div",{onClick:n},_.createElement(te.Icon,{name:"single-chevron-left"})));return _.createElement(ge.a,{name:l,slideFrom:"right",header:a,footer:s(n),bodyContentClass:"common-filters-FilterModal__mobileModalBody--3HW6u",hideX:!0,noBackdrop:!0},function(){return _.createElement(_.Fragment,null,_.createElement("div",{className:"common-filters-FilterModal__modalHeader--hd16-"},r),i)})}return _.createElement(he.Modal,{name:l},_.createElement(_.Fragment,null,_.createElement("div",{className:"common-filters-FilterModal__modalHeader--hd16-"},r),i,s(n)))}(e)}))}}]),t}(_.PureComponent),be=n("./packages/common/filters/selection.jsx"),ke=3,ye=10,Ce=function(e){function t(){var e,n;u()(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=h()(this,(e=g()(t)).call.apply(e,[this].concat(a))),F()(y()(y()(n)),"getFilterModal",function(e,t){return _.createElement(ve,{modalKey:n.getModalKeyForFilter(t),title:t.title,applyButtonText:Object(O.localize)("h_filters_apply"),clearAll:function e(){return n.clearFilterWithTracking(t)}},e)}),F()(y()(y()(n)),"getModalKeyForFilter",function(e){return"".concat(n.props.filtersSource,"_").concat(e.paramName)}),F()(y()(y()(n)),"getCheckboxFilter",function(e){var t=n.props,r=t.pageFilters,a=t.setFilter,i=t.setMultiFilter,l=t.clearFilter,o=t.filterCounts,c=t.sharedUIState,u=e.paramName,p=e.choices,m=c.isFilterExpanded(u),d=p.map(function(e){var t=o&&o.getCount(u,e.value)||0;return Object.assign(e,{selected:r.isSelected(u,e.value),count:t,disabled:o&&o.isEnabled()&&t<=0&&"df"!==u&&!(r.isSelected(u,e.value)&&"cat"!==u)})}),h=d.filter(function(e){return e.selected}).length>0;if("pop"===u){var f=o&&o.isEnabled(),g=Object(be.b)(r,d);return n.getCheckBoxFilterWithOpener(e,u,g,function t(r,o){n.trackCheckboxFilterChange(e.trackingName,d,r,o);var s=r.split("_");if(o){if(a(e.paramName,r),2===s.length)if("trating"===s[0]){var c=n.props.availableFilters.find(function(e){return"trating"===e.paramName}).choices,u=Object(be.d)(c,s[1]);i(s[0],u)}else a(s[0],s[1])}else l(e.paramName,r),"trating"===s[0]?l(s[0]):l(s[0],s[1])},m,f)}if("catTag"===u){var v=e.linkOption,b=d.filter(function(e){return e.selected}).map(function(e){return String(e.value)});return _.createElement(ne,{choices:d.map(function(e){return Object.assign(e,{additiveCounts:h})}),linkOption:v,isExpanded:m,onExpandChanged:function t(r){return n.expandFilterChange(e,r)},onLinkOptionClick:function t(){E()({module:"Filters_".concat(e.trackingName||""),action:"click_link",context:v&&v.tracker})},onValueChange:function t(r,a){n.trackCheckboxFilterChange(e.trackingName,d,r,a),a?i(u,[].concat(s()(b),[r])):l(u,r)},displayCounts:o&&o.isEnabled()})}if("cat"===u){var k=d.slice(0,ke),y=d[ke],C=k.filter(function(e){return e.selected}).map(function(e){return String(e.value)}),F=0===C.length||C.length===ke;return _.createElement(ee,{choices:k.map(function(e){return Object.assign(e,{additiveCounts:h})}),linkChoice:y,onLinkChoiceClick:function t(){E()({module:"Filters_".concat(e.trackingName||""),action:"click_link",context:y.tracker})},allChoicesSelected:F,onValueChange:function t(r,a){n.trackCheckboxFilterChange(e.trackingName,d,r,a),a?i(u,F?[r]:[].concat(s()(C),[r])):l(u,r)},displayCounts:o&&o.isEnabled()})}var x=o&&o.isEnabled()&&"df"!==u,S=d.map(function(e){return Object.assign(e,{additiveCounts:"zfc"===u&&h})});return n.getCheckBoxFilterWithOpener(e,u,S,function t(r,i){n.trackCheckboxFilterChange(e.trackingName,d,r,i),i?a(e.paramName,r):l(e.paramName,r)},m,x)}),F()(y()(y()(n)),"getCheckBoxFilterWithOpener",function(e,t,r,a,i,l){var o=Object(P.featureIsEnabled)("hotels_filters_reskin")&&("MOBILE"===I()()||r.length>ye);return _.createElement(N.Opener,{name:n.getModalKeyForFilter(e)},function(t){return _.createElement("div",null,_.createElement(M.a,{choices:r,onValueChange:a,isExpanded:i&&!o,onExpandChanged:function r(a){o?t():n.expandFilterChange(e,a)},displayCounts:l}),o&&n.getFilterModal(_.createElement(se,{choices:r,onValueChange:a,includeLinks:!0,displayCounts:l}),e))})}),F()(y()(y()(n)),"getTravelerRatingFilter",function(e){var t=n.props,r=t.pageFilters,a=t.setMultiFilter,i=t.filterCounts,l=e,o=l.paramName,s=l.choices,c="";(s||[]).forEach(function(e){var t=e.value;r.isSelected(o,String(t))&&(c=t)});var u=s.map(function(e){var t=i&&i.getCount(o,e.value)||0;return Object.assign(e,{selected:r.isSelected(o,e.value),count:t,disabled:i&&i.isEnabled()&&t<=0})});return _.createElement(X,{choices:u,selectedVal:String(c),onValueChange:function t(r){n.trackRadioFilterChange(e.trackingName,s,r);var i=Object(be.d)(s,r);a(o,i)},displayCounts:i&&i.isEnabled()})}),F()(y()(y()(n)),"getPriceFilterData",function(e){var t=e.filters.pRange;if(!t)return null;var n=t.get();return n&&n.split(",")}),F()(y()(y()(n)),"getPriceFilter",function(e){var t=n.props,r=t.pageFilters,a=t.setFilter,i=t.pricingModeUpdate,o=t.sharedUIState,s=t.setSharedUIState,c=n.props.nights||e.numNights,u=n.props.rooms||e.numRooms,p=e.paramName,m=e.trackingName,d=e.pricingModes,h=n.getPriceFilterData(r),f=e.selectedPricingMode;if(h&&Object(P.featureIsEnabled)("pricing_mode_filter")){var g=l()(h,4);f=g[3]}var v=n.props.sharedUIState.getRangeMax();v="ALL_IN_FULL_STAY"===f?v*c*u:v;var b=n.isDisabled(e),k=o.getPriceRange(),y=k.min,C=k.max,F=function e(t,n){s(Z.h,{min:t,max:n})};return _.createElement(W,{disabled:b,listFilter:e,minPrice:y,maxPrice:C||v,updatePriceRange:F,maxPriceRange:v,selectedPricingMode:f,pricingModes:d,onSet:function e(){var t=C>=v||0===C?-1:C;a(p,"".concat(y<=0?-1:y,",").concat(t,",").concat(n.props.currencyCode,",").concat(f)),n.trackPriceFilterChange(m,y,C,v)},onPricingModeChange:function e(t,r){var l=d[t];if(l){if(l.value===r)return;a(p,"-1,-1,".concat(n.props.currencyCode,",").concat(l.value)),F(0,-1),i&&i(),n.trackPricingModeChange(m,l.value)}}})}),F()(y()(y()(n)),"getDistanceFilter",function(e,t){var r=n.props,a=r.pageFilters.filters,i=r.setFilter,l=r.sharedUIState,o=r.setSharedUIState,s=a.distFrom&&a.distFrom.get(),c=s&&s.split(",")||[],u=c&&parseFloat(c[0]),p=c.slice(3).join(","),m=l.getDistanceFrom(),d=m.poiTextInput,h=m.distFrom||(e.useDistSlider?25:1),f=function e(t){o(Z.a,{poiTextInput:t,distFrom:h})},g=function t(r,a,l,o){var s="".concat(r,",").concat(l,",").concat(e.units,",").concat(a);i(e.paramName,s),n.trackDistanceFilterChange(e.trackingName,s,o)};return _.createElement(R.a,{listFilter:e,onClear:function t(){return n.clearTypeaheadFilter(e)},textInputValue:d,selectedDistance:h,onTextInputChange:f,onDistanceChange:function e(t,n){!function e(t){o(Z.a,{distFrom:t,poiTextInput:d})}(t),n||!u||isNaN(u)||g(u,p,t,!0)},onLocationSet:function e(t,n){f(n),g(t,n,h,!1)},geoId:t,onTypeaheadOpen:function t(){return n.trackTypeaheadOpen(e.trackingName)},useDistSlider:e.useDistSlider,uiOrigin:n.props.uiOriginForTypeaheadTracking})}),F()(y()(y()(n)),"getHotelBrandMultiSelectFilter",function(e,t){var r=n.props,a=r.sharedUIState,i=r.setSharedUIState,l=r.pageFilters,o=r.filterCounts,s=a.isFilterExpanded(e.paramName),c=[],u=[];l.get(e.paramName).split(",").filter(function(e){return!!e}).forEach(function(e){var t=e.split("_"),n=t[1];if("h"===t[0]){var r=a.getHotelNameFromValue(e);r&&u.push({value:e,label:r||"",selected:!0})}else"b"===t[0]&&c.push(n)});var p=function e(t){i(Z.e,t)},m=Object(P.featureIsEnabled)("hotels_filters_reskin")&&("MOBILE"===I()()||e.presetBrands&&e.presetBrands.length>ye),d=function r(l,d){return _.createElement(ue,{geoId:t,listFilter:e,selectedBrandIds:c,selectedHotelChoices:u,onSet:function t(r,l,o){E()({module:"Filters_".concat(e.trackingName,"_typeahead"),action:"click_selection",context:r}),o?(function e(t,n){var r=a.getDisplayValues();r[t]=n,i(Z.d,Object.assign({},r))}(r,l),n.props.setFilter(e.paramName,r)):n.props.clearFilter(e.paramName,r)},onClear:function t(){return n.clearTypeaheadFilter(e)},textInputValue:a.getHotelBrandSearchText(),onTextInputChange:p,onOpen:function t(){return n.trackTypeaheadOpen(e.trackingName)},isExpanded:s&&!m,onExpandChanged:function t(r){m?(r&&d&&d()&&d(),n.trackExpandFilterChange(e,r)):n.expandFilterChange(e,r)},useCheckboxGrid:l,displayCounts:o&&o.isEnabled()})};return m?_.createElement(N.Opener,{name:n.getModalKeyForFilter(e)},function(t){return _.createElement(_.Fragment,null,d(!1,t),m&&n.getFilterModal(d(!0),e))}):d(!1)}),F()(y()(y()(n)),"getHotelBrandSearchFilter",function(e,t){var r=n.props,a=r.sharedUIState,i=r.setSharedUIState;return _.createElement(le,{geoId:t,listFilter:e,onSet:function t(r,a){E()({module:"Filters_".concat(e.trackingName,"_typeahead"),action:"click_selection",context:r}),n.props.setFilter(e.paramName,r,a)},onClear:function t(){return n.clearTypeaheadFilter(e)},textInputValue:a.getHotelBrandSearchText(),onTextInputChange:function e(t){i(Z.e,t)},onOpen:function t(){return n.trackTypeaheadOpen(e.trackingName)}})}),F()(y()(y()(n)),"getStaticListSearchFilter",function(e){var t=n.props,r=t.pageFilters,a=t.setFilter,i=e.presetOptions.filter(function(t){var n=t.details.id;return n&&r.isSelected(e.paramName,n.toString())});return _.createElement(pe,{listFilter:e,onSet:function t(n,r){E()({module:"Filters_".concat(e.trackingName,"_typeahead"),action:"click_selection",context:r}),a(n,r)},onClear:function t(r,a){return n.clearTypeaheadFilter(e,a)},selectedItems:i,onOpen:function t(){return n.trackTypeaheadOpen(e.trackingName)}})}),F()(y()(y()(n)),"isDisabled",function(e){return e.paramName===Z.h&&n.props.sharedUIState.getRangeMax()<=0}),F()(y()(y()(n)),"trackExpandFilterChange",function(e,t){E()({module:"Filters_".concat(e.trackingName),action:"click_link",context:t?"more":"less"})}),F()(y()(y()(n)),"expandFilterChange",function(e,t){n.trackExpandFilterChange(e,t),n.props.toggleFilterExpand(e.paramName,t)}),F()(y()(y()(n)),"trackDistanceFilterChange",function(e,t,n){E()({module:"Filters_".concat(e||"","_").concat(n?"radius":"typeahead"),action:"click_select",context:t})}),F()(y()(y()(n)),"clearTypeaheadFilter",function(e,t){E()({module:"Filters_".concat(e.trackingName||""),action:"unselect_searchbar",context:t||""}),n.props.clearFilter(e.paramName,t)}),F()(y()(y()(n)),"clearFilterWithTracking",function(e){E()({module:"Filters_".concat(e.trackingName||""),action:"clear"}),n.props.clearFilter(e.paramName)}),F()(y()(y()(n)),"trackPriceFilterChange",function(e,t,n,r){E()({module:"Filters_".concat(e||""),action:"click_slider",context:"".concat(t," - ").concat(n," ").concat(n>=r?"+":"")})}),F()(y()(y()(n)),"trackPricingModeChange",function(e,t){E()({module:"Filters_".concat(e||""),action:"pricing_mode",context:t})}),F()(y()(y()(n)),"trackCheckboxFilterChange",function(e,t,n,r){var a=t.find(function(e){return e.value===n});E()({module:"Filters_".concat(e||""),action:r?"click_checkbox":"unselect_checkbox",context:a&&a.tracker})}),F()(y()(y()(n)),"trackTypeaheadOpen",function(e){E()({module:"Filters_".concat(e,"_typeahead"),action:"click_dropdown"})}),F()(y()(y()(n)),"trackRadioFilterChange",function(e,t,n){var r=t.find(function(e){return e.value===n});E()({module:"Filters_".concat(e||""),action:"click_radio",context:r&&r.tracker})}),F()(y()(y()(n)),"trackDropdownFilterChange",function(e,t,n){var r=t.find(function(e){return e.value===n});E()({module:"Filters_".concat(e||""),action:"-1"===n?"unselect_any":"click_dropdown",context:r&&r.tracker})}),n}return b()(t,e),m()(t,[{key:"render",value:function e(){var t=this,n=this.props,r=n.geoId;return n.availableFilters.filter(function(e){return e.visible}).map(function(e){var n=e.paramName,a=e.title,i=function e(n){switch(n.filterType){case"checkbox":return t.getCheckboxFilter(n);case"trating":return t.getTravelerRatingFilter(n);case"price":return t.getPriceFilter(n);case"distanceFrom":return t.getDistanceFilter(n,r);case"hotelBrandSearch":return Object(P.featureIsEnabled)("hotels_filters_reskin")?t.getHotelBrandMultiSelectFilter(n,r):t.getHotelBrandSearchFilter(n,r);case"staticListSearch":return t.getStaticListSearchFilter(n);default:return null}}(e);return _.createElement(Y,{key:n,headerText:a,paramName:n},i)})}}]),t}(_.Component);t.a=Object(x.connect)(function(e,t){var n=e&&e.travelerInfo&&e.travelerInfo.hotels||{},r=Object(j.decode)(n.stayDates),i=r.startDate,l=r.endDate,o=i&&l&&new j.CalendarDate(i).daysTo(new j.CalendarDate(l)),s=Object(L.decode)(n.guests).rooms,c="CNY"===e.i18n.currencyCode?"RMB":e.i18n.currencyCode;return a()({},t,{nights:o,rooms:s,currencyCode:c})})(Ce)},"./packages/common/filters/FiltersSelector.jsx":function(e,t,n){"use strict";var r=n("@babel/runtime/helpers/esm/toConsumableArray"),a=n.n(r),i=n("@babel/runtime/helpers/esm/classCallCheck"),l=n.n(i),o=n("@babel/runtime/helpers/esm/createClass"),s=n.n(o),c=n("@babel/runtime/helpers/esm/possibleConstructorReturn"),u=n.n(c),p=n("@babel/runtime/helpers/esm/getPrototypeOf"),m=n.n(p),d=n("@babel/runtime/helpers/esm/inherits"),h=n.n(d),f=n("@babel/runtime/helpers/esm/assertThisInitialized"),g=n.n(f),v=n("@babel/runtime/helpers/esm/defineProperty"),b=n.n(v),k=n("react"),y=n("@ta/common.i18n"),C=n("@ta/input.text-input"),F=n("@ta/common.classnames"),_=n.n(F),x=n("@ta/list.navigable-list"),S=n("@ta/styleguide.icon"),E=n("@ta/events.window"),T=n.n(E),I=n("@ta/common.typeahead"),O=function e(t){var n=t.title,r=t.iconName,a=t.active;return k.createElement("div",{className:_()("common-filters-FiltersBasicResult__result--jnl8W",b()({},"common-filters-FiltersBasicResult__active--A7bHt",a))},k.createElement("div",{className:"common-filters-FiltersBasicResult__leftIcon--1QqNs"},k.createElement(S.Icon,{name:r})),k.createElement("div",{className:_()("common-filters-FiltersBasicResult__title--3syc0",b()({},"common-filters-FiltersBasicResult__LTR--18kyJ",t.forceLTR))},n))};O.defaultProps={active:void 0,forceLTR:!1};var P=O,N=function(e){function t(){var e,n;l()(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=u()(this,(e=m()(t)).call.apply(e,[this].concat(a))),b()(g()(g()(n)),"onSelect",function(e){var t="click"===e.type?"click":"enter";n.props.tracker.trackSelection(n.props.result,t),n.props.tracker.trackEventViaMEVTCookie(n.props.result,t);var r=n.props.result.value;n.props.onSelection&&n.props.onSelection(e,{type:"location_id",value:r,displayValue:n.props.result.details.name,scope:n.props.result.scope})}),b()(g()(g()(n)),"escapeRegExp",function(e){return e.replace(/[-[\]{}()*+?.\\^$|,#\s]/g,"\\$&")}),b()(g()(g()(n)),"boldQuery",function(e,t){if(0===t.length)return k.createElement("span",null,e);var r=e.split(new RegExp("(".concat(n.escapeRegExp(t),")"),"gi"));return k.createElement("span",null,r.map(function(e,n){return e.toLowerCase()===t.toLowerCase()?k.createElement("b",{key:n},e):e}))}),n}return h()(t,e),s()(t,[{key:"render",value:function e(){var t=this.props.result,n=t.type,r=t.details.name,a=r&&r.charCodeAt&&8234===r.charCodeAt(0),i=Object(I.getIconFromResultType)(n),l=this.boldQuery(r,this.props.query||"");return k.createElement(x.NavigableListItem,{onSelection:this.onSelect,onMouseMove:this.props.onMouseMove,active:this.props.active},k.createElement(P,{title:l,iconName:i,active:this.props.active,forceLTR:a}))}}]),t}(k.Component);b()(N,"defaultProps",{onSelection:void 0,onMouseMove:void 0,active:!1});var j=N,L=function e(t){var n=t.title;return k.createElement("div",{className:"common-filters-FiltersSelector__listHeader--1oORg"},n)};L[x.NonNavigableItem]=!0;var M=function(e){function t(){var e,n;l()(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=u()(this,(e=m()(t)).call.apply(e,[this].concat(i))),b()(g()(g()(n)),"state",{opening:!1,isOpen:!1}),b()(g()(g()(n)),"onSelection",function(e,t){t&&"location_id"===t.type&&t.value&&n.setState({opening:!1,isOpen:!1},function(){n.props.onClose&&n.props.onClose(),n.props.selectionChanged(t),n.updateSearch("")})}),b()(g()(g()(n)),"onInteractionStart",function(){var e=Date.now();n.props.fetcherGroups.forEach(function(t){t.fetchers.forEach(function(t){t instanceof I.TypeaheadJsonFetcher&&t.setAdditionalParams({startTime:String(e)})})}),n.tracker.setInteractionStart(e),n.tracker.trackInteractionStart()}),b()(g()(g()(n)),"getAllResults",function(e){var t=[],r=n.props.textInputValue.length;return n.props.fetcherGroups.forEach(function(i){var l=i.header,o=i.fetchers,s=[];o.forEach(function(t){var i=t.id,l=t.type,o=t.searchable,c=e[i];c&&("staticResults"===l&&(r<3||o)||"staticResults"!==l&&r>=3)&&a()(c).map(function(e){return function(t,r){return k.createElement(j,{result:e,tracker:n.tracker,onMouseMove:r,onSelection:n.onSelection,active:t,query:n.props.textInputValue,key:"result=".concat(i,"_").concat(e.value)})}}).forEach(function(e){return s.push(e)})}),s.length&&(l&&r<3&&t.push(function(){return k.createElement(L,{title:l,key:l})}),t.push.apply(t,s))}),t}),b()(g()(g()(n)),"tracker",new I.TypeaheadTracking(n.props.uiOrigin,n.props.searchSessionId||"")),b()(g()(g()(n)),"textInput",void 0),b()(g()(g()(n)),"updateSearch",void 0),b()(g()(g()(n)),"componentMounted",!1),n}return h()(t,e),s()(t,[{key:"componentDidMount",value:function e(){this.componentMounted=!0}},{key:"componentWillUnmount",value:function e(){this.componentMounted=!1}},{key:"render",value:function e(){var t,n=this,r=this.props.placeHolder||Object(y.localize)("common_Search"),i=this.props.onFocus?this.props.onFocus:function(){},l=this.props.onBlur?this.props.onBlur:function(){},o=this.props.onClose?this.props.onClose:function(){},s=(t=[]).concat.apply(t,a()(this.props.fetcherGroups.map(function(e){return e.fetchers}))),c=this.props.textInputValue;return k.createElement(k.Fragment,null,k.createElement(I.Typeahead,{fetchers:s},function(e,t){n.updateSearch=t;var a=n.getAllResults(e),o=e&&!function e(t){return!t||0===t.length}(a)?e:null;return k.createElement("div",null,k.createElement("span",{className:"ui_icon search ".concat("common-filters-FiltersSelector__textInput--3op80")},k.createElement(I.TypeaheadTextInput,{inputComponentType:C.ManagedTextInput,inputComponentClassName:_()("common-filters-FiltersSelector__textInputComponent--2eyhu",b()({},"common-filters-FiltersSelector__hasTextValue--nhViK",c)),value:c,onChange:function e(t){n.props.onTextInputChange(t)},onFocus:function e(){n.state.isOpen||(n.setState({opening:!0,isOpen:!0}),n.props.onOpen&&n.props.onOpen()),i(),t("")},onBlur:function e(){l()},onQueryChange:function e(n){t(n)},onInteractionStart:n.onInteractionStart,searchDelay:50,focusOnUpdate:n.props.focus,placeholder:r,onRef:function e(t){n.textInput=t}}),n.props.onClear&&c&&k.createElement("div",{className:"common-filters-FiltersSelector__clearIcon--1_3Np",onClick:function e(){n.props.onTextInputChange(""),t(""),n.props.onClear()}},k.createElement(S.Icon,{name:"times-circle-fill"})),n.state.isOpen&&o&&k.createElement("div",{className:"common-filters-FiltersSelector__results--1Bv1e"},k.createElement(x.NavigableList,null,a))))}),k.createElement(T.a,{event:"click",callback:function e(){if(n.componentMounted){var t=n.state.opening;n.setState({opening:!1,isOpen:t}),o()}}}))}}]),t}(k.Component);b()(M,"defaultProps",{placeHolder:null,addedInputClassName:"",onClear:function e(){},clearAfterSelection:!1,uiOrigin:"",searchSessionId:""}),t.a=M},"./packages/common/filters/FiltersSharedUIState.jsx":function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"i",function(){return u}),n.d(t,"h",function(){return p}),n.d(t,"a",function(){return m}),n.d(t,"e",function(){return d}),n.d(t,"d",function(){return h}),n.d(t,"g",function(){return f}),n.d(t,"f",function(){return g}),n.d(t,"c",function(){return _});var r=n("@babel/runtime/helpers/esm/classCallCheck"),a=n.n(r),i=n("@babel/runtime/helpers/esm/createClass"),l=n.n(i),o=n("@babel/runtime/helpers/esm/defineProperty"),s=n.n(o),c="expandedFilters",u="rangeMax",p="pRange",m="distFrom",d="bs_text",h="bs_display_vals",f="main_list_match_count",g="is_loading",v={},b=new Set,k=0,y={min:-1,max:-1},C={poiTextInput:"",distFrom:void 0},F=-1,_=function(){function e(t,n,r){if(a()(this,e),s()(this,"expandedFilters",b),s()(this,"rangeMax",k),s()(this,"priceRange",y),s()(this,"distanceFrom",C),s()(this,"hotelBrandSearchText",""),s()(this,"hotelBrandSearchDisplayVals",v),s()(this,"mainListMatchCount",F),s()(this,"isLoading",!1),t){var i=t.get(p),l=i&&i.split(",");l.length>2&&(this.priceRange={min:parseInt(l[0],10),max:parseInt(l[1],10)});var o=t.get(m),c=o&&o.split(",")||[];if(c.length>=4){var u=parseFloat(c[1]),h=c.slice(3).join(",");this.distanceFrom={poiTextInput:h,distFrom:u}}if(this.hotelBrandSearchText=t.get(d),this.hotelBrandSearchDisplayVals=t.filters.bs.getDisplayValues()||{},r&&!isNaN(r)&&(this.mainListMatchCount=r),n)for(var f=0;f<n.length;f++){var g=n[f];if("price"===g.filterType&&g.paramName===p&&g.rangeMax){this.rangeMax=g.rangeMax;break}}this.isLoading=!1}}return l()(e,[{key:"isFilterExpanded",value:function e(t){return this.expandedFilters.has(t)}},{key:"getRangeMax",value:function e(){return this.rangeMax}},{key:"getPriceRange",value:function e(){return this.priceRange}},{key:"getDistanceFrom",value:function e(){return this.distanceFrom}},{key:"getHotelBrandSearchText",value:function e(){return this.hotelBrandSearchText}},{key:"getDisplayValues",value:function e(){return this.hotelBrandSearchDisplayVals}},{key:"getHotelNameFromValue",value:function e(t){return this.hotelBrandSearchDisplayVals&&this.hotelBrandSearchDisplayVals[t]}},{key:"getMainListMatchCount",value:function e(){return this.mainListMatchCount}},{key:"getIsLoading",value:function e(){return this.isLoading}},{key:"setField",value:function e(t,n){switch(t){case c:this.expandedFilters=n;break;case u:this.rangeMax=n;break;case p:this.priceRange=n;break;case m:this.distanceFrom=n;break;case d:this.hotelBrandSearchText=n;break;case h:this.hotelBrandSearchDisplayVals=n;break;case f:this.mainListMatchCount=n;break;case g:this.isLoading=n}}},{key:"clearField",value:function e(t){t&&t!==c||(this.expandedFilters=b),t&&t!==p||(this.priceRange=y),t&&t!==m||(this.distanceFrom=C),t&&t!==d||(this.hotelBrandSearchText=""),t&&t!==h||(this.hotelBrandSearchDisplayVals=v),t&&t!==f||(this.mainListMatchCount=F),t&&t!==g||(this.isLoading=!1)}},{key:"clone",value:function t(){var n=new e;return n.setField(c,this.expandedFilters),n.setField(u,this.rangeMax),n.setField(p,this.priceRange),n.setField(m,this.distanceFrom),n.setField(d,this.hotelBrandSearchText),n.setField(h,this.hotelBrandSearchDisplayVals),n.setField(f,this.mainListMatchCount),n.setField(g,this.isLoading),n}}]),e}()},"./packages/common/filters/Header.jsx":function(e,t,n){"use strict";var r=n("@babel/runtime/helpers/esm/defineProperty"),a=n.n(r),i=n("react"),l=n("@ta/common.classnames"),o=n.n(l),s=n("@ta/styleguide.icon"),c=function e(t){var n=null===t.collapsed?"":i.createElement("span",{className:"common-filters-Header__collapseMark--22vf2"},i.createElement(s.Icon,{name:"caret-".concat(t.collapsed?"up":"down")}));return i.createElement("div",{className:o()("common-filters-Header__header--wo6xF",a()({},"common-filters-Header__isClickable--3STgC",!!t.onClick)),onClick:t.onClick},i.createElement("div",{className:o()("ui_header","h3","common-filters-Header__headerText--29Kvk")},n,t.children))};c.defaultProps={children:null,onClick:function e(){},collapsed:null},t.a=c},"./packages/common/filters/PageFilters.jsx":function(e,t,n){"use strict";n.d(t,"d",function(){return m}),n.d(t,"a",function(){return d}),n.d(t,"b",function(){return h}),n.d(t,"c",function(){return f});var r=n("@babel/runtime/helpers/esm/objectSpread"),a=n.n(r),i=n("@babel/runtime/helpers/esm/classCallCheck"),l=n.n(i),o=n("@babel/runtime/helpers/esm/createClass"),s=n.n(o),c=n("@babel/runtime/helpers/esm/defineProperty"),u=n.n(c),p=n("@ta/common.features"),m=function(){function e(t,n,r,a){l()(this,e),u()(this,"param",void 0),u()(this,"value",void 0),u()(this,"excludeClearAll",void 0),u()(this,"modified",void 0),this.param=t,this.excludeClearAll=r,this.value=n,this.modified=a}return s()(e,[{key:"clone",value:function t(){return new e(this.param,this.get(),this.excludeClearAll,this.modified)}},{key:"set",value:function e(t){this.modified=this.modified||t!==this.value,this.value=t}},{key:"get",value:function e(){return this.value}},{key:"getDisplayValues",value:function e(){return{}}},{key:"getSelectedCount",value:function e(){return this.get()&&"cat"!==this.param?1:0}},{key:"isSelected",value:function e(t){return this.value===t}},{key:"clear",value:function e(){"pRange"===this.param&&Object(p.featureIsEnabled)("pricing_mode_filter")?this.clearPriceRangeWithPricingMode():this.set("")}},{key:"clearAll",value:function e(){"pRange"===this.param&&Object(p.featureIsEnabled)("pricing_mode_filter")?this.clearPriceRangeWithPricingMode():this.set("")}},{key:"format",value:function e(t){return t}},{key:"parse",value:function e(t){return t}},{key:"isModified",value:function e(){return this.modified}},{key:"clearPriceRangeWithPricingMode",value:function e(){if("pRange"!==!this.param){var t=this.value&&this.value.split(",");t&&t.length&&4===t.length?this.set("-1,-1,".concat(t[2],",").concat(t[3])):this.set("")}}}]),e}(),d=function(){function e(t,n,r,i){l()(this,e),u()(this,"param",void 0),u()(this,"values",void 0),u()(this,"excludeClearAll",void 0),u()(this,"modified",void 0),this.param=t,this.excludeClearAll=r,this.values=this.parse(n).reduce(function(e,t){return a()({},e,u()({},t.key,t.value))},{}),this.modified=i}return s()(e,[{key:"clone",value:function t(){return new e(this.param,this.get(),this.excludeClearAll,this.modified)}},{key:"set",value:function e(t){var n=this;this.parse(t).forEach(function(e){n.modified=n.modified||!Object.prototype.hasOwnProperty.call(n.values,e.key)||n.values[e.key]!==e.value,n.values[e.key]=e.value})}},{key:"get",value:function e(){return this.format(this.values)}},{key:"getDisplayValues",value:function e(){return{}}},{key:"getSelectedCount",value:function e(){return this.get()?Object.keys(this.values).length:0}},{key:"getMap",value:function e(){return Object.assign({},this.values)}},{key:"clear",value:function e(t){var n=this;t.split(",").filter(function(e){return""!==e}).map(function(e){return e.split("#")}).filter(function(e){return 2===e.length&&""!==e[0]&&""!==e[1]}).map(function(e){return e[0]}).forEach(function(e){Object.prototype.hasOwnProperty.call(n.values,e)&&(n.modified=!0,delete n.values[e])})}},{key:"clearAll",value:function e(){this.modified=this.modified||Object.keys(this.values).length>0,this.values={}}},{key:"parse",value:function e(t){return t.split(",").filter(function(e){return""!==e}).map(function(e){return e.split("#")}).filter(function(e){return 2===e.length&&""!==e[0]&&""!==e[1]}).map(function(e){return{key:e[0],value:e[1]}})}},{key:"format",value:function e(t){return Object.entries(t).map(function(e){return e.join("#")}).join(",")}},{key:"isModified",value:function e(){return this.modified}}]),e}(),h=function(){function e(t,n,r,i,o){l()(this,e),u()(this,"param",void 0),u()(this,"values",void 0),u()(this,"displayValues",void 0),u()(this,"excludeClearAll",void 0),u()(this,"modified",void 0),this.param=t,this.excludeClearAll=r,this.values=this.parse(n).reduce(function(e,t){return a()({},e,u()({},t,!0))},{}),this.modified=!!i,this.displayValues=o}return s()(e,[{key:"clone",value:function t(){return new e(this.param,this.get(),this.excludeClearAll,this.modified)}},{key:"set",value:function e(t){var n=this;t.split(",").forEach(function(e){n.modified=n.modified||!n.values[e],n.values[e]=!0})}},{key:"get",value:function e(){return Object.keys(this.values).join(",")}},{key:"getDisplayValues",value:function e(){return this.displayValues}},{key:"getSelectedCount",value:function e(){return this.get()?Object.keys(this.values).length:0}},{key:"isSelected",value:function e(t){return this.values[t]}},{key:"clear",value:function e(t){var n=this;t.split(",").forEach(function(e){n.values[e]&&(delete n.values[e],n.modified=!0)})}},{key:"clearAll",value:function e(){this.modified=this.modified||Object.keys(this.values).length>0,this.values={}}},{key:"parse",value:function e(t){return t.split(",").filter(function(e){return!!e})}},{key:"format",value:function e(t){return t.join(",")}},{key:"isModified",value:function e(){return this.modified}}]),e}(),f=function(){function e(){l()(this,e),u()(this,"filters",{})}return s()(e,[{key:"clone",value:function t(){var n=this,r=new e;return Object.keys(this.filters).forEach(function(e){r.filters[e]=n.filters[e].clone()}),r}},{key:"addFilter",value:function e(t,n,r,a,i){var l;switch(t){case"single":l=new m(n,r,a,!1);break;case"multi":l=new h(n,r,a,!1,i);break;case"kv":l=new d(n,r,a,!1);break;default:throw new Error("Unknown filter type specified: ".concat(t))}this.filters[n]=l}},{key:"forFilter",value:function e(t,n){var r=this.filters[t];return r&&n(r)}},{key:"set",value:function e(t,n){return this.forFilter(t,function(e){var t=e.get();return e.set(n),t!==e.get()})}},{key:"setAll",value:function e(t,n){return this.forFilter(t,function(e){var t=e.get();return e.clearAll(),n.forEach(function(t){return e.set(t)}),t!==e.get()})}},{key:"get",value:function e(t){return this.forFilter(t,function(e){return e.get()})||""}},{key:"getAll",value:function e(){var t=this;return Object.keys(this.filters).reduce(function(e,n){return a()({},e,u()({},n,t.filters[n].get()))},{})}},{key:"clear",value:function e(t,n){return n?this.forFilter(t,function(e){var t=e.get();return e.clear(n),t!==e.get()}):this.clearAll(t)}},{key:"clearAll",value:function e(t){var n=this;if(!t){var r=!1;return Object.keys(this.filters).forEach(function(e){var t=n.filters[e];if(!t.excludeClearAll){var a=t.get();t.clearAll(),r=r||a!==t.get()}}),r}return this.forFilter(t,function(e){var t=e.get();return e.clearAll(),t!==e.get()})}},{key:"isModified",value:function e(t){return!!this.forFilter(t,function(e){return e.isModified()})}},{key:"isSelected",value:function e(t,n){return!!this.forFilter(t,function(e){return e.isSelected&&e.isSelected(n)})}},{key:"getKeyValueMap",value:function e(t){return this.forFilter(t,function(e){return e.getMap&&e.getMap()})}}]),e}();u()(f,"fromSelectedFilterResponse",function(e){var t=new f;return e&&e.length?(e.forEach(function(e){t.addFilter(e.filterType,e.param,e.value,e.excludeFromClearAll,e.displayValues)}),t):t})},"./packages/common/filters/SelectionPills.jsx":function(e,t,n){"use strict";var r=n("react"),a=n("@ta/styleguide.loading"),i=n("@ta/common.classnames"),l=n.n(i),o=n("@ta/common.tracking"),s=n.n(o),c=n("@babel/runtime/helpers/esm/classCallCheck"),u=n.n(c),p=n("@babel/runtime/helpers/esm/createClass"),m=n.n(p),d=n("@babel/runtime/helpers/esm/possibleConstructorReturn"),h=n.n(d),f=n("@babel/runtime/helpers/esm/getPrototypeOf"),g=n.n(f),v=n("@babel/runtime/helpers/esm/inherits"),b=n.n(v),k=n("@babel/runtime/helpers/esm/assertThisInitialized"),y=n.n(k),C=n("@babel/runtime/helpers/esm/defineProperty"),F=n.n(C),_=function(e){function t(){var e,n;u()(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=h()(this,(e=g()(t)).call.apply(e,[this].concat(a))),F()(y()(y()(n)),"state",{isSelected:!0}),n}return b()(t,e),m()(t,[{key:"render",value:function e(){var t,n=this;return this.state.isSelected?r.createElement("li",{className:"".concat("common-filters-SelectedPill__selectionListItem--3vdSQ"," label")},r.createElement("div",{className:l()(["ui_tag_box","ui_icon","times","common-filters-SelectedPill__selection--BHaXl",(t={},F()(t,"common-filters-SelectedPill__large--3LVMO","large"===this.props.displayType),F()(t,"common-filters-SelectedPill__green--h2lEk","green"===this.props.displayType),t)]),onClick:function e(){n.setState({isSelected:!1}),n.props.onClearSelection()}},this.props.selection.label)):null}}]),t}(r.Component);F()(_,"defaultProps",{displayType:"default"});var x=n("./packages/common/filters/ActionPill.jsx"),S=function e(t){var n=t.selections.map(function(e){return r.createElement(_,{selection:e,onClearSelection:function n(){return function e(t,n){var r=t.param,a=t.value,i=t.tracker,l=t.valueTracker,o=t.index;r&&null!==a&&(n(r,a),(i||l)&&s()({module:"Filters_".concat(i),action:"unselect_cloud",context:l,value:o,nonInteractive:!1}))}(e,t.onClearSelection)},key:"selection-list-item-".concat(e.param,"-").concat(e.value),displayType:t.type})}),i=t.customSelections.map(function(e){return r.createElement(_,{selection:e,onClearSelection:function e(){return{}},key:"pill-".concat(e.param,"-").concat(e.value),displayType:t.type})}),o=t.actions&&t.actions.map(function(e){return r.createElement(x.a,{key:"pill-".concat(e.label),label:e.label,chevron:e.chevron,onClick:function t(){return function e(t){var n=t.tracker;(0,t.onClick)(),n&&s()({module:"filters_pill",action:"action_click",context:n,nonInteractive:!1})}(e)},displayType:t.type})});return r.createElement("div",{className:"".concat("common-filters-SelectionPills__container--3TKuo"," ").concat(t.loading?"common-filters-SelectionPills__loading--sSG2W":"")},t.loading&&r.createElement("div",{className:"common-filters-SelectionPills__loadingSpinner--2-2RP"},t.selections.length<4?r.createElement(a.LoadingSpinner,{size:"small"}):r.createElement(a.LoadingSpinner,null)),r.createElement("ul",{className:l()("common-filters-SelectionPills__selections--wJfmG",t.noWrap&&!t.center?"common-filters-SelectionPills__noWrap--2PmG3":"common-filters-SelectionPills__wrap--DflL5",t.center?"common-filters-SelectionPills__center--Brl4v":"")},o,n,i),r.createElement("div",{className:"".concat(t.selections.length>0?"":"separated")}))};S.defaultProps={customSelections:[],type:"default",loading:!1,actions:null,noWrap:!1,center:!1},t.a=S},"./packages/common/filters/StaticResultsFetcher.jsx":function(e,t,n){"use strict";var r=n("@babel/runtime/helpers/esm/classCallCheck"),a=n.n(r),i=n("@babel/runtime/helpers/esm/createClass"),l=n.n(i),o=n("@babel/runtime/helpers/esm/defineProperty"),s=n.n(o),c=function(){function e(t){a()(this,e),s()(this,"id","staticResults"),s()(this,"type","staticResults"),s()(this,"props",void 0),s()(this,"cache",void 0),s()(this,"results",[]),s()(this,"limit",-1),s()(this,"searchable",!1),s()(this,"query","");var n=t.results,r=t.limit,i=t.id,l=t.searchable;this.props=t,this.results=n,this.limit=r||-1,this.id=i||"staticResults",this.searchable=!!l}return l()(e,[{key:"getResults",value:function e(){if(this.props.waitForUserInput&&(!this.query||this.query.length<3))return[];var t=this.props.results||[];if(this.props.searchable&&this.query&&this.query.length>=3){var n=this.query.toLowerCase();t=t.filter(function(e){return e.details.name.toLowerCase().indexOf(n)>=0})}return this.limit>0?t.slice(0,this.limit):this.props.results}},{key:"fetch",value:function e(t,n,r){this.query=t,r()}}]),e}();t.a=c},"./packages/common/filters/entrypoint.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./packages/common/filters/types.jsx");for(var a in r)["FilterCounts","SelectionPills","ActionPill","Header","CategorySelections","CheckboxFilter","DistanceFromFilter","Filters","default"].indexOf(a)<0&&function(e){n.d(t,e,function(){return r[e]})}(a);var i=n("./packages/common/filters/PageFilters.jsx");n.d(t,"SingleValueFilter",function(){return i.d}),n.d(t,"KeyValueFilter",function(){return i.a}),n.d(t,"MultiValueFilter",function(){return i.b}),n.d(t,"PageFilters",function(){return i.c});var l=n("./packages/common/filters/FiltersSharedUIState.jsx");n.d(t,"EXPANDED_FILTERS",function(){return l.b}),n.d(t,"RANGE_MAX",function(){return l.i}),n.d(t,"PRICE_RANGE",function(){return l.h}),n.d(t,"DISTANCE_FROM",function(){return l.a}),n.d(t,"HOTEL_BRAND_SEARCH_TEXT",function(){return l.e}),n.d(t,"HOTEL_BRAND_SEARCH_DISPLAY_VALS",function(){return l.d}),n.d(t,"MAIN_LIST_MATCH_COUNT",function(){return l.g}),n.d(t,"IS_LOADING",function(){return l.f}),n.d(t,"FiltersSharedUIState",function(){return l.c});var o=n("./packages/common/filters/selection.jsx");n.d(t,"getSelectedFiltersCount",function(){return o.c}),n.d(t,"getPopularitySelectionsAndCounts",function(){return o.b}),n.d(t,"getValidTravelerRatingSelections",function(){return o.d}),n.d(t,"gatherSelections",function(){return o.a});var s=n("./packages/common/filters/FilterCounts.jsx");n.d(t,"FilterCounts",function(){return s.a});var c=n("./packages/common/filters/SelectionPills.jsx");n.d(t,"SelectionPills",function(){return c.a});var u=n("./packages/common/filters/ActionPill.jsx");n.d(t,"ActionPill",function(){return u.a});var p=n("./packages/common/filters/Header.jsx");n.d(t,"Header",function(){return p.a});var m=n("./packages/common/filters/CategorySelections.jsx");n.d(t,"CategorySelections",function(){return m.a});var d=n("./packages/common/filters/CheckboxFilter.jsx");n.d(t,"CheckboxFilter",function(){return d.a});var h=n("./packages/common/filters/DistanceFromFilter.jsx");n.d(t,"DistanceFromFilter",function(){return h.a});var f=n("./packages/common/filters/Filters.jsx");n.d(t,"Filters",function(){return f.a})},"./packages/common/filters/selection.jsx":function(e,t,n){"use strict";n.d(t,"c",function(){return m}),n.d(t,"b",function(){return d}),n.d(t,"d",function(){return h}),n.d(t,"a",function(){return f});var r=n("@babel/runtime/helpers/esm/toConsumableArray"),a=n.n(r),i=n("@babel/runtime/helpers/esm/slicedToArray"),l=n.n(i),o=n("@ta/common.logging"),s=n.n(o),c=n("@ta/common.i18n"),u=function e(t){var n=t.split(",");if(n.length<4)return"";var r,a=parseFloat(n[1]),i=n[2],l=n.slice(3).join(",");return r=a<0?Object(c.localize)("hsx_any_distance"):"mi"===i?Object(c.localize)("common_dist_mi",{0:"".concat(a)}):Object(c.localize)("common_dist_km",{0:"".concat(a)}),Object(c.localize)("distance_from_poi",{0:r,1:l})},p=function e(t){if(!t.length)return!1;var n=t.split(",");if(n&&n.length){var r=l()(n,2),a=r[0],i=r[1];if("-1"===a&&"-1"===i)return!1}return!0},m=function e(t){var n=0;return Object.keys(t.filters).forEach(function(e){var r=t.filters[e],a=r.getSelectedCount();"cat"===e&&a>=3||("trating"!==e?("pRange"!==e||p(r.get()))&&"pop"!==e&&(n+=a):n+=Math.min(1,a))}),n},d=function e(t,n){return n.map(function(e){var n=Object.assign({},e),r=e.value.split("_"),i=2===r.length&&""!==t.get(r[0])&&("catTag"===r[0]||"zfc"===r[0]),l=2===r.length?r[1]:"",o=!1,s=t.isSelected(r[0],l);if("catTag"===r[0]&&2===r.length){var u=t.get(r[0]);o="9189"===r[1]&&""===u||"9189"===u}return"trating"===r[0]&&(s=s&&t.forFilter(r[0],function(e){var t=e.values;return parseInt(r[1],10)===Math.min.apply(Math,a()(Object.keys(t).map(function(e){return parseInt(e,10)})))})),Object.assign(n,{selected:s,additiveCounts:i,label:o?Object(c.localize)("hotels_only"):e.label})})},h=function e(t,n){var r=a()(t).reverse().map(function(e){return String(e.value)});return r.slice(r.indexOf(n))},f=function e(t,n,r){var i=[];return n.forEach(function(e){i=i.concat(function e(t,n,r,i){var l=n.paramName,o=n.trackingName,m=t.get(l);if(""===m)return[];if("price"===n.filterType){if(!p(m))return[];var d=function e(t,n){var r=t.split(",");if(r.length>=2){var a=parseInt(r[0],10),i=parseInt(r[1],10);return function e(t,n,r){if(r&&t===n)return c.globalize.formatCurrency(n);var a=c.globalize.formatCurrencyInteger(t),i=c.globalize.formatCurrencyInteger(n);return r?Object(c.localize)("common_price_range_currency_plus_v3",{0:a,1:i}):Object(c.localize)("common_price_range_v3",{0:a,1:i})}(a<0?0:a,i<0?n:i,i<0)}return""}(m,i.getRangeMax());return[{param:l,value:m||"",label:d,tracker:o,valueTracker:d,index:r}]}if("checkbox"===n.filterType){var h=n.choices.filter(function(e){return t.isSelected(l,e.value)}).map(function(e,t){return{param:l,value:e.value,label:e.label,tracker:o,valueTracker:e.tracker,index:r+t}});return"cat"===l&&h.length>=3?[]:"pop"===l?[]:h}if("trating"===n.filterType){var f=a()(n.choices).reverse().map(function(e){return String(e.value)});return[n.choices.filter(function(e){return t.isSelected(l,e.value)}).map(function(e,t){return{param:l,value:f.slice(f.indexOf(e.value)).join(","),label:e.label,tracker:o,valueTracker:e.tracker,index:r+t}}).pop()]}if("distanceFrom"===n.filterType)return[{param:l,value:m,label:u(m),tracker:o,valueTracker:m,index:r}];if("hotelBrandSearch"===n.filterType){var g=m.split(","),v=n.presetBrands;return g.filter(function(e){return!!e}).map(function(e){var t=e.split("_");return{param:l,value:e,label:function n(){if("h"===t[0])return i.getHotelNameFromValue(e);if(t.length<2)return"";var r=v&&v.find(function(e){return e.value===t[1]});return r&&r.name}()||"",tracker:o,valueTracker:e,index:r}})}return"staticListSearch"===n.filterType?n.presetOptions.filter(function(e){var r=e.details.id;return r&&t.isSelected(n.paramName,r.toString())}).map(function(e,t){return{param:l,value:e.value,label:e.name,tracker:o,valueTracker:String(e.details.id),index:r+t}}):(s.a.error("Unknown filter type during selection gathering ".concat(n.filterType)),[])}(t,e,i.length,r))}),i}},"./packages/common/filters/types.jsx":function(e,t){},"./packages/common/routing/Link.jsx":function(e,t,n){"use strict";var r=n("@babel/runtime/helpers/esm/extends"),a=n.n(r),i=n("react"),l=(n("@babel/runtime/helpers/esm/toConsumableArray"),n("@babel/runtime/helpers/esm/objectSpread")),o=n.n(l),s=(n("@babel/runtime/helpers/esm/toArray"),n("@babel/runtime/helpers/esm/slicedToArray"),n("@babel/runtime/helpers/esm/objectWithoutProperties")),c=n.n(s),u=i.createContext({route:{},previousRoute:{},navigate:function e(){},addBeforeNavigationCallback:function e(){},removeBeforeNavigationCallback:function e(){},popping:!1}),p=(u.Provider,u.Consumer),m=n("@babel/runtime/helpers/esm/typeof"),d=n.n(m),h=function e(t){return function(e,n){var r=n.tripModal,a=c()(n,["tripModal"]);if("object"===d()(r)){var i=r.title,l=r.id,o=r.scrollToReference;if(l){var s="Trips/".concat(l);return i&&(s+="/".concat(encodeURIComponent(i))),o&&o.type&&o.id&&(s+="?type=".concat(o.type,"&id").concat(o.id)),{path:s}}}return t(e,a)}},f=h(function(e,t){var n=t.modal,r=t.card,a=t.username,i=t.fid,l=t.geo,s=t.allowedTypes,u=c()(t,["modal","card","username","fid","geo","allowedTypes"]),p="",m=["LinkPost","ForumPost","Repost","Review","Photo","Video"],d=u,h=i;if(a&&"string"==typeof a){if(n&&"string"==typeof n){var f=n.split("_");p=m.includes(f[0])?"Profile/".concat(a,"/").concat(f.join("/")):"Profile/".concat(a,"/").concat(n),h=void 0}else if(!("tab"in u)&&r&&"string"==typeof r){var g=r.split("_");m.includes(g[0])?p+="Profile/".concat(a,"/").concat(g.join("/")):p+="Profile/".concat(a,"/").concat(r)}}else l&&(p+="Home-g".concat(l));return h&&(d.fid=i),s&&(d.allowedTypes=s),o()({path:p},d)}),g=h(function(e,t){var n=t.modal,r=t.card,a=t.username,i=(t.feedIdToRestore,t.fid),l=c()(t,["modal","card","username","feedIdToRestore","fid"]),s=e;a&&(s+="/".concat(a));var u=["LinkPost","ForumPost","Repost","Review","Photo","Video","MediaBatch"],p=l,m=i;if(n&&"string"==typeof n){var d=n.split("_");u.includes(d[0])?s+="/".concat(d.join("/")):s+="/".concat(n),m=void 0}else if(!("tab"in l)&&r&&"string"==typeof r){var h=r.split("_");u.includes(h[0])?s+="/".concat(h.join("/")):s+="/".concat(r)}return m&&(p.fid=i),o()({path:s},p)}),v={default:h(function(e,t){return o()({path:e},t)}),Home:f,Profile:g,Trips:function e(t,n){var r=n.tripId,a=n.tripTitle,i=c()(n,["tripId","tripTitle"]),l=t;return r&&(l+="/".concat(r),a&&(l+="/".concat(encodeURIComponent(a)))),o()({path:l},i)},Saves:function e(t,n){var r=n.tripId,a=t;return r&&(a+="/".concat(r)),{path:a}}},b=["Profile","Trips","Owners","BrandOwners","ManageShopping","HotelsManagementCenter"],k=function e(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:b).includes(t.page)},y=function e(t){var n=t.href,r=t.to,l=t.target,o=t.onClick,s=t.children,u=t.className,m=(t.activeClassName,t.title),d=t.label,h=t.dataAttributes,f=t.stripNoreferrerNoopener,g=t.dir,y=r&&void 0===n?function e(t){var n=t.page,r=c()(t,["page"]),a=(v[n]||v.default)(n,r),i=a.path,l=c()(a,["path"]),o=Object.keys(l).filter(function(e){return void 0!==l[e]}).reduce(function(e,t){return e[t]=l[t],e},{}),s=new URLSearchParams(o).toString();return"/".concat(i).concat(s.length?"?":"").concat(s)}(r):n,C="_blank"!==l||f?null:"noopener noreferrer";return i.createElement(p,null,function(e){var t=e.navigate,n=e.route;return i.createElement("a",a()({rel:C,href:y,target:l,onClick:function e(a){o&&o(a),0!==a.button||a.isDefaultPrevented()||t&&r&&function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:b;return t.page===n.page||k(t,r)&&k(n,r)}(n,r)&&t(r)&&a.preventDefault()},className:u,title:m,"aria-label":d},function e(t){var n={};return t&&Object.getOwnPropertyNames(t).forEach(function(e){n["data-".concat(e)]=t[e]}),n}(h),Object.assign({},g?{dir:g}:null)),s)})};y.defaultProps={target:void 0,onClick:void 0,children:null,className:"",activeClassName:"",to:void 0,href:void 0,title:void 0,dataAttributes:void 0,stripNoreferrerNoopener:!1,dir:""},t.a=y}}});
//# sourceMappingURL=common.filters.4f5fe46d4f.js.map