(window.$WP=window.$WP||[]).push({id:"@ta/memx.registration-dialog-controller",d:["vendor-babel","vendor-react-libs","@ta/memx.google-onetap","@ta/memx.ta-twotap","@ta/hotels.trip-search","ta-platform","@ta/memx.registration-dialog-utils"],e:["./packages/memx/registration-dialog-controller/RegistrationDialogController.jsx"],x:{"./packages/memx/registration-dialog-controller/RegistrationDialogController.jsx":["default"]},m:{"./packages/memx/registration-dialog-controller/RegistrationDialogController.jsx":function(e,t,i){"use strict";i.r(t);var o=i("@babel/runtime/helpers/esm/classCallCheck"),a=i.n(o),n=i("@babel/runtime/helpers/esm/possibleConstructorReturn"),s=i.n(n),r=i("@babel/runtime/helpers/esm/getPrototypeOf"),l=i.n(r),g=i("@babel/runtime/helpers/esm/createClass"),d=i.n(g),c=i("@babel/runtime/helpers/esm/inherits"),p=i.n(c),u=i("@babel/runtime/helpers/esm/assertThisInitialized"),m=i.n(u),h=i("@babel/runtime/helpers/esm/defineProperty"),b=i.n(h),D=i("react"),f=i("@ta/memx.google-onetap"),R=i.n(f),_=i("@ta/memx.ta-twotap"),v=i.n(_),T=i("react-redux"),w=i("@ta/hotels.trip-search"),y=i("@ta/common.features"),k=i("@ta/common.radio"),x=i.n(k),O=i("@ta/common.tracking"),S=i.n(O),A=i("@ta/memx.registration-dialog-utils"),E="google_onetap",C="ta_twotap",P=function(e){function t(e){var i;return a()(this,t),i=s()(this,l()(t).call(this,e)),b()(m()(m()(i)),"onGoogleOneTapDismiss",function(){i.trackAction("registration_dialog_google_onetap_dismissed"),Object(A.setRegDialogDismissed)()}),b()(m()(m()(i)),"onGoogleOneTapTriggerNext",function(){i.trackAction("registration_dialog_google_onetap_trigger_next"),i.setState({dialogType:C})}),b()(m()(m()(i)),"onTaTwoTapDismiss",function(){i.trackAction("registration_dialog_ta_twotap_dismissed"),i.setState({dialogType:null}),Object(A.setRegDialogDismissed)()}),b()(m()(m()(i)),"onTaTwoTapTriggerNext",function(){i.trackAction("registration_dialog_ta_twotap_trigger_next")}),b()(m()(m()(i)),"setupRegDialog",function(){if(x()("Onboarding").on("loginSuccess",i.disableRegDialog),A.HOTEL_SERVLETS.includes(i.props.servlet)||"ShowUserReviews"===i.props.servlet||"MobileShowUserReviews"===i.props.servlet){if(x()("DatePicker").on("clicked",i.disableRegDialog),x()("global-nav").on("sidebarOpened",i.disableRegDialog),x()("hotels-sort-filter-entry").on("openSort",i.disableRegDialog),x()("hotels-sort-filter-entry").on("openFilters",i.disableRegDialog),x()("hr-persistent-footer").on("show",i.disableRegDialog),x()("h-map").on("open-trigger-clicked",i.disableRegDialog),x()("h-map").on("toggle-trigger-clicked",i.disableRegDialog),x()("rooms-guests").on("popped",i.disableRegDialog),i.props.defaultDates&&!w.AutoPop.wasDismissed(i.props.detailPage)&&"MOBILE"===i.props.viewportCategory)return x()("rooms-guests").on("firstUserUpdate",i.enableRegDialog),x()("picker-autoadvance").on("flow-complete",i.enableRegDialog),void x()("pop-calendar").on("dismissed",i.enableRegDialog);x()("responsiveStayDates").on("calendarInteracted",i.disableRegDialog)}if(!Object(A.shouldIgnoreAdhesionUnit)()){var e=window.googletag||{cmd:[]};return e.cmd.push(function(){e.pubads().addEventListener("slotRenderEnded",function(e){(null==e?void 0:e.advertiserId)!==A.ADHESION_COLLAPSE_ADVERTISER_ID&&i.setState({adhesionRendered:!0}),i.enableRegDialog()})}),x()("cpm_mw_adhesion").on("ad_closed",function(){i.setState({adhesionRendered:!1})}),void setTimeout(i.enableRegDialog,4e3)}i.enableRegDialog()}),b()(m()(m()(i)),"enableRegDialog",function(){null===i.state.dialogType&&i.setState({dialogType:E})}),b()(m()(m()(i)),"disableRegDialog",function(){null!==i.state.dialogType&&i.setState({dialogType:null})}),i.state={dialogType:null,adhesionRendered:!1},i}return p()(t,e),d()(t,null,[{key:"isQualtricsEnabled",value:function e(){return new Promise(function(e){Object(y.featureIsEnabled)("qualtrics_surveys_any")&&window.require(["ta/support/Qualtrics"],function(t){e(t.seenThisPageView()||t.canDisplaySmart()||t.canDisplay())}),e(!1)})}}]),d()(t,[{key:"componentDidMount",value:function e(){var i=this;this.props.isMember||Object(A.shouldSuppressRegistrationDialog)()||t.isQualtricsEnabled().then(function(e){e||(i.trackAction("registration_dialog_requested"),i.setupRegDialog())})}},{key:"componentDidUpdate",value:function e(t){!t.isMember&&this.props.isMember&&this.disableRegDialog()}},{key:"trackAction",value:function e(t){S()({module:"registration_dialog",action:t,context:"".concat(this.props.servlet||"unknown")})}},{key:"isAdhesionRendered",value:function e(){return Object(A.doesAdExistOnPage)()||this.state.adhesionRendered}},{key:"render",value:function e(){switch(this.state.dialogType){case E:return this.trackAction("registration_dialog_google_onetap_rendered"),D.createElement(R.a,{onDismiss:this.onGoogleOneTapDismiss,triggerNext:this.onGoogleOneTapTriggerNext,adhesionRendered:this.isAdhesionRendered()});case C:return this.trackAction("registration_dialog_ta_twotap_rendered"),D.createElement(v.a,{onDismiss:this.onTaTwoTapDismiss,triggerNext:this.onTaTwoTapTriggerNext,adhesionRendered:this.isAdhesionRendered()});default:return null}}}]),t}(D.Component);t.default=Object(T.connect)(function(e){var t;return{isMember:e.auth.isMember,viewportCategory:e.meta.device.viewportCategory,servlet:e.meta.initialServletName,defaultDates:!!(e.travelerInfo.hotels||{}).defaultDates,detailPage:!!(null===(t=e.page)||void 0===t?void 0:t.detailId)}})(P)}}});
//# sourceMappingURL=memx.registration-dialog-controller.ba3e93c427.js.map