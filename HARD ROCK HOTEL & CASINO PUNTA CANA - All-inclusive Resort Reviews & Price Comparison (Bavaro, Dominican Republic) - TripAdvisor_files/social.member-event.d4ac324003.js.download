(window.$WP=window.$WP||[]).push({id:"@ta/social.member-event",d:["vendor-babel","vendor-react-libs","ta-platform","ta-common","@ta/overlays.modal","@ta/overlays.managers","@ta/overlays.toast","@ta/social.actions","@ta/media.upload","@ta/public.content-uploader","@ta/common.text","@ta/tracking.interactions","@ta/social.dates","@ta/social.section-overflow","@ta/social.member"],e:["./packages/social/member-event/member-event.jsx"],x:{"./packages/social/member-event/member-event.jsx":["default","MemberEventOnObjectBlock"]},m:{"./packages/social/member-event/member-event.jsx":function(e,t,r){"use strict";r.r(t);var a=r("@babel/runtime/helpers/esm/extends"),o=r.n(a),n=r("@babel/runtime/helpers/esm/classCallCheck"),c=r.n(n),l=r("@babel/runtime/helpers/esm/createClass"),s=r.n(l),i=r("@babel/runtime/helpers/esm/possibleConstructorReturn"),m=r.n(i),u=r("@babel/runtime/helpers/esm/getPrototypeOf"),p=r.n(u),d=r("@babel/runtime/helpers/esm/inherits"),b=r.n(d),v=r("@babel/runtime/helpers/esm/assertThisInitialized"),E=r.n(v),_=r("@babel/runtime/helpers/esm/defineProperty"),j=r.n(_),f=r("react"),h=r("@ta/common.i18n"),g=r("@ta/styleguide.avatar"),O=r("@ta/overlays.modal"),k=r("@ta/overlays.managers"),P=r("@ta/overlays.toast"),D=r("@ta/common.routing"),y=r("@ta/common.classnames"),N=r.n(y),w=r("@ta/common.logging"),M=r.n(w),C=r("@ta/social.actions"),I=r("@ta/media.upload"),z=r("@ta/public.content-uploader"),L=r("@ta/common.text"),S=r("@ta/tracking.interactions"),T=r("@ta/social.dates"),F=r("@ta/social.section-overflow"),A=r("@ta/social.member"),R="social-member-event-MemberEventOnObjectBlock__event_info--uf-sm",B="social-member-event-MemberEventOnObjectBlock__item--2PXOx",U=function e(t){var r,a,o,n=t.object,c=t.actor,l=t.isEmbedded,s=t.displayDate,i=N()(s?"ui_header_link":"ui_link","social-member-event-MemberEventOnObjectBlock__member--35-jC",{verified:!!c&&c.isVerified}),m={0:i,1:null==c?void 0:null===(r=c.route)||void 0===r?void 0:r.url,2:Object(L.EscapeHtml)(Object(A.getDisplayName)(c)),3:s?Object(T.getDisplayDate)(s):null,4:"Repost"===(null==n?void 0:n.__typename)?null==n?void 0:null===(a=n.repostedObject)||void 0===a?void 0:null===(o=a.media)||void 0===o?void 0:o.length:null==n?void 0:n.numPhotos},u=c&&c.userId,p=n.repostedObject?n.repostedObject.__typename:n.__typename,d=s&&s.length>0?function e(t,r){switch(t){case"Review":return Object(h.localize)("member_event_on_review_with_date",r);case"RoomTip":return Object(h.localize)("member_event_on_tip_with_date",r);case"Photo":return Object(h.localize)("member_event_on_photo_with_date",r);case"ApiLocationTopic":return Object(h.localize)("member_event_on_question_with_date",r)}return""}(p,m):function e(t,r,a,o){if(a.repostedObject)switch(t){case"Review":return Object(h.localize)("member_event_reposted_review",r);case"Photo":return Object(h.localize)("member_event_reposted_photo",r);case"MediaBatch":return Object(h.localize)("member_event_reposted_photo_v2",r);case"Video":return Object(h.localize)("member_event_reposted_video",r);case"ForumPost":return Object(h.localize)("member_event_reposted_forumpost",r);case"LinkPost":return Object(h.localize)("member_event_reposted_linkpost",r);case"Trip":return Object(h.localize)("member_event_reposted_Trip",r);case"ApiLocationTopic":return'<a class="'.concat(r[0],'" href="').concat(r[1],'">').concat(r[2],"</a> asked a question");case"ApiTopicPosting":return'Answer from <a class="'.concat(r[0],'" href="').concat(r[1],'">').concat(r[2],"</a>")}else{var n="Trip"===a.__typename&&a.owner&&a.owner.id,c=o&&o.userId;switch(t){case"Review":return Object(h.localize)("member_event_on_review",r);case"RoomTip":return Object(h.localize)("member_event_on_tip",r);case"Photo":return Object(h.localize)("member_event_on_photo",r);case"MediaBatch":return Object(h.localize)("feed_batched_photos_header_v2",r);case"Video":return Object(h.localize)("member_event_on_video",r);case"ForumPost":return a.id===a.parentId?Object(h.localize)("member_event_on_forumpost_question",r):Object(h.localize)("member_event_on_forumpost_reply",r);case"LinkPost":return Object(h.localize)("member_event_on_linkpost",r);case"Trip":return n===c?Object(h.localize)("member_event_on_Trip",r):Object(h.localize)("trips_feed_trip_joined_v2",r);case"ApiLocationTopic":return Object(h.localize)("member_event_on_location_topic",r);case"ApiTopicPosting":return Object(h.localize)("member_event_on_topic_posting",r)}}return""}(p,m,n,c);return f.createElement(S.InteractionLogger,null,function(e){var t;return f.createElement("div",{className:"social-member-event-MemberEventOnObjectBlock__event_type--3njyv",onClick:function t(r){return e(r,"userClick",{userId:u})}},l?f.createElement(D.Link,{className:i,href:null==c?void 0:null===(t=c.route)||void 0===t?void 0:t.url},Object(A.getDisplayName)(c)):Object(h.unescaped)(d))})},x=function e(t){var r=t.object,a=t.actor,o=r.publishedDate||r.createdDate;return f.createElement(f.Fragment,null,f.createElement(U,{actor:a,object:r}),f.createElement("div",{className:R},f.createElement("span",{className:B},f.createElement(S.InteractionLogger,null,function(e){return f.createElement(D.Link,{href:r.route.url,className:"ui_link",onClick:function t(r){return e(r,"feedClick")}},f.createElement(T.ContentDisplayDate,{dateStr:o}))}))))},H=function e(t){var r=t.object,a=t.actor,o=r.publishedDate||r.createdDate;return f.createElement(f.Fragment,null,f.createElement(U,{actor:a,object:r,displayDate:o}),a&&f.createElement(A.MemberHeaderStats,{profile:a}))},V=function e(t){var r=t.object,a=t.actor,o=r.publishedDate;return f.createElement(f.Fragment,null,f.createElement(U,{actor:a,object:r,displayDate:o}),a&&f.createElement(A.MemberHeaderStats,{profile:a}))},q=function e(t){var r=t.object,a=t.actor,o=r.publishedDate||r.createdDate||r.uploadDate||r.created;return f.createElement(f.Fragment,null,f.createElement(U,{actor:a,object:r,isEmbedded:!0}),o&&f.createElement("div",{className:R},f.createElement("span",{className:B},f.createElement(S.InteractionLogger,null,function(e){return f.createElement(D.Link,{href:r.route.url,className:"ui_link",onClick:function t(r){return e(r,"feedClick")}},f.createElement(T.ContentDisplayDate,{dateStr:o}))}))))},W=function e(t){var r=t.object,a=t.actor,o=r.publishedDate||r.uploadDate;return f.createElement(f.Fragment,null,f.createElement(U,{actor:a,object:r}),f.createElement("div",{className:R},f.createElement("span",{className:B},f.createElement(S.InteractionLogger,null,function(e){return f.createElement(O.DeprecatedModalLink,{name:"Photo_".concat(r.id),href:null,username:r.userProfile?r.userProfile.username:"",className:"ui_link",key:"Photo_".concat(r.id),onClick:function t(r){return e(r,"feedClick")}},f.createElement(T.ContentDisplayDate,{dateStr:o}))}))))},G=function e(t){var r=t.object,a=t.actor,o=r.publishedDate||r.uploadDate;return f.createElement(f.Fragment,null,f.createElement(U,{actor:a,object:r,displayDate:o}),a&&f.createElement(A.MemberHeaderStats,{profile:a}))},$=function e(t){var r=t.object,a=t.actor,o=t.isEmbedded,n=r.createdDate;return f.createElement(f.Fragment,null,f.createElement(U,{actor:a,object:r,isEmbedded:o}),f.createElement("div",{className:R},f.createElement("span",{className:B},f.createElement(T.ContentDisplayDate,{dateStr:n}))))},J=function e(t){var r=t.objectProps,a=r.object,o=r.actor,n=a.publishedDate||a.uploadDate;return f.createElement(f.Fragment,null,f.createElement(U,{actor:o,object:a}),f.createElement("div",{className:R},f.createElement("span",{className:B},f.createElement(S.InteractionLogger,null,function(e){return f.createElement(D.Link,{className:"ui_link",onClick:function t(r){return e(r,"feedClick")}},f.createElement(T.ContentDisplayDate,{dateStr:n}))}))))},K=function e(t){var r=t.object,a=t.actor,o=r.publishedDate;return f.createElement(f.Fragment,null,f.createElement(U,{actor:a,object:r}),f.createElement("div",{className:R},f.createElement("span",{className:B},f.createElement(S.InteractionLogger,null,function(e){return f.createElement(D.Link,{href:r.route.url,className:"ui_link",onClick:function t(r){return e(r,"feedClick")}},f.createElement(T.ContentDisplayDate,{dateStr:o}))}))))},X=function e(t){var r=t.objectProps,a=r.object,o=r.actor,n=a.publishedDate;return f.createElement(f.Fragment,null,f.createElement(U,{actor:o,object:a}),f.createElement("div",{className:R},f.createElement("span",{className:B},f.createElement(T.ContentDisplayDate,{dateStr:n}))))},Y=function e(t){var r=t.object,a=t.actor,o=r.created;return f.createElement(f.Fragment,null,f.createElement(U,{actor:a,object:r}),f.createElement("div",{className:R},f.createElement("span",{className:B},f.createElement(T.ContentDisplayDate,{dateStr:o}))))},Q=function e(t){var r=t.objectProps,a=r.object,o=r.actor,n=a.created;if(a.owner&&o&&o.userId===a.owner.id)n=a.firstPublished;else{var c=o&&a.collaborators&&a.collaborators.find(function(e){return e.user&&e.user.id===o.userId});c&&(n=c.publicallyJoined)}return f.createElement(f.Fragment,null,f.createElement(U,{actor:o,object:a,isEmbedded:!(o&&o.userId&&a.owner&&a.owner.id)}),f.createElement("div",{className:R},f.createElement("span",{className:B},f.createElement(S.InteractionLogger,null,function(e){var t;return f.createElement(D.Link,{href:null===(t=a.route)||void 0===t?void 0:t.url,className:"ui_link",onClick:function t(r){return e(r,"feedClick")}},f.createElement(T.ContentDisplayDate,{dateStr:n}))}))))},Z=function e(t){var r=t.object,a=t.actor,o=r.timePublished||r.timeSubmitted;return f.createElement(f.Fragment,null,f.createElement(U,{actor:a,object:r,displayDate:new Date(o).toISOString()}),a&&f.createElement(A.MemberHeaderStats,{profile:a}))},ee=function e(t){var r=t.objectProps,a=r.object,o=r.actor,n=t.overflowMenuProps,c=a.timePublished||a.timeSubmitted;return f.createElement(f.Fragment,null,f.createElement(U,{actor:o,object:a}),c?f.createElement("div",{className:R},f.createElement("span",{className:B},f.createElement(T.ContentDisplayDate,{dateStr:new Date(c).toISOString()})," | ",f.createElement(re,n))):null)},te=function e(t){return t.id||t.postId||t.repostId},re=function e(t){var r=t.parentProps,a=t.editUgcModalName,o=t.overrideItems;return f.createElement(k.Opener,{name:a},function(e){return f.createElement(F.SectionOverflowMenu,{sectionObject:r.object,sectionObjectForType:r.overflowMenuObjectForType,sectionActor:r.actor,onEdit:e,overrideItems:o,deleteObject:r.deleteObject,untagObject:r.untagObject})})},ae=function(e){function t(){var e,r;c()(this,t);for(var a=arguments.length,o=new Array(a),n=0;n<a;n++)o[n]=arguments[n];return r=m()(this,(e=p()(t)).call.apply(e,[this].concat(o))),j()(E()(E()(r)),"editUgcModalName","ugcEditModal_".concat(r.props.object.__typename,"_").concat(te(r.props.object),":").concat(Math.random())),r}return b()(t,e),s()(t,[{key:"render",value:function e(){var t,r=this,a=this.props.object.__typename,n="default",c=!0;if(this.props.isEmbedded)t=f.createElement(q,{object:this.props.object,actor:this.props.actor});else switch(this.props.objectEventType){case"onTopicPosting":n="xtra-small",c=!1}var l=this.props.actor&&!this.props.actor.isMe?{FOLLOW:!0,UNTAG:!!Object(C.DisplayUntagIcon)(this.props.object,this.props.loggedInUserId||void 0)}:{FOLLOW:!1,UNTAG:!!Object(C.DisplayUntagIcon)(this.props.object,this.props.loggedInUserId||void 0)},s=null;"Photo"!==a&&"Video"!==a||(s=f.createElement(P.Toaster,null,function(e){return f.createElement(I.EditMediaModal,{modalName:r.editUgcModalName,mediaObject:r.props.object,onSubmit:function t(){e({node:Object(h.localize)("ugc_post_updated")})}})})),"LinkPost"===a&&(s=f.createElement(P.Toaster,null,function(e){return f.createElement(z.EditLinkPostModal,{modalName:r.editUgcModalName,linkPost:r.props.object,onSubmit:function t(){e({node:Object(h.localize)("ugc_post_updated")})}})}));var i={parentProps:this.props,editComponent:s,editUgcModalName:this.editUgcModalName,overrideItems:l};if(this.props.isEmbedded)t=f.createElement(q,{object:this.props.object,actor:this.props.actor});else switch(this.props.objectEventType){case"onReview":t=f.createElement(x,{object:this.props.object,actor:this.props.actor});break;case"onFullReview":t=f.createElement(H,{object:this.props.object,actor:this.props.actor});break;case"onRoomTip":t=f.createElement(V,{object:this.props.object,actor:this.props.actor});break;case"onPhoto":t=f.createElement(W,{object:this.props.object,actor:this.props.actor});break;case"onFullPhoto":t=f.createElement(G,{object:this.props.object,actor:this.props.actor});break;case"onMediaBatch":t=f.createElement($,{object:this.props.object,actor:this.props.actor,isEmbedded:this.props.isEmbedded});break;case"onVideo":t=f.createElement(D.RouteConsumer,null,function(e){var t=e.route;return f.createElement(J,{objectProps:r.props,geoScope:parseInt(t.geo,10)})});break;case"onForumPost":t=f.createElement(K,{object:this.props.object,actor:this.props.actor});break;case"onLinkPost":t=f.createElement(D.RouteConsumer,null,function(e){var t=e.route;return f.createElement(X,{objectProps:r.props,geoScope:parseInt(t.geo,10)})});break;case"onRepost":t=f.createElement(Y,{object:this.props.object,actor:this.props.actor});break;case"onTrip":t=f.createElement(D.RouteConsumer,null,function(e){var t=e.route;return f.createElement(Q,{objectProps:r.props,geoScope:parseInt(t.geo,10)})});break;case"onLocationTopic":t=f.createElement(Z,{object:this.props.object,actor:this.props.actor});break;case"onTopicPosting":t=f.createElement(ee,{objectProps:this.props,overflowMenuProps:i});break;default:M.a.error("objectEventRender Error - object is required.")}return f.createElement("div",{className:"social-member-event-MemberEventOnObjectBlock__member_event_block--1Kusx"},!this.props.isEmbedded&&this.props.renderAvatar&&f.createElement(S.InteractionLogger,null,function(e){var t,a,o;return f.createElement(g.Avatar,{photo:null===(t=r.props.actor)||void 0===t?void 0:t.avatar,display:"inline",target:"_self",href:null===(a=r.props.actor)||void 0===a?void 0:null===(o=a.route)||void 0===o?void 0:o.url,withBorder:!0,onClick:function t(a){var o;return e(a,"userClick",{userId:null===(o=r.props.actor)||void 0===o?void 0:o.userId})},size:n})}),f.createElement("div",{className:"social-member-event-MemberEventOnObjectBlock__event_wrap--1YkeG"},this.props.renderMemberActions?f.createElement("div",{className:"social-member-event-MemberEventOnObjectBlock__member_actions--2uzIM"},!this.props.isEmbedded&&f.createElement(f.Fragment,null,s,c&&f.createElement(re,o()({},i,{overrideItems:l})))):f.createElement("div",{className:"social-member-event-MemberEventOnObjectBlock__member_actions--2uzIM"}),t))}}]),t}(f.Component);j()(ae,"defaultProps",{deleteObject:null,isEmbedded:!1,displayDate:"",viewportCategory:"",renderMemberActions:!0,renderAvatar:!0});var oe={isEmbedded:!1,displayDate:""};U.defaultProps=oe,x.defaultProps=oe,H.defaultProps=oe,V.defaultProps=oe,W.defaultProps=oe,G.defaultProps=oe,$.defaultProps=oe,J.defaultProps=oe,K.defaultProps=oe,X.defaultProps=oe,Y.defaultProps=oe,q.defaultProps=oe,Q.defaultProps=oe,Z.defaultProps=oe,ee.defaultProps=oe;var ne=ae;r.d(t,"MemberEventOnObjectBlock",function(){return ne}),t.default={}}}});
//# sourceMappingURL=social.member-event.d4ac324003.js.map