(window.$WP=window.$WP||[]).push({id:"@ta/brand.global-nav-action-content-collect",d:["vendor-babel","vendor-react-libs","ta-platform","@ta/overlays.popover","@ta/common.authz","@ta/tracking.interactions","@ta/social.login-gate","@ta/overlays.managers","@ta/public.content-uploader","@ta/overlays.modal","@ta/overlays.headers","@ta/media.upload","@ta/public.listing","ta-common"],e:["./packages/brand/global-nav-action-content-collect/index.jsx"],x:{"./packages/brand/global-nav-action-content-collect/ActionsBlock.jsx":["a"],"./packages/brand/global-nav-action-content-collect/ActionsBlock.less":["a"],"./packages/brand/global-nav-action-content-collect/ContentCollectionUtility.jsx":["e","f","c","d","b","a","g"],"./packages/brand/global-nav-action-content-collect/index.jsx":["default","ActionsBlock","getPid","getTitle","getIconName","ShowOverlayUploaderModal","showLinkUploaderFromVideoUploader","linkToastMessage","photoToastMessage"]},m:{"./node_modules/webpack/buildin/global.js":function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},"./packages/brand/global-nav-action-content-collect/ActionsBlock.jsx":function(e,t,n){"use strict";(function(e){var a=n("@babel/runtime/helpers/esm/extends"),o=n.n(a),l=n("react"),i=n("@ta/common.features"),c=n("@ta/common.i18n"),r=n("react-redux"),d=n("@ta/tracking.interactions"),s=n("@ta/common.tracking"),u=n.n(s),m=n("@ta/public.listing"),p=n("@ta/overlays.managers"),b=n("@ta/styleguide.icon"),g=n("./packages/brand/global-nav-action-content-collect/ContentCollectionUtility.jsx"),v=n("./packages/brand/global-nav-action-content-collect/ActionsBlock.less"),_=function t(n){var a=n.label,o=n.icon,i=n.trackingName,c=void 0===i?void 0:i,r=n.onClick,s=n.pid,g=void 0===s?-1:s,_=n.currentLocationid,f=void 0===_?void 0:_,k=n.socialLoginGate,h=n.ifMemberSignedIn,C=n.currentServletName,N=l.createElement("span",{className:v.a.itemLabel},a),L=l.createElement(b.Icon,{className:v.a.itemIcon,name:o});if(n.name){var E=n.name,I=n.setUploaderTriggerData;return l.createElement(p.Opener,{name:E},function(e){return l.createElement(d.InteractionLogger,null,function(t){return l.createElement(m.LabeledIconAction,{icon:L,label:N,onClick:function n(a){I(E,g),void 0!==c&&(t(a,"postContentCtaClick",{action:c,entrypoint:"GLOBAL_NAV",isMemberSignedIn:h,locationId:f}),u()({module:"postContentCtaClick",action:c,context:"GLOBAL_NAV|".concat(C),isMemberSignedIn:h,value:g})),k(g).then(function(){e(),r&&r(a)})}})})})}if(n.url){var y=n.url;return l.createElement(d.InteractionLogger,null,function(t){return l.createElement(m.LabeledIconAction,{icon:L,label:N,url:y,onClick:function n(a){void 0!==c&&(t(a,"postContentCtaClick",{action:c,entrypoint:"GLOBAL_NAV",locationId:f}),u()({module:"postContentCtaClick",action:c,context:"GLOBAL_NAV|".concat(C),isMemberSignedIn:h,value:g})),a.preventDefault(),k(g).then(function(){r&&r(a),window.location.href=y}),e.require(["trjs!ta/util/Cookie"],function(e){e.setPIDCookie(g)})}})})}return null},f=function e(t){var n=t.actions;return l.createElement("div",{className:v.a.buttons},n.map(function(e){return l.createElement(_,o()({},e,{key:e.label}))}))},k=function e(t){var n=t.permissions,a=t.permissionsLoading,o=t.setUploaderTriggerDataMethod,r=t.isLoggedIn,d=t.pageName,s=t.locationId,u=t.loginGate,m=t.isMemberSignedIn,p=Object(i.featureIsEnabled)("social_link_posting_enabled"),b=Object(i.featureIsEnabled)("media_video_upload_enabled"),v=Object(i.featureIsEnabled)("media_photo_upload_enabled"),_=[],k=Object(g.c)(d);return b&&r&&(null==n?void 0:n.canUploadVideo)&&_.push({label:Object(c.localize)("ugc_uploader_video_v3"),icon:"video-fill",trackingName:"POST_VIDEOS",name:"video-uploader-nav",setUploaderTriggerData:o,currentServletName:d,pid:k,currentLocationid:s,socialLoginGate:u,ifMemberSignedIn:m}),v&&(!r||a||(null==n?void 0:n.canPostPhoto))&&_.push({label:Object(c.localize)("ugc_uploader_photo_v3"),icon:"camera-fill",name:"photo-uploader-nav",trackingName:"POST_PHOTOS",setUploaderTriggerData:o,currentServletName:d,pid:k,currentLocationid:s,socialLoginGate:u,ifMemberSignedIn:m}),(!r||a||(null==n?void 0:n.canWriteReview))&&_.push({label:Object(c.localize)("ugc_uploader_review_v2"),icon:"pencil-paper",trackingName:"WRITE_REVIEW",url:"/UserReview",pid:k,currentLocationid:s,socialLoginGate:u,ifMemberSignedIn:m,currentServletName:d}),p&&r&&(null==n?void 0:n.canPostLink)&&_.push({label:Object(c.localize)("ugc_uploader_linkPost_v3"),icon:"link",name:"link-uploader-nav",trackingName:"POST_LINKS",setUploaderTriggerData:o,currentServletName:d,pid:k,currentLocationid:s,socialLoginGate:u,ifMemberSignedIn:m}),l.createElement(f,{actions:_})};k.defaultProps={isLoggedIn:!1},t.a=Object(r.connect)(function(e){return{isLoggedIn:!!e.auth.loggedInUserId,pageName:e.route.page,locationId:e.route.detail,isMemberSignedIn:e.auth.isMember}})(k)}).call(this,n("./node_modules/webpack/buildin/global.js"))},"./packages/brand/global-nav-action-content-collect/ActionsBlock.less":function(e,t,n){"use strict";t.a={buttons:"brand-global-nav-action-content-collect-ActionsBlock__buttons--vioUd",itemIcon:"brand-global-nav-action-content-collect-ActionsBlock__itemIcon--Hf6G5",itemLabel:"brand-global-nav-action-content-collect-ActionsBlock__itemLabel--1_mMr"}},"./packages/brand/global-nav-action-content-collect/ContentCollectionUtility.jsx":function(e,t,n){"use strict";var a=n("@ta/common.features"),o=n("@ta/common.i18n"),l=n("react"),i=n("@ta/overlays.managers"),c=n("@ta/public.content-uploader"),r=n("@ta/overlays.modal"),d=n("@ta/overlays.headers"),s=n("@ta/common.classnames"),u=n.n(s),m=n("@ta/media.upload"),p="brand-global-nav-action-content-collect-ContentCollectionUtility__toastMessge--1kzFb",b="brand-global-nav-action-content-collect-ContentCollectionUtility__toastTitle--1wSgt";n.d(t,"e",function(){return g}),n.d(t,"f",function(){return v}),n.d(t,"c",function(){return _}),n.d(t,"d",function(){return f}),n.d(t,"b",function(){return k}),n.d(t,"a",function(){return h}),n.d(t,"g",function(){return C});var g=function e(t,n){return"Profile"===n?Object(o.unescaped)(Object(o.localize)("upload_link_posted_copy_modal_profile")):Object(o.unescaped)(Object(o.localize)("upload_link_posted_copy_modal_2",{0:t,1:"brand-global-nav-action-content-collect-ContentCollectionUtility__toastLink--1rg5T"}))},v=function e(t,n){return"Profile"===n?Object(o.unescaped)(Object(o.localize)("upload_photo_posted_copy_modal_profile")):Object(o.unescaped)(Object(o.localize)("upload_photo_posted_copy_modal_2",{0:t,1:"brand-global-nav-action-content-collect-ContentCollectionUtility__toastLink--1rg5T"}))},_=function e(t){return"Hotel_Review"===t?40537:"Restaurant_Review"===t?40513:"Attraction_Review"===t?40536:"Hotels"===t?40538:"Restaurants"===t?40512:"Attractions"===t?40535:"Home"===t?40488:"Profile"===t?40489:"SmartDeals"===t?40539:"ShowTopic"===t?40540:"Tourism"===t?40541:"ShowUserReviews"===t?40542:"ShowForum"===t||"ForumHome"===t?40544:"Airline_Review"===t?39771:"Airlines"===t?39772:"Cruise_Review"===t?40514:40543},f=function e(){return Object(a.featureIsEnabled)("add_cta_to_global_nav")?Object(o.localize)("global_nav_content_cta_post"):""},k=function e(){return Object(a.featureIsEnabled)("add_cta_to_global_nav")?"plus-circle":""},h=function e(t,n,a,s,_,f,k){if(null==s?void 0:s.profile){if("link-uploader-nav"===t)return l.createElement(l.Fragment,null,l.createElement(i.Opener,{name:"link-toast-overlay"},function(e){return l.createElement(c.LinkPostUploader,{modalName:"link-uploader-nav",onSubmit:e,displaySuccessModal:!1,locationId:_})}),l.createElement(r.Modal,{name:"link-toast-overlay",header:l.createElement(d.TitleBar,{iconName:"link",displayType:"LEFT_ALIGN_GRAY"},l.createElement("span",{className:b},Object(o.localize)("link_uploader_header")))},l.createElement("div",{className:u()(p)},g(s.profile,k))));if("video-uploader-nav"===t)return l.createElement(l.Fragment,null,l.createElement(i.Opener,{name:"video-toast-overlay"},function(e){return l.createElement(m.MediaUploaderModal,{mediaType:"video",modalName:"video-uploader-nav",linkUploaderModalName:"link-uploader-nav",key:"video",pid:n,onSubmit:e,locationId:_,showLinkUploaderOfGNavVideoModalLink:f,linkUploaderModalNameOfGNavVideoModalLink:"link-uploader-from-video-uploader"})}),l.createElement(r.Modal,{name:"video-toast-overlay",header:l.createElement(d.TitleBar,{iconName:"video-fill",displayType:"LEFT_ALIGN_GRAY"},l.createElement("span",{className:b},Object(o.localize)("post_a_video_modal_header")))},l.createElement("div",{className:u()(p)},Object(o.localize)("upload_video_processing_copy_modal"))));if("photo-uploader-nav"===t)return l.createElement(l.Fragment,null,l.createElement(i.Opener,{name:"photo-toast-overlay"},function(e){return l.createElement(m.MediaUploaderModal,{mediaType:"photo",modalName:"photo-uploader-nav",linkUploaderModalName:"link-uploader-nav",key:"photo",pid:n,onSubmit:e,locationId:_})}),l.createElement(r.Modal,{name:"photo-toast-overlay",header:l.createElement(d.TitleBar,{iconName:"camera-fill",displayType:"LEFT_ALIGN_GRAY"},l.createElement("span",{className:b},Object(o.localize)("post_photos_form_header")))},l.createElement("div",{className:u()(p)},v(s.profile,k))))}return null},C=function e(t,n,a,s,m){return t&&(null==a?void 0:a.profile)?l.createElement("div",null,l.createElement(i.Opener,{name:"link-toast-overlay"},function(e){return l.createElement(c.LinkPostUploader,{modalName:"link-uploader-from-video-uploader",onSubmit:e,locationId:s})}),l.createElement(r.Modal,{name:"link-toast-overlay",header:l.createElement(d.TitleBar,{iconName:"link",displayType:"LEFT_ALIGN_GRAY"},l.createElement("span",{style:{fontSize:"16px",lineHeight:"18px"}},Object(o.localize)("link_uploader_header")))},l.createElement("div",{className:u()(p)},g(a.profile,m)))):null}},"./packages/brand/global-nav-action-content-collect/index.jsx":function(e,t,n){"use strict";n.r(t);var a=n("@babel/runtime/helpers/esm/classCallCheck"),o=n.n(a),l=n("@babel/runtime/helpers/esm/createClass"),i=n.n(l),c=n("@babel/runtime/helpers/esm/possibleConstructorReturn"),r=n.n(c),d=n("@babel/runtime/helpers/esm/getPrototypeOf"),s=n.n(d),u=n("@babel/runtime/helpers/esm/inherits"),m=n.n(u),p=n("@babel/runtime/helpers/esm/assertThisInitialized"),b=n.n(p),g=n("@babel/runtime/helpers/esm/defineProperty"),v=n.n(g),_=n("react"),f=n("@ta/common.api"),k=n("@ta/common.classnames"),h=n.n(k),C=n("@ta/overlays.popover"),N=n.n(C),L=n("@ta/common.authz"),E=n("@ta/tracking.interactions"),I=n("@ta/common.tracking"),y=n.n(I),O=n("@ta/social.login-gate"),S=n("./packages/brand/global-nav-action-content-collect/ActionsBlock.jsx"),j=n("./packages/brand/global-nav-action-content-collect/ContentCollectionUtility.jsx"),T=function(e){function t(){var e,n;o()(this,t);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return n=r()(this,(e=s()(t)).call.apply(e,[this].concat(l))),v()(b()(b()(n)),"state",{modalName:"",pId:-1,showLinkUploader:!1}),v()(b()(b()(n)),"setUploaderTriggerData",function(e,t){n.setState({modalName:e,pId:t})}),v()(b()(b()(n)),"ifShowLinkUploader",function(e){n.setState({showLinkUploader:e})}),n}return m()(t,e),i()(t,[{key:"render",value:function e(){var t,n,a=this,o=this.state,l=o.modalName,i=o.pId,c=o.showLinkUploader,r=this.props,d=r.currentLocale,s=r.member,u=r.pageName,m=r.currentLocationId,p=r.initialServletName,b=r.ifMemberSignedIn,g="Home"===u,f="Home"!==u&&"Profile"!==u&&"Trips"!==u||g&&"Home"!==p,k=h()("brand-global-nav-action-content-collect-ContentCollection__icon--2M_7j",(t={},v()(t,"brand-global-nav-action-content-collect-ContentCollection__onDarkBg--oLQNM",!g),v()(t,"brand-global-nav-action-content-collect-ContentCollection__nonComponentIcon--3eipG",f),t)),C=h()("brand-global-nav-action-content-collect-ContentCollection__container--3_q4P",(n={},v()(n,"brand-global-nav-action-content-collect-ContentCollection__onDarkBg--oLQNM",!g),v()(n,"brand-global-nav-action-content-collect-ContentCollection__onDark--1eb0U",!g),v()(n,"brand-global-nav-action-content-collect-ContentCollection__nonComponentContainer--1tFJw",f),n)),I=Object(j.d)(),T=h()("ui_icon",Object(j.b)());return _.createElement(E.TrackingNamespaceContext.Provider,{value:"globalNav"},_.createElement(E.GlobalNavTrackingContext.Provider,{value:{uid:this.props.uid}},_.createElement(O.SocialLoginGate,{pid:Object(j.c)(u)},function(e){return _.createElement(E.InteractionLogger,null,function(t){return _.createElement("div",{className:C,title:I},Object(j.a)(l,i,d,s,m,a.ifShowLinkUploader,u),Object(j.g)(c,d,s,m,u),_.createElement(N.a,{fullBleed:!0,below:!0,alignEdge:"right",contents:function t(){return _.createElement(L.WithAuthzInfo,null,function(t,n){return _.createElement(S.a,{permissions:t,permissionsLoading:n,setUploaderTriggerDataMethod:a.setUploaderTriggerData,loginGate:e})})},closeButton:!1,shiftArrow:-19,shiftY:2,arrowType:"small",fixed:g,minWidth:200},function(e,n){return _.createElement("div",{ref:e,onClick:function e(a){n(),function e(n){t(n,"postContentCtaClick",{action:"NO_SELECTION",entrypoint:"GLOBAL_NAV",locationId:m,isMemberSignedIn:b}),y()({module:"postContentCtaClick",action:"NO_SELECTION",context:"GLOBAL_NAV|".concat(u),isMemberSignedIn:b})}(a)},className:k,title:I},_.createElement("span",{className:T}),_.createElement("span",{className:"brand-global-nav-action-content-collect-ContentCollection__label--1YYud"},I))}))})})))}}]),t}(_.Component),M=Object(f.bind)(function(e,t){var n=null,a=e.auth,o=a.loggedInUserId;return a.isMember&&(n=t("/data/1.0/member/self?userId=".concat(o))),function(e){return{uid:e.tracking.uid||"",currentLocale:e.i18n.locale,pageName:e.route.page,member:n?n.get().data:null,currentLocationId:e.route.detail||0,initialServletName:e.meta.initialServletName,ifMemberSignedIn:e.auth.isMember}}})(T);n.d(t,"ActionsBlock",function(){return S.a}),n.d(t,"getPid",function(){return j.c}),n.d(t,"getTitle",function(){return j.d}),n.d(t,"getIconName",function(){return j.b}),n.d(t,"ShowOverlayUploaderModal",function(){return j.a}),n.d(t,"showLinkUploaderFromVideoUploader",function(){return j.g}),n.d(t,"linkToastMessage",function(){return j.e}),n.d(t,"photoToastMessage",function(){return j.f}),t.default=M}}});
//# sourceMappingURL=brand.global-nav-action-content-collect.6c99141347.js.map