(window.$WP=window.$WP||[]).push({id:"@ta/common.typeahead",d:["vendor-babel","vendor-react-libs","@ta/common.keyboardCodes","ta-platform","ta-common","@ta/list.navigable-list","@ta/input.text-input","@ta/events.window","vendor-apollo-libs"],e:["./packages/common/typeahead/typeaheadExports.jsx"],x:{"./packages/common/typeahead/typeaheadExports.jsx":["Typeahead","TypeaheadTextInput","TypeaheadTextArea","TypeaheadTracking","GeoNaviFetcher","GeoNaviFetcherId","RecentlyViewedFetcher","RecentlyViewedFetcherId","GeoThemeFetcher","GeoThemeFetcherId","TypeaheadJsonFetcher","TypeaheadJsonFetcherId","BasicResult","getIconFromResultType","GeoNaviResult","GoNearbyResult","GoWorldwideResult","NoResults","RecentlyViewedResult","GeoThemeResult","SectionTitle","TypeaheadJsonResult","RescueResult","LocationSelector","MultiLocationSelector","GeoSelector","POISelector","Selector","WorldwideFetcher","POIObjectList"]},m:{"./packages/common/typeahead/typeaheadExports.jsx":function(e,t,n){"use strict";n.r(t);var o=n("@babel/runtime/helpers/esm/classCallCheck"),a=n.n(o),i=n("@babel/runtime/helpers/esm/createClass"),s=n.n(i),r=n("@babel/runtime/helpers/esm/possibleConstructorReturn"),c=n.n(r),l=n("@babel/runtime/helpers/esm/getPrototypeOf"),u=n.n(l),p=n("@babel/runtime/helpers/esm/inherits"),d=n.n(p),h=n("@babel/runtime/helpers/esm/assertThisInitialized"),m=n.n(h),v=n("@babel/runtime/helpers/esm/defineProperty"),f=n.n(v),y=n("react"),g=n.n(y),S=function(e){function t(){var e,n;a()(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=c()(this,(e=u()(t)).call.apply(e,[this].concat(i))),f()(m()(m()(n)),"state",{results:Object.freeze({})}),f()(m()(m()(n)),"notifyFetchers",function(e){n.props.fetchers.forEach(function(t){return t.fetch(e,n.props.context,n.recalculate)})}),f()(m()(m()(n)),"recalculate",function(){var e={};n.props.fetchers.forEach(function(t){var o=t.getResults();e[t.id]=o?o.filter(function(e){return e&&(n.props.filters||[]).every(function(t){return t(e)})}):o}),n.setState({results:e},function(){return n.props.onResultsChange(n.state.results)})}),n}return d()(t,e),s()(t,[{key:"componentDidMount",value:function e(){this.props.runOnInit&&this.notifyFetchers("")}},{key:"componentDidUpdate",value:function e(t){var n=this;this.props.context!==t.context&&this.props.fetchers.forEach(function(e){var t=e;t.onContextChange&&"function"==typeof t.onContextChange&&t.onContextChange(n.props.context,n.recalculate)})}},{key:"render",value:function e(){return this.props.children?this.props.children(this.state.results,this.notifyFetchers):null}}]),t}(y.Component);f()(S,"defaultProps",{context:void 0,filters:void 0,onResultsChange:function e(){},runOnInit:!1});var I=S,k=n("@ta/common.keyboardCodes"),_=function(e){function t(){var e,n;a()(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=c()(this,(e=u()(t)).call.apply(e,[this].concat(i))),f()(m()(m()(n)),"onChange",function(e,t){if(n.props.onChange&&n.props.onChange(t),(!e||e.keyCode!==k.KEY_ENTER)&&n.currentQuery!==t){if(e)switch(e.keyCode){case k.KEY_DOWN:case k.KEY_UP:case k.KEY_ESCAPE:case k.KEY_TAB:case k.KEY_CAPSLK:case k.KEY_LEFT:case k.KEY_RIGHT:case k.KEY_META:case k.KEY_SHIFT:case k.KEY_CTRL:return}n.updateSearchTimeout&&clearTimeout(n.updateSearchTimeout),n.currentQuery=t,n.updateSearchTimeout=setTimeout(function(){n.props.onQueryChange&&n.props.onQueryChange(t)},n.props.searchDelay)}}),f()(m()(m()(n)),"updateSearchTimeout",void 0),f()(m()(m()(n)),"currentQuery",void 0),n}return d()(t,e),s()(t,[{key:"render",value:function e(){var t={name:this.props.name,value:this.props.value,type:this.props.type,className:this.props.inputComponentClassName,fontSize:this.props.fontSize,lineHeight:this.props.lineHeight,placeholder:this.props.placeholder,onChange:this.onChange,onKeyUp:this.onChange,onCompositionEnd:this.onChange,onInteractionStart:this.props.onInteractionStart,onSelect:this.props.onSelect,onFocus:this.props.onFocus,onBlur:this.props.onBlur,focusOnMount:this.props.focusOnMount,focusOnUpdate:this.props.focusOnUpdate,onRef:this.props.onRef,hideAutoComplete:this.props.hideAutoComplete};return y.createElement(this.props.inputComponentType,t)}}]),t}(y.Component);f()(_,"defaultProps",{name:void 0,value:void 0,type:void 0,placeholder:void 0,focusOnMount:!1,focusOnUpdate:!1,hideAutoComplete:!1,searchDelay:250,onQueryChange:void 0,onInteractionStart:void 0,onFocus:void 0,onBlur:void 0,onRef:void 0,onSelect:void 0});var T=_,C=function(e){function t(){var e,n;a()(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=c()(this,(e=u()(t)).call.apply(e,[this].concat(i))),f()(m()(m()(n)),"onChange",function(e,t){if(n.props.onChange&&n.props.onChange(e,t),(!e||e.keyCode!==k.KEY_ENTER)&&n.currentQuery!==t){if(e)switch(e.keyCode){case k.KEY_DOWN:case k.KEY_UP:case k.KEY_ESCAPE:case k.KEY_TAB:case k.KEY_CAPSLK:case k.KEY_LEFT:case k.KEY_RIGHT:case k.KEY_META:case k.KEY_SHIFT:case k.KEY_CTRL:return}n.updateSearchTimeout&&clearTimeout(n.updateSearchTimeout),n.currentQuery=t,n.updateSearchTimeout=setTimeout(function(){n.props.onQueryChange&&n.props.onQueryChange(t)},n.props.searchDelay)}}),f()(m()(m()(n)),"updateSearchTimeout",void 0),f()(m()(m()(n)),"currentQuery",void 0),n}return d()(t,e),s()(t,[{key:"render",value:function e(){var t={id:this.props.id,name:this.props.name,value:this.props.value,className:this.props.inputComponentClassName,rows:this.props.rows,cols:this.props.cols,placeholder:this.props.placeholder,disabled:this.props.disabled,focusOnMount:this.props.focusOnMount,onFocus:this.props.onFocus,onBlur:this.props.onBlur,onChange:this.onChange,onKeyUp:this.onChange,onKeyDown:this.onChange,onCompositionEnd:this.onChange,onInteractionStart:this.props.onInteractionStart,onRef:this.props.onRef,maxLength:this.props.maxLength};return y.createElement(this.props.inputComponentType,t)}}]),t}(y.Component);f()(C,"defaultProps",{name:void 0,value:void 0,placeholder:void 0,focusOnMount:!1,focusOnUpdate:!1,searchDelay:250,onQueryChange:void 0,onInteractionStart:void 0,onFocus:void 0,onBlur:void 0,onRef:void 0});var E=C,b=n("@babel/runtime/helpers/esm/objectSpread"),R=n.n(b),N=n("@ta/common.tracking"),O=function e(t,n){var o=this;a()(this,e),f()(this,"interactionStart",void 0),f()(this,"uiOrigin",void 0),f()(this,"searchSessionId",void 0),f()(this,"setInteractionStart",function(e){o.interactionStart=e}),f()(this,"createTrackingData",function(e){var t=e.eventType,n=e.userInteractionType,a=e.selectedItem,i=a&&a.query,s=a&&a.value,r=a&&a.url,c=a&&a.resultIdx,l=a&&a.type,u=a&&a.data_type,p=a&&a.totalCount,d=a&&a.document_id,h={action:"RECORD",eventType:t,uiOrigin:o.uiOrigin,global:"true",type:l,value:s,source:o.uiOrigin,startTime:String(o.interactionStart),selDepth:c,isChild:"false",totalNum:p?String(p):void 0,userInteractionType:n,scope:"1",query:i,dataType:u,url:r,searchSessionId:o.searchSessionId,documentId:d},m={};return Object.keys(h).forEach(function(e){null!=h[e]&&(m[e]=String(h[e]))}),m}),f()(this,"ajaxTrack",function(e){var t=o.createTrackingData(e);fetch("/TypeAheadJson?".concat(new URLSearchParams(t).toString()),{credentials:"same-origin"})}),f()(this,"trackInteractionStart",function(){o.ajaxTrack({eventType:"start",userInteractionType:"start"})}),f()(this,"trackSelection",function(e,t){o.ajaxTrack({eventType:"select",userInteractionType:t,selectedItem:e})}),f()(this,"trackEventViaMEVTCookie",function(e,t){var n=o.createTrackingData({eventType:"search",userInteractionType:t,selectedItem:e});Object(N.addMevtCookie)(R()({},n,{t:"ta"}))}),this.uiOrigin=t,this.searchSessionId=n},x="geonavi",F=function(){function e(t){var n=t.geoId,o=t.limit;a()(this,e),f()(this,"id",x),f()(this,"geoId","1"),f()(this,"limit",26),f()(this,"cache",{}),f()(this,"results",null),f()(this,"stack",[]),n&&(this.geoId=n),o&&(this.limit=o)}return s()(e,[{key:"getResults",value:function e(){return this.results}},{key:"fetch",value:function e(t,n,o){this.onContextChange(n,o)}},{key:"onContextChange",value:function e(t,n){var o=this;if(t&&t.geoNaviId){var a=t.geoNaviId;"1"===a?this.stack=[]:-1!==this.stack.indexOf(a)?this.stack=this.stack.slice(0,this.stack.indexOf(a)):this.stack.push(this.geoId),this.geoId=a;var i=this.cache[this.geoId];if(i){if(i instanceof Promise)return;return this.results=i,void n()}var s=new URLSearchParams({action:"GEONAVI",geoID:this.geoId}),r=this.geoId;this.cache[r]=fetch("/TypeAheadJson?".concat(s.toString()),{method:"GET",credentials:"same-origin"}).then(function(e){if(e.ok)return e;throw Error(e.statusText)}).then(function(e){return e.json()}).then(function(e){return e.results.map(function(e,t){var n=String(e.id)===r?o.stack[o.stack.length-1]:String(e.id),a=0===t&&1!==parseInt(o.geoId,10);return{name:e.displayName,geoId:n,back:a,forward:!a&&!e.isLeaf}})}).then(function(e){return o.results=e.slice(0,o.limit),o.cache[r]=o.results,n(),o.results}).catch(function(){return o.results=[],n(),o.results})}}}]),e}(),w=n("@ta/common.logging"),M=n.n(w),L="recentlyviewed",P=function(){function e(t){var n=t.categories,o=t.limit;a()(this,e),f()(this,"id",L),f()(this,"categories",void 0),f()(this,"limit",10),f()(this,"results",null),f()(this,"inFlight",!1),n&&(this.categories=n),o&&(this.limit=o)}return s()(e,[{key:"getResults",value:function e(){return this.results}},{key:"fetch",value:function(e){function t(t,n,o){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t,n){var o=this;if(!this.inFlight&&null===this.results){var a=new URLSearchParams({limit:String(this.limit)});this.categories&&this.categories.forEach(function(e){return a.append("categories[]",e)}),this.inFlight=!0,fetch("/data/1.0/recent?".concat(a.toString()),{method:"GET",credentials:"same-origin"}).then(function(e){if(e.ok)return e;throw Error(e.statusText)}).then(function(e){return e.json()}).then(function(e){o.results=e.data.map(function(e){return e.result_object}),o.inFlight=!1,n()}).catch(function(e){M.a.error("recentPrefill",e),o.results=[],o.inFlight=!1,n()})}})}]),e}(),A="geotheme",j=function(){function e(t){var n=t.theme,o=t.limit;a()(this,e),f()(this,"id",A),f()(this,"theme",0),f()(this,"limit",10),f()(this,"results",null),f()(this,"inFlight",!1),n&&(this.theme=n),o&&(this.limit=o)}return s()(e,[{key:"getResults",value:function e(){return this.results}},{key:"fetch",value:function(e){function t(t,n,o){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t,n){var o=this;if(!this.inFlight&&null===this.results){var a=new URLSearchParams({geoThemeId:String(this.theme),limit:String(this.limit)});this.inFlight=!0,fetch("/data/1.0/destinations/bundle?".concat(a.toString()),{method:"GET",credentials:"same-origin"}).then(function(e){if(e.ok)return e;throw Error(e.statusText)}).then(function(e){return e.json()}).then(function(e){o.results=e.geos,o.inFlight=!1,n()}).catch(function(e){M.a.error("Could not fetch geo theme typeahead results.",e),o.results=[],o.inFlight=!1,n()})}})}]),e}(),V=n("@ta/common.string"),D=["act","air","al","ship","attr","eat","geo","hotel","nbrhd"],G="typeaheadjson",B=function(){function e(t){a()(this,e),f()(this,"id",G),f()(this,"props",void 0),f()(this,"cache",void 0),f()(this,"mostRecentTerm",void 0),f()(this,"results",null),f()(this,"additionalParams",void 0),this.props=t,void 0===this.props.cache&&(this.props.cache=!0),this.props.cache&&(this.cache={})}return s()(e,[{key:"setAdditionalParams",value:function e(t){this.additionalParams=t}},{key:"getResults",value:function e(){return this.results}},{key:"fetch",value:function(e){function t(t,n,o){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t,n){var o=this;if(this.mostRecentTerm=e,Object(V.inputLength)(e)<3)null!==this.results&&(this.results=null,n());else if(this.cache&&this.cache[e]){var a=this.cache[e];this.results!==a&&(this.results=a,n())}else{var i={action:"API",query:e};Object.keys(this.props).filter(function(e){return"cache"!==e}).forEach(function(e){var t=o.props[e];t&&(Array.isArray(t)?i[e]=t.join(","):i[e]=String(t))}),this.additionalParams&&(i=R()({},i,this.additionalParams)),fetch("/TypeAheadJson?".concat(new URLSearchParams(i).toString()),{method:"GET",credentials:"same-origin"}).then(function(e){if(e.ok)return e;throw Error(e.statusText)}).then(function(e){return e.json()}).then(function(t){t&&o.cache&&(o.cache[e]=t),e===o.mostRecentTerm&&(t?(o.results=t,n()):o.results=[])}).catch(function(){o.results=[],n()})}})}]),e}(),K=n("@ta/common.classnames"),Y=n.n(K),J=n("@ta/styleguide.icon"),H={result:"common-typeahead-results-BasicResult__result--1mjnd",reversedSubtitle:"common-typeahead-results-BasicResult__reversedSubtitle--262c3",subtitle:"common-typeahead-results-BasicResult__subtitle--1dWGg",rescue:"common-typeahead-results-BasicResult__rescue--1yg-h",rescueResult:"common-typeahead-results-BasicResult__rescueResult--1h3jO",active:"common-typeahead-results-BasicResult__active--1wjd4",noPadding:"common-typeahead-results-BasicResult__noPadding--YYQWt",narrow:"common-typeahead-results-BasicResult__narrow--3PmRG",rescueIcon:"common-typeahead-results-BasicResult__rescueIcon--3Ak38",leftIcon:"common-typeahead-results-BasicResult__leftIcon--2V-ru",accessibleGreenIcon:"common-typeahead-results-BasicResult__accessibleGreenIcon--sd5AS",resultTitle:"common-typeahead-results-BasicResult__resultTitle--1TQbu",rightIcon:"common-typeahead-results-BasicResult__rightIcon--22yLp",verified:"common-typeahead-results-BasicResult__verified--3po-r"},U=function e(t){var n=[H.result];t.active&&n.push(H.active),t.paddingStyle&&n.push(H[t.paddingStyle]),t.isRescue&&n.push(H.rescue);var o=t.subtitle?y.createElement("span",{className:t.reverseSubtitle?H.reversedSubtitle:H.subtitle},t.subtitle):void 0,a=t.iconName?y.createElement("span",{className:Y()(t.isRescue?H.rescueIcon:H.leftIcon,f()({},H.accessibleGreenIcon,t.greenIcon))},y.createElement(J.Icon,{name:t.iconName})):void 0,i=t.chevronName?y.createElement("span",{className:H.rightIcon},y.createElement(J.Icon,{name:t.chevronName})):void 0,s=t.verifiedIcon?y.createElement("span",{className:H.verified}):void 0;return y.createElement("div",{className:n.join(" ")},a,y.createElement("span",{className:Y()(H.resultTitle,f()({},H.rescueResult,t.isRescue))},t.reverseSubtitle&&o,t.title,s,!t.reverseSubtitle&&o),i)};U.defaultProps={subtitle:void 0,active:void 0,iconName:void 0,verifiedIcon:!1,chevronName:void 0,paddingStyle:void 0,isRescue:!1,reverseSubtitle:!1};var z=U,Q=function e(t){switch(t){case"HOTEL":return"hotels";case"EATERY":return"restaurants";case"ATTRACTION":return"attractions";case"UNIVERSITY":return"classes-workshops";case"TRAIN_STATION":return"train";case"AIRPORT":return"flights";case"THEME_PARK":return"amusement-parks";case"ACTIVITY":return"activities";case"SHOPPING":return"shopping-bag-fill";case"PORT":return"ports";case"GENERAL_HOSPITAL":return"hospital";case"FERRY":return"cruises";case"CORPORATION":return"office";case"BRAND":case"NEIGHBORHOOD":return"";case"AIRLINE":return"flights";case"SHIP":return"cruises";case"GEO":default:return"map-pin-fill"}},W=n("@ta/list.navigable-list"),q=function(e){function t(){var e,n;a()(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=c()(this,(e=u()(t)).call.apply(e,[this].concat(i))),f()(m()(m()(n)),"onSelection",function(e){if(n.props.onSelection&&"function"==typeof n.props.onSelection){var t=n.props.result,o=t.geoId,a=t.back,i=t.forward,s=a||i?"geonavi":"location_id";n.props.onSelection(e,{type:s,value:o})}}),n}return d()(t,e),s()(t,[{key:"render",value:function e(){var t;return this.props.result.back?t="single-chevron-left":this.props.result.forward&&(t="single-chevron-right"),y.createElement(W.NavigableListItem,{onSelection:this.onSelection,onMouseMove:this.props.onMouseMove,active:!!this.props.active},y.createElement(z,{title:this.props.result.name,chevronName:t,active:!!this.props.active}))}}]),t}(y.Component);f()(q,"defaultProps",{onSelection:void 0,onMouseMove:void 0,active:!1});var X=q,$=n("@ta/common.i18n"),Z=function e(t){return y.createElement(W.NavigableListItem,{onSelection:function e(n){t.onSelection&&t.onSelection(n,{type:"nearby"})},onMouseMove:t.onMouseMove,active:t.active},y.createElement(z,{title:Object($.localize)("mx_nearby"),iconName:"nearby-fill",active:t.active}))};Z.defaultProps={onSelection:void 0,onMouseMove:void 0,active:!1};var ee=Z,te=function e(t){return y.createElement(W.NavigableListItem,{onSelection:function e(n){t.onSelection&&t.onSelection(n,{type:"worldwide"})},onMouseMove:t.onMouseMove,active:t.active},y.createElement(z,{title:Object($.localize)("dual_search_worldwide"),iconName:"globe-world",active:t.active}))};te.defaultProps={onSelection:void 0,onMouseMove:void 0,active:!1};var ne=te,oe=function e(t){return y.createElement("div",{className:Y()("common-typeahead-results-NoResults__no_results--2UlUM",f()({},"common-typeahead-results-NoResults__small_font--_Pyaa",t.small))},Object($.localize)("mobile_no_results_found_8e0"))};oe[W.NonNavigableItem]=!0;var ae=oe,ie=function e(t,n,o,a){var i=[n,o].filter(function(e){return!!e}).join(", ");return"full_address"===t?a?"".concat(a,", ").concat(i):i:"parent_geos"===t?i:""},se=function(e){function t(){var e,n;a()(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=c()(this,(e=u()(t)).call.apply(e,[this].concat(i))),f()(m()(m()(n)),"onSelect",function(e){var t="click"===e.type?"click":"enter";n.props.tracker.trackSelection(n.props.result,t);var o=n.props.result.location_id;n.props.onSelection&&n.props.onSelection(e,{type:"recent_location_id",value:o})}),f()(m()(m()(n)),"iconFromCategoryKey",function(e){switch(e){case"attraction":return"attractions";case"hotel":return"hotels";case"restaurant":return"restaurants";case"geographic":default:return"map-pin-fill"}}),n}return d()(t,e),s()(t,[{key:"render",value:function e(){var t,n,o,a=this.props.result,i=a.name,s=a.category,r=a.ancestors,c=void 0===r?[]:r,l=ie(this.props.addressDisplay,null===(t=c[0])||void 0===t?void 0:t.name,null===(n=c[1])||void 0===n?void 0:n.name,null==a?void 0:null===(o=a.address_obj)||void 0===o?void 0:o.street1),u=this.props.includeIcon?this.iconFromCategoryKey(s&&s.key||""):"";return y.createElement(W.NavigableListItem,{active:!!this.props.active,onMouseMove:this.props.onMouseMove,onSelection:this.onSelect},y.createElement(z,{title:i,subtitle:l,iconName:u,active:this.props.active,paddingStyle:this.props.paddingStyle}))}}]),t}(y.Component);f()(se,"defaultProps",{onSelection:void 0,onMouseMove:void 0,active:!1,includeIcon:!1,paddingStyle:void 0,addressDisplay:"parent_geos"});var re=se,ce=function(e){function t(){var e,n;a()(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=c()(this,(e=u()(t)).call.apply(e,[this].concat(i))),f()(m()(m()(n)),"onSelect",function(e){var t="click"===e.type?"click":"enter";n.props.tracker.trackSelection(n.props.result,t);var o=n.props.result.location_id;n.props.onSelection&&n.props.onSelection(e,{type:"geo_theme_location_id",value:o})}),n}return d()(t,e),s()(t,[{key:"render",value:function e(){var t,n=this.props.result.name,o=this.props.result.ancestors?this.props.result.ancestors.length:0;return o>1?t="".concat(this.props.result.ancestors[0].name,", ").concat(this.props.result.ancestors[1].name):o>0&&(t=this.props.result.ancestors[0].name),y.createElement(W.NavigableListItem,{active:!!this.props.active,onMouseMove:this.props.onMouseMove,onSelection:this.onSelect},y.createElement(z,{title:n,subtitle:t,active:this.props.active}))}}]),t}(y.Component);f()(ce,"defaultProps",{onSelection:void 0,onMouseMove:void 0,active:!1});var le=ce,ue=function e(t){var n=t.title;return y.createElement("div",{className:"common-typeahead-results-SectionTitle__section--3aPog"},n)};ue[W.NonNavigableItem]=!0;var pe=ue,de=function(e){function t(){var e,n;a()(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=c()(this,(e=u()(t)).call.apply(e,[this].concat(i))),f()(m()(m()(n)),"onSelect",function(e){var t="click"===e.type?"click":"enter";n.props.tracker.trackSelection(n.props.result,t),n.props.tracker.trackEventViaMEVTCookie(n.props.result,t);var o=n.props.result.value;n.props.onSelection&&n.props.onSelection(e,{type:n.props.itemType,value:o,displayValue:n.props.result.name,scope:n.props.result.scope})}),n}return d()(t,e),s()(t,[{key:"render",value:function e(){var t=this.props.result.details||{},n=t.name,o=ie(this.props.addressDisplay,t.parent_name,t.grandparent_name,t.address),a=this.props.includeIcon?Q(this.props.result.type):"";return y.createElement(W.NavigableListItem,{onSelection:this.onSelect,onMouseMove:this.props.onMouseMove,active:this.props.active},y.createElement(z,{title:n,subtitle:o,iconName:a,active:this.props.active,paddingStyle:this.props.paddingStyle,greenIcon:this.props.greenIcon}))}}]),t}(y.Component);f()(de,"defaultProps",{onSelection:void 0,onMouseMove:void 0,active:!1,includeIcon:!1,addressDisplay:"parent_geos",paddingStyle:void 0,itemType:"location_id",greenIcon:!1});var he=de,me=function(e){function t(){var e,n;a()(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=c()(this,(e=u()(t)).call.apply(e,[this].concat(i))),f()(m()(m()(n)),"onSelect",function(e){var t="click"===e.type?"click":"enter";n.props.tracker.trackSelection(n.props.result,t),n.props.tracker.trackEventViaMEVTCookie(n.props.result,t),n.props.onSelection&&n.props.onSelection(e,{type:"rescue",value:n.props.result.url})}),n}return d()(t,e),s()(t,[{key:"render",value:function e(){var t="".concat(Object($.localize)("typeAheadSearchFor_fffff81b",{0:this.props.result.query}));return y.createElement(W.NavigableListItem,{onSelection:this.onSelect,onMouseMove:this.props.onMouseMove,active:this.props.active},y.createElement(z,{title:t,active:this.props.active,iconName:"search",isRescue:!0}))}}]),t}(y.Component);f()(me,"defaultProps",{onSelection:void 0,onMouseMove:void 0,active:!1});var ve=me,fe=n("@babel/runtime/helpers/esm/toConsumableArray"),ye=n.n(fe),ge=n("@ta/input.text-input"),Se=n("@ta/events.window"),Ie=n.n(Se),ke=function(e){function t(){var e,n;a()(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=c()(this,(e=u()(t)).call.apply(e,[this].concat(i))),f()(m()(m()(n)),"state",{closed:!1,inputFocused:!1}),f()(m()(m()(n)),"onSelection",function(e,t){n.setState({closed:!1}),n.setSelection(t)}),f()(m()(m()(n)),"onFocus",function(e){n.setState({closed:!1,inputFocused:!0}),n.props.onFocus&&n.props.onFocus(e)}),f()(m()(m()(n)),"onBlur",function(e){n.setState({inputFocused:!1}),n.props.onBlur&&n.props.onBlur(e)}),f()(m()(m()(n)),"setSelection",function(e){e&&(n.updateSearch(""),n.textInput&&n.textInput.focus(),n.props.selectionChanged(e))}),f()(m()(m()(n)),"handleOnKeyDown",function(e){e.keyCode===k.KEY_TAB&&n.props.closeDropdownOnClickOutside&&n.setState({closed:!0})}),f()(m()(m()(n)),"tracker",new O("","")),f()(m()(m()(n)),"textInput",void 0),f()(m()(m()(n)),"updateSearch",void 0),f()(m()(m()(n)),"isMounted",!1),n}return d()(t,e),s()(t,[{key:"componentDidMount",value:function e(){this.isMounted=!0}},{key:"componentWillUnmount",value:function e(){this.isMounted=!1}},{key:"render",value:function e(){var t=this,n=this.props.placeHolder||Object($.localize)("common_Search");return y.createElement(y.Fragment,null,y.createElement(I,{fetchers:this.props.fetchers},function(e,o){t.updateSearch=o;var a=e&&Object.keys(e).filter(function(t){return!function e(t){return!t||0===t.length}(e[t])}).length>0,i=t.props.handleEmptyResult&&e.typeaheadjson&&!e.typeaheadjson.length;return y.createElement("div",{className:"common-typeahead-location-Selector__textInput--5C4DU",onKeyDown:t.handleOnKeyDown},y.createElement("span",{className:Y()("ui_icon",t.props.iconType,"common-typeahead-location-Selector__icon--lHRCs",f()({},"common-typeahead-location-Selector__accessibleGreenIcon--15xCL",t.props.greenIcon))}),y.createElement(T,{inputComponentType:ge.ManagedTextInput,inputComponentClassName:Y()("ui_input_text","common-typeahead-location-Selector__socialInput--2Zgrm",t.props.className),value:t.props.typeaheadTextInputValue,type:t.props.inputType,onChange:function e(n){t.setState({closed:!1}),t.props.textInputChanged(n)},onQueryChange:function e(t){o(t)},onFocus:t.onFocus,onBlur:t.onBlur,searchDelay:50,placeholder:n,onRef:function e(n){t.textInput=n,t.props.onRef(n)}}),(a||i)&&!t.state.closed&&y.createElement("div",{className:"common-typeahead-location-Selector__results--3df4J"},t.props.children(e,t.tracker,t.onSelection)))}),y.createElement(Ie.a,{event:"click",callback:function e(){t.isMounted&&t.props.closeDropdownOnClickOutside&&!t.state.inputFocused&&t.setState({closed:!0})}}))}}]),t}(y.Component);f()(ke,"defaultProps",{placeHolder:null,className:void 0,inputType:void 0,iconType:"search",greenIcon:!1,onFocus:void 0,onBlur:void 0,itemType:"location_id",onRef:function e(){},closeDropdownOnClickOutside:!0});var _e=ke,Te=function(e){function t(){var e,n;a()(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=c()(this,(e=u()(t)).call.apply(e,[this].concat(i))),f()(m()(m()(n)),"state",{textInputValue:n.props.selectedLocation.displayValue||""}),f()(m()(m()(n)),"onResultSelected",function(e){n.props.selectionChanged(e),n.setState({textInputValue:n.props.clearValueOnSelection?"":e.displayValue||""})}),f()(m()(m()(n)),"getTypeaheadJsonFetcher",function(){return new B({interleaved:!0,types:n.props.locationTypes,name_depth:1,details:!0,legacy_format:!0,urlList:!1,max:n.props.max,scoreThreshold:.8,parentids:n.props.parentids||[]})}),f()(m()(m()(n)),"textInputChanged",function(e){n.setState({textInputValue:e})}),f()(m()(m()(n)),"typeaheadJsonFetcher",n.getTypeaheadJsonFetcher()),n}return d()(t,e),s()(t,[{key:"componentDidUpdate",value:function e(t){(function e(t,n){return t===n||t.length===n.length&&t.every(function(e,t){return e===n[t]})})(t.parentids||[],this.props.parentids||[])||(this.typeaheadJsonFetcher=this.getTypeaheadJsonFetcher())}},{key:"render",value:function e(){var t=this,n=this.props.trailingItem;return g.a.createElement(_e,{fetchers:[this.typeaheadJsonFetcher],typeaheadTextInputValue:this.state.textInputValue,selectionChanged:this.onResultSelected,textInputChanged:this.textInputChanged,className:this.props.className,onFocus:this.props.onFocus,onBlur:this.props.onBlur,placeHolder:this.props.placeHolder,greenIcon:this.props.selectorGreenIcon,handleEmptyResult:this.props.handleEmptyResult,onRef:function e(n){t.props.onRef&&t.props.onRef(n)},closeDropdownOnClickOutside:this.props.closeDropdownOnClickOutside},function(e,o,a){var i=[];return i=e.typeaheadjson&&!e.typeaheadjson.length?[function(e,t){return g.a.createElement(W.NavigableListItem,{onMouseMove:t,key:"result='no-result'"},g.a.createElement(ae,{small:!0}))}]:ye()(e.typeaheadjson||[]).map(function(e){return function(n,i){return g.a.createElement(he,{addressDisplay:t.props.addressDisplay,result:e,tracker:o,onMouseMove:i,onSelection:a,active:n,key:"result=".concat(e.value),greenIcon:t.props.resultGreenIcon,includeIcon:!0})}}),n&&i.push(n),g.a.createElement(W.NavigableList,null,i)})}}]),t}(g.a.Component);f()(Te,"defaultProps",{locationTypes:D,className:void 0,onFocus:void 0,onBlur:void 0,placeHolder:void 0,clearValueOnSelection:!1,parentids:[],selectorGreenIcon:!1,resultGreenIcon:!1,addressDisplay:"parent_geos",trailingItem:void 0,max:8,handleEmptyResult:!1,onRef:function e(){},closeDropdownOnClickOutside:!0});var Ce=Te,Ee=n("@babel/runtime/helpers/esm/slicedToArray"),be=n.n(Ee),Re=n("react-apollo"),Ne=n("@ta/media.image"),Oe={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"LocationDetails"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"locationIds"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"locations"},arguments:[{kind:"Argument",name:{kind:"Name",value:"locationIds"},value:{kind:"Variable",name:{kind:"Name",value:"locationIds"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"locationId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"placeType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"thumbnail"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"photoSizes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"width"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"height"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isHorizontal"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"parent"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"locationId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"additionalNames"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"long"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"additionalNames"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"long"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:372}};Oe.loc.source={body:"f26d8cc49abb"};var xe=Oe,Fe=function e(t){var n=t.selectedLocations,o=t.onClose;return y.createElement(Re.Query,{errorPolicy:"all",query:xe,variables:{locationIds:Array.from(n.keys()).map(function(e){return parseInt(e,10)})}},function(e){var t=e.loading,n=e.data;return!t&&n&&n.locations&&n.locations[0]?y.createElement(y.Fragment,null,n.locations.map(function(e){return function e(t){var n,a,i,s,r,c;switch(a="CITY"===(null==t?void 0:t.placeType)?null==t?void 0:null===(i=t.additionalNames)||void 0===i?void 0:i.longOnlyParent:null==t?void 0:null===(s=t.parent)||void 0===s?void 0:null===(r=s.additionalNames)||void 0===r?void 0:r.long,null==t?void 0:t.placeType){case"ACCOMMODATION":c="hotels";break;case"ATTRACTION":c="attractions";break;case"ACTIVITY":c="activities";break;case"CITY":c="globe-world";break;case"EATERY":c="restaurants";break;default:c=""}return y.createElement("div",{key:"poi_tag_".concat(null==t?void 0:t.locationId),className:"".concat("common-typeahead-location-POIObjectList__poi_block--1iFBx"," ").concat("common-typeahead-location-POIObjectList__relative_container--L6oNS")},y.createElement("div",{className:"common-typeahead-location-POIObjectList__poi_thumbnail--1qDET"},(null==t?void 0:t.thumbnail)?y.createElement(Ne.ResponsiveImage,{sources:null==t?void 0:null===(n=t.thumbnail)||void 0===n?void 0:n.photoSizes,width:"60px",height:"60px",notLazy:!1,borderRadius:"2px"}):y.createElement("div",{style:{width:"60px",height:"60px"}},y.createElement("div",{className:"common-typeahead-location-POIObjectList__no_photo_available--3MpR8"},y.createElement(J.Icon,{name:c,className:"common-typeahead-location-POIObjectList__icon--1793k"})))),y.createElement("div",{className:"common-typeahead-location-POIObjectList__poi_info_vertical_center--3op-7"},y.createElement("div",{className:"common-typeahead-location-POIObjectList__poi_info--37Kva"},y.createElement("div",{className:"common-typeahead-location-POIObjectList__poi_name--FlhXE"},null==t?void 0:t.name),y.createElement("div",{className:"common-typeahead-location-POIObjectList__poi_location--3DY8C"},a))),o&&(null==t?void 0:t.locationId)?y.createElement("div",{className:"ui_icon times ".concat("common-typeahead-location-POIObjectList__trashIcon--2GksF"),onClick:function e(){return o(t.locationId.toString())}}):null)}(e)})):null})};Fe.defaultProps={onClose:void 0};var we=Fe,Me=function(e){function t(){var e,n;a()(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=c()(this,(e=u()(t)).call.apply(e,[this].concat(i))),f()(m()(m()(n)),"state",{textInputValue:"",focused:!1,hasResults:!1}),f()(m()(m()(n)),"onSelection",function(e,t){if(t&&"location_id"===t.type&&t.value){var o=String(t.value),a=new Map(n.props.selectedLocations);if(!a.has(o)){if(a.set(o,t),n.props.maxLocations>0&&a.size>n.props.maxLocations){var i=Array.from(a.keys())[0];a.delete(i)}n.props.selectionChanged(a)}n.setState({textInputValue:""}),n.updateSearch(""),n.textInput&&n.textInput.focus()}}),f()(m()(m()(n)),"handleResultChange",function(e){var t=e&&e.typeaheadjson&&e.typeaheadjson.length>0;t&&!n.state.hasResults?(n.props.hasResultsChanged&&n.props.hasResultsChanged(!0),n.setState({hasResults:!0})):!t&&n.state.hasResults&&(n.props.hasResultsChanged&&n.props.hasResultsChanged(!1),n.setState({hasResults:!1}))}),f()(m()(m()(n)),"handleItemRemoveClick",function(e){var t=new Map(n.props.selectedLocations);t.delete(e),n.props.selectionChanged(t)}),f()(m()(m()(n)),"typeaheadJsonFetcher",new B({interleaved:!0,types:D,name_depth:1,details:!0,legacy_format:!0,urlList:!1,max:8,scoreThreshold:.8})),f()(m()(m()(n)),"tracker",new O("","")),f()(m()(m()(n)),"textInput",void 0),f()(m()(m()(n)),"updateSearch",void 0),n}return d()(t,e),s()(t,[{key:"render",value:function e(){var t=this;return y.createElement(I,{fetchers:[this.typeaheadJsonFetcher],onResultsChange:this.handleResultChange},function(e,n){return t.updateSearch=n,y.createElement("div",{className:"".concat("common-typeahead-location-MultiLocationSelector__wrapper--aeYj9"," ").concat(t.props.className?t.props.className:"")},y.createElement("div",{className:"".concat("common-typeahead-location-MultiLocationSelector__inputContainer--3y7N4"," ").concat(t.state.focused?"common-typeahead-location-MultiLocationSelector__inputFocused--xvPlx":""),onClick:function e(){return t.textInput&&t.textInput.focus()}},y.createElement("span",{className:"ui_icon search ".concat("common-typeahead-location-MultiLocationSelector__searchIcon--2bJmn")}),y.createElement(T,{inputComponentType:ge.ManagedTextInput,inputComponentClassName:"common-typeahead-location-MultiLocationSelector__textInput--30bwX",value:t.state.textInputValue,onChange:function e(n){return t.setState({textInputValue:n})},onQueryChange:function e(t){n(t)},onFocus:function e(n){t.setState({focused:!0}),t.props.onFocus&&t.props.onFocus(n)},onBlur:function e(n){t.setState({focused:!1}),t.props.onBlur&&t.props.onBlur(n)},searchDelay:50,placeholder:0===t.props.selectedLocations.size||t.props.selectedLocations.size===t.props.maxLocations?Object($.localize)("post_video_typeahead_placeholder_text_search"):Object($.localize)("post_video_location_typeahead_add_location"),onRef:function e(n){t.textInput=n}})),e&&e.typeaheadjson&&e.typeaheadjson.length>0?y.createElement("div",{className:"common-typeahead-location-MultiLocationSelector__results--1sW6j"},y.createElement(W.NavigableList,null,e&&e.typeaheadjson?e.typeaheadjson.map(function(e){return function(n,o){return y.createElement(he,{result:e,tracker:t.tracker,onMouseMove:o,onSelection:t.onSelection,active:n,key:"result=".concat(e.value),includeIcon:!0})}}):[])):null,t.props.showLocationsAsPoiObjects?y.createElement(we,{selectedLocations:t.props.selectedLocations,onClose:t.handleItemRemoveClick}):Array.from(t.props.selectedLocations.entries()).map(function(e){var n=be()(e,2),o=n[0],a=n[1];return y.createElement("div",{className:"ui_tag_box ui_icon times ".concat("common-typeahead-location-MultiLocationSelector__selectedItem--pRT_v"),key:o,onClick:function e(){return t.handleItemRemoveClick(o)}},a.displayValue)}))})}}]),t}(y.Component);f()(Me,"defaultProps",{hasResultsChanged:null,maxLocations:0,className:void 0,onFocus:void 0,onBlur:void 0,showLocationsAsPoiObjects:!0});var Le=Me,Pe="worldwide",Ae=function(){function e(){a()(this,e),f()(this,"id",Pe),f()(this,"results",null),f()(this,"name",Object($.localize)("dual_search_worldwide"))}return s()(e,[{key:"getResults",value:function e(){return this.results}},{key:"fetch",value:function e(t,n,o){this.results=t.length<3||this.name.toLowerCase().indexOf(t.toLowerCase())<0?null:[{type:"GEO",value:"1",displayValue:this.name,details:{name:this.name}}],o()}}]),e}(),je=function(e){function t(){var e,n;a()(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=c()(this,(e=u()(t)).call.apply(e,[this].concat(i))),f()(m()(m()(n)),"state",{textInputValue:n.props.selectedLocation.displayValue||""}),f()(m()(m()(n)),"onResultSelected",function(e){n.props.selectionChanged(e),n.setState({textInputValue:e.displayValue||""})}),f()(m()(m()(n)),"typeaheadJsonFetcher",new B({interleaved:!0,types:["geo"],filter:"cities"===n.props.mode?["nobroad"]:void 0,name_depth:1,details:!0,legacy_format:!0,urlList:!1,max:n.props.max})),f()(m()(m()(n)),"textInputChanged",function(e){""===e&&n.props.selectionCleared&&n.props.selectionCleared(),n.setState({textInputValue:e})}),n}return d()(t,e),s()(t,[{key:"render",value:function e(){var t=this,n=[this.typeaheadJsonFetcher];return this.props.includeWorld&&n.unshift(new Ae),y.createElement(_e,{fetchers:n,typeaheadTextInputValue:this.state.textInputValue,selectionChanged:this.onResultSelected,textInputChanged:this.textInputChanged,iconType:this.props.iconType,greenIcon:this.props.selectorGreenIcon,placeHolder:this.props.placeholder,onFocus:this.props.onFocus,onBlur:this.props.onBlur,closeDropdownOnClickOutside:this.props.closeDropdownOnClickOutside},function(e,n,o){return y.createElement(W.NavigableList,null,[].concat(ye()(e.worldwide||[]),ye()(e.typeaheadjson||[])).map(function(e){return function(a,i){return y.createElement(he,{result:e,tracker:n,onMouseMove:i,onSelection:o,active:a,key:"result=".concat(e.value),greenIcon:t.props.resultGreenIcon,includeIcon:!0})}}))})}}]),t}(y.Component);f()(je,"defaultProps",{mode:"all",includeWorld:!0,selectionCleared:function e(){},iconType:"search",selectorGreenIcon:!1,resultGreenIcon:!1,placeholder:void 0,max:8,onBlur:void 0,onFocus:void 0,closeDropdownOnClickOutside:!0});var Ve=je,De=function(e){function t(){var e,n;a()(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=c()(this,(e=u()(t)).call.apply(e,[this].concat(i))),f()(m()(m()(n)),"state",{textInputValue:""}),f()(m()(m()(n)),"onResultSelected",function(e){n.props.selectionChanged(e),n.setState({textInputValue:e.displayValue||""})}),f()(m()(m()(n)),"typeaheadJsonFetcher",new B({interleaved:!0,types:["hotel","attr","eat"],filter:["nobroad"],name_depth:1,details:!0,legacy_format:!0,urlList:!1,max:8})),f()(m()(m()(n)),"textInputChanged",function(e){n.setState({textInputValue:e})}),n}return d()(t,e),s()(t,[{key:"render",value:function e(){return y.createElement(_e,{fetchers:[this.typeaheadJsonFetcher],typeaheadTextInputValue:this.state.textInputValue,selectionChanged:this.onResultSelected,textInputChanged:this.textInputChanged,placeHolder:this.props.placeholderText},function(e,t,n){return y.createElement(W.NavigableList,null,ye()(e.typeaheadjson||[]).map(function(e){return function(o,a){return y.createElement(he,{result:e,tracker:t,onMouseMove:a,onSelection:n,active:o,key:"result=".concat(e.value),includeIcon:!0})}}))})}}]),t}(y.Component);n.d(t,"Typeahead",function(){return I}),n.d(t,"TypeaheadTextInput",function(){return T}),n.d(t,"TypeaheadTextArea",function(){return E}),n.d(t,"TypeaheadTracking",function(){return O}),n.d(t,"GeoNaviFetcher",function(){return F}),n.d(t,"GeoNaviFetcherId",function(){return x}),n.d(t,"RecentlyViewedFetcher",function(){return P}),n.d(t,"RecentlyViewedFetcherId",function(){return L}),n.d(t,"GeoThemeFetcher",function(){return j}),n.d(t,"GeoThemeFetcherId",function(){return A}),n.d(t,"TypeaheadJsonFetcher",function(){return B}),n.d(t,"TypeaheadJsonFetcherId",function(){return G}),n.d(t,"BasicResult",function(){return z}),n.d(t,"getIconFromResultType",function(){return Q}),n.d(t,"GeoNaviResult",function(){return X}),n.d(t,"GoNearbyResult",function(){return ee}),n.d(t,"GoWorldwideResult",function(){return ne}),n.d(t,"NoResults",function(){return ae}),n.d(t,"RecentlyViewedResult",function(){return re}),n.d(t,"GeoThemeResult",function(){return le}),n.d(t,"SectionTitle",function(){return pe}),n.d(t,"TypeaheadJsonResult",function(){return he}),n.d(t,"RescueResult",function(){return ve}),n.d(t,"LocationSelector",function(){return Ce}),n.d(t,"MultiLocationSelector",function(){return Le}),n.d(t,"GeoSelector",function(){return Ve}),n.d(t,"POISelector",function(){return De}),n.d(t,"Selector",function(){return _e}),n.d(t,"WorldwideFetcher",function(){return Ae}),n.d(t,"POIObjectList",function(){return we})}}});
//# sourceMappingURL=common.typeahead.e9f0346cc6.js.map