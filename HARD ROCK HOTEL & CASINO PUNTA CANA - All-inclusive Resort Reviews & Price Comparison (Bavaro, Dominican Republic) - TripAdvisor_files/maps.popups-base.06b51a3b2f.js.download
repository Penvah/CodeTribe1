(window.$WP=window.$WP||[]).push({id:"@ta/maps.popups-base",d:["vendor-react-libs","@ta/maps.attractions-common","ta-platform","vendor-babel","@ta/common.photo-carousel","@ta/hotels.photos","@ta/maps.tail","ta-common","@ta/maps.click-source-tracking","@ta/trips.trip-flow-selector","@ta/trips.bookmark-icon","@ta/maps.location-types","@ta/maps.hoteloffer","@ta/maps.sponsored-pill","@ta/maps.photo-carousel","@ta/hotels.tracking","@ta/hotels.vacationpackages","@ta/vr.shared-providers"],e:["./packages/maps/popups-base/popups-base.jsx"],x:{"./packages/maps/popups-base/popups-base.jsx":["AttractionPopup","BaseLocationPopup","HotelPopup","RestaurantPopup","VpPopUp","RentalPopup"]},m:{"./packages/maps/popups-base/popups-base.jsx":function(e,t,n){"use strict";n.r(t);var a=n("react"),o=n("@ta/maps.attractions-common"),r=n("@ta/common.tracking"),i=n.n(r),l=n("@babel/runtime/helpers/esm/classCallCheck"),c=n.n(l),s=n("@babel/runtime/helpers/esm/createClass"),p=n.n(s),u=n("@babel/runtime/helpers/esm/possibleConstructorReturn"),m=n.n(u),d=n("@babel/runtime/helpers/esm/getPrototypeOf"),h=n.n(d),f=n("@babel/runtime/helpers/esm/inherits"),b=n.n(f),g=n("@babel/runtime/helpers/esm/assertThisInitialized"),_=n.n(g),k=n("@babel/runtime/helpers/esm/defineProperty"),C=n.n(k),E=n("@ta/common.photo-carousel"),v=n("@ta/hotels.photos"),P=n("@ta/common.routing"),I=n("@ta/common.features"),y=n("@ta/maps.tail"),T=n.n(y),w=n("@ta/styleguide.bubble-rating"),x=n("@ta/maps.click-source-tracking"),R=n("@ta/trips.trip-flow-selector"),S=n("@ta/trips.bookmark-icon"),N=n("@ta/styleguide.icon"),O=n("@ta/maps.location-types"),U=function e(t){var n=t.src,o=t.entityType;return n?a.createElement("div",{className:"maps-popups-base-CardThumbnail__photo--3TWGE",style:{backgroundImage:"url(".concat(n,")")}}):a.createElement(N.Icon,{name:Object(O.iconForEntityType)(o),className:"maps-popups-base-CardThumbnail__icon--3tux_"})};U.defaultProps={src:void 0};var L=U,D=function(e){function t(){var e,n;c()(this,t);for(var o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return n=m()(this,(e=h()(t)).call.apply(e,[this].concat(r))),C()(_()(_()(n)),"state",{carouselPhotoIndex:0}),C()(_()(_()(n)),"onCardClick",function(){i()({module:"pin",action:"pin_card_click",context:n.props.entityType})}),C()(_()(_()(n)),"onPhotoChange",function(e){i()({module:"pin",action:e>n.state.carouselPhotoIndex?"pin_photo_carousel_forward":"pin_photo_carousel_back",context:n.props.entityType}),n.state={carouselPhotoIndex:e}}),C()(_()(_()(n)),"renderThumbnailDefault",function(){return a.createElement(L,{src:n.props.thumbnail,entityType:n.props.entityType})}),C()(_()(_()(n)),"renderThumbnail",function(){var e=n.props.locationId;if(n.props.renderThumbnail){var t=n.props.renderThumbnail();if(t)return t}return Object(I.featureIsEnabled)("wc_maps_photo_carousel_DT")?a.createElement(v.CarouselPagingProvider,{locationId:e,fetchOnFirstLoad:3},function(e){var t=e.photos,o=e.photoCount,r=e.getNextPage;return 0===o?n.renderThumbnailDefault():a.createElement(E.PhotoCarousel,{height:"100%",width:"100%",photos:t,totalCount:o,showIndicatorDots:!0,wrapPhotos:!0,noCta:!0,hideArrows:!0,arrowSize:"small",onPhotoChange:n.onPhotoChange,onLoadLast:r})}):n.renderThumbnailDefault()}),n}return b()(t,e),p()(t,[{key:"render",value:function e(){var t=this.props,n=t.title,o=t.subtitle,i=t.detailUrl,l=t.rating,c=t.numReviews,s=t.children,p=t.entityType,u=t.locationId,m=t.hideBookmark,d=t.onDetailUrlClick,h=function e(t,n){d&&d(n),t.stopPropagation()};return a.createElement("div",{className:"maps-popups-base-BaseLocationPopup__outerContainer--3aa01",onClick:this.onCardClick,"data-map-base-location-popup":"true"},a.createElement("div",{className:"maps-popups-base-BaseLocationPopup__bodyContainer--2MCRe"},a.createElement(P.Link,{href:i,onClick:function e(t){return h(t,x.CLICK_SOURCES.PHOTO)},target:"_blank"},a.createElement(r.ClickTracker,{module:"pin",action:"pin_photo_click",context:p},a.createElement("div",{className:"maps-popups-base-BaseLocationPopup__thumbnail--2wyW8"},this.renderThumbnail()))),!m&&Object(I.featureIsEnabled)("social_2018")&&a.createElement("span",{className:"maps-popups-base-BaseLocationPopup__saveToTripButton--1DIIR"},a.createElement(R.QueriedTripFlowSelector,{object:{__typename:"LocationInformation",locationId:u},trackingContext:"Map"},function(e,t){return a.createElement(S.BookmarkIcon,{active:t,bookmarkStyle:"stacked",bookmarkSize:"24",onClick:e})})),a.createElement("div",{className:"maps-popups-base-BaseLocationPopup__contentContainer--3HY8C"},a.createElement("div",{className:"maps-popups-base-BaseLocationPopup__titleContainer--1tmvS"},this.props.titlePill,a.createElement(P.Link,{href:i,onClick:function e(t){return h(t,x.CLICK_SOURCES.NAME)},target:"_blank"},a.createElement(r.ClickTracker,{useSpan:!0,module:"pin",action:"pin_name_click",context:p},a.createElement("span",{className:"maps-popups-base-BaseLocationPopup__title--3aawq","data-base-location-popup-title":"true",dir:"auto"},n)))),c>0?a.createElement(P.Link,{href:"".concat(i,"#REVIEWS"),onClick:function e(t){return h(t,x.CLICK_SOURCES.REVIEWS)},target:"_blank"},a.createElement(w.BubbleRatingWithReviewCount,{fontSize:14,rating:l/10,numReviews:c})):null,o&&("string"==typeof o?a.createElement("div",{className:"maps-popups-base-BaseLocationPopup__subtitle--1rorp"},o):o),a.createElement("div",{style:{height:"16px"}}),s&&s())),a.createElement(T.a,{backgroundColor:"white",borderColor:"rgba(0, 0, 0, 0.2)"}))}}]),t}(a.PureComponent);C()(D,"defaultProps",{subtitle:null,children:null,numReviews:0,bubbleRating:0,thumbnail:null,trackingContext:null,hideBookmark:!1,onDetailUrlClick:null,titlePill:null});var j=D,A=function e(t,n,r,i){return a.createElement(o.AttractionSubtitle,{category:t,openHours:n,openNow:r,detailUrl:i})},B=function e(t){return a.createElement(j,{locationId:t.locationId,entityType:"attraction",title:t.title,detailUrl:t.detailUrl,thumbnail:t.thumbnail,rating:t.rating,numReviews:t.numReviews,subtitle:A(t.category,t.openHours,t.openNow,t.detailUrl)},function(){return a.createElement("div",{className:"maps-popups-base-AttractionPopup__footerContainer--12_-p"},a.createElement(r.ClickTracker,{module:"pin",action:"pin_cta_click",context:"attraction",forceAjax:!0},a.createElement(o.AttractionCta,{locationId:t.locationId,experiencesCtaEncodedLink:t.experiencesCtaEncodedLink,experiencesCtaNumOffers:t.experiencesCtaNumOffers,experiencesCtaStartingCost:t.experiencesCtaStartingCost})))})};B.defaultProps={category:null,experiencesCtaEncodedLink:void 0,experiencesCtaNumOffers:0,experiencesCtaStartingCost:void 0,openHours:void 0,openNow:void 0};var H=B,M=n("@ta/maps.hoteloffer"),W=n("@ta/maps.sponsored-pill"),z=n.n(W),V=n("@ta/maps.photo-carousel"),K=n.n(V),F=n("@ta/hotels.tracking"),G=n.n(F),Y={module:"pin",action:"pin_cta_click",context:"hotel"},$={module:"pin",action:"pin_cta_click",context:"hotel_deferred"},q=function e(){return a.createElement(L,{entityType:"hotel"})},Q=function e(t){var n=t.isSponsored&&a.createElement("div",{className:"".concat("maps-popups-base-HotelPopup__pillContainer--401In")},a.createElement(z.a,null)),o=t.locationId,r=a.useCallback(function(){return Object(I.featureIsEnabled)("hotels_media_mas_maps")?a.createElement(K.a,{locationId:o,renderNoPhotosDefault:q}):null},[o]);return a.createElement(G.a,{hotelListingRenderer:function e(o){return a.createElement(j,{locationId:t.locationId,entityType:"hotel",title:t.title,detailUrl:t.detailUrl,thumbnail:t.thumbnail,rating:t.rating,numReviews:t.numReviews,titlePill:n,onDetailUrlClick:function e(t){var n=Object(F.getSourceElemForMapClick)(t,x.MAP_LISTING_TYPES.POPUP);o(n)},renderThumbnail:r},function(){return t.offers?a.createElement(M.HotelOffer,{offers:t.offers,trackingProps:Y,preOfferClick:t.preOfferClick,priceSize:20}):a.createElement(M.DeferredHotelOffer,{locationId:t.locationId,trackingProps:$})})},customClickHandler:t.onDetailUrlClick,locationId:t.locationId,listingKey:t.listingKey,interactionsParamName:F.INTERACTIONS_PARAM_NAMES.HOTEL_MAPS_COMPONENT})};Q.defaultProps={offers:null,popIndexText:null,isSponsored:!1};var Z=Q,J=n("@babel/runtime/helpers/esm/objectSpread"),X=n.n(J),ee=n("react-redux"),te=n("@ta/common.radio"),ne=n.n(te),ae=n("@ta/styleguide.button"),oe=n.n(ae),re=n("@ta/common.i18n"),ie=function e(t,n){return[t,(n||[]).join(", ")].filter(function(e){return""!==e}).join(", ")},le=function e(t){return a.createElement(j,{locationId:t.locationId,entityType:"restaurant",title:t.title,detailUrl:t.detailUrl,thumbnail:t.thumbnail,rating:t.rating,numReviews:t.numReviews,subtitle:ie(t.priceString,t.cuisines)},function(){var e=t.pageDetailId===t.locationId,n=e?void 0:t.detailUrl,o=e?function(){return ne()("restaurant-detail-map").emit("close-trigger-clicked")}:function(e){return e.stopPropagation()};return a.createElement("div",{className:"maps-popups-base-RestaurantPopup__reserveContainer--2PZE0"},a.createElement(P.ResponsiveTargetLink,{target:"_blank",mobileTarget:"_self",href:n,onClick:o},a.createElement(r.ClickTracker,{module:"pin",action:"pin_cta_click",context:"restaurant"},a.createElement(oe.a,{size:"small"},t.reserveText||Object(re.localize)("attractions.cta_more_info")))))})};le.defaultProps={reserveText:null,priceString:"",cuisines:[]};var ce=Object(ee.connect)(function(e,t){var n=e.page.detailId;return X()({},t,{pageDetailId:n})})(le),se=n("@ta/hotels.vacationpackages"),pe={module:"pin",action:"pin_cta_click",context:"vp"},ue=function e(){return a.createElement(L,{entityType:"hotel"})},me=function e(t){var n=function e(){i()(pe)},o=t.locationId,r=a.useCallback(function(){return Object(I.featureIsEnabled)("hotels_media_mas_maps")?a.createElement(K.a,{locationId:o,renderNoPhotosDefault:ue}):null},[o]);return a.createElement(j,{locationId:t.locationId,entityType:"vp",title:t.title,detailUrl:t.detailUrl,thumbnail:t.thumbnail,rating:t.rating,numReviews:t.numReviews,renderThumbnail:r},function(){return t.vpoffers?a.createElement(se.VpOffer,{displayType:"map",className:"mapBottom",offer:t.vpoffers[0],onClick:n}):null})},de=n("@ta/vr.shared-providers"),he=function e(){i()({module:"VR_RESPONSIVE_SRP_MAP",action:"info_window_open"})},fe=function e(t){return a.createElement(j,{locationId:t.locationId,entityType:"rental",title:t.title,detailUrl:t.detailUrl,thumbnail:t.thumbnail,rating:t.rating,numReviews:t.numReviews,renderThumbnail:function e(){return function e(t){return a.createElement(de.PhotoDataProvider,{rentalId:t},function(e,n){return e||!n.length?null:a.createElement(E.PhotoCarousel,{height:"100%",width:"100%",photos:n.map(function(e,n){return function e(t,n){return{id:n,photoSizes:[{url:t.jumboUrl,width:t.largestWidth,height:t.largestHeight},{url:t.largeUrl,width:t.stdWidth,height:t.stdHeight},{url:t.thumbnailUrl,width:t.thumbWidth,height:t.thumbHeight}]}}(e,function e(t,n){return 1e3*t+n}(t,n))}),totalCount:n.length,showIndicatorDots:!0,wrapPhotos:!0,noCta:!0,hideArrows:!0,arrowSize:"small"})})}(t.locationId)},onDetailUrlClick:he})};n.d(t,"AttractionPopup",function(){return H}),n.d(t,"BaseLocationPopup",function(){return j}),n.d(t,"HotelPopup",function(){return Z}),n.d(t,"RestaurantPopup",function(){return ce}),n.d(t,"VpPopUp",function(){return me}),n.d(t,"RentalPopup",function(){return fe})}}});
//# sourceMappingURL=maps.popups-base.06b51a3b2f.js.map